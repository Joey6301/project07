"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="4e62eb23-e83c-5575-b877-9b162000f4b2")}catch(e){}}();
(globalThis.webpackChunk_figma_web_bundler=globalThis.webpackChunk_figma_web_bundler||[]).push([[8717,8325],{605247:(e,t,a)=>{a.d(t,{B8:()=>p,IW:()=>_,J:()=>E,Ou:()=>v,R6:()=>g,Uu:()=>s,X5:()=>u,XX:()=>i,YK:()=>o,ay:()=>b,eK:()=>l,fI:()=>n,jD:()=>f,me:()=>m,nM:()=>c,wD:()=>d,yU:()=>r});let r="step_pay--addAnnualPlan--3YUVe",n="step_pay--paymentForm--gqjt-",o="step_pay--totalLabelText--FsxE-",l="step_pay--smallGrayText--C8Sfn",i="step_pay--bigButton--Gtz0E",s="step_pay--flex--ZZh0K",c="step_pay--row--DcuMl",d="step_pay--rowFlex--Mf5y8 step_pay--row--DcuMl",m="step_pay--separator--gTqAJ",u="step_pay--total--FgOpU",_="step_pay--totalText--VTLEG step_pay--jumboText--JE1wb",p="step_pay--plusTaxText--gSICq",f="step_pay--numEditorsInput--mTc8p",g="step_pay--subtotal--188gf",E="step_pay--changeLink--dSfAg blue_link--blueLink--9rlnd",b="step_pay--bigTerms--nC3J9",v="step_pay--flowActionsSingle--X0Hy-"},722541:(e,t,a)=>{a.d(t,{JP:()=>s,O6:()=>i,R3:()=>r,Rg:()=>o,Xq:()=>l,b:()=>n,j:()=>d,zu:()=>c});let r="ready_for_dev_signals_upsell--tooltipContainer--MfMyF pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",n="ready_for_dev_signals_upsell--closeButton--IqINb",o="ready_for_dev_signals_upsell--tooltipHeader--vN9FE utilities--bodyMediumStrong--1R5cZ",l="ready_for_dev_signals_upsell--tooltipPageIdNodeHeader--9D-dA ready_for_dev_signals_upsell--tooltipHeader--vN9FE utilities--bodyMediumStrong--1R5cZ",i="ready_for_dev_signals_upsell--tooltipBody--LCLlM utilities--bodyMediumStrong--1R5cZ",s="ready_for_dev_signals_upsell--tooltipFooter--bN45f",c="ready_for_dev_signals_upsell--tooltipBodyText--fXjaC",d="ready_for_dev_signals_upsell--videoContainer--Hcl5T"},214758:(e,t,a)=>{a.d(t,{As:()=>p,Dq:()=>u,KE:()=>y,Mf:()=>k,Mp:()=>v,Nr:()=>P,Nz:()=>w,Pl:()=>g,Pz:()=>o,RE:()=>n,Sp:()=>r,VC:()=>I,VQ:()=>L,Vt:()=>b,YW:()=>T,_J:()=>h,aY:()=>i,dB:()=>R,ge:()=>C,hi:()=>x,iB:()=>_,jE:()=>O,jG:()=>N,l$:()=>l,mB:()=>A,n6:()=>s,oG:()=>d,q8:()=>F,sR:()=>E,sl:()=>f,vu:()=>c,wH:()=>m,yR:()=>S});let r="legacy_pages_panel--pageChangesCount--ZvU4X",n="legacy_pages_panel--pagesHeaderContainer--LWPh-",o="legacy_pages_panel--pagesHeaderText--vgHeJ",l="legacy_pages_panel--pagesList--20gAo",i="legacy_pages_panel--pendingPagesList--Kqq9Y legacy_pages_panel--pagesList--20gAo",s="legacy_pages_panel--pageIcon--2SeMV",c="legacy_pages_panel--active--4gxmS",d="legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh",m="legacy_pages_panel--selected--ZWcge",u="legacy_pages_panel--hoverByMouse--QLchE",_="legacy_pages_panel--hoverState--Jq0dh",p="legacy_pages_panel--pageRowButton--ZYdDc",f="legacy_pages_panel--pageRowActive--wbZe-",g="legacy_pages_panel--activePageBrand--X-F3Y",E="legacy_pages_panel--pageRowActiveUI2--Lwdqd",b="legacy_pages_panel--flipVertically--ZvNfN",v="legacy_pages_panel--pageRowSvgV2--QicIQ legacy_pages_panel--pageRowSvg--nbDOj",h="legacy_pages_panel--pageRowSvgV2Unselected--1IlVx legacy_pages_panel--pageRowSvgV2--QicIQ legacy_pages_panel--pageRowSvg--nbDOj",w="legacy_pages_panel--renameableNode--JPw8y",y="legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",T="legacy_pages_panel--disabledNodeText--2HBBi legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",I="legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",x="legacy_pages_panel--renameableNodeTextEndDisabled--fFOaW legacy_pages_panel--renameableNodeTextEnd--iOsDL legacy_pages_panel--renameableNodeText--eA3aT ellipsis--ellipsis--Tjyfa",N="legacy_pages_panel--scrollContainer--YR8Lw",C="legacy_pages_panel--leftPanelWidth--fUkeU",k="legacy_pages_panel--tab--inhND",S="legacy_pages_panel--tabActive--hmo0j legacy_pages_panel--tab--inhND",R="legacy_pages_panel--assetsTab--nMUmk",A="legacy_pages_panel--pageRowDividerContainer--eWfpW legacy_pages_panel--pageRowBase--2BLqh",O="legacy_pages_panel--pageRowDivider--0c9dh",P="legacy_pages_panel--offlineContainer--zrR3y",L="legacy_pages_panel--offlineIcon--sLbbs",F="legacy_pages_panel--pageRowRight--N3-uE"},50742:(e,t,a)=>{a.d(t,{IK:()=>l,Vi:()=>s,cJ:()=>r,iZ:()=>i,pf:()=>o,yF:()=>n});let r="pages_list--pagesRowWrapper--Plig-",n="pages_list--divider--idUOu",o="pages_list--withInsertBefore---ui-o",l="pages_list--withInsertAfter--7QoMA",i="pages_list--withInsertBeforeTop--IQT63",s="pages_list--withInsertAfterBottom--yG3xD"},377549:(e,t,a)=>{a.d(t,{D6:()=>n,kF:()=>r});let r="asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo",n="asset_description_lexical_editor--contentEditableCollapsed--H601A asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo"},406509:(e,t,a)=>{a.d(t,{w:()=>n});var r=a(720300);let n=a(642547).A.createLazyComponent(()=>Promise.all([a.e(8254),a.e(7120),a.e(5883),a.e(2677)]).then(a.bind(a,603119)).then(e=>e.EduReviewPage),{loading:()=>null,error:r.H4.NONE,componentName:"EduReviewPage"})},302730:(e,t,a)=>{a.d(t,{N:()=>o});var r=a(720300),n=a(345964);let o=a(642547).A.createLazyComponent(()=>Promise.all([a.e(8254),a.e(7120),a.e(5883),a.e(2677)]).then(a.bind(a,877609)).then(e=>e.OrgSelfServeFigJamPage),{loading:n.Z_,error:r.H4.NONE,componentName:"OrgSelfServeFigJamPage"})},621603:(e,t,a)=>{a.d(t,{G:()=>o});var r=a(720300),n=a(345964);let o=a(642547).A.createLazyComponent(()=>Promise.all([a.e(8254),a.e(7120),a.e(5883),a.e(2677)]).then(a.bind(a,258930)).then(e=>e.OrgSelfServeBillingRemodelPage),{loading:n.Z_,error:r.H4.NONE,componentName:"OrgSelfServeBillingRemodelPage"})},627416:(e,t,a)=>{a.d(t,{z:()=>n});var r=a(720300);let n=a(642547).A.createLazyComponent(()=>Promise.all([a.e(8254),a.e(7120),a.e(5883),a.e(2677)]).then(a.bind(a,520722)).then(e=>e.PromoReviewPage),{loading:()=>null,error:r.H4.NONE,componentName:"PromoReviewPage"})},943845:(e,t,a)=>{a.d(t,{q:()=>n});var r=a(720300);let n=a(642547).A.createLazyComponent(()=>Promise.all([a.e(8254),a.e(7120),a.e(5883),a.e(2677)]).then(a.bind(a,953233)).then(e=>e.TeamUpgradePageBillingRemodel),{loading:()=>null,error:r.H4.NONE,componentName:"TeamUpgradePageBillingRemodel"})},355689:(e,t,a)=>{a.d(t,{h:()=>n});var r=a(720300);let n=a(642547).A.createLazyComponent(()=>Promise.all([a.e(8254),a.e(7120),a.e(5883),a.e(2677)]).then(a.bind(a,573861)).then(e=>e.TeamUpgradePageV2),{loading:()=>null,error:r.H4.NONE,componentName:"TeamUpgradePageV2"})},398661:(e,t,a)=>{a.d(t,{m:()=>T});var r=a(848318),n=a(301168),o=a(938982),l=a(48908),i=a(297638),s=a(695920),c=a(288661),d=a(767339);if(443==a.j)var m=a(746571);var u=a(453370),_=a(209595),p=a(318147),f=a(407638),g=a(138528),E=a(83432),b=a(850768),v=a(773293),h=a(34134),w=a(118774),y=a(710166);function T(){let e=(0,n.wA)(),t=(0,g.tJ)("SeatRequestsPageView",{useSidebarOrOpenFile:!0}),a=(0,g.Xd)("SeatRequestsPageView",{useSidebarOrOpenFile:!0}),T=(0,s.RR)(),I=(0,_._6)(),x=(0,n.d4)(e=>(0,f.getPermissionsStateMemoized)(e)),N=(0,n.d4)(e=>e.teams),C=(0,g.Xd)("SeatRequestsPageView",{useSidebarOrOpenFile:!0}),k=(0,g.j_)(C),S="loaded"===k.status&&(0,d.pO)({isAdminOrg:k.data,permissions:x,teams:N,view:I}),R=(0,E.vS)(I),A="loaded"===t.status&&"loaded"===a.status&&a.data.permission!==p.Xn.ADMIN;return(r.useEffect(()=>{S?e(u.$T({view:"resourceUnavailable",resourceType:R})):A&&e(u.$T(h.o0))},[e,R,A,S]),"loaded"!==t.status||"loaded"!==a.status||A||S)?r.createElement("div",{className:i.s.wFull.pl32.py24.bb1.colorBorder.bSolid.$},r.createElement(l.Wi,{className:i.s.w200.h32.$,dataTestId:"srpv-loading"})):(T||(t.data.key.type===p.OL.ORG?e(u.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:b.J7.DASHBOARD})):e(u.$T({view:"teamAdminConsole",teamId:t.data.key.parentId??"",teamAdminConsoleViewTab:v.Iv.DASHBOARD}))),r.createElement(m.r,{containerClass:y.nF,scrollableContainerClass:y.lF,content:r.createElement(w.l,{plan:t.data,isOrgAdmin:t.data.type===p.OL.ORG}),toolbar:r.createElement(c.g,null),errorBoundaryConfig:{figmaTeam:o.e.MONETIZATION_EXPANSION,boundaryKeySuffix:"SeatRequestsPageView"}}))}},825368:(e,t,a)=>{a.r(t),a.d(t,{ConfirmDowngradeEditorsModal:()=>s});var r=a(848318),n=a(461979),o=a(967688),l=a(863270),i=a(890257);function s(e){let{team:t,editors:a}=e,{id:s}=t,c=a.length,d=a.filter(e=>e.id).map(e=>e.id).join(),m=(0,o.t)("team_view.downgrade_editor_modal.downgrade_user_team_permissions",{username:(0,n.EJ)(e.editors[0].name||e.editors[0].email,20)}),u=(0,o.t)("team_view.downgrade_editor_modal.downgrade_multiple_users_team_permissions",{numSelectedUsers:c});return r.createElement(l.fu,{name:"Team Admin Downgrade Editors Modal",properties:{editorCount:c,editorIds:d,teamId:s}},r.createElement(i.Eo,{title:c>1?u:m,confirmText:(0,o.t)("team_view.downgrade_editor_modal.downgrade"),onConfirm:e.onConfirm},r.createElement("p",null,c>1&&(0,o.t)("team_view.downgrade_editor_modal.are_you_sure_you_want_to_downgrade",{numSelectedUsers:c}),(0,o.tx)("team_view.downgrade_editor_modal.downgrading_their_team_permission_will_change_all_permissions_to_can_view"))))}},332727:(e,t,a)=>{a.r(t),a.d(t,{ConfirmTeamUserPaidStatusUpdateModal:()=>d});var r=a(848318),n=a(264478),o=a(967688),l=a(863270),i=a(318147),s=a(173847),c=a(890257);function d(e){let{team:t,members:a,paidStatus:d}=e,{id:m}=t;if(![i.Zf.FULL,i.Zf.RESTRICTED].includes(d))return r.createElement(r.Fragment,null);let u=a.length,_=a.filter(e=>e.id).map(e=>e.id).join(),p=d===i.Zf.RESTRICTED,f=e.paidStatusType===s.j4.WHITEBOARD,g=f?a.every(e=>!e.whiteboard_editor_upgrade):a.every(e=>!e.design_editor_upgrade),E=d===i.Zf.RESTRICTED&&g,b=a[0].name||a[0].email;return r.createElement(l.fu,{name:"Team Admin Restrict TeamUser Modal",properties:{memberCount:u,memberIds:_,teamId:m}},r.createElement(c.Eo,{title:p?E?f?(0,o.tx)("team_view.downgrade_figjam_access_from_viewer_to_viewer_restricted"):(0,o.tx)("team_view.downgrade_design_access_from_viewer_to_viewer_restricted"):f?(0,o.tx)("team_view.remove_figjam_edit_status.seat_rename"):(0,o.tx)("team_view.remove_design_edit_status.seat_rename"):f?(0,o.tx)("team_view.grant_figjam_edit_status.seat_rename"):(0,o.tx)("team_view.grant_design_edit_status.seat_rename"),confirmText:p?E?(0,o.t)("team_view.change"):(0,o.t)("team_view.remove.seat_rename"):(0,o.t)("team_view.grant.seat_rename"),onConfirm:e.onConfirm},d===i.Zf.RESTRICTED&&(E?f?(0,o.tx)("team_view.downgrade_figjam_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:b,numMembers:u}):(0,o.tx)("team_view.downgrade_design_from_viewer_to_viewer_restricted_description.seat_rename",{memberNameOrEmail:b,numMembers:u}):f?(0,o.tx)("team_view.downgrade_figjam_description.seat_rename",{memberNameOrEmail:b,numMembers:u}):(0,o.tx)("team_view.downgrade_design_description.seat_rename",{memberNameOrEmail:b,numMembers:u})),d===i.Zf.FULL&&r.createElement(r.Fragment,null,(()=>{if(!p)return f?(0,o.tx)("team_view.change_to_editor_figjam_description.seat_rename",{numMembers:u,memberNameOrEmail:b}):(0,o.tx)("team_view.change_to_editor_design_description.seat_rename",{numMembers:u,memberNameOrEmail:b})})(),r.createElement("p",{className:"confirm_team_user_paid_status_update_modal--spacing--D5LgW"},r.createElement(n.N_,{target:"_blank",className:"confirm_team_user_paid_status_update_modal--link--cb35L",href:"https://help.figma.com/hc/articles/360039960434#Account_Types",trusted:!0},(0,o.tx)("team_view.learn_more.seat_rename"))))))}},652921:(e,t,a)=>{a.r(t),a.d(t,{MemberEditAccessModal:()=>P});var r=a(848318),n=a(301168),o=a(430385),l=a(580494),i=a(179507),s=a(601295),c=a(870567),d=a(410725),m=a(755534),u=a(967688),_=a(31898),p=a(863270),f=a(859172),g=a(578590),E=a(472520),b=a(613733),v=a(481534),h=a(265217),w=a(55116),y=a(280255),T=a(94831),I=a(890257);let x="edit_access_modal--column--MYvAz",N="edit_access_modal--resource--qhm-x",C="edit_access_modal--resourceTitle--79DdK edit_access_modal--resource--qhm-x",k="edit_access_modal--greyResource--pdVfB edit_access_modal--resource--qhm-x",S=(e,t)=>{if("file"===e.resource_type){let a=t[e.resource_id_or_key];if(a)return{name:a.name,id_or_key:a.key}}else{let a=t[e.resource_id_or_key];if(a)return{name:a.name,id_or_key:a.id}}},R=(0,i.xx)((e,t)=>{let a={privateResourceCount:0,editableResources:[]};return e&&0!==e.length&&(e.forEach(e=>{let r=S(e,t);r?a.editableResources.push(r):a.privateResourceCount++}),(0,o.v7)(a.editableResources,e=>e.name)),a}),A=e=>{let t=e.team_user,a=e.edit_roles,r=a?.whiteboard_files||[],n=a?.design_files||[],o=a?.slides_files||[],l=!(0,y.on)(t,g.vu);return{whiteboardRoles:(0,y.on)(t,g.tL)?r:[],designRoles:l?[]:n,slidesRoles:(0,y.on)(t,g.B7)?o:[]}},O=(e,t,a)=>{if(a)return{privateResourceCount:e.file_edit_roles_count,editableResources:[]};let{whiteboardRoles:r,designRoles:n,slidesRoles:o}=A(e);return R(r.concat(n).concat(o),t)};function P(e){let t=(0,n.wA)(),a=function(e,t){let a=(0,n.d4)(a=>a.teamMembersByTeamId[e][t]);if(!a)return s.Qw.loaded(a);if(!a.edit_roles)return s.Qw.loaded({...a,file_edit_roles_count:0});let{whiteboard_files:r,design_files:o,slides_files:l}=a.edit_roles,i={...a,file_edit_roles_count:r.length+o.length+(l||[]).length};return s.Qw.loaded(i)}(e.teamId,e.memberEmail),o=function(e,t){let a=(0,d.Rs)(w.DLq,{teamId:e,userId:t},{enabled:(0,l.k)().edit_access_modal_lg_cutover});return r.useMemo(()=>a.transform(e=>{let t=e.teamUserDescendedRoles;if(!t||t.status!==c.tT.Loaded||!t.data)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let a=t.data[0];if(!a.teamUser)return{team_user:void 0,team_role:void 0,edit_roles:{whiteboard_files:[],design_files:[],folders:[]},file_edit_roles_count:0,name:"",id:""};let r=a.teamUser,n=a.teamUser.teamRole;return{...h.W.toSinatra(r.user),team_user:{id:r.id,user_id:r.user.id,team_id:a.teamId,active_seat_type:(0,f.TA)(r.activeSeatTypeUpgrade?.billableProduct)},team_role:n?(0,v.Pe)(n,r.user):void 0,file_edit_roles_count:a.fileEditRolesCount,edit_roles:{whiteboard_files:[],design_files:[],folders:a.projectEditRoles?.map(e=>v.Pe(e,r.user))||[]}}}),[a])}(e.teamId,e.userId),i=(0,l.k)().edit_access_modal_lg_cutover,N=(0,b.MF)({oldValue:a,newValue:o,label:E.A.TeamMembersTable.editAccessModal,enableFullRead:i,contextArgs:{teamId:e.teamId,memberEmail:e.memberEmail,memberResultRedux:JSON.stringify(a.data?.edit_roles)},comparator:(0,b.BG)({strictLists:!1,strictRecords:!1,ignore:e=>!!(1===e.length&&!["team_user","team_role","file_edit_roles_count","name","id"].includes(e[0])||e.includes("created_at")||e.includes("updated_at"))}),maxReports:5}),k=(0,n.d4)(e=>e.folders),S=r.useMemo(()=>N.transform(e=>R(e?.edit_roles?.folders,k)),[k,N]),A=(0,n.d4)(e=>e.folders),P=r.useMemo(()=>N.transform(e=>e?O(e,A,i):{privateResourceCount:0,editableResources:[]}),[A,N,i]),L=(0,n.d4)(t=>t.teams[e.teamId]),D=s.Qw.all([N,S,P]);if("loaded"!==D.status)return null;let[M,B,U]=D.data;if(!M)return console.error("Member not found"),null;let $=!!M.team_role&&M.team_role?.level>=T.e6.EDITOR,j=B.editableResources.length+B.privateResourceCount,W=U.editableResources.length+U.privateResourceCount,G=(0,y.on)(M.team_user,g.vu),V=(0,y.on)(M.team_user,g.tL),H=(0,y.on)(M.team_user,g.B7);return r.createElement(p.fu,{name:"Member Edit Access Modal",properties:{teamId:L.id,userId:M.id,folderCount:j,fileCount:W}},r.createElement(I.XV,{title:(0,u.t)("team_view.member_edit_access_modal.title",{memberName:M.name??""}),maxWidth:432,minWidth:432,containerClassName:"edit_access_modal--modalStyle--20dSp",onClose:()=>{t(_.Ce())}},r.createElement("div",{className:"edit_access_modal--headerContainer--ZoKpu edit_access_modal--resourceContainer--vZA5E"},r.createElement("div",{className:x},r.createElement("div",{className:C},i?(0,u.tx)("team_view.member_edit_access_modal.projects_title_v2"):(0,u.tx)("team_view.member_edit_access_modal.projects_title"))),r.createElement("div",{className:x},r.createElement("div",{className:C},i?(0,u.tx)("team_view.member_edit_access_modal.files_title_v2"):(0,u.tx)("team_view.member_edit_access_modal.files_title")))),r.createElement(m.P,{className:"edit_access_modal--scrollContainer--WzCWr",hideScrollbar:!0},r.createElement("div",{className:"edit_access_modal--resourceContainer--vZA5E"},r.createElement("div",{className:x},r.createElement(F,{hasTeamEditPermissions:$,isWhiteboardEditor:V,isDesignEditor:G,isSlidesEditor:H,resources:B,resourceType:"project"})),r.createElement("div",{className:x},r.createElement(F,{hasTeamEditPermissions:$,isWhiteboardEditor:V,isDesignEditor:G,isSlidesEditor:H,resources:U,resourceType:"file",migrateModalToLivegraph:i}))))))}let L=e=>"file"===e?(0,u.tx)("team_view.member_edit_access_modal.none_files"):(0,u.tx)("team_view.member_edit_access_modal.none_projects");function F(e){let t;let{hasTeamEditPermissions:a,isDesignEditor:n,isWhiteboardEditor:o,isSlidesEditor:l,resourceType:i,migrateModalToLivegraph:s}=e;if(a)return"project"===i?r.createElement("div",{className:k},(0,u.tx)("team_view.member_edit_access_modal.all_projects")):s||n&&o&&l?r.createElement("div",{className:k},(0,u.tx)("team_view.member_edit_access_modal.all_files")):n||o||l?r.createElement(r.Fragment,null,n&&r.createElement("div",{className:k},(0,u.tx)("team_view.member_edit_access_modal.all_design_files")),o&&r.createElement("div",{className:k},(0,u.tx)("team_view.member_edit_access_modal.all_figjam_files")),l&&r.createElement("div",{className:k},(0,u.tx)("team_view.member_edit_access_modal.all_slides_files"))):r.createElement("div",{className:k},L(i));let c=e.resources;if(0===c.privateResourceCount&&0===c.editableResources.length)return r.createElement("div",{className:k},L(i));if(c.privateResourceCount>0){let e=r.createElement("span",null);0===c.editableResources.length&&"project"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects",{numProjects:c.privateResourceCount}):0===c.editableResources.length&&"file"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files",{numFiles:c.privateResourceCount}):c.editableResources.length>0&&"project"===i?e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_projects_list_end",{numProjects:c.privateResourceCount}):c.editableResources.length>0&&"file"===i&&(e=(0,u.tx)("team_view.member_edit_access_modal.invite_only_files_list_end",{numFiles:c.privateResourceCount})),t=r.createElement("div",{className:N},e)}return r.createElement(r.Fragment,null,c.editableResources.map(e=>r.createElement("div",{key:e.id_or_key,className:N},e.name)),t)}},361397:(e,t,a)=>{a.d(t,{JC:()=>m,Oe:()=>c,T3:()=>_,VY:()=>l,ay:()=>u,dZ:()=>d,vW:()=>i,wu:()=>o,y$:()=>s});var r=a(720300),n=a(240692);a(398661);let o=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,763156)).then(e=>e.BillingGroupDashboardSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"BillingGroupDashboardSettingsPageView"}),l=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,52146)).then(e=>e.LicenseGroupAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"LicenseGroupAdminSettingsPageView"}),i=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,112534)).then(e=>e.OrgAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"OrgAdminSettingsPageView"}),s=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,168816)).then(e=>e.WorkspaceAdminSettingsPageView),{loading:()=>null,error:r.H4.NONE,componentName:"WorkspaceAdminSettingsPageView"}),c=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,889462)).then(e=>e.OrgDomainManagementPageView),{loading:()=>null,error:r.H4.NONE,componentName:"OrgDomainManagementPageView"}),d=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,517278)).then(e=>e.AbandonedDraftFilesPageView),{loading:()=>null,error:r.H4.NONE,componentName:"AbandonedDraftFilesPageView"}),m=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,439959)).then(e=>e.TeamAdminConsoleView),{loading:()=>null,error:r.H4.NONE,componentName:"TeamAdminConsoleView"}),u=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,791653)).then(e=>e.AdminSidebar),{loading:()=>null,error:r.H4.NONE,componentName:"AdminSidebar"}),_=n.A.createLazyComponent(()=>Promise.all([a.e(8923),a.e(7333),a.e(3455),a.e(9376),a.e(6148),a.e(3178),a.e(373),a.e(3720),a.e(6048)]).then(a.bind(a,687950)).then(e=>e.OrgIdpManagementPageView),{loading:()=>null,error:r.H4.NONE,componentName:"OrgIdpManagementPageView"})},988730:(e,t,a)=>{a.r(t),a.d(t,{BlockConnectedFileMoveModal:()=>p});var r=a(848318),n=a(582039),o=a(469508),l=a(309488),i=a(93275),s=a(410725),c=a(297638),d=a(967688),m=a(863270),u=a(55116),_=a(615608);function p(e){let t=n.hS(e),a=(0,s.Rs)(u.s0Z,{fileKey:e.fileKey}),p=a?.data?.file?.project?.name,f=a?.data?.file?.plan?.name;return r.createElement(m.fu,{name:"Block Connected File Move Modal"},r.createElement(l.bL,{manager:t,width:"md"},r.createElement(i.vo,null,r.createElement(i.Y9,null,r.createElement(i.hE,null,p?(0,d.tx)("resource_connection.block_file_move.unable_to_move_out_of_project_name",{projectName:p}):(0,d.tx)("resource_connection.block_file_move.unable_to_move_out_of_this_project"))),r.createElement(i.nB,{className:_.Yw},r.createElement("div",{className:c.s.mt4.mb4.$},(0,d.tx)("resource_connection.block_file_move.learn_more_about_what_you_can_do_in_connected_projects",{learnMore:r.createElement(o.N,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects"},(0,d.tx)("resource_connection.request_modal.learn_more")),hostPlanName:f??""}))))))}},211696:(e,t,a)=>{a.r(t),a.d(t,{FileMoveDropdown:()=>tr,FileMoveHiddenDiv:()=>tn,FileMoveModal:()=>e6,FileMoveModalComponent:()=>e5,FileMoveSearch:()=>e7,TeamSection:()=>e9,TeamsDisplay:()=>tt,getCurrentFolderId:()=>e3,getTargetAttribute:()=>e4,isSubscribedLG:()=>e2});var r=a(848318),n=a(301168),o=a(660376),l=a(580494),i=a(805353),s=a.n(i),c=a(989232),d=a(410441),m=a(857607),u=a(410725),_=a(748008),p=a(329228),f=a(879263),g=a(156974),E=a(264478),b=a(467905),v=a(439382),h=a(345964),w=a(755534),y=a(720522),T=a(297638),I=a(967688),x=a(220576),N=a(5990),C=a(468709),k=a(190731),S=a(647345);function R(e){let t=(0,n.wA)(),a=r.useCallback(a=>{a.stopPropagation(),e.team.canEdit&&((0,c.trackEvent)("New Folder",{trackingContext:e.trackingContextName}),t((0,N.SX)({where:k.Ah.FolderListView,team:{...(0,C.Ws)(e.team),canEdit:e.team.canEdit}})))},[t,e.team,e.trackingContextName]);return e.team.canEdit?r.createElement(S.f,{data_tooltip:(0,I.t)("sidebar.new_project"),data_onboarding_key:"new-project-icon",innerText:"Creates new project",onClick:a,isBackgroundTransparent:e.isBackgroundTransparent}):null}var A=a(453370),O=a(857977),P=a(198479),L=a(31898),F=a(863270),D=a(859172),M=a(318147),B=a(806349),U=a(376132),$=a(94831),j=a(249726),W=a(863875),G=a(55116),V=a(656320),H=a(361053),z=a(230432),K=a(262234),Y=a(129723),q=a(17753),J=a(991675),X=a(795234);let Q=new class{constructor(){this.TeamRestrictionsListsSchemaValidator=(0,X.vh)()}getTeamRestrictionsLists(e){return this.TeamRestrictionsListsSchemaValidator.validate(async({xr:t})=>await t.get("/api/team_restrictions_lists",{team_ids:e.teamIds}))}};var Z=a(750892),ee=a(890257),et=a(810503),ea=a(304756),er=a(710044);function en(e){return r.createElement("div",{className:"page_move--fileCreateNameContainer--JBcti"},r.createElement("div",{className:"page_move--fileCreateNameSvgContainer--nm5eH"},r.createElement(er.MW,{type:er.y1.DESIGN})),r.createElement(E.ks,{value:e.newFileName,onChange:e.onChange,maxLength:255,autoFocus:!0,placeholder:(0,I.t)("page_move.add_new_file_name"),className:"page_move--fileCreateNameInput--0yBR8"}))}var eo=a(894578),el=a(448040),ei=a(558214),es=a(559389),ec=a(97481),ed=a(151223),em=a(253332),eu=a(193743),e_=a(842744),ep=a(88009);let ef="32px",eg=(0,d.hG)(ef),eE=e=>e?.id||O.iK,eb=new eu.KH({keys:["folder.path","team.name"],threshold:.3,tokenize:!0}),ev=(e,t,a,r,n)=>!(e.orgId!==n&&t?.orgId!==n||!e.canEdit||t&&(0,em.S$)(e,t,a)&&!(0,j.VA)(e))&&(!r||!!(0,em.XX)(t)),eh=(e,t,a)=>!a||!!(0,em.XX)(e),ew=(e,t=!1)=>{let a=[];Object.keys(e.folders).forEach(r=>{let n=e.folders[r],o=n.teamId?e.teams[n.teamId]:null;ev(n,o,e.user,t,e.orgId)&&((0,j.VA)(n)&&(n={...n,path:(0,ep.Tb)()}),a.push(n))}),eb.set(a.map(t=>{let a=t.teamId&&e.teams[t.teamId]&&{name:e.teams[t.teamId].name},r={path:t.path,teamId:t.teamId,id:t.id,subscription:!!t.subscription,...(0,ec.VI)(t)};return a?{folder:r,team:a}:{folder:r}}))},ey=({folders:e,roles:t,user:a,orgUsers:r,teams:n,orgId:o,implicitTeamRolesTeamIds:i},s,c,d)=>{let m=Object.create(null),u=0,_=0,p=(0,j.gj)(a&&a.id,e,t.byFolderId,a&&o?r[o][a.id]:null);for(let e in m[O.HK]=[],m[O.iK]=[],t.byTeamId)eh(n[e],a,s)&&(_++,m[e]=[]);i&&i.forEach(e=>{eh(n[e],a,s)&&(_++,m[e]=[])}),Object.keys(e).forEach(t=>{let r={...e[t]},i=ev(r,r.teamId?n[r.teamId]:null,a,s,o);if((0,l.k)().file_move_show_all_resources){if(i&&(!c||r.subscription||(0,j.VA)(r))){let e=r.teamId?n[r.teamId]:null;m[p&&r.id===p.id?O.HK:eE(e)].push(r),u++}}else if(i&&(r.subscription||(0,j.VA)(r))){let e=r.teamId?n[r.teamId]:null;m[p&&r.id===p.id?O.HK:eE(e)].push(r),u++}});let f=u+_;return d(O.CU({indexCount:f})),d(O.xH()),m},eT=(e,t,a,r,n)=>{let o=Object.create(null),l=Object.create(null),i=[],s=0,c=0;if(n){let t=e.indexOf(n);t>-1&&(e.splice(t,1),e.splice(1,0,n))}return e.forEach(e=>{if(l[e]=s,c+=8,e!==O.iK&&e!==O.HK){let t={type:z.b.NEW_FOLDER_TEAM,id:e,positionTop:c};i.push(t),c+=eg,s+=1}let a=t[e];s+=a.length,a.sort((e,t)=>""===e.path?-1:""===t.path?1:e.path.toLowerCase()<t.path.toLowerCase()?-1:1);let d=Array.from(a);r&&n&&e===n&&d.forEach((e,t)=>{e.id===r&&(a.splice(t,1),a.unshift(e))}),a.forEach(e=>{let t={type:z.b.FOLDER_ROW,id:e.id,positionTop:c};c+=eg,i.push(t)}),o[e]=a,c+=9}),[o,l,i]},eI=(e,t,a)=>{let r=Object.create(null),n=Object.create(null),o=0,l=0,i=t.orgId&&t.user?t.orgUsers[t.orgId][t.user.id]:null,s=(0,j.gj)(t.user?t.user.id:null,t.folders,t.roles.byFolderId,i);for(let a of e){let e=a.item.folder,i=s&&e.id===s.id?0:a.score,c=e.teamId?t.teams[e.teamId]:null,d=s&&e.id===s.id?O.HK:eE(c);!(d in r)&&(r[d]=[],d!==O.iK&&d!==O.HK&&l++),r[d].push(e),null==n[d]?n[d]=i:n[d]=Math.min(n[d],i),o++}let c=o+l;return a(O.CU({indexCount:c})),[n,r]},ex=e=>(t,a)=>{if(t===O.iK)return 1;let r=e[t],n=e[a];return r?n&&r.name.toLowerCase()<n.name.toLowerCase()?-1:1:-1},eN=e=>(t,a)=>e[t]-e[a],eC=async(e,t,a,r,n=!1,l=!1,i,s,c,d)=>{var m,u;let _=e.getState(),p=null,f=null;t.type===z.A.FILE?(p=t.file.parent_org_id||null,f=t.file.team_id):t.type===z.A.REPO?(p=t.repo.parent_org_id||null,f=t.repo.team_id):t.type===z.A.FILE_IMPORT&&(p=t.orgId);let g=[];if(a){let e=eI(await eb.search(a),r,i);u=e[0],(g=Object.keys(m=e[1])).length&&g.sort(eN(u))}else m=ey(r,n,!!d,e.dispatch),r.user?(g.push(O.HK),g=g.concat((0,H.n$)(Object.values(r.teams),r.fileBrowserPreferences?.orderedTeamIds||[])),m[O.iK].length>0&&g.push(O.iK)):(g=Object.keys(m)).sort(ex(r.teams));let E=(()=>{switch(t.type){case z.A.FILE:return[t.file.editor_type];case z.A.REPO:return[M._Y.DESIGN];case z.A.FILE_IMPORT:return t.files.map(e=>(0,e_.NU)(e));default:(0,o.xb)(t)}})(),b=new Set(Object.values(m).flat().filter(e=>E.every(t=>!!t&&(0,ec.d6)(e,t))).map(e=>e.id)),v=g.filter(e=>{if(e===O.iK)return null===m||m[e].length>0;let t=r.teams;if(e!==O.HK){let a=t[e]?.orgId||null;if(p||a){if(a!==p)return!1}else if(f&&e===O.iK)return!1}return!t[e]?.deletedAt&&!!m[e]?.some(e=>b.has(e.id))}),[h,w,y]=eT(v,m,l,s,c);e.dispatch(O.OT({rows:y})),e.dispatch(O.t3({indexOffsets:w})),e.dispatch(O.Pb({foldersByTeamId:h})),e.dispatch(O.Mi({teamIds:v})),a||e.dispatch(O.w3({userTeamCount:v.length})),_.fileMove.isSearchResult!==l&&e.dispatch(O.EN({isSearchResult:l}));let T=O.HK in w&&y[0].type===z.b.FOLDER_ROW;a&&T?e.dispatch(O.Dp({indexAt:0})):a&&!T&&e.dispatch(O.Dp({indexAt:1}))},ek=(e,t,a,r=!1,n,o,l)=>{eC(e,t,"",a,r,!1,e.dispatch,o,l,n)},eS=(0,es.s)((e,t,a,r,n=!1)=>{eC(e,t,a,r,n,!!a,e.dispatch)},200),eR=(0,ed.nF)((e,t)=>{ew(t.userResources,t.modalData.isPublishing),ek(e,t.modalData,t.userResources,t.modalData.isPublishing,!1,t.currentFolderId,t.currentFolderTeamId)}),eA=(0,ed.nF)((e,t)=>{eS(e,t.modalData,t.query,t.userResources),e.dispatch(O.hq(t))});var eO=a(29188),eP=a(227276),eL=a(314979),eF=a(422444),eD=a(740495),eM=a(705693),eB=a(125952),eU=a(858541);let e$="file_move--main--fz-As",ej="file_move--iconContainer--2ExyP",eW="file_move--folderRowWrapper--R5vx1",eG="file_move--folderRow--ZBYjx",eV="file_move--horizontalDivider--g43mL";var eH=a(367542);function ez(e){let t=(0,eU.S)(),a=(0,n.d4)(e=>e.user),[o,l]=(0,r.useState)(""),i=e.dispatch,[s,d]=(0,r.useState)(!0),m=(0,eP.I7)("starter_team_loophole_experiment_m0"),u=(0,eP.I7)("starter_team_loophole_experiment_m1");return r.createElement("form",{onSubmit:t=>{t.preventDefault(),(0,c.trackEvent)("Create Team Inline",{trackingContext:e.trackingContextName}),o?(i((0,eM.KQ)({teamName:o,orgAccess:M.bU.PUBLIC,dontRedirect:!0})),d(!0),l("")):i(eL.s.error((0,I.t)("flash.team_name_cannot_be_empty")))}},r.createElement("div",{className:"file_move--teamCreateRow--GglhU file_move--folderRow--ZBYjx"},s?r.createElement("button",{type:"button",className:"file_move--rowButton--CSDNV",onClick:()=>{null!=a&&!e.orgId&&(0,eD.e5)({userId:a.id,teams:Object.values(e.teams),rolesByTeamId:e.rolesByTeamId,getM0Config:m.getConfig,getM1Config:u.getConfig})?(i(L.Ce()),i(eF.Dw({openInNewTab:!eO.eD}))):(d(!1),i(O.xH()))}},r.createElement(y.B,{className:"file_move--newProjectIconFileMove--V9037 sidebar--icon--wMzUY",svg:eH.A}),r.createElement("span",{className:t?"file_move--newFolderNameCustomSections--OqBS9 sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa":"file_move--newFolderName--mHXUY sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa"},(0,I.tx)("file_browser.inline_team_creation.button_text"))):r.createElement(r.Fragment,null,r.createElement("div",{className:ej},r.createElement(eB.pw,{size:16,shape:"SQUARE",color:"#E5E5E5"})),r.createElement("div",{className:"file_move--newTeamTitleText--cax1f file_move--teamTitleText--4XOM- ellipsis--ellipsis--Tjyfa"},r.createElement(E.ks,{value:o||"",onChange:e=>{l(e.target.value)},onBlur:()=>{d(!0)},className:"file_move--newTeamInput--0kCF4",maxLength:e.teamNameMaxWidth,placeholder:(0,I.t)("file_browser.inline_team_creation.placeholder"),autoFocus:!0})))))}var eK=a(7452),eY=a(578888),eq=a(992724),eJ=a(90724),eX=a(8108),eQ=a(391205),eZ=a(763016);let e0=(0,d.hG)(ef),e1="FileMoveModalContent";function e4(e){return"folder"===e.view||(0,V.K)(e)?"_self":"_blank"}function e2(e){return!!e.subscription||(0,j.VA)(e)}function e3(e){switch(e.type){case z.A.FILE:let t=e.file;return t?.folder_id||null;case z.A.REPO:let a=e.repo;return a?.folder_id||null;case z.A.FILE_IMPORT:return null;default:(0,o.xb)(e)}}function e5(e){let t=null;e.type===z.A.FILE?t=e.file.parent_org_id||null:e.type===z.A.REPO?t=e.repo.parent_org_id||null:e.type===z.A.FILE_IMPORT&&(t=e.orgId);let a=(0,n.d4)(e=>e.orgById),o=t?a[t]:null,l=(0,n.d4)(e=>e.fileMove),i=(0,n.d4)(e=>!!e.creatingNewFolder),s=(0,n.d4)(e=>e.dropdownShown),d=(0,n.d4)(e=>e.selectedView),m=e3(e),p=(0,x.R)(),g=(0,u.Rs)(G.Y9I,{projectId:m},{enabled:!!m}),E=(0,u.Rs)(G.G0Y,{orgId:t});"errors"===E.status&&(console.error("Loading AccessibleFolders from LiveGraph: "),console.error(E.errors));let b="loaded"===E.status&&("loaded"===g.status||e.type===z.A.FILE_IMPORT)?{fetched:E,transformed:function(e,t,a,r){let n={id:e.currentUser.id,student_validated_at:e.currentUser.studentValidatedAt&&e.currentUser.studentValidatedAt.toString()},o={},l={},i={},s={byFolderId:{},byTeamId:{}},c=(0,B.Um)(e.currentUser),d=[],m=e=>{l[e.id]={...e,canEdit:!0,canRename:!!e.path}};e.currentUser.allOrgUsers&&e.currentUser.allOrgUsers.forEach(e=>{i[e.orgId]={[e.userId]:{...e,type:U.Wd.ORG_USER,account_type:e.accountType,design_paid_status:e.accountType,id:e.id,org_id:e.orgId,user_id:e.userId,user:{id:e.user.id,email:e.user.email||void 0,img_url:e.user.imgUrl,name:e.user.name||void 0,handle:e.user.handle},permission:e.permission,drafts_folder_id:e.draftsFolderId,created_at:e.createdAt.toString(),updated_at:e.updatedAt?.toString()||"",disabled_at:e.disabledAt&&e.disabledAt.toString(),whiteboard_paid_status:e.whiteboardPaidStatus||M.El.STARTER,show_figjam_user_onboarding:null,has_shown_figjam_admin_launch_onboarding:null,has_shown_figjam_admin_onboarding:null,ecc_upgrading_locked:null,dev_mode_paid_status:e.devModePaidStatus||M.El.RESTRICTED,...r?{active_seat_type:(0,D.TA)(e.activeSeatTypeUpgrade?.billableProduct)}:void 0}},e.draftsProject&&(m(e.draftsProject),e.draftsProject.ownerRole&&(s.byFolderId[e.draftsProject.id]={[n.id]:(0,B.aU)(e.draftsProject.ownerRole,c,null,null)}))}),e.currentUser.teamEditRoles&&e.currentUser.teamEditRoles.forEach(e=>{if(!e.team)return;let{id:t,projects:a}=e.team;o[t]={...e.team,canView:e.level>=$.e6.VIEWER,canEdit:e.level>=$.e6.EDITOR,canAdmin:e.level>=$.e6.ADMIN,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},s.byTeamId[t]={[n.id]:(0,B.aU)(e,c,null,null)},a&&a.forEach(e=>m(e))});let u=e&&e.org?e.org:null;if(u){if(t){let e=(0,_.oA)(t.project);e&&e.canEdit&&m(e)}u.teams&&u.teams.forEach(e=>{let{id:t,orgEditProjects:a}=e;if(!o[t]){let a=e.canEdit,r=e.canAdmin,n=e.licenseGroup;o[t]={...e,canView:!1,canEdit:a??!1,canAdmin:r??!1,licenseGroup:n||null},d.push(t)}let r=(0,_.oA)(a);r&&r.forEach(e=>{m(e)})})}return e.currentUser.teamRoles?.forEach(e=>{if(!e.team)return;let{id:t}=e.team;o[t]||(o[t]={...e.team,canEdit:!1,canAdmin:!1,canView:!1,currentTeamUser:e.team.currentTeamUser,licenseGroup:null},s.byTeamId[t]={[n.id]:B.aU(e,c,null,null)})}),e.currentUser.projectEditRoles&&e.currentUser.projectEditRoles.forEach(e=>{e.project&&(m(e.project),s.byFolderId[e.project.id]={[n.id]:(0,B.aU)(e,c,null,null)})}),e.currentUser.draftsProject&&(m(e.currentUser.draftsProject),e.currentUser.draftsProject.ownerRole&&(s.byFolderId[e.currentUser.draftsProject.id]={[n.id]:(0,B.aU)(e.currentUser.draftsProject.ownerRole,c,null,null)})),{org:u,user:n,teams:o,folders:l,roles:s,orgUsers:i,orgId:a,fileBrowserPreferences:e.currentUser.fileBrowserPreferences,implicitTeamRolesTeamIds:d}}(E.data,e.type!==z.A.FILE_IMPORT?g.data:null,t,p)}:null,v=null===b?{loaded:!1}:{loaded:!0,userResources:b.transformed},h=null==m||null===b?null:b.transformed.folders[m],w=h?h.teamId:null,y=(0,n.wA)();r.useEffect(()=>{v.loaded&&y(eR({modalData:e,userResources:v.userResources,currentFolderId:m,currentFolderTeamId:w}))},[b&&b.fetched]);let T=[];if(v.loaded&&!t)for(let e in v.userResources.teams){let t=v.userResources.teams[e];"ok"!==t.subscription&&T.push(t.id)}let I=function(e){let[t,a]=r.useState((0,_.Xm)()),n=e.join(",");return r.useEffect(()=>{if(0===n.length){a((0,_.gB)({}));return}a((0,_.Xm)());let e=!1;return(async()=>{let t=await Q.getTeamRestrictionsLists({teamIds:n});e||a((0,_.gB)(t.data.meta))})(),()=>{e=!0}},[n]),t}(T);if("loaded"===I.status&&v.loaded)for(let e in v.userResources.teams){let t=v.userResources.teams[e];I.data[e]&&(t.restrictionsList=I.data[e])}return(0,f.oY)("loaded"===E.status,e=>{(0,c.trackEvent)("file_move_modal_latency",{latency_ms:e},{forwardToDatadog:!0})}),r.createElement(e6,{creatingNewFolder:i,currentOrg:o,dispatch:y,dropdownShown:s,fileMove:l,fileMoveData:e,isBillingRemodelEnabled:p,modalId:e._modalId,selectedView:d,userResources:v})}function e8(e){let t=null!=e.orgId,a=e.subscription===M.Qh.INCOMPLETE||e.subscription===M.Qh.OK;return{id:e.id,subscription:e.subscription,starter_team:!t&&!a,pro_team:a,org_team:t,student_team:!!e.studentTeamAt,deleted_at:e.deletedAt?.toString()||null}}class e6 extends r.PureComponent{constructor(){super(...arguments),this.state={newFileName:""},this.FILE_MOVE_DROPDOWN="file-move-dropdown",this.setScrollContainer=e=>{this.scrollContainer=e},this.scrollContainerRef=r.createRef(),this.isMovePageToNewFile=(0,l.k)().move_page_to_new_file&&this.props.fileMoveData.isMovePageToNewFile,this.onScroll=()=>{clearTimeout(this.previousTimeOutKey),this.props.fileMove.upDownKeyPressed&&this.props.dispatch(O.Ww({canFocus:!1})),this.previousTimeOutKey=setTimeout(()=>{this.props.fileMove.canMouseFocus||this.props.dispatch(O.Ww({canFocus:!0}))},200)},this.onkeydown=e=>{if(!this.props.userResources.loaded||this.props.creatingNewFolder||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused)return;let t=document.getElementById(e1);if((0,Z.NB)(t))return;let{userResources:a}=this.props.userResources;switch(e.keyCode){case m.Uz.ESCAPE:this.onClose();break;case m.Uz.UP_ARROW:this.props.dispatch(O.zv());break;case m.Uz.DOWN_ARROW:this.props.fileMove.indexCount&&this.props.dispatch(O.TL({upperBound:this.props.fileMove.indexCount}));break;case m.Uz.ENTER:{if(-1===this.props.fileMove.focusedIndex)return;let e=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];if(e.type===z.b.NEW_FOLDER_TEAM){let t=e.id,r=a.teams[t];this.props.dispatch((0,N.SX)({where:this.props.modalId.type,team:{...(0,C.Ws)(r),canEdit:!0}}))}else if(e.type===z.b.FOLDER_ROW){let t=a.folders[e.id];if(!t)break;this.move(t)}}}},this.onClose=()=>{this.props.fileMoveData.displayBanner?this.props.dispatch(L.Lo()):this.props.dispatch(L.Ce())},this.openOrgView=e=>{this.props.dispatch(A.$T({view:"org",orgId:e,orgViewTab:K.X.HOME}))},this.onOrgViewLinkClick=()=>{this.props.dispatch(L.Ce()),this.props.currentOrg&&this.openOrgView(this.props.currentOrg.id)},this.moveToSelectedFolder=()=>{let e=this.getFocusedFolder();if(!e)return;let t=()=>{this.move(e)};if(this.isMovePageToNewFile&&this.props.fileMoveData.type!==z.A.FILE_IMPORT){var a,r,n;this.onClose();let t=this.props.fileMoveData.type===z.A.FILE?this.props.fileMoveData.fileKey:this.props.fileMoveData.repoId;a=this.props.fileMoveData.page_id,r=e.id,n=this.state.newFileName,(0,et.ED)("startMovePagesJob","Send request to start move pages job."),ea.Ay.post(`/api/files/${t}/move_pages`,{folder_id:r,page_ids:a,file_name:n}).catch(e=>{(0,et.x1)("startMovePagesJob","Error with starting move pages job.",{err:e})}).then(()=>{(0,et.ED)("startMovePagesJob","Move pages job successfully started.")});return}let o=this.props.fileMoveData;if(o.type===z.A.FILE&&o.file.is_team_template&&(0,j.VA)(e)){this.props.dispatch(L.to({type:ei.X0,data:{title:(0,I.tx)("templates.confirmation.move_to_drafts.title",{count:1}),content:(0,I.tx)("templates.confirmation.move_to_drafts.description"),confirmText:(0,I.tx)("templates.confirmation.move_to_drafts.button_v2"),destructive:!1,onConfirm:t}}));return}t()},this.move=s()(e=>{let t=this.props.fileMoveData;switch(t.type){case z.A.FILE:this.moveFile(e,t.file);break;case z.A.REPO:this.moveRepo(e,t.repo);break;case z.A.FILE_IMPORT:for(let a of t.files)this.props.dispatch((0,W.z)({name:a.name,blob:new Blob([a.contents]),folderId:e.id}));break;default:(0,o.xb)(t)}},2e3,{leading:!0,trailing:!1}),this.closeModal=()=>{this.props.dispatch(L.ES(this.props.modalId))},this.moveFile=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let a=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(P.z({files:[t],folder:e,team:a,fromFileModal:!0,onFinishCallback:this.props.fileMoveData.afterFileMove?.callback}))}}else this.onClose()},this.moveRepo=(e,t)=>{if(e&&e.id!==t.folder_id){if(this.props.userResources.loaded){let a=this.props.userResources.userResources.teams[e.teamId||""]||null;this.closeModal(),this.props.dispatch(P.z({files:[],repos:[t],folder:e,team:a,fromFileModal:!0}))}}else this.onClose()},this.getModalTitle=()=>{let e=this.props.fileMoveData;if(this.isMovePageToNewFile)return(0,I.t)("file_browser.file_move.move_pages_to_new_file");if(e.type===z.A.FILE_IMPORT)return 1===e.files.length?(0,I.t)("file_browser.file_move.modal_header_import_file",{fileName:e.files[0].name}):(0,I.t)("file_browser.file_move.modal_header_import_files");{let t=e.type===z.A.FILE?e.file.name:e.repo.name;return(0,I.t)("file_browser.file_move.modal_header_move_file",{fileName:t})}},this.getFocusedFolder=()=>{if(!this.props.userResources.loaded)return null;let{userResources:e}=this.props.userResources,t=this.props.fileMove.folderRows[this.props.fileMove.focusedIndex];return t&&t.type===z.b.FOLDER_ROW?e.folders[t.id]:null},this.onFileMoveContextMenu=(e,t)=>{e.stopPropagation(),e.preventDefault(),this.props.fileMove.folderRenaming||this.props.dispatch(A.j7({type:this.FILE_MOVE_DROPDOWN,data:{folderId:t.id,position:{top:e.clientY,left:e.clientX,right:"auto",bottom:"auto"}}}))},this.handleInputChange=e=>{this.setState({newFileName:e.currentTarget.value})},this.renderViewerUpgradeAwarenessBanner=(e,t,a)=>{if(!this.props.userResources.loaded)return null;let{userResources:n}=this.props.userResources;if(!(0,j.VA)(t)||(0,j.VA)(a))return null;let o=this.props.fileMoveData.type===z.A.FILE?this.props.fileMoveData.fileKey:"";if(n.orgId){if(n.org?.k12GoogleOrg)return null;let t=n.orgUsers[n.orgId],a=t&&n.user?t[n.user.id]:null,l=!1;if(e===M._Y.DESIGN?l=a?.design_paid_status===M.El.STARTER:e===M._Y.WHITEBOARD&&(l=a?.whiteboard_paid_status===M.El.STARTER),l)return r.createElement(eo.n,{planName:this.props.currentOrg?.name,planType:Y.O.ORG,planId:n.orgId,fileKey:o,upgradeReason:el.X.MOVE_DRAFT})}else{let t=a?.teamId,l=t?n.teams[t]:null;if(l&&e8(l).pro_team){let t=!1;if(e===M._Y.DESIGN?t=l.currentTeamUser?.designPaidStatus===M.Zf.STARTER:e===M._Y.WHITEBOARD&&(t=l.currentTeamUser?.whiteboardPaidStatus===M.Zf.STARTER),t)return r.createElement(eo.n,{planName:l.name,planType:Y.O.TEAM,planId:l.id,fileKey:o,upgradeReason:el.X.MOVE_DRAFT})}}return null}}componentDidMount(){document.addEventListener("keydown",this.onkeydown),this.componentMountedAt=new Date}componentWillUnmount(){document.removeEventListener("keydown",this.onkeydown)}componentDidUpdate(e,t){!e.userResources.loaded&&this.props.userResources.loaded&&(this.props.fileMoveData.autoSelect&&this.props.dispatch(O.qb({fileMove:this.props.fileMove})),this.props.dispatch(O.YG({isSearchFocused:!0})));let a=this.props.fileMove.focusedIndex;if(this.props.fileMove.upDownKeyPressed&&e.fileMove.focusedIndex!==a){if(!this.scrollContainerRef.current||-1===a)return;let e=this.props.fileMove.folderRows[a].positionTop,t=this.scrollContainer.getScrollTop(),r=this.scrollContainerRef.current.clientHeight;e<t?0===a?this.scrollContainer.scrollToTop():this.scrollContainer.scrollTo(e):e+e0>t+r&&(null!=this.props.fileMove.indexCount&&a===this.props.fileMove.indexCount-1?this.scrollContainer.scrollToBottom():this.scrollContainer.scrollTo(e-r+e0))}this.props.fileMove.upDownKeyPressed&&this.props.dispatch(O.qM())}renderDropdown(){if(!this.props.userResources.loaded)return;let{userResources:e}=this.props.userResources,t=this.props.dropdownShown;if(!(t&&t.type===this.FILE_MOVE_DROPDOWN&&t.data&&t.data.folderId))return null;let a=e.folders[t.data.folderId];return a?r.createElement(tr,{folder:a,dropdownShown:this.props.dropdownShown,selectedView:this.props.selectedView,dispatch:this.props.dispatch}):null}render(){let e,t,a;let n=this.props.fileMoveData.modalWidth||288,l=this.getModalTitle();if(!this.props.userResources.loaded)return r.createElement(ee.XV,{title:l,fixedTop:!0,minWidth:n,maxWidth:n,onClose:this.onClose,truncateTitleText:!0},r.createElement("div",{className:e$},r.createElement(h.a_,{className:"file_move--spinner--eDfAF"})));let{userResources:i}=this.props.userResources,s=e3(this.props.fileMoveData),c=null==s?null:i.folders[s],d=this.getFocusedFolder();e=this.isMovePageToNewFile?null!=d&&0!==this.state.newFileName.length:this.props.fileMoveData.type===z.A.FILE_IMPORT?null!=d:null!=d&&null!=c&&d.id!==c.id;let m=0===this.props.fileMove.teamOrder.length,u=!this.props.fileMove.folderSearchQuery&&this.props.fileMove.userTeamCount&&this.props.fileMove.userTeamCount<=1&&this.props.fileMoveData.type!==z.A.FILE_IMPORT,_=this.props.fileMoveData;switch(_.type){case z.A.FILE:t={fileKey:_.fileKey,fileTeamId:_.file&&_.file?.team_id,fileMoveModalEmptyState:u,orgId:this.props.currentOrg&&this.props.currentOrg?.id},a=_.file.editor_type??M._Y.DESIGN;break;case z.A.REPO:t={repoId:_.repoId,fileMoveModalEmptyState:u,orgId:this.props.currentOrg&&this.props.currentOrg?.id},a=M._Y.DESIGN;break;case z.A.FILE_IMPORT:t={},a=null;break;default:(0,o.xb)(_)}return r.createElement(F.fu,{name:J.e0.FILE_MOVE_MODAL,properties:t},r.createElement(ee.XV,{title:l,fixedTop:!0,minWidth:n,maxWidth:n,onClose:this.onClose,truncateTitleText:!0},u?r.createElement("div",{className:"file_move--mainZeroState--HWbCa file_move--main--fz-As",id:e1},r.createElement("div",{className:"file_move--zeroStateModal--yrur1"},r.createElement("div",{style:{paddingTop:"100px"}},(0,I.tx)("file_browser.file_move.zero_state")),this.props.currentOrg&&r.createElement("div",{className:T.s.pt20.$},r.createElement(E.$$,{onClick:this.onOrgViewLinkClick},this.props.currentOrg.bigma_enabled?(0,I.t)("file_browser.file_move.view_workspaces"):(0,I.t)("file_browser.file_move.view_teams"))))):r.createElement("div",{className:e$,id:e1},this.isMovePageToNewFile?r.createElement(en,{newFileName:this.state.newFileName,onChange:this.handleInputChange}):r.createElement(r.Fragment,null,a&&c&&d&&!this.props.isBillingRemodelEnabled&&this.renderViewerUpgradeAwarenessBanner(a,c,d),r.createElement("div",{className:"file_move--searchWrapperNew--fSvPz"},r.createElement(e7,{fileMoveData:this.props.fileMoveData,folderCount:this.props.fileMove.indexCount,focusedIndex:this.props.fileMove.focusedIndex,getFocusedFolder:this.getFocusedFolder,searchQuery:this.props.fileMove.folderSearchQuery,moveFolder:this.move,dispatch:this.props.dispatch,userResources:i}))),r.createElement("div",{className:eV}),this.props.fileMoveData.displayBanner&&!this.isMovePageToNewFile&&r.createElement(r.Fragment,null,this.props.fileMoveData.displayBanner,r.createElement("div",{className:eV})),this.props.fileMove.folderSearchQuery&&!this.isMovePageToNewFile&&m?r.createElement("div",{className:"file_move--emptyModal--o-ei-"},(0,I.tx)("search.file_move.no_results_found",{folderSearchQuery:this.props.fileMove.folderSearchQuery})):r.createElement(w.P,{width:n,className:"file_move--teamSectionBody--jIFZO",ref:this.setScrollContainer,scrollContainerRef:this.scrollContainerRef,onScroll:this.onScroll},r.createElement(tt,{componentMountedAt:this.componentMountedAt,creatingNewFolder:this.props.creatingNewFolder,currentFolderId:s,dispatch:this.props.dispatch,fileEditorType:a,fileMove:this.props.fileMove,folders:i.folders,indexOffsets:this.props.fileMove.indexOffsets,onDoubleClick:this.moveToSelectedFolder,onFileMoveContextMenu:this.onFileMoveContextMenu,orgId:i.orgId,rolesByTeamId:i.roles.byTeamId,selectedView:this.props.selectedView,teamNameMaxWidth:n-88,teams:i.teams})),r.createElement("div",{className:"file_move--footer--pBClJ"},r.createElement(E.nR,{onClick:this.onClose},(0,I.tx)("modal.cancel")),r.createElement(E.vd,{disabled:!e,onClick:this.moveToSelectedFolder},this.props.fileMoveData.moveText||(0,I.t)("file_browser.file_move.move")))),this.renderDropdown(),r.createElement(tn,{fileMove:this.props.fileMove,creatingNewFolder:this.props.creatingNewFolder})))}}e6.displayName="FileMoveModal";class e7 extends r.PureComponent{constructor(e){super(e),this.onFocus=()=>{this.props.dispatch(O.xH()),this.props.dispatch(O.YG({isSearchFocused:!0}))},this.onBlur=()=>{this.props.dispatch(O.YG({isSearchFocused:!1}))},this.onChange=e=>{e.stopPropagation(),this.props.dispatch(eA({modalData:this.props.fileMoveData,query:e.currentTarget.value,userResources:this.props.userResources}))},this.onSearchKeyDown=e=>{e.stopPropagation();let t=this.searchInputRef.current;switch(e.keyCode){case m.Uz.DOWN_ARROW:t&&t.blur(),null!=this.props.folderCount&&this.props.dispatch(O.TL({upperBound:this.props.folderCount}));break;case m.Uz.UP_ARROW:t&&t.blur(),this.props.dispatch(O.zv());break;case m.Uz.ESCAPE:if(!t)break;t.value?(t.value="",this.props.dispatch(eA({modalData:this.props.fileMoveData,query:"",userResources:this.props.userResources}))):this.props.dispatch(L.Ce()),this.props.dispatch(O.xH());break;case m.Uz.TAB:t&&t.blur(),this.props.dispatch(O.xH());break;case m.Uz.ENTER:{t&&t.blur();let e=this.props.getFocusedFolder();e&&this.props.moveFolder(e)}}},this.searchInputRef=r.createRef()}componentDidMount(){let e=this.searchInputRef.current;e&&e.focus()}render(){return r.createElement("div",{className:"file_move--searchContainer--VZId9"},r.createElement("div",{className:ej},r.createElement(y.B,{svg:eJ.A})),r.createElement(v.L,{ref:this.searchInputRef,placeholder:(0,I.t)("file_browser.file_move.search_placeholder"),onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onSearchKeyDown,className:this.props.searchQuery?"file_move--searchInputNew--No-wL":"file_move--searchInputEmptyNew--Gv7eB file_move--searchInputNew--No-wL",value:this.props.searchQuery,onChange:this.onChange}))}}function e9(e){let{team:t,teamId:a}=e,[n,{onMouseOver:o,onMouseOut:l}]=(()=>{let[e,t]=(0,r.useState)(!1),a=(0,r.useCallback)(()=>t(!0),[t]),n=(0,r.useCallback)(()=>t(!1),[t]);return(0,r.useMemo)(()=>[e,{onMouseOver:a,onMouseOut:n}],[e,a,n])})(),i=(0,u.Rs)(G.bel,{teamId:t?.id??""},{enabled:!!t?.id}),s=i.data?.team?.teamFileCounts||H.Cz,c=e.fileNotInTeam&&e.fileEditorType&&t&&!(0,H.aW)(t,{type:H.sK.ADD_FILE,editorType:e.fileEditorType,teamFileCounts:s});return r.createElement(r.Fragment,null,e.showTitle&&r.createElement("div",{className:"file_move--teamTitleNew--1hv9- text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseOver:o,onMouseLeave:l},(a===O.iK||a===O.HK)&&r.createElement("div",{className:ej},r.createElement(y.B,{svg:eQ.A})),r.createElement("div",{className:"file_move--teamTitleRow--hMU87"},r.createElement("div",{className:"file_move--teamName--Jmsoa"},r.createElement("div",{className:"file_move--teamTitleText--4XOM- ellipsis--ellipsis--Tjyfa",style:{maxWidth:e.teamNameMaxWidth}},a===O.iK||a===O.HK?(0,I.t)("file_browser.shared_projects"):t.name),c&&r.createElement("div",{className:"file_move--warningIcon--MVFCa"},r.createElement(y.B,{svg:eY.A,"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,I.t)("file_browser.file_move.paywall_team_tooltip")}))),n&&t&&!c&&r.createElement("div",{className:"file_move--newProjButton--7b5Xq"},r.createElement(R,{team:t,isBackgroundTransparent:!0,trackingContextName:J.e0.FILE_MOVE_MODAL})))))}function te(e){let t=(0,r.useRef)(null),[a,o]=(0,r.useState)(!1),l=(0,n.wA)();return(0,r.useEffect)(()=>{!a&&e.isTeamNew&&t.current&&e.hasFolderSection&&(l(O.Dp({indexAt:e.firstFolderFocusedIndex})),t.current.scrollIntoView(),o(!0))},[e.isTeamNew,e.hasFolderSection,e.firstFolderFocusedIndex,a,t,l]),r.createElement("div",{className:e.className,ref:t},e.children)}function tt(e){let{fileMove:t,teams:a,selectedView:n}=e,o=Object.values(a).map(e=>e8(e));return r.createElement("div",null,null!=t.teamOrder&&t.teamOrder.map(n=>{let o=n!==O.HK,l=n!==O.iK&&n!==O.HK,i=(t.foldersByTeamId?.[n]||[]).length>0;if(!(o||l||i))return null;let s=a[n];if(!s&&!(n===O.iK||n===O.HK)||n===O.HK&&!e.orgId)return null;let c=s?new Date(a[n].createdAt):void 0,d=c&&c>e.componentMountedAt,m=t.indexOffsets[n]+1,u=!!e.currentFolderId&&n!==e.folders[e.currentFolderId]?.teamId;return r.createElement(te,{className:"file_move--teamSection--mI5yE",isTeamNew:d,firstFolderFocusedIndex:m,hasFolderSection:i,key:`Team Section ${n}`},r.createElement(e9,{team:s,teamId:n,showTitle:o,isACustomTeam:l,fileNotInTeam:u,teamNameMaxWidth:e.teamNameMaxWidth,indexOffsets:e.indexOffsets,fileEditorType:e.fileEditorType}),i&&(t.foldersByTeamId[n]||[]).map((a,o)=>{let i=o+e.indexOffsets[n];return l&&(i+=1),r.createElement(ta,{key:`${a.teamId} ${a.id}`,currentFolderId:e.currentFolderId,focusedFolderIndex:t.focusedIndex,folder:a,folderBeingRenamed:t.folderRenaming,folders:e.folders,index:i,isSearchingFolders:!!t.isSearchResult,onDoubleClick:e.onDoubleClick,onFileMoveContextMenu:e.onFileMoveContextMenu,trackingContextName:J.e0.FILE_MOVE_MODAL})}))}),!e.orgId&&r.createElement(ez,{teamNameMaxWidth:e.teamNameMaxWidth,trackingContextName:J.e0.FILE_MOVE_MODAL,orgId:e.orgId,selectedView:n,teams:o,rolesByTeamId:e.rolesByTeamId,dispatch:e.dispatch}))}function ta(e){let t=(0,n.wA)(),a=(0,p.gY)(N.mq),o=(r,n)=>{(0,c.trackEvent)("Rename Folder",{trackingContext:e.trackingContextName}),a({folderId:r.id,folderName:n}),t(O.Mn())},l=(t,a)=>{e.onFileMoveContextMenu(a,t)},i=e.folderBeingRenamed===e.folder.id,s=e.focusedFolderIndex===e.index,d=e.folderBeingRenamed?eW:s?"file_move--folderRowWrapperFocusedNew--XWjyz file_move--folderRowWrapper--R5vx1":eW,{folder:m}=e;return r.createElement("div",{className:d,onMouseDown:()=>{t(O.Dp({indexAt:e.index}))},key:`${m.teamId} ${m.id}`,onContextMenu:e=>l(m,e),onDoubleClick:()=>{i||e.onDoubleClick()}},i?r.createElement("div",{className:eG},r.createElement(b.p,{key:`input ${m.id}`,className:"file_move--renameInput--WL-5T",placeholderValue:(0,j.CI)(m),submit:e=>o(m,e),cancel:()=>{t(O.Mn())}})):((t,a)=>{let n=e2(t)&&e.isSearchingFolders,o=e.focusedFolderIndex&&e.focusedFolderIndex>-1?a:e.currentFolderId===t.id,l=(0,j.jd)(t)?eZ.A:eq.A;return r.createElement("div",{className:eG},r.createElement("div",{className:ej},r.createElement(y.B,{svg:o?eK.A:l})),r.createElement("span",{className:"file_move--folderName--YbDNz ellipsis--ellipsis--Tjyfa"},(0,j.CI)(t)),r.createElement("div",{className:ej},n&&r.createElement(y.B,{svg:eX.A})))})(m,s))}e7.displayName="FileMoveSearch";class tr extends r.PureComponent{constructor(){super(...arguments),this.renameFolder=()=>{this.props.dispatch(O.JG({folderId:this.props.folder.id}))}}render(){let e=this.props.folder,t=e.canRename,a=e4(this.props.selectedView);return r.createElement(g.ms,{className:"file_move--fileMoveContextMenu--47Rjw",style:this.props.dropdownShown.data.position},r.createElement(g.c$,{disabled:!t,onClick:this.renameFolder},(0,I.tx)("file_browser.file_move.context_menu_rename")),r.createElement(g.wv,null),r.createElement(g.c$,{href:(0,k.EE)(e.id,e.orgId),target:a},(0,I.tx)("file_browser.file_move.context_menu_show_in_files")))}}tr.displayName="FileMoveDropdown";class tn extends r.PureComponent{constructor(){super(...arguments),this.hiddenDivRef=e=>{this.hiddenDiv=e}}componentDidUpdate(){!this.props.fileMove||this.props.fileMove.folderRenaming||this.props.fileMove.isSearchFocused||this.props.creatingNewFolder||null==this.hiddenDiv||this.hiddenDiv.focus()}render(){return r.createElement("div",{ref:this.hiddenDivRef,tabIndex:0})}}tn.displayName="FileMoveHiddenDiv"},697920:(e,t,a)=>{a.r(t),a.d(t,{MoveDraftToProjectInterstitialModal:()=>E});var r=a(848318),n=a(301168),o=a(536384),l=a.n(o),i=a(133318),s=a(264478),c=a(967688),d=a(548727),m=a(31898),u=a(533737),_=a(863270),p=a(414607),f=a(289198),g=a(871493);function E(e){let t=(0,n.wA)(),a=()=>{t(u.b({dismissed_move_draft_to_project_interstitial_modal:!0})),t(m.Lo())};return r.createElement(_.fu,{name:"MoveDraftToProjectInterstitialModal"},r.createElement(p.aF,{title:(0,c.t)("file_browser.draft_to_project.title.plan_spaces"),titleClassName:f.wN,className:f.KP,size:320,popStack:!0,disableClickOutsideToHide:!0},r.createElement(i.Jn,{className:l()(g.J_,g.BQ),onClick:a}),r.createElement("span",null,(0,c.tx)("file_browser.draft_to_project.body.plan_spaces"),r.createElement("br",null)),r.createElement("div",{className:l()(f.v0,f.hF)},r.createElement("a",{target:"_blank",href:"https://help.figma.com/hc/articles/13838684089751-Starter-plan-permissions#drafts"},r.createElement(s.tM,null,(0,c.tx)("general.learn_more"))),r.createElement(s.vd,{className:f.pL,onClick:()=>{a(),(0,d.h)(e.file,e.repo,t,e.afterFileMove,e.moveFileModalData,e.bannerToDisplay)}},(0,c.tx)("file_browser.draft_to_project.move")))))}},942524:(e,t,a)=>{a.d(t,{cx:()=>o});var r=a(720300),n=a(878724);a(553833);let o=n.A.createLazyComponent(()=>Promise.all([a.e(6610),a.e(6694),a.e(8658),a.e(8029),a.e(7333),a.e(4372),a.e(3455),a.e(9376),a.e(8254),a.e(9424),a.e(9548),a.e(5655),a.e(6148),a.e(7120),a.e(5064),a.e(6784),a.e(373),a.e(5883),a.e(8717)]).then(a.bind(a,553833)).then(e=>e.default),{loading:()=>null,error:r.H4.NONE,componentName:"FileBrowserOverlays"})},467452:(e,t,a)=>{a.r(t),a.d(t,{EduUpgradeModal:()=>E});var r=a(848318),n=a(301168),o=a(264478),l=a(967688),i=a(300260),s=a(695920),c=a(422444),d=a(31898),m=a(679617),u=a(863270),_=a(672940),p=a(253332),f=a(890257);function g({handleClose:e}){let t=(0,n.wA)(),a=r.useCallback(()=>{e(),t((0,c.Dw)({isEduTeam:!0}))},[t,e]);return r.createElement(o.Ph,{className:"edu_upgrade_modal--createTeamLink--CbJUX edu_upgrade_modal--link--Toy9f",onClick:a,trusted:!0},(0,l.tx)("edu.or_create_a_new_team"))}function E(){let e=(0,_.FC)(),t=(0,n.wA)(),a=(0,s.sx)(),E=r.useCallback(()=>{t(d.Ce())},[t]),b=r.useCallback(e=>{E(),t(m.Vm({teamId:e.id}))},[t,E]),v=r.useMemo(()=>(0,p.Kg)(e),[e]);return r.useLayoutEffect(()=>{0!==v.length||a||(E(),t((0,c.Dw)({isEduTeam:!0})))},[t,v.length,E,a]),r.createElement(u.fu,{name:"Edu Team Upgrade Modal"},r.createElement(f.XV,{title:(0,l.t)("edu.upgrade_teams.headline"),onClose:E},r.createElement("div",{className:"edu_upgrade_modal--container--i-0VV"},r.createElement("p",{className:"edu_upgrade_modal--bodyText--BXu7I"},(0,l.tx)("edu.upgrade_teams.body",{link:r.createElement(o.Ph,{className:"edu_upgrade_modal--link--Toy9f",href:"/pricing",target:"_blank",trusted:!0},(0,l.tx)("edu.upgrade_teams.body_link_text"))}),v.length>1&&r.createElement(r.Fragment,null," ",(0,l.tx)("edu.upgrade_teams.body_multiple_teams"))),r.createElement(i.I,{eligibleTeams:v,selectTeam:b,showEditorCount:!1,customUpgradeText:(0,l.t)("general.next")}),!a&&r.createElement(g,{handleClose:E}))))}},67580:(e,t,a)=>{a.r(t),a.d(t,{DowngradeSurveyModal:()=>P,DowngradeSurveyModalAdmin:()=>L,DowngradeSurveyModalLeaveTeam:()=>F});var r=a(848318),n=a(301168),o=a(998568),l=a(967688),i=a(198850),s=a(989232),c=a(264478),d=a(31898),m=a(209595),u=a(890257);function _({id:e,label:t,children:a,onChange:n}){let[o,l]=r.useState(!1);return r.createElement("fieldset",{name:e},r.createElement("div",{className:"survey_option--inputContainer---R-Fh"},r.createElement(c.tB,{id:e,checked:o,onChange:e=>{l(!o),n&&n(e)}}),r.createElement("label",{className:"survey_option--label--NqXEk",htmlFor:e},t)),o&&a&&r.createElement("div",{className:"survey_option--subContainer--Omjmy"},a))}var p=a(430385),f=a(536384),g=a.n(f),E=a(156974),b=a(509567),v=a(706488);function h(e){let[t,a]=r.useState(""),n=e=>{a(e.target.value)};return e.textarea?r.createElement(v.v,{value:t,onChange:n,...e}):r.createElement(c.ks,{id:e.id,className:"survey_text_input--input--Q1W-9",placeholder:e.placeholder,maxLength:100,value:t,onChange:n})}let w="downgrade_survey_modal_component_v2--surveyQuestions--E5X6t",y="downgrade_survey_modal_component_v2--researchContact--qGc3V",T="downgrade_survey_modal_component_v2--hiddenInput--04h5p",I="downgrade_survey_modal_component_v2--radio--xvUsz",x=[{id:"brl",shorthand:"BRL"},{id:"cad",shorthand:"CAD"},{id:"eur",shorthand:"EUR"},{id:"gbp",shorthand:"GBP"},{id:"jpy",shorthand:"JPY"}];function N({id:e,shorthand:t}){return r.createElement("div",{className:"downgrade_survey_modal_component_v2--currencyContainer--CoFln"},r.createElement("p",null,(0,l.tx)(`downgrade_survey.survey_option.too_expensive.${e}`)),r.createElement("p",{className:"downgrade_survey_modal_component_v2--currencyShorthand--xhQpy"},t))}let C=[{id:"too_expensive",value:"Too expensive",children:r.createElement(function(){let e="other_currency",[t,a]=r.useState(""),n=e=>{a(e.currentTarget.id)},o=[...x.map(({id:e,shorthand:t})=>r.createElement(E.c$,{id:e,key:e,onClick:n},r.createElement(N,{id:e,shorthand:t}))),r.createElement(E.wv,{key:"separator"}),r.createElement(E.c$,{id:e,onClick:n,key:e},(0,l.tx)("downgrade_survey.survey_option.too_expensive.other_currency"))];return r.createElement("fieldset",null,r.createElement(_,{id:"currency_conversion",label:(0,l.t)("downgrade_survey.survey_option.too_expensive.currency_conversion")},r.createElement("fieldset",{className:g()({"downgrade_survey_modal_component_v2--currencySelector__other--khpqx":t===e})},r.createElement(E.Ve,{label:t.length?(0,l.t)(`downgrade_survey.survey_option.too_expensive.${t}`):(0,l.t)("downgrade_survey.survey_option.too_expensive.currency_selector"),options:o}),r.createElement("input",{id:"currency",className:T,readOnly:!0,value:t}),t===e&&r.createElement(h,{id:"currency_input",placeholder:(0,l.t)("downgrade_survey.survey_option.too_expensive.specify_currency")}))))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")),a=t.find(e=>"currency_conversion"===e.id),r=t.find(e=>"currency"===e.id),n=r?.value,o=t.find(e=>"currency_input"===e.id),l=o?.value||n||void 0;return{currencyConversion:a?.checked,currency:l}}},{id:"billing_structure_unclear",value:"Billing structure is unclear"},{id:"no_longer_using_figma_products",value:"No longer using Figma's products",children:r.createElement(function(){return r.createElement("fieldset",null,r.createElement("legend",{className:"downgrade_survey_modal_component_v2--additionalQuestion--HfKNO"},(0,l.tx)("downgrade_survey.survey_option.no_longer_using_figma_products.other_products")),r.createElement(h,{id:"other_products",placeholder:(0,l.t)("downgrade_survey.survey_option.no_longer_using_figma_products.text_area")}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"other_products"===e.id);return{products:t?.value||void 0}}},{id:"project_inactive",value:"Project is over or no longer active"},{id:"accidental_upgrade",value:"Did not mean to upgrade"},{id:"switching_plans",value:"Switching to a different plan",children:r.createElement(function(){let[e,t]=r.useState("");return r.createElement(r.Fragment,null,r.createElement(b.z,{value:e,onChange:e=>t(e)},r.createElement(b.Z,{className:I,value:"Starter plan"},(0,l.tx)("downgrade_survey.survey_option.switching_plans.starter_plan")),r.createElement(b.Z,{className:I,value:"Organization plan"},(0,l.tx)("downgrade_survey.survey_option.switching_plans.organization_plan")),r.createElement(b.Z,{className:I,value:"Enterprise plan"},(0,l.tx)("downgrade_survey.survey_option.switching_plans.enterprise_plan")),r.createElement(b.Z,{className:I,value:"Education plan"},(0,l.tx)("downgrade_survey.survey_option.switching_plans.education_plan"))),r.createElement("input",{id:"new_plan",className:T,readOnly:!0,value:e}))},null),getSubOptions:e=>{let t=Array.from(e.getElementsByTagName("input")).find(e=>"new_plan"===e.id);return{newPlan:t?.value||void 0}}}],k={id:"other",value:"Other",children:r.createElement(function(){return r.createElement(h,{className:"downgrade_survey_modal_component_v2--otherTextArea--pS5MZ",placeholder:(0,l.t)("downgrade_survey.survey_option.other.text_area"),textarea:!0})},null),getSubOptions:e=>({explanation:e.getElementsByTagName("textarea")[0].value||void 0})},S=(0,p.k4)(C).concat(k);var R=a(639088),A=a(249555);function O({onSubmit:e}){let[t,a]=r.useState([]),o=e=>{let{id:r}=e.currentTarget;t.includes(r)?a(t.filter(e=>e!==r)):a([...t,r])},i=(0,n.wA)(),p=(0,m._6)().teamId;return r.createElement(u.XV,{title:(0,l.t)("downgrade_survey.header"),fixedTop:!0,minWidth:370,maxWidth:370,onClose:()=>{i(d.Ce())},dataTestId:"downgrade-survey-modal",isCloseHidden:!0,disableClickOutsideToHide:!0},r.createElement("form",{className:"downgrade_survey_modal_component_v2--modalBody--tYceI",onSubmit:a=>{a.preventDefault();let r=Array.from(a.currentTarget.getElementsByClassName(w)[0].getElementsByTagName("fieldset")),n=t.map(e=>{let t=r.find(t=>t.name===e),{value:a,getSubOptions:n}=S.find(t=>t.id===e);return{reason:a,...n&&n(t)}}),o=a.currentTarget.getElementsByClassName(y)[0].getElementsByTagName("input")[0].checked;(0,s.trackEvent)("Team Downgrade Survey",{teamId:p,canContact:o,selectedOptions:n.map(e=>JSON.stringify(e))}),e?.(),i(d.Ce())}},r.createElement("div",{className:"downgrade_survey_modal_component_v2--exitSurvey--9HRcF"},r.createElement("fieldset",{className:w},r.createElement("legend",null,(0,l.tx)("downgrade_survey.what_made_you_cancel_your_plan")),!t.length&&r.createElement("p",{className:A.Q},(0,l.tx)("downgrade_survey.select_one")),S.map(({id:e,children:t})=>r.createElement(_,{id:e,label:(0,l.t)(`downgrade_survey.survey_option.${e}`),key:e,onChange:o},t))),r.createElement("fieldset",{className:y},r.createElement("legend",null,(0,l.tx)("downgrade_survey.research_contact")),r.createElement(_,{id:"research",label:(0,l.t)("downgrade_survey.allow_research_contact")}))),r.createElement("div",{className:"downgrade_survey_modal_component_v2--buttonRow--Y15LH"},r.createElement(c.vd,{type:"submit",disabled:!t.length,className:R.pL,autoFocus:!1},(0,l.tx)("downgrade_survey.continue")))))}function P({context:e}){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.modalShown?.data.teamId),s=(0,n.d4)(e=>e.teams[a]),c="admin"===e?(0,l.t)("downgrade_survey.go_back"):(0,l.t)("downgrade_survey.do_not_leave_team"),d="leave-team"===e?()=>{(0,o.us)("User entered leave team survey"),t(i.yH({team:s,userInitiated:!0}))}:void 0;return r.createElement(O,{cancelText:c,onSubmit:d})}function L(){return r.createElement(P,{context:"admin"})}function F(){return r.createElement(P,{context:"leave-team"})}},158342:(e,t,a)=>{a.r(t),a.d(t,{FolderBatchAbandonedDraftDeleteConfirmModal:()=>m});var r=a(848318),n=a(301168),o=a(989232),l=a(329228),i=a(314979),s=a(967688),c=a(5990),d=a(414607);function m({folders:e}){let t=(0,n.wA)(),a=(0,l.gY)(c.U),m=e=>{e.forEach(e=>{(0,o.trackEvent)("Folder Batch Abandoned Draft Delete Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId})}),a({folderIds:e.map(e=>e.id)}).catch(()=>{t(i.s.error((0,s.t)("file_browser.api_folder.error_when_deleting")))})};return r.createElement(d.Rw,{confirmationTitle:(0,s.t)("file_browser.delete_project.title"),destructive:!0,confirmText:(0,s.t)("file_browser.batch_delete_project.generic_confirm_label"),onConfirm:()=>{m(e)}},(0,s.tx)("file_browser.batch_delete_projects.confirm_text_trash_section",{numProjects:e.length}))}},78825:(e,t,a)=>{a.r(t),a.d(t,{FolderMoveModal:()=>M});var r=a(848318),n=a(301168);a(82433);var o=a(536384),l=a.n(o),i=a(637640),s=a(410725),c=a(748008),d=a(264478),m=a(136126),u=a(755534),_=a(720522),p=a(967688),f=a(647345),g=a(31898),E=a(863270),b=a(222556),v=a(5990),h=a(672940),w=a(55116),y=a(806349),T=a(679996),I=a(386252),x=a(213374),N=a(991675),C=a(890257),k=a(698656),S=a(812051),R=a(254028);let A="folder_move--iconContainer--nXjIY file_move--iconContainer--2ExyP",O="folder_move--warningContainer--MXpOB";var P=a(555288),L=a(7452),F=a(663128),D=a(254490);function M(e){let t,a;let o=(0,n.wA)(),l=(0,S.sy)(),f=(0,n.d4)(e=>e.currentUserOrgId),A=(0,n.d4)(e=>null!=f?e.orgById[f]:null),L=(0,s.Rs)(w.AbW,{currentOrgId:f,currentTeamId:null,folderId:e.folderId}),D=(0,n.d4)(t=>t.folders[e.folderId]),[M,$]=(0,r.useState)(void 0),[j,W]=(0,r.useState)(void 0),G="loaded"===L.status?{...L.data.currentUser}:null,V=b.h.useTrackingContext({trigger:T.b.FOLDER_MOVE_MODAL}),H={},z=[],K=(0,h.FC)();if(G){let e=[];(G.teamRoles??[]).forEach(t=>{if(t.team?.orgId===f&&!t.team?.deletedAt&&!t.pending){if(t.team?.id===D?.team_id){a=t;return}e.push(t),t.team?.workspace?.id?(H[t.team.workspace?.id]=H[t.team.workspace?.id]??[],H[t.team.workspace?.id].push(t)):t.team&&z.push(t)}});let r=G.baseOrgUser?.workspaceUsers;t=r?.find(e=>e?.isMainWorkspace)?.workspaceId}let Y=()=>{o(g.Ce())},q=(e,t)=>{$(e),W(t)},J=(0,r.useCallback)(()=>{if(M&&!j){let e=(0,I.bL)(M?.id,M.orgId);i.Ay.redirect(e,"_blank")}},[M,j]),X=(0,r.useCallback)(e=>{if(!A)return;let t={workspaceId:e??x.O,onSubmitReturnToPrevView:!1};o(g.to({type:k.Uc,data:t}))},[A,o]),Q=e=>r.createElement(r.Fragment,null,e.map(e=>r.createElement(U,{team:e.team,key:e.id,selectedTeamId:M?.id,onSelectTeam:q,permissionsState:K}))),Z=e=>r.createElement(U,{team:e.team,key:e.id,selectedTeamId:M?.id,isCurrentTeam:!0,permissionsState:K,onSelectTeam:q});if(!D)return null;let ee=Object.keys(H).length>0,et=M&&a&&a.team.id===M.id;return r.createElement(E.fu,{name:N.e0.FILE_MOVE_MODAL,properties:V},r.createElement(C.XV,{title:(0,p.t)("file_browser.folder_move.modal_header",{folderName:D.name}),fixedTop:!0,minWidth:288,maxWidth:288,onClose:Y,truncateTitleText:!0},r.createElement("div",{className:"folder_move--main--TkW9w file_move--main--fz-As"},r.createElement(u.P,{className:"folder_move--teamSectionBody--LACBL file_move--teamSectionBody--jIFZO"},r.createElement("div",{className:"folder_move--teamSection---S02k file_move--teamSection--mI5yE"},ee?(function(e,t,a){let r=t?.team?.workspace?.id??null,n=[r];return a&&a!==r&&e[a]&&n.push(a),Object.keys(e).filter(e=>e!==r&&e!==a).sort((t,a)=>{let r=e[t][0]?.team?.workspace?.name?.toLocaleUpperCase()??"",n=e[a][0]?.team?.workspace?.name?.toLocaleUpperCase()??"";return r<n?-1:r>n?1:0}).forEach(e=>{n.push(e)}),null!==r&&n.push(null),n})(H,a,t).map(e=>{if(null===e){if(z.length>0)return r.createElement(r.Fragment,{key:"other_teams_key"},r.createElement(B,{headerName:(0,p.t)("sidebar.workspaces.other_teams"),onCreateNewTeamClick:X,workspaceId:null}),null!=a&&a.team?.workspace?.id==null&&Z(a),Q(z))}else if(H[e]){let t=H[e],n=t?t[0].team?.workspace??null:null;return r.createElement(r.Fragment,{key:e},r.createElement(B,{headerName:n?.name??"",onCreateNewTeamClick:X,workspaceId:n?.id??null}),null!=a&&a.team?.workspace?.id===e&&Z(a),Q(t))}}):r.createElement(r.Fragment,null,A&&r.createElement(B,{key:"org_teams_header",headerName:A.name,onCreateNewTeamClick:X,workspaceId:null}),null!=a&&Z(a),Q(z)))),r.createElement("div",{className:"x78zum5 xdt5ytf xv42yna"},M&&!j&&r.createElement("div",{className:O},r.createElement("div",{className:"folder_move--warningBanner--Tnfff"},r.createElement("div",{className:"folder_move--warningSectionIcon--gOcDL"},r.createElement(_.B,{svg:F.A})),r.createElement("div",null,(0,p.tx)("file_browser.folder_move.move_project_no_edit_access_warning"),r.createElement("div",{className:"folder_move--warningCTALink--f74xo",onClick:J,role:"link",tabIndex:0},(0,p.tx)("file_browser.folder_move.view_team"),r.createElement("div",{className:"folder_move--arrowRightIcon--xIk7X"},r.createElement(_.B,{svg:P.A})))))),(l||(0,R.aI)())&&!A&&M&&j&&"loaded"===L.status&&L.data?.project?.hasPublishedSite.status==="loaded"&&(0,c.oA)(L.data?.project?.hasPublishedSite)&&r.createElement("div",{className:O},r.createElement(m._,{dataTestId:"project-move-site-unpublish-banner",color:m.S.ERROR,text:(0,p.t)("file_browser.file_move.sites_unpublished_on_project_move_warning")})),r.createElement("div",{className:"folder_move--footer--jcEsZ file_move--footer--pBClJ"},r.createElement(d.nR,{onClick:Y},(0,p.tx)("modal.cancel")),r.createElement(d.vd,{onClick:()=>{null!=M&&D?o((0,v.Nr)({folder:(0,y.Bp)(D),team:M,onSuccess:Y})):Y()},disabled:void 0===M||!j||!!et},(0,p.tx)("file_browser.folder_move.move_project")))))))}function B(e){let[t,a]=(0,r.useState)(!1);return r.createElement("div",{className:"folder_move--teamsHeaderRow--qZfbl text--fontPos12--YsUAh text--_fontBase--QdLsd",onMouseMove:()=>a(!0),onMouseLeave:()=>a(!1)},r.createElement("div",null,e.headerName),t&&r.createElement(f.f,{data_tooltip:(0,p.t)("file_browser.inline_team_creation.button_text"),data_onboarding_key:"new-team-button",innerText:(0,p.t)("file_browser.inline_team_creation.button_text"),onClick:()=>{e.onCreateNewTeamClick(e.workspaceId)}}))}function U(e){let{team:t}=e,a=t?.canEdit??!1;if(null==t)return r.createElement(r.Fragment,null);let n=l()(["folder_move--teamTitle--PwZow file_move--teamTitle--1IL8S text--fontPos12--YsUAh text--_fontBase--QdLsd",e.isCurrentTeam&&!e.selectedTeamId||e.selectedTeamId===e.team?.id?"folder_move--selectedTeamTitle---C1u4":""]);return r.createElement("div",{className:n,onClick:()=>{e.onSelectTeam&&e.onSelectTeam(t,a)},role:"button",tabIndex:0},r.createElement("div",{className:A},r.createElement(_.B,{svg:e.isCurrentTeam?L.A:D.A})),r.createElement("div",{className:"folder_move--teamTitleRow--6MpKM file_move--teamTitleRow--hMU87"},r.createElement("div",{className:"folder_move--teamName--fvmi0 file_move--teamName--Jmsoa"},t.name)),e.selectedTeamId===t.id&&!a&&r.createElement("div",{className:A},r.createElement(_.B,{svg:F.A})))}},617640:(e,t,a)=>{a.r(t),a.d(t,{FolderPermanentlyDeleteConfirmModal:()=>b});var r=a(848318),n=a(301168),o=a(582039),l=a(309488),i=a(93275),s=a(531788),c=a(989232),d=a(329228),m=a(297638),u=a(314979),_=a(967688),p=a(413798),f=a(5990),g=a(249726),E=a(735131);function b(e){var t;let a=(0,n.wA)(),b=o.hS(e),v=(0,d.gY)(f.Q4),h=(0,E.x)(e.folder.id,!0),w=r.createElement("span",{className:m.s.fontBold.$},(0,g.CI)(e.folder)),y=(0,_.t)("file_browser.delete_project.delete_project"),T="loaded"!==h.status?(0,_.tx)("file_browser.delete_project.generic_confirm_text_permanently_delete_folder",{folderName:w}):0===(t=h.data)?(0,_.tx)("file_browser.delete_project.zero_file_confirm_text_permanently_delete_folder",{folderName:w}):(0,_.tx)("file_browser.delete_project.plural_files_confirm_text_permanently_delete_folder",{folderName:w,numFiles:(0,p.t)(t)}),I="loaded"===h.status&&0===h.data?(0,_.tx)("file_browser.delete_project.once_deleted_this_project_can_no_longer_be_restored"):(0,_.tx)("file_browser.delete_project.once_deleted_this_project_and_its_files_can_no_longer_be_restored");return r.createElement(l.bL,{manager:b,width:"lg"},r.createElement(i.vo,null,r.createElement(i.Y9,null,r.createElement(i.hE,null,(0,_.tx)("file_browser.trash_project.delete_project_forever"))),r.createElement(i.nB,null,r.createElement("div",{className:m.s.mb16.$},T),r.createElement("div",null,I)),r.createElement(i.wi,null,r.createElement(i.jk,null,r.createElement(s.$n,{variant:"secondary",onClick:e.onClose},(0,_.tx)("modal.cancel")),r.createElement(s.$n,{variant:"destructive",onClick:()=>{(0,c.trackEvent)("Folder Permanently Delete Confirmation Click",{folderId:e.folder.id,teamId:e.folder.teamId,orgId:e.folderOrgId}),v({folderId:e.folder.id}).catch(()=>{a(u.s.error((0,_.t)("file_browser.api_folder.error_when_permanently_deleting_folder")))}),e.onClose()}},y)))))}},563055:(e,t,a)=>{a.r(t),a.d(t,{FolderTrashConfirmModal:()=>I});var r=a(848318),n=a(301168),o=a(660376),l=a(582039),i=a(93275),s=a(143823),c=a(309488),d=a(861424),m=a(531788),u=a(989232),_=a(329228),p=a(136126),f=a(297638),g=a(314979),E=a(967688),b=a(498808),v=a(413798),h=a(31898),w=a(5990),y=a(249726),T=a(735131);function I(e){let{folder:t}=e,a=l.hS(e),n=(0,T.N)(t.id),o="loaded"===n.status?r.createElement(x,{...e,numFiles:n.data.fileCount,hasPublishedSite:n.data.publishedSiteCount>0}):r.createElement(i.nB,{padding:{top:"1rem",bottom:"1rem"}},r.createElement("div",{className:f.s.flex.justifyCenter.$,"data-testid":"loading-spinner-container"},r.createElement(s.k,null)));return r.createElement(c.bL,{manager:a,width:"lg",height:"fixed"},r.createElement(i.vo,null,r.createElement(i.Y9,null,r.createElement(i.hE,null,(0,E.t)("file_browser.trash_project.move_project_to_trash"))),o))}function x(e){let t=(0,n.wA)(),a=(0,d.X)(),{folder:l,numFiles:s,hasPublishedSite:c}=e,T=r.createElement("span",{className:f.s.fontBold.$},(0,E.tx)("file_browser.tool_bar.trash")),I=(e=>{switch(e){case 0:return(0,E.t)("file_browser.trash_project.generic_confirm_label");case 1:return(0,E.t)("file_browser.trash_project.one_file_confirm_label");default:return(0,E.t)("file_browser.trash_project.plural_files_confirm_label",{numFiles:(0,v.t)(e)})}})(s),x=r.createElement("span",{className:f.s.fontBold.$},(0,y.CI)(l)),N=(e=>{switch(e){case 0:return(0,E.tx)("file_browser.trash_project.zero_file_confirm_text_trash_folder",{folderName:x});case 1:return(0,E.tx)("file_browser.trash_project.one_file_confirm_text_trash_folder",{folderName:x});default:return(0,E.tx)("file_browser.trash_project.plural_files_confirm_text_trash_folder",{folderName:x,numFiles:(0,v.t)(e)})}})(s),C=(0,_.gY)(w.Ct),k=e=>{(0,u.trackEvent)("Folder Trash Confirmation Click",{folderId:e.id,teamId:e.teamId,orgId:e.orgId}),C({folderId:e.id}).catch(()=>{t(g.s.error((0,E.t)("file_browser.api_folder.error_when_moving_to_trash")))}),t(h.Ce())};return r.createElement(r.Fragment,null,r.createElement(i.nB,null,e.folderState&&r.createElement("div",{className:f.s.mb12.$},r.createElement(p._,{dataTestId:"trash-folder-warning-banner",color:p.S.ERROR,text:(e=>{switch(e){case b.cm.PENDING_ASSET_TRANSFER:return(0,E.tx)("file_browser.trash_project.warning.pending_asset_transfer");case b.cm.PENDING_RESOURCE_CONNECTION:return(0,E.tx)("file_browser.trash_project.warning.pending_resource_connection");case b.cm.ACTIVE_RESOURCE_CONNECTION:return(0,E.tx)("file_browser.trash_project.warning.active_resource_connection");default:(0,o.xb)(e)}})(e.folderState)})),r.createElement("div",{className:f.s.mb12.$},N),c&&r.createElement("div",{className:f.s.mb12.$},(0,E.tx)("file_browser.trash_project.published_site_warning")),r.createElement("div",null,(0,E.tx)("file_browser.trash_project.description_restore",{trashStyled:T}))),r.createElement(i.wi,null,r.createElement(i.jk,null,r.createElement(m.$n,{variant:"secondary",onClick:()=>{e.onClose()},ref:a},(0,E.t)("modal.cancel")),r.createElement(m.$n,{variant:"destructive",onClick:()=>k(l)},I))))}},141772:(e,t,a)=>{a.r(t),a.d(t,{ChangeAnnualPlanModal:()=>A,ChangeAnnualPlanRow:()=>R,ConfirmCancelAnnualPlanModal:()=>O});var r=a(848318),n=a(301168),o=a(615233),l=a(329228),i=a(264478),s=a(314979),c=a(967688),d=a(440456),m=a(31898),u=a(679617),_=a(863270),p=a(188279),f=a(594950),g=a(501104),E=a(578590),b=a(125761),v=a(318147),h=a(834612),w=a(253332),y=a(138528),T=a(897198),I=a(361053),x=a(912534),N=a(382140),C=a(414607),k=a(840364);function S({currency:e,teamId:t}){let a=g.Oq.exclude([f.ud.DEV_MODE]).dict(t=>({currency:e,billableProductKey:t,tier:x.Ju.PRO,renewalTerm:x.IX.MONTH,unit:x.IX.MONTH})),r=(0,p.ic)(a,{planParentId:t,planType:v.OL.TEAM},p.Fq.ADMIN_SETTINGS),[n]=(0,l.mI)(r);if(null===n.data)throw Error("Price data is null");return n.data}function R(e){return r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.number_of_editors.seat_rename",{productType:(0,N.E)((0,E.vc)(e.editorType))}),r.createElement(i.ks,{"data-testid":"change-annual-plan-row-input",type:"number",name:e.editorType,step:1,min:1,max:w.m,value:e.tempNumEditors,onChange:t=>{let a=t.target.value;e.setTempEditorsValue(parseInt(a))}}))}function A(){let e=(0,I.cD)(),t=(0,b.TA)(),a=(0,n.d4)(e=>e.teamBilling.summary),l=(0,n.d4)(e=>e.payment.submitPutAnnualQuantityPending),i=S({currency:a.currency,teamId:e}),p=()=>{try{if(a?.annual_subscription)return a?.annual_subscription||void 0;return}catch(e){return}},g=p(),y=g?.whiteboard_quantity||0,[T,x]=r.useState(y),[A,O]=r.useState(g?.design_quantity||g?.quantity||0),P=(0,n.wA)(),L=(t,a)=>{P(u.MV({teamId:e,annualQuantity:t,annualWhiteboardQuantity:a}))},F=!!g?.trial_end&&!!(0,w.mt)(g.trial_end),D=g?(0,c.t)("change_annual_plan_modal.plan_start_date",{startDate:new Date(g.current_period_end)}):(0,c.t)("change_annual_plan_modal.unknown_start_date"),M=F?(0,c.t)("change_annual_plan_modal.confirmation_header_plan_starting",{startDate:D}):(0,c.t)("change_annual_plan_modal.confirmation_header_plan_started",{startDate:D});return r.createElement(_.fu,{name:"Change Annual Plan Modal",properties:{teamId:e,userId:t??void 0}},r.createElement(C.Rw,{confirmationTitle:M,confirmText:(0,c.t)("change_annual_plan_modal.confirm_text"),onConfirm:()=>{isNaN(A)||isNaN(T)||A<0||T<0||0===A&&0===T?P(s.s.error((0,c.t)("change_annual_plan_modal.invalid_seats_error"))):A+T>w.m?(P(s.s.error(r.createElement("div",null,(0,c.tx)("change_annual_plan_modal.contact_support_to_purchase_more_seats_error",{maxAnnualSubscriptions:w.m,contactSupportLink:r.createElement("a",{href:`mailto:${(0,o.W4)()}`},(0,c.t)("change_annual_plan_modal.contact_support_link"))})))),O(p()?.design_quantity||p()?.quantity||0),x(p()?.whiteboard_quantity||0)):T+A>100?P(m.to({type:d.Mv,data:{numAnnualEditors:A+T,onConfirm:()=>{L(A,T)}}})):P(u.MV({teamId:e,annualQuantity:A,annualWhiteboardQuantity:T}))},onCancel:()=>{P(m.Ce())},dontClose:!0,disableConfirm:l,trackedConfirmationProperties:{teamId:e,userId:t??void 0,monthly_quantity_design:A,monthly_quantity_figjam:T}},r.createElement("br",null),(0,c.tx)("change_annual_plan_modal.change_annual_plan_grace_period.seat_rename"),r.createElement("br",null),r.createElement("br",null),(()=>{let e=a.currency,t=new h.vr(e),n=i[f.ud.DESIGN].amount,o=i[f.ud.FIGJAM].amount;return r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.instructions.seat_rename",{monthlyEditorCost:t.formatMoney(n,{showCents:!1}),editorProduct:(0,N.E)(E.Te.DESIGN),monthlyFigjamCost:t.formatMoney(o,{showCents:!1}),figJamProduct:(0,N.E)(E.Te.WHITEBOARD)}))})(),r.createElement("br",null),r.createElement("br",null),r.createElement(R,{editorType:v._Y.DESIGN,tempNumEditors:A,setTempEditorsValue:e=>O(e),dispatch:P}),r.createElement(r.Fragment,null,r.createElement("br",null),r.createElement("br",null),r.createElement(R,{editorType:v._Y.WHITEBOARD,tempNumEditors:T,setTempEditorsValue:e=>x(e),dispatch:P})),r.createElement("br",null),r.createElement("br",null),r.createElement("a",{className:"change_annual_plan_modal--link--n0jw2 blue_link--blueLink--9rlnd",onClick:()=>{P(m.to({type:k.V}))}},F?(0,c.t)("change_annual_plan_modal.remove_annual_plan"):(0,c.t)("change_annual_plan_modal.dont_renew_annual_plan"))))}function O(){let e=(0,y.NP)({component:"ConfirmCancelAnnualPlanModal",migrationGroup:T.L.GROUP_5});if(!e)throw Error("Team is undefined");let t=(0,n.d4)(e=>e.teamBilling.summary.currency),a=(0,n.d4)(e=>e.payment.submitPutAnnualQuantityPending),o=S({currency:t,teamId:e}),l=(0,n.wA)(),i=new h.vr(t),s=o[f.ud.DESIGN].amount,d=o[f.ud.FIGJAM].amount;return r.createElement(C.Rw,{title:(0,c.t)("change_annual_plan_modal.cancel_annual_plan_header"),confirmText:(0,c.t)("change_annual_plan_modal.confirm_cancel_annual_plan"),cancelText:(0,c.t)("change_annual_plan_modal.nevermind"),onConfirm:()=>{l(u.MV({teamId:e,annualQuantity:0,annualWhiteboardQuantity:0}))},onCancel:()=>{l(m.to({type:k.X,data:{}}))},dontClose:!0,disableConfirm:a},r.createElement("br",null),r.createElement(r.Fragment,null,(0,c.tx)("change_annual_plan_modal.cancel_annual_plan_text.seat_rename",{monthlyEditorCost:i.formatMoney(s),monthlyFigJamEditorCost:i.formatMoney(d)})),r.createElement("br",null),r.createElement("br",null),(0,c.tx)("change_annual_plan_modal.cancel_annual_plan_subtext"))}},743002:(e,t,a)=>{a.r(t),a.d(t,{TeamChangePaymentModal:()=>h});var r=a(848318),n=a(301168),o=a(536384),l=a.n(o),i=a(14323),s=a(264478),c=a(345964),d=a(297638),m=a(967688),u=a(31898),_=a(708896),p=a(656320),f=a(773293),g=a(890257),E=a(840026),b=a(559083);function v({currency:e,customerInfo:t,defaultCountry:a,estimatedChargeCents:o,isReactivating:v,canSeeBillingAddressExp:h}){let w=v?(0,m.t)("change_payment.success.successfully_reactivated_subscription"):(0,m.t)("change_payment.success.successfully_updated_your_payment_method"),y=(0,n.d4)(e=>(0,p.Np)(e,{view:"teamAdminConsole",teamId:t.teamId,teamAdminConsoleViewTab:f.Iv.SETTINGS})),{createPaymentElement:T,unmountPaymentElement:I,savePayment:x,billingAddress:N,updateBillingAddress:C,nameOnPaymentMethod:k,setNameOnPaymentMethod:S,paymentMethodType:R,error:A}=(0,_.Op)({setupIntentParams:{redirect_url:y,subtotal_estimate:o,success_message:w,currency:e},paymentFlowSource:_.wn.PRO_CHANGE_PAYMENT,customerInfo:t,defaultCountry:a,currency:e,canSeeBillingAddressExp:h,isCheckout:!1}),[O,P]=r.useState(!1),[L,F]=r.useState(!1),[D,M]=r.useState(window.innerHeight),B=(0,n.wA)(),U=A?.code===_.dl.UNINITIALIZED_STRIPE_ELEMENTS_ERROR,$=()=>B(u.Ce());(0,i.P)(({height:e})=>{M(e)});let j=async e=>{e&&e.preventDefault(),F(!0),await x(),F(!1)};return r.createElement(g.XV,{title:h?(0,m.t)("change_payment.update_payment_details"):(0,m.t)("change_payment.enter_payment_method"),onClose:$,maxWidth:465,headerSize:"large"},r.createElement("div",{className:l()({[b.$J]:!O,[b.Un]:U})},r.createElement("form",{onSubmit:j},r.createElement("div",{className:b.KJ,style:{maxHeight:Math.min(D-49-65,652)}},O&&h&&r.createElement("div",{className:d.s.mb16.$},r.createElement("label",{htmlFor:"updatePaymentDetails",className:d.s.colorTextSecondary.$},(0,m.tx)("change_payment.update_payment_details_description_default"))),r.createElement(E.F,{billingAddress:N,canSeeBillingAddressExp:h,createPaymentElement:T,error:A,nameOnPaymentMethod:k,paymentElementEventHandlers:{ready:()=>P(!0)},paymentFlow:_.wn.PRO_CHANGE_PAYMENT,paymentMethodType:R,unmountPaymentElement:I,updateBillingAddress:C,updateNameOnPaymentMethod:S})),O&&!U&&r.createElement("div",{className:b.UD},L&&r.createElement(c.kt,{className:b.u1}),r.createElement(s.tM,{onClick:$},(0,m.tx)("change_payment.cancel")),r.createElement(s.vd,{tabIndex:0,type:"submit",disabled:L},(0,m.tx)("change_payment.save")))),U&&r.createElement(s.tM,{onClick:$},(0,m.tx)("change_payment.close_window"))))}function h({currency:e,customerInfo:t,defaultCountry:a,monthlySub:n,annualSub:o,isReactivating:l,canSeeBillingAddressExp:i}){let s=n?.estimated_amount_due??0,c=Math.max(o?.estimated_amount_due??0,s);return r.createElement(v,{currency:e,customerInfo:t,defaultCountry:a,estimatedChargeCents:c,isReactivating:l,canSeeBillingAddressExp:i})}},230242:(e,t,a)=>{a.r(t),a.d(t,{ChangeVatGstIdModal:()=>b});var r=a(848318),n=a(301168),o=a(536384),l=a.n(o),i=a(410725),s=a(264478),c=a(136126),d=a(967688),m=a(31898),u=a(318147),_=a(55116),p=a(890257),f=a(430526),g=a(289198);function E(e,t){return e&&"loaded"===t.status?t.data.org:e||"loaded"!==t.status?null:t.data.team}let b=r.memo(function(e){let t=(0,n.wA)(),{updateVatGstId:a}=e,o=!!e.org?.id,b=(0,i.Rs)(_.Wt6,{orgId:e.org?.id||""},{enabled:o}),v=(0,i.Rs)(_.xS7,{teamId:e.team?.id||""},{enabled:!o}),h=o?b:v,w=E(o,h),y=w?.taxIdVerificationStatus,[T,I]=r.useState(),[x,N]=r.useState(""),[C,k]=r.useState(""),[S,R]=r.useState(!1),[A,O]=r.useState({country:"",state:""}),[P,L]=r.useState(!1);r.useEffect(()=>{let e=w?.taxInfo;if(!P&&"loaded"===h.status&&e?.status==="loaded"){let t=E(o,h),a=e?.data;N(t?.vatGstId||""),k(a?.regionalVatGstId||""),R(a?.canUpdateRegionalVatGst||!1),O({country:a?.country||"",state:a?.state||""}),L(!0)}},[o,h,P,w?.taxInfo]);let F=()=>{t(m.Ce())};return r.createElement(p.XV,{onClose:F,title:(0,d.t)("change_vat_gst_id.input_id"),minWidth:344,maxWidth:344,fixedTop:!0},T&&r.createElement("div",{className:"change_vat_gst_id_modal--errorBanner--sqxNt","data-testid":"change-vat-gst-id-error"},r.createElement(c._,{color:c.S.ERROR,rounded:!1,text:T})),y===u.kI.VERIFIED&&r.createElement("div",{"data-testid":"change-vat-gst-id-information"},r.createElement(c._,{color:c.S.INFORMATION,rounded:!1,text:(0,d.t)("change_vat_gst_id.tax_id_verification_succeeded")})),y===u.kI.UNVERIFIED&&r.createElement("div",{"data-testid":"change-vat-gst-id-warning"},r.createElement(c._,{color:c.S.WARNING,rounded:!1,text:(0,d.t)("change_vat_gst_id.tax_id_verification_failed")})),r.createElement("div",{className:g.Dy},r.createElement("p",{className:"change_vat_gst_id_modal--description--6gdSL"},(0,d.tx)("change_vat_gst_id.description")),r.createElement("form",{onSubmit:e=>{e.preventDefault(),a(x,e=>I(e),S?C:"").then(e=>{e&&F()})},"data-testid":"change-vat-form"},P&&r.createElement(f.A,{onChange:N,country:A.country,vatId:x,isCommunityCheckout:!1}),S&&r.createElement(f.A,{onChange:k,country:A.country,region:A.state,vatId:C,isCommunityCheckout:!1,variant:"regional"}),r.createElement("div",{className:l()(g.v0,g.hF)},r.createElement(s.vd,{className:g.pL,type:"submit",disabled:!P},(0,d.tx)("change_vat_gst_id.save_id"))))))})},387213:(e,t,a)=>{a.r(t),a.d(t,{ConfirmDowngradeModal:()=>f});var r=a(848318),n=a(301168),o=a(536384),l=a.n(o),i=a(264478),s=a(967688),c=a(837593),d=a(31898),m=a(679617),u=a(890257),_=a(289198);let p=r.memo(function(e){let t=(0,n.wA)(),{teamId:a,billingEndDate:o}=e.modalShown.data,p=e.teams[a],f=()=>{t(d.Ce())},g=o?r.createElement(r.Fragment,null,(0,s.tx)("confirm_downgrade.team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:p?.name})," ",(0,s.tx)("confirm_downgrade.any_seats_you_add",{billingEndDate:o})):(0,s.tx)("confirm_downgrade.on_your_next_billing_date_team_name_will_be_downgraded_to_our_free_starter_plan",{teamName:p?.name});return r.createElement(u.XV,{onClose:f,title:(0,s.t)("confirm_downgrade.cancel_professional_plan"),minWidth:344,maxWidth:344,dataTestId:"downgrade-confirmation-modal",fixedTop:!0},r.createElement("div",{className:_.Dy},r.createElement("p",null,g),r.createElement("div",{className:l()(_.v0,_.hF)},r.createElement(i.tM,{onClick:f},(0,s.tx)("confirm_downgrade.go_back")),r.createElement(i.qM,{className:_.pL,onClick:()=>{t(m.Wc({teamId:a})),t((0,d.to)({type:(0,c.l)()}))}},(0,s.tx)("confirm_downgrade.finish_cancellation")))))});function f(e){return r.createElement(p,{...e})}},849045:(e,t,a)=>{a.r(t),a.d(t,{TeamPermissionsModal:()=>Q});var r=a(848318),n=a(301168),o=a(176677),l=a(582039),i=a(309488),s=a(93275),c=a(989232),d=a(238444),m=a(857607),u=a(879263),_=a(345964),p=a(967688),f=a(407639),g=a(31898),E=a(863270),b=a(815078),v=a(700624),h=a(125761),w=a(318147),y=a(660580),T=a(474132),I=a(280255),x=a(89140),N=a(860790),C=a(588014),k=a(94831),S=a(825241),R=a(693476),A=a(948770),O=a(429446),P=a(36983),L=a(469999),F=a(256347),D=a(42701),M=a(155865),B=a(720522),U=a(125952),$=a(671e3),j=a(864848),W=a(372455),G=a(70690),V=a(401431),H=a(442539);function z(e){let t=e.canAdmin,a=r.createElement(B.B,{className:W.wk,svg:V.A});e.sharingAudienceControl===w.PQ.ORG_EDIT||e.sharingAudienceControl===w.PQ.ORG_VIEW?a=r.createElement("div",{className:W.AA},r.createElement(B.B,{svg:H.A})):(e.sharingAudienceControl===w.PQ.WORKSPACE_EDIT||e.sharingAudienceControl===w.PQ.WORKSPACE_VIEW)&&(a=r.createElement("div",{className:W.AA},e.workspace&&r.createElement(U.z6,{entity:e.workspace,size:24})));let n=e.sharingAudienceControl===w.PQ.INVITE_ONLY&&e.isTeamOrgBrowsable,o=n?W.Fl:W.Jt;return r.createElement("div",{className:t?o:W.zn,onClick:t?()=>e.changeModalView(1):void 0,role:"button","data-onboarding-key":$.F,tabIndex:0},a,r.createElement("div",{className:W.$S},r.createElement("div",null,e.sharingAudienceControl&&(0,j.ET)(e.sharingAudienceControl,e.org,e.workspace),n&&r.createElement("div",{className:W.JZ},(0,p.t)("team_creation.anyone_can_find_this_team"))),e.org&&r.createElement("div",{className:W.j7,"data-onboarding-key":$.F},e.sharingAudienceControl&&(0,j.mi)(e.sharingAudienceControl),t&&r.createElement(B.B,{svg:G.A,className:W.$w}),t&&r.createElement($.j,null))))}var K=a(452988),Y=a(635482),q=a(288683),J=a(538002);let X=r.memo(function({roles:e,virtualItems:t,totalSize:a,user:n,parentOrg:o,team:l,teamOrgDomains:i,canAdmin:s,canEdit:c,isCurrentUserTeamOwner:d}){let m=r.useMemo(()=>({team:l,type:w.vt.TEAM}),[l]);return r.createElement("div",{style:{height:`${a}px`,position:"relative"}},t.map(t=>{let a=t.index,u=e[a],_=(0,I.OL)(u,s,c);return r.createElement(Y.O,{key:`role-row-${a}`,canEditRole:_,canMakeAdmin:s,currentOrg:o,currentUserOrgId:o?.id??null,isOrgUser:!!u.org_user,isOwnerOfResource:d,orgDomains:i,readOnlyOverrideWarningMessage:null,resource:m,resourceName:l.name,role:u,user:n,virtualRowItem:t})}))});function Q(e){let t,{teamId:a,initialInviteLevel:B,prepopulateEmail:U,initialView:$}=e,j=(0,n.wA)(),W=(0,h.Pc)(),G=(0,n.d4)(e=>e.autocomplete),V=(0,n.d4)(e=>e.contacts),H=(0,n.d4)(e=>e.dropdownShown),Y=y.M4.Team.useValue(a).data,Q=(0,v.dr)(a),Z=(0,v.eb)(a);(0,u.oY)("loaded"===Q.status&&"loaded"===Z.status,e=>{let t=Z.data?.length??0,a="unknown";a=t<=100?"small":t<=300?"medium":"large",(0,c.trackEvent)("share_modal_latency",{latency_ms:e,modal_type:"team",is_outlier:e>500,role_size:a},{forwardToDatadog:!0})});let ee=Q.data,et=ee&&ee.org,ea=ee&&ee.teamSharingSettings,er=ee&&ee.orgUser,en=et?et.id:null,eo=ee&&ee.workspace,el=et&&et.org_domains?et.org_domains:C.ls,ei=r.useMemo(()=>Z.data?.sort((e,t)=>e.pending===t.pending?q.E4(e,V).toLocaleLowerCase()<q.E4(t,V).toLocaleLowerCase()?-1:1:e.pending?1:-1)??[],[V,Z]),es=ee&&ee.pendingTeamRoleRequests?ee.pendingTeamRoleRequests:[],{default:ec,inviteLevel:ed,setInviteLevel:em}=(0,v.oU)({initialValue:B,teamId:a,teamPermissions:ee}),eu=r.useMemo(()=>{let e=[];return ee?.canAdmin&&e.push(k.e6.ADMIN),ee?.canEdit&&e.push(k.e6.EDITOR),ee?.canRead&&e.push(k.e6.VIEWER),e},[ee]),{validateToken:e_,searchResultToken:ep}=(0,b.u)({parentOrg:et,prepopulatedEmail:U,orgDomains:el}),ef=e=>{let t=(0,S.Z)(e);j((0,x.rq)({emails:t,resourceType:w.vt.TEAM,resourceIdOrKey:a,level:ed,emailsToExclude:(0,N.bp)(V.usersByEmail,W,ei),source:"team_share_modal",orgName:et?et.name:void 0,teamId:a}))},eg=()=>{j(g.Ce()),j(f.cL())},[eE,eb]=r.useState($||0),ev=()=>0===eE?r.createElement("div",{className:J.DA},r.createElement("p",null,(0,p.tx)("team_view.team_permissions_modal.invite_other_members",{teamName:Y?.name??""}))):r.createElement(F.w,{title:(0,p.t)("team_view.team_permissions_modal.share_settings"),onClick:()=>eb(0)}),eh=!!Y&&!Y.org_id,ew=l.hS(e),{sharingSuggestions:ey,sharingSuggestionIdsToExclude:eT,sharingSuggestionEmailsToExclude:eI}=(0,D.$)({orgId:en,teamId:a,contacts:V.usersByEmail,roles:ei,user:W,autocompleteTokens:G.tokens}),ex=r.useCallback(()=>36,[]),eN=r.useRef(null),eC=(0,o.z)({size:ei.length,parentRef:eN,estimateSize:ex,overscan:10,paddingStart:0});return t=Y&&ee?0===eE?ee?r.createElement(r.Fragment,null,r.createElement("div",{key:"container",onKeyDown:e=>{e.keyCode!==m.Uz.ESCAPE&&e.stopPropagation()}},eh&&r.createElement(r.Fragment,null,r.createElement(K.i,{includeCopyLinkButton:!0,teamId:a,dropdownShown:H,initialInviteLevel:ec,teamPermissions:{canAdmin:!!ee?.canAdmin,canEdit:!!ee?.canEdit}}),r.createElement("div",{className:J.Vq},(0,p.tx)("team_view.team_permissions_modal.invite_by_email"))),!!ee?.canAdmin&&r.createElement(L.$i,{teamId:a,teamRoleRequests:es,teamRoles:ei}),(0,O.r)(W)?r.createElement(O.X,{resourceType:"team"}):r.createElement(r.Fragment,null,r.createElement("div",{className:J.Zk},r.createElement(R.e,{SearchResultComponent:A.o,TokenComponent:A.g,autocomplete:G,buttonText:(0,p.t)("team_view.team_permissions_modal.invite"),dispatch:j,dropdownKey:"permissions-invite-dropdown",dropdownShown:H,fixedAutocompleteResults:!0,getSearchResults:e=>(0,N.Wj)(e,V.usersByEmail,W,ei,en,a,null,er?.permission===w._D.GUEST,{inviteLevel:ed,source:"team-permissions-modal"}),getSelectText:I.C1,hideDropdownOnEmpty:!0,inviteLevel:ed,joinLinkShown:eh,onHideModal:eg,onInviteLevelChange:em,onSubmit:e=>{if(et&&et.domain_capture&&el&&el.domains.length>0){let t=(0,S.Z)(e).filter(e=>(0,d.xf)(e)&&!(0,T.H_)(el.domains,e));if(et?.invite_whitelist_guest_invite_setting==null&&t.length>0){j(g.to({type:P.F,data:{emails:t,onConfirm:()=>{ef(e)},popStack:!0,orgName:et.name}}));return}}ef(e)},options:eu,placeholderText:(0,p.t)("team_creation.add_a_name_or_email"),searchResultToken:ep,shouldAutoFocus:!eh,validateToken:e_,validateTokensAsEmail:!0})),r.createElement(D.t,{suggestions:ey??void 0,autocomplete:G,searchResultToken:ep,resourceType:"team",resourceId:a,idsToExclude:eT??void 0,emailsToExclude:eI??void 0})),et&&r.createElement("div",{className:J.st,ref:eN},r.createElement("div",{className:J.d3},r.createElement("div",{className:J.eF},(0,p.t)("file_permissions_modal.who_has_access")),r.createElement(z,{team:Y,workspace:eo,org:et,changeModalView:eb,sharingAudienceControl:ea?.sharingAudienceControl,isTeamOrgBrowsable:ea?.orgBrowsable,canAdmin:!!ee?.canAdmin}),r.createElement(X,{canAdmin:!!ee?.canAdmin,canEdit:!!ee?.canEdit,isCurrentUserTeamOwner:!!ee?.isOwner,parentOrg:et,roles:ei,team:Y,teamOrgDomains:el,totalSize:eC.totalSize,user:W,virtualItems:eC.virtualItems}))))):r.createElement("div",{className:J.Lq},r.createElement(_.qc,null)):et?ea&&r.createElement(M.nH,{team:Y,workspace:eo||void 0,org:et,teamSharingSettings:ea,hideModal:eg,goBack:()=>eb(0)}):r.createElement(r.Fragment,null):r.createElement("div",{className:J.Lq},r.createElement(_.qc,null)),r.createElement(E.fu,{name:"Share Modal",properties:{resourceType:w.vt.TEAM,resourceId:a}},r.createElement(i.bL,{manager:ew,width:"lg"},r.createElement(s.vo,null,r.createElement(s.Y9,null,r.createElement(s.hE,null,ev())),r.createElement(s.nB,null,t))))}},801639:(e,t,a)=>{a.r(t),a.d(t,{TeamRenameModal:()=>c});var r=a(848318),n=a(301168),o=a(967688),l=a(705693),i=a(386252),s=a(224191);function c({team:e}){let t=(0,n.wA)();return r.createElement(s.c,{initialName:e.name,maxLength:i.qg,placeholder:(0,o.t)("resource_rename_modal.team.placeholder"),submitText:(0,o.t)("resource_rename_modal.team.submit"),onRename:a=>t((0,l.IA)({team:e,name:a}))})}},941250:(e,t,a)=>{a.d(t,{FileBrowserView:()=>b$});var r=a(848318),n=a(301168),o=a(580494),l=a(311129),i=a(681978),s=a(942744),c=a(29188),d=a(637640),m=a(359822),u=a(865114),_=a(410725),p=a(329228),f=a(611057),g=a(238462),E=a(656329),b=a(227276),v=a(217172),h=a(943845),w=a(355689),y=a(621603),T=a(302730),I=a(627416),x=a(406509),N=a(695920),C=a(660376),k=a(297638),S=a(967688),R=a(87463),A=a(830344),O=a(247698),P=a(361397),L=a(398661),F=a(857607),D=a(386040),M=a(439525),B=a(938982),U=a(536384),$=a.n(U),j=a(992611),W=a(447651),G=a(740495),V=a(353231),H=a(983178),z=a(5990),K=a(353806),Y=a(180294),q=a(131650),J=a(125761),X=a(819624),Q=a(222565),Z=a(235169),ee=a(282631),et=a(748008),ea=a(264478),er=a(851861),en=a(345964),eo=a(755534),el=a(149841),ei=a(720522),es=a(744577),ec=a(999667),ed=a(918777),em=a(246508),eu=a(957872),e_=a(34542),ep=a(517776),ef=a(403014),eg=a(263336),eE=a(391301),eb=a(556049),ev=a(136169);let eh="seen_org_admin_moved_unassigned_drafts_onboarding",ew=(0,ed.A)("2024-10-15").startOf("day"),ey=(0,ep.r1)(eh);function eT(){let e=(0,ec.md)(ey),{show:t,isShowing:a,complete:o}=(0,e_.e)({overlay:ev.rv,priority:eg.N.DEFAULT_MODAL},[e]),l=(0,n.d4)(e=>(0,ef.xw)(e)),i=l?.created_at,s=!!i&&(0,ed.A)(i).isSameOrAfter(ew);return(0,m.h)(()=>{t({canShow:e=>!(e||s)})}),r.createElement(eE.rq,{arrowPosition:eb.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,S.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.body"),isShowing:a,onClose:o,primaryCta:{label:(0,S.tx)("general.got_it"),type:"button",onClick:o,ctaTrackingDescriptor:eu.c.DONE},secondaryCta:{label:(0,S.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:eu.c.LEARN_MORE},shouldCenterArrow:eb.EL.FALLBACK,targetKey:em.sm,title:(0,S.tx)("org_admin_onboarding.tooltip.moved_unassigned_drafts.title"),trackingContextName:em.o8,userFlagOnShow:eh})}var eI=a(280255),ex=a(474935),eN=a(382293);function eC({project:e}){let t=(0,J.iZ)(),a=(0,Y.dq)(),r=(0,n.d4)(e=>e.currentTeamId),o="drafts"===e?a:e.team?.org?.id,l="drafts"===e?r:e.team?.id,i=(0,eN.vt)(l),s=(0,ex.jn)();return!(0,eI.R$)(t,o)&&!E.nW&&!(i||s)}var ek=a(228921),eS=a(828432),eR=a(453370),eA=a(209595);function eO(){let e=(0,n.wA)(),t=(0,eA.z3)();return r.createElement(eS.SidebarRow,{onClick:()=>{e(eR.$T({view:"recentsAndSharing"})),e(eR.Oe({clickedResourceType:"recentsAndSharing"}))},isSelected:"recentsAndSharing"===t,icon:r.createElement(ek.a,null),text:r.createElement(R.E,{truncate:!0},(0,S.tx)("sidebar.recents"))})}var eP=a(864907),eL=a(533737),eF=a(174882),eD=a(672940),eM=a(318147),eB=a(474132),eU=a(590705),e$=a(172050),ej=a(190243),eW=a(596510),eG=a(904337),eV=a(52495),eH=a(635600),ez=a(989884),eK=a(55116),eY=a(138528),eq=a(850768),eJ=a(773293),eX=a(370715);let eQ=(0,ep.r1)("seen_connected_projects_admin_settings_overlay"),eZ="connect_admin_settings_onboarding_key";function e0(e){let t=(0,ec.md)(eQ),{show:a,isShowing:n,complete:o}=(0,e_.e)({overlay:ev.kBq,priority:eg.N.DEFAULT_MODAL},[t]);return(0,m.h)(()=>{a({canShow:e=>!e})}),r.createElement(eE.rq,{arrowPosition:eb.F_.LEFT_TITLE,description:r.createElement("p",null,(0,S.tx)("resource_connection.onboarding.use_admin_settings_to_see_all_your_connected_projects")),emphasized:!0,isShowing:n,onClose:o,primaryCta:{label:(0,S.tx)("resource_connection.onboarding.show_me"),type:"button",onClick:()=>{e.openConnectedProjectsTab(),o()},ctaTrackingDescriptor:eu.c.DONE},targetKey:eZ,trackingContextName:"Connected Projects Admin Settings Onboarding",width:350,zIndex:eX.R.MODAL})}function e1(e){let t=(0,n.wA)(),a=(0,ez.H)({useCurrentPlan:!0}),l=(0,eY.tJ)("GoToAdminRow").unwrapOr(null),i=(0,_.Rs)(eK.sMZ,{name:"initiated_first_resource_connection"}),s=r.useMemo(()=>"loaded"===i.status&&!!i.data?.currentUser?.userFlagByName,[i])&&a&&(0,o.k)().fc_initial_onboarding_enabled&&(l?.tier===eM.Ag.PRO||l?.tier===eM.Ag.ORG||l?.tier===eM.Ag.ENTERPRISE),c=r.createElement("div",{className:k.s.h24.w24.$},r.createElement(eV.I,null)),d=r.createElement(e4,{badge:e.badge});return r.createElement(r.Fragment,null,r.createElement("div",{className:"go_to_admin_row--goToAdminRow--OPVDe"},r.createElement(eS.SidebarRow,{icon:c,text:r.createElement("div",{className:k.s.pr36.$,"data-onboarding-key":e.dataOnboardingKey},r.createElement(R.E,{truncate:!0},(0,S.tx)("sidebar.admin_dashboard"))),isSelected:e.isSelected,onClick:e.onClick,badge:d,dataTestId:e.dataTestId,"data-onboarding-key":eZ})),s&&r.createElement(e0,{openConnectedProjectsTab:()=>{l?.type===eM.OL.TEAM?t(eR.$T({view:"teamAdminConsole",teamId:l?.key.parentId??"",teamAdminConsoleViewTab:eJ.Iv.CONTENT,teamAdminConsoleViewSecondaryTab:eJ.F9.CONNECTED_PROJECTS})):t(eR.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.CONTENT,orgAdminSettingsViewSecondaryTab:eq.SN.CONNECTED_PROJECTS}))}}))}function e4(e){return r.createElement(r.Fragment,null,r.createElement("div",{className:"go_to_admin_row--badgeContainer--U08cW"},e.badge),r.createElement("div",{className:"go_to_admin_row--iconContainer--tEzjQ"},r.createElement(eH.a,null)))}var e2=a(421724),e3=a(980334),e5=a(637603),e8=a(738105),e6=a(359052),e7=a(860145),e9=a(28351);function te(e){let t=(0,n.wA)(),a=e.orgUser.permission===eM._D.ADMIN,o=(0,e5.RG)(),l=(0,e5.MX)(),{groupsUserIsAdminOf:i}=(0,e5.EQ)(l,e.orgUser.user_id,!a),s=(0,ej.Xf)(e.org.id),c="loaded"===s.status?s.data?.invoices??[]:void 0;r.useEffect(()=>{t(e2.Jt({forceRefetch:!1}))},[t,e.org.id]);let{groupsToReview:d}=(0,e5.Cz)(i,c),m=i[0]?.id,u=e.org.bigma_enabled&&o&&!!m,_=(0,X.NJ)(e.org.id).data??[],p=e.org.bigma_enabled&&_.length>0,f=(0,eW.ZY)({isIntendedAudience:e.org.bigma_enabled&&!a});if(!(a||u||p))return null;let g=function(e){switch(e.view){case"orgAdminSettings":case"billingGroupDashboard":return!0;case"licenseGroup":return e.subView===e7.GN.ADMIN;case"workspace":return e.subView===e9.V0.ADMIN;default:return!1}}(e.selectedView),E=r.createElement(eG.Mn,{org:e.org,orgUser:e.orgUser,selectedView:e.selectedView,isSelected:g});return r.createElement(e1,{badge:E,onClick:()=>{let e=c&&(0,e8.hX)(c);if(a){let e=eq.J7.DASHBOARD;t(eR.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:e})),t(eR.Oe({clickedResourceType:"orgAdminSettings"}))}else u?f?t(eR.$T({view:"billingGroupDashboard",selectedTab:e6.D.REQUESTS})):(t(eR.$T({view:"licenseGroup",subView:e7.GN.ADMIN,licenseGroupId:e&&d.length>0?d[0].id:m,selectedTab:(0,e3.g)(e&&d.length>0?e7.RM.MEMBERS:e7.Uu[0])})),t(eR.Oe({clickedResourceType:"licenseGroupAdminSettings"}))):p&&(t(eR.$T({view:"workspace",subView:e9.V0.ADMIN,workspaceId:_[0].id,selectedTab:e9._C})),t(eR.Oe({clickedResourceType:"workspaceAdminSettings"})))},dataTestId:"admin-settings-link",dataOnboardingKey:em.sm,isSelected:g})}var tt=a(356572),ta=a(422444);function tr(e){let t=(0,n.d4)(e=>e.currentTeamId),a=(0,n.wA)();return t?r.createElement(eS.SidebarRow,{isSelected:e.selectedView&&"team"===e.selectedView.view,onClick:()=>{a(ta.dm(t)),a(eR.Oe({clickedResourceType:"allProjects"}))},"data-onboarding-key":"ALL_PROJECTS_LINK_ONBOARIND_KEY",icon:r.createElement(tt.t,null),text:r.createElement(R.E,{truncate:!0},(0,S.tx)("sidebar.all_projects"))}):null}var tn=a(52876),to=a(563210),tl=a(430385),ti=a(256350),ts=a(66699),tc=a(553833),td=a(649051),tm=a(858541),tu=a(446951),t_=a(414607);let tp=(0,tu.Ju)(function(e){let t=(0,n.wA)(),a=r.createElement("span",{className:k.s.fontBold.$},e.sectionName);return r.createElement(t_.Rw,{onConfirm:()=>{t(eP.de({sidebarSectionId:e.sectionId}))},confirmationTitle:(0,S.t)("sidebar.delete_section"),titleClass:"confirm_section_delete_modal--title--8Haoy text--fontPos11--2LvXf text--_fontBase--QdLsd",confirmText:(0,S.t)("sidebar.delete"),destructive:!0,autoFocusCta:!1},r.createElement("p",{className:"confirm_section_delete_modal--content--BToo-"},(0,S.tx)("sidebar.if_you_delete_section_the_section",{item:e.count>1?(0,S.t)("sidebar.items"):(0,S.t)("sidebar.item"),section:a,count:e.count,pronoun:e.count>1?(0,S.t)("sidebar.them"):(0,S.t)("sidebar.it")})))},"CONFIRM_SECTION_DELETE_MODAL",tu.ZU.YES);var tf=a(31898),tg=a(442022);let tE="custom-section-header-context-menu";function tb(){let e=(0,n.d4)(e=>e.dropdownShown);return e&&e?.type===tE?e:null}function tv(e){let t=(0,n.wA)(),a=tb();if(null==a)return r.createElement(r.Fragment,null);let o=()=>{0===a.data.favoritesCount?t(eP.de({sidebarSectionId:a.data.customSection.id})):t((0,tf.to)({type:tp,data:{sectionId:a.data.customSection.id,sectionName:a.data.customSection.name,count:a.data.favoritesCount}}))},l=()=>{e.setRenamingSectionId(a.data.customSection.id)},i=[{displayText:(0,S.t)("sidebar.rename_section"),callback:()=>l()},{displayText:(0,S.t)("sidebar.delete_section"),callback:()=>o()}];return r.createElement(tg.j,{depth:0,dispatch:t,hidePointWhenContentOffScreen:!0,items:i,lean:"right",leanPadding:0,minWidth:162,onSelectItem:(e,a)=>{e.callback&&e.callback("",null,t)},parentRect:a.data.targetRect,showPoint:!a.data.isFromRightClick})}var th=a(262234);let tw="favorited_section--emojiIcon--pDnB-",ty="favorited_section--isDragTarget--dQd5-",tT="favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",tI="favorited_section--previewContainerSidebarRowRedesigned--TewzL",tx="favorited_section--previewContainerNoDelay--buvES favorited_section--previewContainer--4E-dF _overlayBase--_overlayBase--Rkj8l",tN="favorited_section--favoriteClickTarget--Z9eur",tC="favorited_section--thumbnailContainer--C4PE-",tk="favorited_section--lowerContainer--9gDfQ",tS="favorited_section--lowerPartTitles--44fhW",tR="favorited_section--title--bWf4x ellipsis--ellipsis--Tjyfa",tA="favorited_section--fileIconContainer--u8cZj",tO="favorited_section--dialogTriggerButtonContainer--m7yPm";function tP(e){let t=(0,n.wA)(),a=(0,n.d4)(eB.wA);if(!a)return null;let o=r.createElement("span",{role:"link",tabIndex:0,onClick:()=>{t(eR.$T({view:"org",orgId:a.id,orgViewTab:th.X.HOME}))},className:"favorited_section--browseOrgLink--BvX0-"},(0,S.tx)("sidebar.browse_org_custom_sections"));return r.createElement("div",{className:"favorited_section--customSectionsEmptyStateContent--Z6jKH"},(0,S.tx)("sidebar.just_click_the_on_files_projects_and_teams_to_add_and_organize_them_here"),o)}function tL(e){return r.createElement("div",{className:"favorited_section--customSectionsEmptyState--JcvfB favorited_section--customSectionsEmptyStateContent--Z6jKH"},r.createElement(tP,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}))}var tF=a(62034),tD=a(954703),tM=a(408193),tB=a(150934),tU=a(226697),t$=a(467905),tj=a(952039),tW=a(220576),tG=a(235456),tV=a(912873),tH=a(792700),tz=a(94382),tK=a(386252),tY=a(511985),tq=a(792533),tJ=a(807949),tX=a(699547),tQ=a(594602),tZ=a(257270),t0=a(765770),t1=a(403253),t4=a(896156),t2=a(633468),t3=a(480945),t5=a(806349),t8=a(660580),t6=a(957845),t7=a(190731),t9=a(938907),ae=a(126674),at=a(157777),aa=(e=>(e.FAVORITED_PROTOTYPE_CONTEXT_MENU="favorited-prototype-context-menu",e.FAVORITED_FILE_CONTEXT_MENU="favorited-file-context-menu",e.FAVORITED_PROJECT_CONTEXT_MENU="favorited-project-context-menu",e.FAVORITED_TEAM_CONTEXT_MENU="favorited-team-context-menu",e.FAVORITED_WORKSPACE_CONTEXT_MENU="favorited-workspace-context-menu",e))(aa||{});let ar="sidebar context menu";function an(e,t,a,r){if(t.stopPropagation(),t.preventDefault(),"file"in e&&e.file){let t=e.file;a(tJ.yJ({file:{key:t.key,team_id:t.teamId,file_repo_id:t.fileRepoId,folder_id:t.folderId}}));let r=(0,tY.QJ)(e);r&&a(tX.bE({repo:r}))}a(eR.j7({type:r,data:{resource:{...e},targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}}))}let ao=(e,t,a,r={})=>e?[{displayText:t?t():"",callback:a,...r}]:[],al=[{displayText:"",separator:!0}];function ai(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.selectedView),o=(0,t4.p)(),i=e.favoritedFile.file,s=t8.M4.useFile(i?.key).data,d=i?.project?.canView,m=(0,n.d4)(e=>e.dropdownShown),u=(0,at.e)();if(null==m||null==i)return null;let _=i.editorType===eM._Y.FIGMAKE&&!u,p="favorited-file-context-menu"===m.type,f=[...ao(!0,()=>(0,S.t)("tile.dropdown.open"),()=>{(0,tU.DF)("open"),(0,tU.LP)(i.key,eM.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,ar,i.editorType??void 0),(0,tZ.Tq)(t,i)}),...ao(!c.eD&&!(0,l.ce)(),()=>(0,S.t)("tile.dropdown.open_new_tab"),()=>{(0,tZ.nz)((0,t2.jN)({file:i,allowDefaulting:!0}),i.key,a,t),(0,tU.LP)(i.key,eM.bk.FILE,e.favoritedFile?.sidebarSectionId??void 0,ar,i.editorType),(0,tU.DF)("open_in_new_tab")}),...al,...e.organizeFavoriteOptions,...al,...ao(!0,()=>(0,S.t)("file_browser.copy_link"),()=>{t(tJ.S({fileKey:i.key,url:(0,t2.jN)({file:i,attributionContext:(0,t3.b)(o,t3.d.FAVORITED_FILE_CONTEXT_MENU),allowDefaulting:!0}),source:t3.d.FAVORITED_FILE_CONTEXT_MENU})),t(eR.oB())}),...ao(!_,()=>(0,S.t)("sidebar.share"),()=>{(0,tU.DF)("share"),t((0,tf.to)({type:ae.g_,data:{fileKey:i.key,source:t0.nk.fileBrowserFavoritedContextMenu}}))}),...ao(!0,()=>(0,S.t)("tile.dropdown.show_in_project"),()=>{if((0,tU.DF)("show_in_project"),t(eR.$T({view:"folder",folderId:e.folderId})),t(tQ.an()),i.fileRepoId){let a=(0,tY.QJ)(e.favoritedFile);null!=a&&t(tQ.y$({type:t9.F.REPOS,tiles:[{type:t1.nb.REPO,repo:a,branches:[],selectedBranchKey:""}]}))}else{if(!s)return;t(tQ.y$({type:t9.F.FILES,tiles:[(0,t1.fA)(s)]}))}},{disabled:!(p&&d)})];return r.createElement(tg.j,{items:f,parentRect:m.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function as(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.dropdownShown);if(null==a)return null;let o=[...e.organizeFavoriteOptions,...al,...ao(!0,()=>(0,S.t)("file_browser.copy_link_to_team"),()=>{let a=(0,tK.bL)(e.teamId,e.orgId);t(tq.S({url:a})),t(eR.oB())})];return r.createElement(tg.j,{items:o,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorite-file-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function ac(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.dropdownShown);if(null==a)return null;let o=[...e.organizeFavoriteOptions,...al,...ao(null!==e.orgId,()=>(0,S.t)("file_browser.copy_link_to_workspace"),()=>{if(null!==e.orgId){let a=(0,t6.fO)(e.workspaceId,e.orgId);t(tq.S({url:a}))}t(eR.oB())})];return r.createElement(tg.j,{items:o,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function ad(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.dropdownShown);if(null==a)return null;let o=[...e.organizeFavoriteOptions,...al,...ao(!0,()=>(0,S.t)("file_browser.copy_link_to_project"),()=>{let a=(0,t7.EE)(e.projectId,e.orgId);t(tq.S({url:a})),t(eR.oB())})];return r.createElement(tg.j,{items:o,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}function am(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.dropdownShown);if(null==a)return null;let o=[...e.organizeFavoriteOptions,...al,...ao(!0,()=>(0,S.t)("file_browser.copy_link"),()=>{let a=(0,t5._3)(e.prototype.fileKey,e.prototype.file?.name,e.prototype.pageId);t(tq.S({url:a})),t(eR.oB())})];return r.createElement(tg.j,{items:o,parentRect:a.data.targetRect,showPoint:!1,lean:"right",recordingKey:"favorited-resource-dropdown",dispatch:t,onSelectItem:(e,a)=>{e.callback?.("",{},t,a)}})}var au=a(254490);function a_(e){let t=(0,n.wA)(),a=e.orgId,o=(0,n.d4)(e=>e.currentTeamId),l=e.favorite.team,i=(0,n.d4)(e=>e.dropdownShown),s=r.useMemo(()=>i&&i.type===aa.FAVORITED_TEAM_CONTEXT_MENU&&i.data.teamId===l.id,[i,l.id]),c=r.useCallback((e,a)=>{(0,tU.LP)(a.team?.id,eM.bk.TEAM,a.sidebarSectionId??void 0,tU.vg);let r=(0,tK.bL)(a.resourceId,a.orgId);(0,F.oJ)(e)?(d.Ay.redirect(r,"_blank"),e.stopPropagation()):(t(ta.dm(a.resourceId)),e.preventDefault())},[t]),m=r.useCallback(e=>{e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:aa.FAVORITED_TEAM_CONTEXT_MENU,data:{teamId:l.id,targetRect:a}}))},[t,l]),u=(0,tz.x)({currentOrgId:a,currentTeamId:o,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.TEAM,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(a,r)=>{let n={entrypoint:"sidebar",sectionId:r,team:{id:l.id},favoriteId:e.favorite.id,resourceType:eM.bk.TEAM};a?t(eP.V1(n)):t(eP.ox(n))}});return r.createElement(r.Fragment,null,r.createElement(eS.SidebarRow,{isSelected:e.isSelected,onClick:t=>c(t,e.favorite),showGrabber:e.showGrabber,onContextMenu:m,icon:l.imgUrl?r.createElement("div",{className:k.s.colorIcon.$},r.createElement(tV.nl,{shape:"ROUNDED_SQUARE",size:{imgSize:tV.Pf.SMALL,fallbackSize:tV.Pf.SMALL},fallbackDisplay:tH.U.HIDDEN,team:{...l,imgUrl:l.imgUrl},fallbackSvg:au.A})):r.createElement(tG.U,null),text:r.createElement(R.E,{truncate:!0},l.name)}),s&&r.createElement(as,{teamId:l.id,orgId:l.orgId,organizeFavoriteOptions:u}))}var ap=a(489),af=a(779388),ag=a(532511),aE=a(425914),ab=a(999556),av=a(373011),ah=a(249726);let aw=e=>r.createElement("div",{className:tw},e);function ay(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.currentUserOrgId),l=(0,n.d4)(e=>e.currentTeamId),i=(0,n.d4)(e=>e.dropdownShown),s=e.favorite.file,c=t8.M4.useFile(s.key).data,m=(0,aE.NN)(),u=null!==a,_=(0,o.k)().ps_benchmark&&l,p=r.useMemo(()=>i&&i.type===aa.FAVORITED_FILE_CONTEXT_MENU&&i.data.fileKey===s.key,[i,s]),f=r.useMemo(()=>i&&i.type===tE,[i]),g=r.useCallback(e=>{c||t(tJ.yJ({file:{key:s.key,team_id:s.teamId,file_repo_id:s.fileRepoId,folder_id:s.folderId,library_key:s.libraryKey}})),e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:aa.FAVORITED_FILE_CONTEXT_MENU,data:{fileKey:s.key,targetRect:a}}))},[t,s,c]),E=(0,t2.jN)({file:s,allowDefaulting:!0}),b=(e,a)=>{(0,tU.LP)(a.file?.key,eM.bk.FILE,a.sidebarSectionId??void 0,tU.vg,a.file?.editorType??void 0),(0,F.oJ)(e)?(t(ta.UN({fileKey:a.file?.key??"",entrypoint:tU.vg})),e.stopPropagation()):e.preventDefault(),a.file&&(d.Ay.redirect(E,"_blank"),t(ta.UN({fileKey:a.file.key,entrypoint:tU.vg})))},v=()=>{t(eP.qP({file:{key:s.key,editorType:s.editorType??eM._Y.DESIGN},repoId:s.fileRepoId??void 0,entrypoint:"sidebar",favoriteId:e.favorite.id}))},h=(0,tz.x)({currentOrgId:a,currentTeamId:l,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.FILE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(a,r)=>{if(a&&c){let a={entrypoint:"sidebar",sectionId:r,favoriteId:e.favorite.id,resourceType:eM.bk.FILE};t(eP.V1(a))}else a||v()}}),w=s.name,y=(0,av.AE)(w),T=e.favorite.file?m(e.favorite.file):aE.y1.DESIGN,I=y?aw(y):r.createElement(aE.w4,{size:16,type:T}),x=y?(0,av.Nn)(w,y):w,N=e.favorite.file?.project?.path,C=(0,ah.S)(N),k=C?tR:"favorited_section--titleWithoutSubtitle--BXdOW ellipsis--ellipsis--Tjyfa text--fontPos13--xW8hS text--_fontBase--QdLsd";return r.createElement("div",{className:tN},r.createElement(eS.SidebarRow,{isSelected:e.isSelected,showGrabber:e.showGrabber,onContextMenu:u||_?g:a=>{an(e.favorite,a,t,aa.FAVORITED_FILE_CONTEXT_MENU)},onClick:t=>b(t,e.favorite),icon:I,text:""!==x?r.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!1},x):r.createElement(R.E,{truncate:!0},(0,S.tx)(e.favorite.file?.editorType==="whiteboard"?"sidebar.fig_jam_file":e.favorite.file?.editorType==="slides"?"sidebar.slides_file":"sidebar.design_file")),isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED}),!p&&!f&&r.createElement("div",{className:$()(e.showPreviewDelay?tT:tx,{[tI]:(0,o.k)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`}},r.createElement("div",{className:tC},r.createElement(ab.NM,{file:s,noBorder:!0})),r.createElement("div",{className:tk},r.createElement("div",{className:tA},r.createElement(aE.w4,{size:16,type:T})),r.createElement("div",{className:tS},r.createElement("div",{className:k},e.favorite.file?.name),C&&r.createElement("div",{className:"favorited_section--subtitle--sQ1zI ellipsis--ellipsis--Tjyfa"},C)))),(u||_)&&p&&s.folderId&&r.createElement(ai,{favoritedFile:e.favorite,folderId:s.folderId,organizeFavoriteOptions:h}))}var aT=a(573556),aI=a(981733),ax=a(21113);let aN=e=>r.createElement("div",{className:tw},e);function aC(e){let t=(0,n.wA)(),a=e.favorite.project,o=(0,n.d4)(e=>e.currentTeamId),l=(0,n.d4)(e=>e.currentUserOrgId),i=(0,n.d4)(e=>e.dropdownShown),s=r.useMemo(()=>i&&i.type===aa.FAVORITED_PROJECT_CONTEXT_MENU&&i.data.projectId===a.id,[i,a.id]),c=r.useCallback(e=>{e.stopPropagation(),e.preventDefault();let r={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:aa.FAVORITED_PROJECT_CONTEXT_MENU,data:{projectId:a.id,targetRect:r}}))},[t,a.id]),d=(0,ax.E)(),m=r.useCallback((e,t)=>{(0,tU.LP)(t.project?.id,eM.bk.FOLDER,t.sidebarSectionId??void 0,tU.vg),d(t.resourceId,e)},[d]),u=(0,ez.H)({useCurrentPlan:!0}),_=(0,tz.x)({currentOrgId:l,currentTeamId:o,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.FOLDER,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(r,n)=>{let o={entrypoint:"sidebar",sectionId:n,folder:a,favoriteId:e.favorite.id};r?t(eP.Mv(o)):t(eP.jv(o))}}),p=(0,av.AE)(a.path),f=p?(0,av.Nn)(a.path,p):a.path,g=e.favorite.project.activeProjectResourceConnections?.[0];return r.createElement("div",null,r.createElement(eS.SidebarRow,{onContextMenu:c,isSelected:e.isSelected,onClick:t=>m(t,e.favorite),icon:p?r.createElement("div",null,aN(p)):r.createElement(aT.e,null),showGrabber:e.showGrabber,text:r.createElement(R.E,{truncate:!0},f),isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED,badge:u&&g?r.createElement(aI.W,{hostPlanName:g.hostPlanName,connectedPlanName:g.connectedPlanName}):void 0}),s&&r.createElement(ad,{projectId:a.id,orgId:a.orgId,organizeFavoriteOptions:_}))}var ak=a(114905),aS=a(316528),aR=a(555772),aA=a(229498);function aO({thumbnailUrl:e,isLocked:t,...a}){return t?r.createElement(aS.N,{thumbnailType:aA.F.PROTOTYPE,...a}):r.createElement(aR.V,{thumbnailUrl:e,thumbnailType:aA.F.PROTOTYPE,...a})}function aP(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.currentTeamId),l=(0,n.d4)(e=>e.currentUserOrgId),i=(0,n.d4)(e=>e.dropdownShown),s=r.useMemo(()=>i&&i.type===aa.FAVORITED_PROTOTYPE_CONTEXT_MENU&&i.data.resource.prototype.id===e.favorite.prototype.id,[i,e.favorite.prototype.id]),c=r.useMemo(()=>i&&i.type===tE,[i]),m=(0,tm.S)(),u=(0,t5._3)(e.favorite.prototype.fileKey,e.favorite.prototype.file?.name,e.favorite.prototype.pageId),_=(e,t)=>{if((0,tU.LP)(t.prototype?.fileKey,eM.bk.PROTOTYPE,t.sidebarSectionId??void 0,tU.vg),(0,F.oJ)(e)){e.stopPropagation();return}e.preventDefault(),d.Ay.redirect(u,"_blank")},p=(a,r)=>{a||t(eP.X7({prototype:{file_key:e.favorite.prototype.fileKey,page_id:e.favorite.prototype.pageId},entrypoint:"sidebar",favoriteId:r}))},f=(0,tz.x)({currentOrgId:l,currentTeamId:a,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.PROTOTYPE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(a,r)=>{if(a){let a={entrypoint:"sidebar",sectionId:r,favoriteId:e.favorite.id,resourceType:eM.bk.PROTOTYPE};t(eP.V1(a))}else p(!1,e.favorite.id)}});return r.createElement("div",{className:tN},r.createElement(eS.SidebarRow,{isSelected:e.isSelected,onContextMenu:a=>{an(e.favorite,a,t,aa.FAVORITED_PROTOTYPE_CONTEXT_MENU)},showGrabber:e.showGrabber,onClick:t=>_(t,e.favorite),icon:r.createElement(ak.F,null),text:r.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!1},e.favorite.prototype.file?.name),isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED}),!s&&!c&&r.createElement("div",{className:$()(e.showPreviewDelay?tT:tx,{[tI]:(0,o.k)().file_browser_sidebar_row_ui}),style:{transform:`translateY(${-e.previewYOffset}px)`}},r.createElement("div",{className:tC},r.createElement(aO,{isLocked:!!e.favorite.prototype.file?.hasProtoLinkPassword&&e.favorite.prototype.file?.hasProtoLinkPassword,thumbnailUrl:e.favorite.prototype.thumbnailUrl,noBorder:!0})),r.createElement("div",{className:tk},r.createElement("div",{className:tA},r.createElement(ak.F,null)),r.createElement("div",{className:tS},r.createElement("div",{className:tR},e.favorite.prototype.file?.name)))),m&&s&&e.favorite.prototype&&r.createElement(am,{prototype:e.favorite.prototype,organizeFavoriteOptions:f}))}var aL=a(125952);function aF(e){let t=(0,n.wA)(),a=e.orgId,o=(0,n.d4)(e=>e.currentTeamId),l=(0,n.d4)(e=>e.dropdownShown),i=e.favorite.workspace,s=r.useMemo(()=>l&&l.type===aa.FAVORITED_WORKSPACE_CONTEXT_MENU&&l.data.workspaceId===i.id,[l,i.id]),c=r.useCallback((e,a)=>{let r=a.workspace;(0,tU.LP)(r?.id,eM.bk.WORKSPACE,a.sidebarSectionId??void 0,tU.vg),r&&t(eR.$T({view:"workspace",subView:e9.V0.DIRECTORY,workspaceId:r.id,selectedTab:e9.dN.TEAMS}))},[t]),d=r.useCallback(e=>{e.stopPropagation(),e.preventDefault();let a={top:e.clientY,right:e.clientX,bottom:e.clientY,left:e.clientX,width:1,height:1};t(eR.j7({type:aa.FAVORITED_WORKSPACE_CONTEXT_MENU,data:{workspaceId:i.id,targetRect:a}}))},[t,i]),m=(0,tz.x)({currentOrgId:a,currentTeamId:o,isFavorited:!0,resourceId:e.favorite.resourceId,resourceType:eM.bk.WORKSPACE,currentSectionId:e.favorite.sidebarSectionId??void 0,sections:e.sections,userHasMaxFavorites:!1,updateFavorite:(a,r)=>{let n={workspace:{id:i.id,name:i.name??"",imgUrl:i.imgUrl??null},entrypoint:"sidebar",sectionId:r,favoriteId:e.favorite.id};a?t(eP.ZW(n)):t(eP.if(n))}}),u=e.favorite.workspace?r.createElement(aL.z6,{entity:e.favorite.workspace,size:16}):r.createElement(tt.t,{className:k.s.colorIcon.$});return r.createElement("div",null,r.createElement(eS.SidebarRow,{isSelected:e.isSelected,showGrabber:e.showGrabber,onClick:t=>c(t,e.favorite),onContextMenu:d,icon:u,text:r.createElement(R.E,{truncate:!0}," ",i.name)}),s&&r.createElement(ac,{workspaceId:i.id,orgId:e.favorite.orgId,organizeFavoriteOptions:m}))}var aD=a(7086);let aM=(e,t)=>{let a=e.cloneNode(!0),r=document.createElement("div");return r.className="favorited_generic_row--favorite--vFcy4 favorited_generic_row--_favorite--jiaJX sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd",Object.assign(r.style,{position:"absolute",top:"-100%",left:"-100%",width:`${e.clientWidth}px`,height:`${e.clientHeight}px`,overflow:"hidden",zIndex:-1}),t&&(a.classList.add(t),a.classList.add(k.s.colorText.$)),r.appendChild(a),document.body.appendChild(r),r};function aB(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.dragState),o=(0,n.d4)(e=>e.currentUserOrgId),l=(0,tW.R)(),{hasPendingRequest:i,getUpgradePathway:s,getUpgradeEligibility:c,getPlanAndPlanUser:d,getHasProvisionalAccess:m,getShouldShowCurf:u,getShouldShowScim:_,getIsUpgradeHandlerLoading:p,getIsEligibleForProvisionalAccess:f}=(0,ag.wH)({folderId:e.favorite.resourceType===eM.bk.FOLDER?e.favorite.resource.project?.id??null:null,isDraftsMove:!0}),g=(0,af.f4)((0,ec.md)(af.yH),l),[E,b]=r.useState(!1),v=e.favorite.resourceType,h=(0,eA._6)(),[w,y]=r.useState(!1),T=e.rearrangeDragState?.draggedOverFavoriteId===e.favorite.resource.id&&!w,[I,x]=r.useState(!1),N=r.useRef(null),k=(0,tm.S)(),S=E&&!k,R=(0,at.e)(),A=e.isSelected||(()=>{switch(v){case eM.bk.FOLDER:return"folder"===h.view&&h.folderId===e.favorite.resource.resourceId;case eM.bk.TEAM:return"team"===h.view&&h.teamId===e.favorite.resource.resourceId;case eM.bk.WORKSPACE:return"workspace"===h.view&&h.subView===e9.V0.DIRECTORY&&h.workspaceId===e.favorite.resource.resourceId;default:return!1}})(),O=(t,a)=>{let r=p();return(0,af.Zm)({files:t,repos:a,isDestinationDrafts:e.favorite.resourceType===eM.bk.FOLDER&&e.favorite.resource.project?.path==="",enabledForOrgOnly:!1,originFolderIdToPath:g,isBillingRemodelEnabled:l,hasPendingRequest:i,getUpgradePathway:s,getUpgradeEligibility:c,getPlanAndPlanUser:d,getHasProvisionalAccess:m,getShouldShowCurf:u,getShouldShowScim:_,loading:r,getIsEligibleForProvisionalAccess:f})};return r.createElement("div",{className:T?e.rearrangeDragState?.dropBefore?"favorited_generic_row--dropBefore--xZvBN sidebar--dropBefore--wZDYO":e.rearrangeDragState?.dropInto?"favorited_generic_row--dropInto--VKuX5":"favorited_generic_row--dropAfter--a64Ax sidebar--dropAfter--JEX7d":void 0},r.createElement(ti.Y,{key:e.favorite.resource.resourceId,isDragTarget:e=>{let t=new ap.le(e);return y(t.isFile()),a.type!==e$.R.SidebarSection&&!t.isFile()},onTargetDragEnter:(t,r)=>{let n=new ap.le(t),o=!1;(a.type===e$.R.Favorite||n.isFigFiles()||n.isRepos()||n.isPrototypes()||n.isTiles())&&((n.isFigFiles()||n.isRepos()||n.isTiles())&&(o=e.favorite.resourceType===eM.bk.FOLDER),e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:o?r.upperQuarter:r.upper,dropInto:o&&r.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId}),x(o))},onTargetDragLeave:t=>{let r=new ap.le(t);(a.type===e$.R.Favorite||r.isFigFiles()||r.isRepos()||r.isPrototypes()||r.isTiles()&&T)&&(e.clearRearrangeDragState(e.favorite.resource.id),x(!1))},onTargetDrop:r=>{let n=new ap.le(r);if(e.rearrangeDragState?.dropInto&&e.favorite.resourceType===eM.bk.FOLDER&&e.favorite.resource.project)(0,aD.A)(t,e.favorite.resource.project,e.favorite.resource.project.team,n,l,O,R),t(td.T());else if(n.isFigFiles()||n.isRepos()||n.isPrototypes()||n.isTiles())e.onSetResourceFavoriteDragDrop(r);else if(a.type===e$.R.Favorite&&T){let r=a.data;e.reorderOrInsertFavorite(r.resource.id,r.resourceType),t(td.T())}e.clearRearrangeDragState(e.favorite.resource.id),x(!1)},onTargetDragQuadrantUpdate:t=>{e.updateRearrangeDragState({draggedOverFavoriteId:e.favorite.resource.id,dropBefore:I?t.upperQuarter:t.upper,dropInto:I&&t.middleVerticalHalf,draggedOverSectionId:e.favorite.resource.sidebarSectionId})},draggable:!1},r.createElement("div",{onMouseEnter:()=>{e.preventHoverStyle||b(!0)},onMouseLeave:()=>{e.setShowPreviewDelay(!1),b(!1)},onDragStart:a=>{a.dataTransfer.effectAllowed="move";let r=new ap.le(a.dataTransfer);r.setArbitraryData(e.favorite.resource.id);let n=a.currentTarget.firstElementChild;if(null===n)return;let o=n.getBoundingClientRect(),l=a.clientX-o.left,i=a.clientY-o.top;N.current=aM(n,"favorited_generic_row--draggable--QinZd"),r.setDragImage(N.current,l,i),t(td.v({type:e$.R.Favorite,data:e.favorite}))},onDragEnd:a=>{N.current&&N.current.remove(),t(td.T()),e.clearRearrangeDragState(e.favorite.resource.id),x(!1)},draggable:!e.isFavoritesToMove_DEPRECATED},(()=>{switch(v){case eM.bk.FILE:if(!e.favorite.resource.file)return null;return r.createElement(ay,{favorite:e.favorite.resource,isHover:E,showGrabber:S,isSelected:A,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED});case eM.bk.PROTOTYPE:if(!e.favorite.resource.prototype)return null;return r.createElement(aP,{favorite:e.favorite.resource,isHover:E,showGrabber:S,isSelected:A,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED});case eM.bk.FOLDER:if(!e.favorite.resource.project)return null;return r.createElement(aC,{favorite:e.favorite.resource,isHover:E,showGrabber:S,isSelected:A,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections,isFavoritesToMove_DEPRECATED:e.isFavoritesToMove_DEPRECATED});case eM.bk.TEAM:if(!e.favorite.resource.team||!o)return null;return r.createElement(a_,{favorite:e.favorite.resource,orgId:o,isHover:E,showGrabber:S,isSelected:A,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});case eM.bk.WORKSPACE:if(!e.favorite.resource.workspace||!o)return null;return r.createElement(aF,{favorite:e.favorite.resource,orgId:o,isHover:E,showGrabber:S,isSelected:A,previewYOffset:e.previewYOffset,showPreviewDelay:e.showPreviewDelay,sections:e.sections});default:(0,C.xb)(v)}})())))}var aU=a(887645),a$=a(523860),aj=a(85206);function aW(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.currentTeamId),o=(0,Y.dq)()??null,l=(0,H.sb)(e.favorites,e.order),i=(0,eA._6)(),[s,c]=r.useState(!1),d=(0,n.d4)(e=>e.favorites.movingResource),m=(0,tm.S)(),_=(0,n.d4)(e=>e.favorites.collapsedCustomSections),p=m&&e.section?!_.has(e.section?.id):!_.has("favorited"),[f,g]=r.useState(!1),[E,b]=r.useState(),[v,h]=r.useState(),w=(0,n.d4)(e=>e.dragState),y=(0,u.ZC)(w);r.useEffect(()=>{w.type===e$.R.None&&y&&y.type!==e$.R.None&&h(void 0)},[w,y]),r.useEffect(()=>{!e.isCurrentHoveredSection&&w.type===e$.R.SidebarSection&&v&&h(void 0)},[e.isCurrentHoveredSection,v,w]);let[T,I]=r.useState(void 0),[x,N]=r.useState(!0),C=r.useRef(null),R=tb();r.useEffect(()=>{T===v?.draggedOverFavoriteId&&h(void 0),I(void 0)},[v,h,T,I]);let A=r.useCallback(a=>{e.section?.id&&(a.dataTransfer.effectAllowed="move",new ap.le(a.dataTransfer).setArbitraryData(e.section.id),t(td.v({type:e$.R.SidebarSection,data:e.section.id})))},[t,e.section]),O=r.useCallback(()=>{(0,tU.xs)(!p);let a=new Set(_);m&&e.section?(aU.Fp({type:"topLevel",id:"custom",orgId:o,sectionId:e.section?.id},!p),p?a.add(e.section.id):a.delete(e.section.id)):(aU.Fp({type:"topLevel",id:"favorited",orgId:o},!p),p?a.add("favorited"):a.delete("favorited")),t(eP.U6({collapsedCustomSections:a}))},[p,o,e.section,_,m,t]),P=(a,r)=>{let n;let o=l.map(e=>e.resource.id);if(!v?.draggedOverFavoriteId)return o;let i=-1!==o.indexOf(a);if(i)n=(0,tl.Pe)(o,a,v.draggedOverFavoriteId,v.dropBefore);else{let e=o.indexOf(v.draggedOverFavoriteId);v.dropBefore||(e+=1),n=[...o.slice(0,e),a,...o.slice(e)]}if((0,tU.hp)(),b(a),e.section?.id){i?t(eP.vg({sectionId:e.section.id,orderedFavoriteIds:n})):t(eP.V1({favoriteId:a,sectionId:e.section.id,resourceType:r,orderedFavoriteIds:n}));return}i||t(eP.V1({favoriteId:a,sectionId:void 0,resourceType:r})),t(W.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:n,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds},userInitiated:!0}))},L=r.useCallback(e=>{e.stopPropagation(),E&&b(void 0)},[E]),F=r.useCallback(()=>{N(!0)},[]),D=r.useCallback(e=>{let t=new ap.le(e);return c(t.isFile()),t.isFigFiles()||t.isRepos()||t.isPrototypes()||t.isTiles()},[]),M=r=>{let n=new ap.le(r),s=[],c=[],d=[];if(g(!1),n.isFigFiles()){if(!(s=n.getData()))return!1}else if(n.isPrototypes()){if(!(d=n.getData()))return!1}else if(n.isRepos()){let e=n.getReposData();if(!e)return!1;c=e.repos}else if(n.isTiles()){let e=n.getTilesData();if(!e)return!1;s=e.files,c=e.repos,d=e.prototypes}s=s.filter(e=>!e.is_favorited),c=c.filter(e=>!e.is_favorited),d=d.filter(e=>!e.is_favorited);let m=l.map(e=>e.resource.id),u=s.length+c.length+d.length,_=(0,H.kK)(o);if(u+l.length>_)return t(tj.F.enqueue({message:(0,S.t)("tile.favoriting.max_favorites",{maxFavorites:_})})),!1;let p=null;return v&&(p=m.indexOf(v.draggedOverFavoriteId)+(v.dropBefore?0:1)),t(eP.N9({files:s,repos:c,prototypes:d,orgId:o,teamId:a,selectedView:i.view,entrypoint:"sidebar",insertAtIndex:p,orderedFavorites:m,sectionId:e.section?.id,fileBrowserPrefs:e.fileBrowserPreferences})),!0},B=r.useCallback(()=>{g(!0)},[]),U=r.useCallback(()=>{g(!1)},[]),j=$()([k.s.relative.$,"favorited_section--showsCaret--vjo7-",f||v?.draggedOverSectionId&&e.section&&!s&&v.draggedOverSectionId===e.section.id?ty:""]),G=m?e.section?.name===""||e.section?.name===void 0?(0,S.tx)("sidebar.starred"):e.section.name:(0,S.tx)("sidebar.favorite_files"),V=R?.data?.customSection?.id===e.section?.id,z=e.isCreatingNewSection||e.isRenaming,K=$()({"favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa":!0,"favorited_section--actionButtonsVisibleOnHover--AOJ8E":!z,"favorited_section--actionButtonsVisible--Ey4QI":V&&!z}),q=e.section?.name===void 0?(0,S.t)("sidebar.new_section"):(0,H.R3)(e.section)?(0,S.t)("sidebar.starred"):e.section.name;return r.createElement(ti.Y,{className:j,isDragTarget:D,draggable:!1,onTargetDrop:M,onTargetDragEnter:B,onTargetDragLeave:U},r.createElement("div",null,r.createElement("div",{draggable:!0,onDragStart:A,className:K,onClick:O,onContextMenu:a=>{a.stopPropagation(),a.preventDefault();let r={top:a.clientY,right:a.clientX,bottom:a.clientY,left:a.clientX,width:1,height:1};t(eR.j7({type:tE,data:{customSection:e.section,favoritesCount:l.length,isFromRightClick:!0,targetRect:r}}))},role:"button",tabIndex:0},r.createElement(ei.B,{className:m?"favorited_section--expandCaretCustomSections--SUjwA":"favorited_section--expandCaret--LgAK5 sidebar--expandCaret--eXGWm",svg:p?a$.A:aj.A}),r.createElement("div",{className:"favorited_section--sectionName--PrU2k ellipsis--ellipsis--Tjyfa","data-onboarding-key":1===e.allSections.length?null:"FAVORITES_ONBOARDING_KEY"},e.isRenaming?r.createElement(t$.p,{className:"favorited_section--input--8x-Vh",placeholderValue:q,submit:a=>{e.isCreatingNewSection?(d?t(eP.yH({name:a,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0,newResourceForSection:d})):t(eP.YI({name:a,insertAtIndex:e.sectionIndex,currentOrderedSections:e.allSections.map(e=>e.id),prefs:e.fileBrowserPreferences??void 0})),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0)):e.section&&(t(eP.vg({sectionId:e.section.id,name:a.trim()})),e.setRenamingSectionId&&e.setRenamingSectionId(void 0))},cancel:()=>{e.isCreatingNewSection?(e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(void 0),d&&t(eP.to({movingResource:void 0}))):e.setRenamingSectionId&&e.setRenamingSectionId(void 0)},maxLength:25}):G),o&&r.createElement("div",{className:"favorited_section--actionButtons--VZ6Er"},r.createElement("div",{className:tO},r.createElement(tF.d,{"aria-expanded":!!R,"aria-label":(0,S.t)("favorited_resources.settings_tooltip"),onClick:a=>{R?t(eR.oB()):C.current&&t(eR.j7({type:tE,data:{targetRect:C.current.getBoundingClientRect(),customSection:e.section,favoritesCount:l.length}})),a.stopPropagation(),a.preventDefault()},ref:C},r.createElement(tM.J,null))),r.createElement(aG,{newCustomSectionIndex:e.sectionIndex,setNewCustomSectionIndex:e.setNewCustomSectionIndex})))),r.createElement("div",{className:p?void 0:k.s.hidden.$},(()=>{if(0===l.length){let t=1===e.allSections.length&&(0,H.R3)(e.allSections[0]);return m||e.isCreatingNewSection?m&&t&&!e.isCreatingNewSection?r.createElement(tP,{setNewCustomSectionIndex:e.setNewCustomSectionIndex}):r.createElement(r.Fragment,null):r.createElement(aV,{setNewCustomSectionIndex:e.setNewCustomSectionIndex})}return r.createElement("div",{onMouseMove:L,onMouseLeave:F},l.map(t=>{let a=E===t.resource.id;return r.createElement(aB,{key:t.resource.resourceId,clearRearrangeDragState:I,favorite:t,isSelected:a,onSetResourceFavoriteDragDrop:M,preventHoverStyle:void 0!==E,previewYOffset:e.previewYOffset,rearrangeDragState:v,reorderOrInsertFavorite:P,sections:e.allSections,setShowPreviewDelay:N,showPreviewDelay:x,updateRearrangeDragState:h})}))})()))}function aG(e){return r.createElement("div",{className:tO},r.createElement(tD.K,{"aria-label":(0,S.t)("favorited_resources.create_a_new_section_tooltip"),htmlAttributes:{"data-tooltip":(0,S.t)("favorited_resources.create_a_new_section_tooltip"),"data-tooltip-type":"text"},onClick:t=>{t.stopPropagation(),e.setNewCustomSectionIndex&&e.setNewCustomSectionIndex(e.newCustomSectionIndex)}},r.createElement(tB.x,null)))}function aV(e){return r.createElement("div",{className:"favorited_section--favoritedSectionEmptyState--Xhxgt sidebar--emptySection--SKfhv sidebar--sidebarSection---c9jn text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,S.tx)("sidebar.to_favorite_files_you_use_often"))}function aH(e){let t=(0,H.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces);return r.createElement(aW,{favorites:t,order:e.fileBrowserPreferences?.orderedFavoritedResourceIds??void 0,fileBrowserPreferences:e.fileBrowserPreferences,allSections:e.userSidebarSections??[],sectionIndex:0,previewYOffset:e.previewYOffset})}function az(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.dragState),o=(0,n.d4)(e=>e.favorites.newCustomSectionIndex),l=(0,n.d4)(e=>e.favorites.favoritesCount),i=(0,H.ds)(e.favoritedFiles,e.favoritedPrototypes,e.favoritedProjects,e.favoritedTeams,e.favoritedWorkspaces),[s,c]=r.useState(),[d,m]=r.useState(),[u,_]=r.useState(!1),p=(0,tm.S)(),f=r.useMemo(()=>(0,H.t$)(e.userSidebarSections??[],e.fileBrowserPreferences?.orderedSidebarSections??void 0),[e.userSidebarSections,e.fileBrowserPreferences?.orderedSidebarSections]);r.useMemo(()=>{l&&l<15&&i.length>=15&&(0,ts.YQ)({id:tc.FAVORITES_COUNT_CROSSED_THRESHOLD_EVENT}),t(eP.lF({favoritesCount:i.length}))},[l,i.length,t]);let g={},E=[];i.forEach(e=>{e.resource.sidebarSectionId?g[e.resource.sidebarSectionId]?g[e.resource.sidebarSectionId].push(e):g[e.resource.sidebarSectionId]=[e]:E.push(e)});let b=r.useCallback(()=>a.type===e$.R.Favorite||a.type===e$.R.SidebarSection,[a]),v=r.useCallback(e=>{a.type===e$.R.SidebarSection&&_(e.upper)},[a]),h=r.useCallback(()=>{let r="starred"===s?void 0:s;if(a.type===e$.R.Favorite){let e=a.data;t(eP.V1({favoriteId:e.resource.id,sectionId:r,resourceType:e.resourceType}))}else if(a.type===e$.R.SidebarSection&&r){let n=f.map(e=>e.id)??[],o=(0,tl.Pe)(n,a.data,r,u);t(W.yJ({prefs:{id:e.fileBrowserPreferences?.id||"optimistic-id",orderedFavoritedResourceIds:e.fileBrowserPreferences?.orderedFavoritedResourceIds,orderedTeamIds:e.fileBrowserPreferences?.orderedTeamIds,orderedLicenseGroupIds:e.fileBrowserPreferences?.orderedLicenseGroupIds,orderedSidebarSections:o},userInitiated:!0}))}_(!1),c(void 0),t(td.T())},[s,t,a,u,f,e.fileBrowserPreferences]),w=r.useCallback(e=>()=>{c(e)},[]),y=r.useCallback(()=>{c(void 0)},[]),T=r.useCallback(e=>{t(eP.pS({newCustomSectionIndex:e}))},[t]);if(0===f.length&&p&&void 0===o)return r.createElement(tL,{setNewCustomSectionIndex:T});let I=r.createElement("div",{className:k.s.mb8.$},r.createElement(aW,{allSections:f,favorites:[],fileBrowserPreferences:e.fileBrowserPreferences,isCreatingNewSection:!0,isRenaming:!0,order:[],previewYOffset:e.previewYOffset,sectionIndex:o||0,setNewCustomSectionIndex:T,setRenamingSectionId:m}));return r.createElement("div",{className:k.s.mt8.$},0===o&&I,f.map((t,n)=>{let l=a.type===e$.R.Favorite?ty:u?"favorited_section--dropBefore--6poyi sidebar--dropBefore--wZDYO":"favorited_section--dropAfter--7G6L7 sidebar--dropAfter--JEX7d",i=$()([s===t.id?l:"",k.s.mb8.$]);return r.createElement("div",{key:t.id},r.createElement(ti.Y,{className:i,isDragTarget:b,draggable:!1,onTargetDragQuadrantUpdate:v,onTargetDrop:h,onTargetDragEnter:w(t.id),onTargetDragLeave:y},r.createElement(aW,{allSections:f,favorites:g[t.id]??[],isCurrentHoveredSection:s===t.id,isRenaming:d===t.id,order:t.orderedFavoritedResourceIds??[],previewYOffset:e.previewYOffset,section:t,sectionIndex:n,setNewCustomSectionIndex:T,setRenamingSectionId:m})),o===n+1&&I)}),p&&r.createElement(tv,{setRenamingSectionId:m}))}var aK=a(129170),aY=a(214014),aq=a(863270),aJ=a(17753),aX=a(991675),aQ=a(534033),aZ=a(572073),a0=a(329748),a1=a(890257),a4=a(824007);let a2=(0,tu.Ju)(function(e){let[t,a]=(0,r.useState)(null),o=(0,n.wA)(),l=(0,aQ.Gs)(),i=(0,J.TA)(),s=(0,n.d4)(e=>e.teamUserByTeamId),c=(0,n.d4)(e=>i?e.authedUsers.byId[i]?.plans?.filter(e=>!e.is_org):null),d=(0,S.t)("file_browser.planless_favorites.add_favorites_to_modal_title"),m=()=>o(tf.Ce()),u={};i&&(0,a0._)(s,i).forEach(e=>{e.drafts_folder_id&&(u[e.team_id]=e.drafts_folder_id)});let _=(e,t)=>{t&&o(aZ.Cy({files:e,folderName:"",folderId:t,isDraftsToMove:!0,fromFileModal:!0}))};return r.createElement(a1.XV,{title:d,fixedTop:!0,minWidth:480,maxWidth:480,onClose:m,truncateTitleText:!0},r.createElement("div",{className:"move_favorites_modal--modalBody---Rdx2"},c&&r.createElement(eo.P,{width:480},r.createElement("div",{className:k.s.pl8.pr8.$},c.map(e=>r.createElement(a3,{key:e.plan_id,planId:e.plan_id,name:e.name,imgUrl:e.img_url,checked:t?.plan_id===e.plan_id,onSelect:()=>a(t?.plan_id===e.plan_id?null:e)})))),r.createElement("div",{className:"move_favorites_modal--footer--ERUeX"},r.createElement(ea.nR,{onClick:m},(0,S.tx)("modal.cancel")),r.createElement(ea.vd,{disabled:!t,onClick:()=>{let a=t?.is_org?null:t?.plan_id,r=e.favorites.reduce((e,t)=>t.resourceType===eM.bk.FILE&&t.resource.file?.key?{...e,[t.resource.file?.key]:!0}:e,{}),n={},i=l.filter(e=>{let t=!!r[e.key];return t&&(n[e.key]=!0),t}),s=e.favorites.filter(e=>!(e.resourceType===eM.bk.FILE&&e.resource.file?.key)||!n[e.resource.file?.key]).map(e=>e.resource.id);o(eP.Ic({favoriteIds:s,teamId:a})),a&&_(i,u[a]),m()}},(0,S.t)("modal.confirm")))))},"MoveFavoritesModal");function a3(e){return r.createElement("button",{"data-testid":`${e.name}-button`,className:$()("move_favorites_modal--teamRow--qNRGf",e.checked?k.s.colorBgSelected.$:""),onClick:e.onSelect},r.createElement("div",{className:"move_favorites_modal--iconContainer--oDATP"},e.checked?r.createElement(ei.B,{className:k.s.colorIcon.$,svg:a4.A}):r.createElement(tV.nl,{size:tV.Pf.MEDIUM,shape:"CIRCLE",fallbackDisplay:tH.U.HIDDEN,team:{id:e.planId,imgUrl:e.imgUrl}})),r.createElement("div",{className:"move_favorites_modal--teamName--pVqcu ellipsis--ellipsis--Tjyfa"},r.createElement("span",{className:"move_favorites_modal--destinationHeading--mwxLX"},e.name)))}var a5=a(507015);let a8="favorited_drafts_to_move";function a6(e){let t=(0,n.wA)(),[a,o]=r.useState(!0),l=(0,J.TA)(),i=(0,n.d4)(e=>e.favorites.collapsedCustomSections),s=e.teamUser?.planlessFavoritedFiles?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFilesKeySet.has(t.resourceId)),c=e.teamUser?.planlessFavoritedPrototypes?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedPrototypesIdSet.has(t.resourceId)),d=e.teamUser?.planlessFavoritedProjects?.filter(t=>!e.dataDriftCorrectedTeamResources?.favoritedFoldersIdSet.has(t.resourceId)),m=(0,H.ds)(s,c,d),u=!i.has(a8),_=r.useCallback(()=>{aU.Fp({type:"topLevel",id:a8,orgId:null},!u),u?i.add(a8):i.delete(a8),t(eP.U6({collapsedCustomSections:i}))},[u,i,t]),p=r.useCallback(()=>{t(eP.vr({favoriteIds:m.map(e=>e.id)}))},[t,m]);if(0===m.length)return r.createElement(r.Fragment,null);let f=m.map(t=>r.createElement(aB,{key:t.resource.resourceId,clearRearrangeDragState:g.lQ,favorite:t,isFavoritesToMove_DEPRECATED:!0,isSelected:!1,onSetResourceFavoriteDragDrop:g.lQ,preventHoverStyle:!1,previewYOffset:e.previewYOffset,rearrangeDragState:void 0,reorderOrInsertFavorite:g.lQ,sections:[],setShowPreviewDelay:o,showPreviewDelay:a,updateRearrangeDragState:g.lQ}));return r.createElement(aq.fu,{name:aX.e0.FAVORITES_TO_MOVE_SECTION,properties:{userId:l,numFiles:m.length}},r.createElement("div",{className:$()("favorited_section--moveFavoritesContainer--qp39R",k.s.pt4.pb4.ml8.mr8.mb8.$)},r.createElement("div",{className:$()(k.s.flex.itemsCenter.justifyBetween.pl8.pr8.$,"favorited_section--favoriteToMoveHeaderContainer--2RB9p favorited_section--sectionHeaderContainer--otgqF sidebar--sectionHeaderContainer--TcvBb sidebar--sectionHeaderName--xToHG sidebar--sectionName--4N7hT sidebar--sectionText--KAGhn sidebar--sectionContent--NHX7b ellipsis--ellipsis--Tjyfa")},r.createElement("div",{onClick:_,className:k.s.flex.itemsCenter.justifyBetween.$,role:"button",tabIndex:0},r.createElement(ei.B,{className:$()(k.s.flex.itemsCenter.p6.mr12.colorIcon.$,"favorited_section--moveFavoritesContainerHeaderLeftBlockItems--pl1Hf"),svg:u?a$.A:aj.A}),(0,S.tx)("sidebar.move_these_starred_items"),r.createElement(ei.B,{svg:a5.A,className:$()("favorited_section--helpIcon--vfl5Y",k.s.flex.itemsBaseline.ml4.$),"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":(0,S.t)("file_browser.planless_favorites.your_favorited_items_tooltip"),"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200})),u?null:r.createElement(aK.Ex,{text:m.length>99?"99+":`${m.length}`,color:aK.zE.DEFAULT,className:k.s.mr8.colorText.colorBgSelectedSecondary.$})),u?r.createElement("div",{className:"favorited_section--favoritesToMoveContentContainer--xYv6p"},f,r.createElement("div",{className:k.s.flex.justifyBetween.m8.h24.$},r.createElement(aY.$$,{className:"favorited_section--favoritesToMoveActionButtons--FUt77",onClick:()=>{t(tf.to({type:a2,data:{favorites:m}}))}},(0,S.tx)("file_browser.planless_favorites.add_to_sidebar")),r.createElement(aY.nR,{className:"favorited_section--unstarAllButton--Rhy3- favorited_section--favoritesToMoveActionButtons--FUt77",onClick:p},(0,S.tx)("file_browser.planless_favorites.unstar_all")))):null))}function a7(e){let t=(0,n.d4)(e=>e.currentTeamId),a=(0,n.wA)();return t?r.createElement(eS.SidebarRow,{isSelected:e.selectedView&&"limitedTeamSharedProjects"===e.selectedView.view,onClick:()=>{a(ta.eP()),a(eR.Oe({clickedResourceType:"limitedTeamSharedProjects"}))},icon:r.createElement(tt.t,null),text:r.createElement(R.E,{truncate:!0},(0,S.tx)("sidebar.all_shared_projects"))}):null}var a9=a(571211);function re(e){return e?(0,S.t)("sidebar.browse.all_workspaces"):(0,S.t)("sidebar.browse.all_teams")}function rt(){let e=(0,n.d4)(e=>e.currentUserOrgId),t=(0,n.d4)(t=>e?t.orgById[e]:null),a=(0,X.c4)(e).data??!1;return t&&e?r.createElement(r.Fragment,null,re(a)):null}function ra({hasWorkspaces:e}){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.currentUserOrgId),o=(0,n.d4)(e=>e.selectedView),l=(0,tm.S)(),i=(0,n.d4)(e=>a?e.orgById[a]:null),s="org"===o.view&&o.orgId===a,c=re(e);return i&&a&&c?r.createElement(eS.SidebarRow,{isSelected:s,onClick:()=>{t(eR.$T({view:"org",orgId:a,orgViewTab:th.X.HOME})),t(eR.Oe({clickedResourceType:"org",resourceIdOrKey:a}))},icon:l?r.createElement(tt.t,{className:k.s.colorIcon.$}):r.createElement(a9.Y,null),text:r.createElement(R.E,{truncate:!0},c)}):null}var rr=a(182578),rn=a(460396);let ro="seen_team_admin_moved_unassigned_drafts_onboarding",rl=(0,ep.r1)(ro);function ri(){let e=(0,ec.md)(rl),{show:t,isShowing:a,complete:n}=(0,e_.e)({overlay:ev.tZO,priority:eg.N.DEFAULT_MODAL},[e]);return(0,m.h)(()=>{t({canShow:e=>!e})}),r.createElement(eE.rq,{arrowPosition:eb.F_.LEFT_TITLE,clickOutsideToHide:!0,description:(0,S.tx)("team_admin.onboarding.unassigned_drafts.description"),isShowing:a,onClose:n,primaryCta:{label:(0,S.tx)("general.got_it"),type:"button",onClick:n,ctaTrackingDescriptor:eu.c.DONE},secondaryCta:{label:(0,S.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/4420549259799",ctaTrackingDescriptor:eu.c.LEARN_MORE},shouldCenterArrow:eb.EL.FALLBACK,targetKey:ru,title:(0,S.tx)("team_admin.onboarding.unassigned_drafts.title"),trackingContextName:rn.o8,userFlagOnShow:ro})}var rs=a(499668),rc=a(613733),rd=a(253332),rm=a(407638);let ru="PRO_ADMIN_SETTINGS_LINK_ONBOARING_KEY";function r_(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.currentTeamId),o=(0,n.d4)(e=>e.teams),l=(0,n.d4)(rm.getPermissionsState),i=!!a&&(0,rm.hasAdminRoleAccessOnTeam)(a,l),s=(0,eY.px)(),c=(0,eY.W8)(s),d=(0,rc.MF)({label:rc.A5.ProAdminSettingsLink.canAdmin,oldValue:f.Qw.useMemoizedLoaded(i),newValue:c,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_5)}).unwrapOr(!1),m=a?o[a]:null,u=f.Qw.useMemoizedLoaded({isProTeam:!!m&&m.pro_team,hasProAccess:!!m&&(0,rd.w5)(m)}),_=(0,eY.No)(),p=(0,r.useMemo)(()=>_.transform(({tier:e})=>({isProTeam:e===eM.Ag.PRO,hasProAccess:e===eM.Ag.PRO||e===eM.Ag.STUDENT})),[_]),g=(0,rc.MF)({label:rc.A5.ProAdminSettingsLink.teamTierData,oldValue:u,newValue:p,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_5)});if("loaded"!==g.status)return null;let E=g.data;if(!a||!d||!E.hasProAccess)return null;let b=e.selectedView&&"teamAdminConsole"===e.selectedView.view,v=r.createElement(eG.e9,{planType:eW.ps.TEAM,planId:a,isSelected:b,isDataLoaded:!0,isOrgAdmin:!1});return r.createElement(r.Fragment,null,r.createElement(e1,{badge:E.isProTeam?v:void 0,isSelected:b,dataTestId:"admin-settings-link",dataOnboardingKey:ru,onClick:()=>{t(eR.$T({view:"teamAdminConsole",teamId:a,isProTeam:E.isProTeam,teamAdminConsoleViewTab:E.isProTeam?eJ.Iv.DASHBOARD:eJ.Iv.MEMBERS})),t(eR.Oe({clickedResourceType:"teamAdminSettings",resourceIdOrKey:a}))}}),r.createElement(ri,null))}var rp=a(116920),rf=a(615233),rg=a(790840),rE=a(187782),rb=a(174121),rv=a(845037),rh=a(752181),rw=a(679996),ry=a(750993),rT=a(133318),rI=a(178806),rx=a(359567);function rN(){return r.createElement("div",{className:"base_upgrade_section--divider--k-uOp sidebar--divider--sHsz4"})}function rC(e){return r.createElement(aq.fu,{name:e.trackingContext,properties:e.trackingProperties},r.createElement("div",{className:e.demure?"base_upgrade_section--contentMindful--eOyhd base_upgrade_section--content--95XrT":"base_upgrade_section--content--95XrT"},e.onDismiss&&r.createElement(rT.Jn,{className:"base_upgrade_section--closeButton--cbjWt",onClick:e.onDismiss}),e.header&&r.createElement("div",{className:k.s.wFull.if(e.demure,k.s.font13.lh24,k.s.mb12).$},e.header,!e.demure&&r.createElement(rN,null)),!!e.icon&&e.icon,e.countDownDaysLeft&&r.createElement("div",{className:"base_upgrade_section--countdownTicker--6YLVt"},r.createElement(R.E,{children:e.countDownDaysLeft,fontWeight:"medium",fontSize:14})),r.createElement("div",{className:e.demure?"base_upgrade_section--textContainerMindful--CttjJ":"base_upgrade_section--textContainer--ObHaO"},e.titleText&&r.createElement("p",{className:"base_upgrade_section--title--MLhT1"},e.titleText),r.createElement("p",null,e.bodyText)),r.createElement(rx.hK,{height:12}),r.createElement(rI.Ih,{onClick:e.onClickCTA,"data-testid":e.ctaDataTestId,disabled:e.disabled,trackingProperties:e.ctaTrackingProperties},e.ctaText)))}let rk="upgrade_section--upgradeTextEmphasized--aQCr9";var rS=(e=>(e[e.UPGRADE=0]="UPGRADE",e[e.CREATE=1]="CREATE",e))(rS||{});function rR(e){let t=(0,n.wA)(),a=e.type,o=r.createElement("span",{className:rk},(0,S.t)("edu.sidebar_section.verified"));return r.createElement(rC,{trackingContext:0===a?"Edu Upgrade Section":"Edu Create Section",icon:r.createElement(rg.o,null),bodyText:r.createElement(r.Fragment,null,o," ",0===a?(0,S.t)("edu.sidebar_section.upgrade"):(0,S.t)("edu.sidebar_section.create_team")),ctaText:0===a?(0,S.t)("edu.choose_team"):(0,S.t)("edu.create_free_team"),onClickCTA:0===a?()=>{t((0,tf.to)({type:rv.q}))}:()=>{t(ta.Dw({isEduTeam:!0}))},onDismiss:()=>{t(eL.b({dismissed_edu_sidebar:!0}))},ctaDataTestId:"edu-upgrade-cta"})}function rA({daysLeft:e}){let t=(0,n.wA)(),a=(0,_.Rs)(eK.UpR,{},{enabled:!(0,o.k)().edu_bootcamps_reverification}),l=(0,G.H5)(),i=!!(0,rh.f)("edu_hide_verification");if((0,o.k)().edu_bootcamps_reverification||(i=(a.data?.currentUser?.schoolType?.status===et.tT.Loaded?a.data.currentUser.schoolType.data:null)===ry.h6.BOOTCAMP_OR_ONLINE&&l()),e<0)return null;let s=()=>{t((0,tf.to)({type:rb.V,data:{upsellSource:rw.b.EDU_UPGRADE_SECTION}}))},c=r.createElement(ea.eM,{onClick:()=>d.Ay.redirect("/education/apply",E.Ay.isIpadNative?void 0:"_blank")},(0,S.tx)("edu.sidebar_section.verify_your_education_status"));return e>0?r.createElement(rC,{trackingContext:"Universal Upgrade Section Education Plan Countdown",countDownDaysLeft:e,titleText:(0,S.tx)("edu.sidebar_section.education_plan_expires_in_days",{daysLeft:e}),bodyText:i?(0,S.tx)("edu.sidebar_section.bootcamp_users_after_that_you_ll_need_to_upgrade_your_team"):(0,S.tx)("edu.sidebar_section.after_that_you_ll_need_to_upgrade_your_team_or_verify",{verify:c}),ctaText:(0,S.tx)("upgrade.upgrade_to_professional"),onClickCTA:s}):r.createElement(rC,{trackingContext:"Universal Upgrade Section Education Plan Expired",icon:r.createElement(rE.e,null),titleText:(0,S.tx)("edu.sidebar_section.education_plan_expired"),bodyText:i?(0,S.tx)("edu.sidebar_section.bootcamp_users_to_keep_editing_upgrade_your_team"):(0,S.tx)("edu.sidebar_section.to_keep_editing_upgrade_your_team",{verify:c}),ctaText:(0,S.tx)("upgrade.upgrade_to_professional"),onClickCTA:s})}var rO=a(870567),rP=a(314979),rL=a(531919),rF=a(583940);let rD="dismissed_limited_team_space_uub";function rM(e){let t=(0,n.wA)(),[a,o]=r.useState(!1),l=(0,_.Rs)(eK.qOl,{teamId:e.team.id}),i=(0,J.iZ)(),s="loaded"===l.status&&(0,rO.oA)(l.data?.teamRoleRequest),c=!!s&&"pending"===s.status,d=!!s&&"approved"===s.status,m=!!s&&"denied"===s.status;if(r.useEffect(()=>{c&&o(!0)},[c]),"loaded"!==l.status||d||m)return null;let u=async()=>{try{await rF.$.requestTeamRole({teamId:e.team.id}),t(tj.F.enqueue({message:(0,S.t)("view_permissions.request_sent"),type:"request-team-membership"})),(0,V.uE)("limited_team_plan_request_upgrade_clicked",{user:i},{teamId:e.team.id}),o(!0)}catch(e){t(rP.s.error("Failed to request team role",e))}};return r.createElement(rC,{bodyText:(0,S.tx)("upgrade.to_get_unlimited_files_must_be_member",{currentTeamName:e.team.name}),ctaText:a?(0,S.tx)("upgrade.access_requested"):(0,S.tx)("upgrade.request_full_access"),ctaTrackingProperties:{},demure:"very",disabled:c||a,header:(0,S.tx)("upgrade.limited_access_in_this_team"),onClickCTA:u,onDismiss:()=>{t(rL.bE({all_team_flags:[{team_id:e.team.id,flags:{[rD]:!0}}]}))},trackingContext:"Limited Team Space Dismissable Upgrade Section",trackingProperties:{teamId:e.team.id}})}var rB=a(105500),rU=a(631177),r$=a(51377);function rj({orgUpsellEligibility:e}){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.userFlags),o=e===r$.VY.SINGLE_TEAM?(0,S.tx)("upgrade.access_cross_team_design_libraries_sso_and_more"):(0,S.tx)("upgrade.centralize_your_teams_and_share_design_libraries"),l=`${e===r$.VY.SINGLE_TEAM?"Single-Team":"Multi-Team"} Dismissible Org Upgrade Section`;return r.createElement(rC,{trackingContext:l,icon:r.createElement(rB.L,null),bodyText:o,ctaText:(0,S.tx)("upgrade.view_plans"),onClickCTA:()=>{e===r$.VY.SINGLE_TEAM&&t((0,tf.to)({type:rU.HS,data:{upsellSource:rw.b.ORG_UPGRADE_SECTION}})),e===r$.VY.MULTIPLE_TEAMS&&t((0,tf.to)({type:rU.u3,data:{upsellSource:rw.b.ORG_UPGRADE_SECTION}}))},onDismiss:()=>t((0,r$.CJ)(a)),ctaDataTestId:"org-upgrade-cta"})}var rW=a(99739),rG=a(222556);let rV="dismissed_paid_free_space_uub";function rH(e){let t=(0,n.wA)(),a=rG.h.useTrackingContext({trigger:rw.b.UNIVERSAL_UPGRADE_SECTION}),{open:o}=(0,rW.O)(),l=r.createElement(ea.eM,{onClick:()=>{o()},trackingProperties:{trackingDescriptor:eu.c.WORK_IN_ONE_OF_YOUR_PAID_TEAMS}},(0,S.tx)("upgrade.work_in_one_of_your_paid_teams")),i=(0,S.tx)("upgrade.to_get_unlimited_files_and_features_link_switch_teams_or_upgrade_this_team_s_plan",{linkSwitchTeams:l});return r.createElement(rC,{trackingContext:"Paid Free Space Dismissible Upgrade Section",trackingProperties:{teamId:e.team.id,...a},header:(0,S.tx)("upgrade.this_team_is_on_a_free_plan"),bodyText:i,ctaText:(0,S.tx)("upgrade.view_all_plans"),onClickCTA:()=>{t((0,tf.to)({type:rb.V,data:{upsellSource:rw.b.UNIVERSAL_UPGRADE_SECTION}}))},ctaTrackingProperties:{trackingDescriptor:eu.c.VIEW_ALL_PLANS},onDismiss:()=>{t(rL.bE({all_team_flags:[{team_id:e.team.id,flags:{[rV]:!0}}]}))},demure:"very"})}var rz=a(817502),rK=a(925085),rY=a(914515),rq=a(800802);let rJ="pro_trials_upgrade_section--divider--0tBoX sidebar--divider--sHsz4";function rX(){let e=(0,n.wA)();return r.createElement(rC,{trackingContext:"Universal Upgrade Section Pro Trial Entry",trackingProperties:rq.ng.getTrackingProperties(),icon:r.createElement(rz.K,null),titleText:r.createElement(R.E,null,(0,S.tx)("upgrade.free_professional_team_trial")),bodyText:r.createElement(R.E,null,(0,S.tx)("upgrade.enjoy_our_best_design_features_for_14_days")),ctaText:r.createElement(R.E,null,(0,S.tx)("upgrade.try_the_professional_plan")),onClickCTA:()=>e((0,tf.to)({type:rY.m})),ctaDataTestId:"redesigned-upgrade-button-pro-trial-entry-upgrade",ctaTrackingProperties:rq.ng.getTrackingProperties("Try the Professional Plan")})}function rQ({team:e}){return r.createElement(rK.Y,{spacing:8,dataTestId:"team-info"},r.createElement(tV.nl,{size:tV.Pf.SMALL,team:e,fallbackDisplay:tH.U.HIDDEN,shape:"ROUNDED_SQUARE"}),r.createElement(R.E,{children:e.name,fontWeight:"medium",fontSize:11,truncate:"end"}))}function rZ({daysLeft:e,trialTeam:t,onClickCTA:a}){var n;let o=r.createElement(ea.eM,{onClick:a,dataTestId:"pro_trial_inline_upgrade",trackingProperties:rq.ng.getTrackingProperties()},(0,S.tx)("upgrade.pro_trial_inline_upgrade_cta"));return r.createElement(aq.fu,{name:"Universal Upgrade Section Pro Trial Countdown",properties:rq.ng.getTrackingProperties()},r.createElement("div",{className:rJ}),r.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeSection--E-f1E"},r.createElement("div",{className:"pro_trials_upgrade_section--countdownInfo--sN5Pd"},r.createElement(rQ,{team:t})),r.createElement("div",{className:rJ}),r.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysTicker--rDpWO"},r.createElement(R.E,{children:e,color:e<=2?"danger":"default",fontWeight:"medium",fontSize:24})),r.createElement("div",{className:"pro_trials_upgrade_section--countdownDaysLeftText--a-ppM"},r.createElement(R.E,{color:e<=2?"danger":"default",fontWeight:"medium",fontSize:13},(0,S.tx)("upgrade.days_left_in_trial",{days:e}))),r.createElement("div",{className:"pro_trials_upgrade_section--redesignedUpgradeText--ho-7F"},r.createElement(R.E,{children:(n=e)>=14?r.createElement(R.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.this_counter_will_help_you_keep_track",{upgrade:o})):n>=10?r.createElement(R.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.if_you_are_enjoying_your_trial",{upgrade:o})):n>=4?r.createElement(R.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.try_out_these_features")):n>=2?r.createElement(R.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.you_will_miss_these_files")):n>=1?r.createElement(R.E,null,(0,S.tx)("upgrade.pro_trial_uub_countdown.just_a_memory")):null})),e<=9&&r.createElement(ea.vd,{className:"pro_trials_upgrade_section--redesignedUpgradeButton--SP1nz",onClick:a,dataTestId:"redesigned-upgrade-button-pro-trial-countdown-upgrade",trackingProperties:rq.ng.getTrackingProperties()},r.createElement(R.E,null,(0,S.tx)("upgrade.upgrade_to_professional")))))}function r0(e){return r.createElement(rC,{trackingContext:"Universal Upgrade Section Pro Trial Expired",trackingProperties:rq.ng.getTrackingProperties(),titleText:r.createElement(R.E,null,(0,S.tx)("upgrade.currently_on_starter_plan")),bodyText:r.createElement(R.E,null,(0,S.tx)("upgrade.your_trial_has_ended")),ctaText:r.createElement(R.E,null,(0,S.tx)("upgrade")),onClickCTA:e.onClickCTA,ctaDataTestId:"redesigned-upgrade-button-pro-trial-expired-upgrade",ctaTrackingProperties:rq.ng.getTrackingProperties(),header:r.createElement(rQ,{team:e.team})})}function r1(e){let t=(0,n.wA)(),{ongoingUpgradableTrials:a,expiredUpgradableTrials:o}=e,l=(0,n.d4)(e=>e.teams),i=e=>{t((0,tf.to)({type:rb.V,data:{teamId:e,upsellSource:rw.b.PRO_TRIAL_UPSELL_MODAL}}))};return o.length>0?r.createElement(r0,{team:l[o[0].teamId],onClickCTA:()=>i(o[0].teamId)}):a.length>0?r.createElement(rZ,{trialTeam:l[a[0].teamId],daysLeft:a[0].daysLeft,onClickCTA:()=>i(a[0].teamId)}):null}var r4=(e=>(e.PRO_TRIALS_ENTRY="Pro Trials Entry",e.PRO_TRIALS_UPGRADE="Pro Trials Upgrade",e.LIMITED_TEAM_SPACE="Limited Team Space",e.EDU_EXPIRY="EDU Expiry",e.EDU_UPGRADE="EDU Upgrade",e.ORG_UPGRADE="Org Upgrade",e.PAID_FREE_SPACE="Paid Free Space",e.UNIVERSAL="Universal",e))(r4||{}),r2=(e=>(e.BETWEEN_CONTENT="between_content",e.AFTER_CONTENT="after_content",e.IN_FOOTER="in_footer",e))(r2||{});function r3({onTeam:e,hitFileLimit:t}){let a=(0,n.wA)(),o=rG.h.useTrackingContext({trigger:rw.b.UNIVERSAL_UPGRADE_SECTION}),l=t?r.createElement(r.Fragment,null,r.createElement("span",{className:rk},(0,S.tx)("upgrade.running_out_of_files_in_your_free_team"))," ",(0,S.tx)("upgrade.upgrade_to_give_your_ideas_and_designs_room_to_grow_without_limits")):(0,S.tx)("upgrade.ready_to_go_beyond_free_plan_upgrade_for_premium_features");return r.createElement(rC,{trackingContext:"Universal Upgrade Section",trackingProperties:{onTeam:e,hitFileLimit:t,...o},icon:r.createElement(rB.L,null),bodyText:l,ctaText:(0,S.tx)("upgrade.view_plans"),ctaTrackingProperties:{trackingDescriptor:eu.c.UPGRADE},ctaDataTestId:"redesigned-upgrade-button",onClickCTA:()=>{a((0,tf.to)({type:rb.V,data:{upsellSource:rw.b.UNIVERSAL_UPGRADE_SECTION}}))}})}var r5=a(601295),r8=a(813009),r6=a(987591),r7=a(709292),r9=a(986761),ne=a(468787),nt=a(361053),na=a(231159),nr=a(715880);let nn=(0,ec.eU)(e=>{let t=e(nr.m),a=e(no),r=(0,o.k)().ps_benchmark;if(!a)return!1;let n=[eM.P4.FILES_LIMITED,eM.P4.FILES_LIMITED_LEGACY,eM.P4.WHITEBOARD_FILES_LIMITED,eM.P4.WHITEBOARD_FILES_LIMITED_BETA,eM.P4.SLIDE_FILES_LIMITED,eM.P4.SLIDE_FILES_LIMITED_BETA].some(e=>a?.restrictions_list?.includes(e));return r?n:Object.values(t).some(e=>[eM.P4.FILES_LIMITED,eM.P4.FILES_LIMITED_LEGACY,eM.P4.WHITEBOARD_FILES_LIMITED,eM.P4.WHITEBOARD_FILES_LIMITED_BETA,eM.P4.SLIDE_FILES_LIMITED,eM.P4.SLIDE_FILES_LIMITED_BETA].some(t=>e.restrictions_list&&e.restrictions_list.includes(t)))}),no=(0,na.bt)(e=>{let t=e.currentTeamId;return t?e.teams[t]:null});function nl(){return r.createElement(D.tH,{boundaryKey:"SidebarUpgradeSection",fallback:D.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:B.e.MONETIZATION_UPGRADES}},r.createElement(ni,null))}function ni(){let e=nc();return null===e?null:r.createElement(ns,{...e})}function ns(e){switch(e.type){case r4.PRO_TRIALS_ENTRY:return r.createElement(rX,null);case r4.PRO_TRIALS_UPGRADE:return r.createElement(r1,{ongoingUpgradableTrials:e.props.ongoingUpgradableTrials,expiredUpgradableTrials:e.props.expiredUpgradableTrials});case r4.EDU_EXPIRY:return r.createElement(rA,{daysLeft:e.props.daysLeft});case r4.EDU_UPGRADE:return r.createElement(rR,{type:e.props.type});case r4.ORG_UPGRADE:return r.createElement(rj,{orgUpsellEligibility:e.props.orgUpsellEligibility});case r4.PAID_FREE_SPACE:return r.createElement(rH,{team:e.props.team});case r4.LIMITED_TEAM_SPACE:return r.createElement(rM,{team:e.props.team});case r4.UNIVERSAL:default:return r.createElement(r3,{onTeam:e.props.onTeam,hitFileLimit:e.props.hitFileLimit})}}function nc(){let e=function(){let e=(0,eD.FC)(),t=(0,J.TA)(),a=(0,rh.f)(rq.Jy),r=(0,ne.xX)(),o=(0,n.d4)(e=>e.userTeamFlags),l=(0,eY.Xd)("useProTrialsUpgradeSectionProps"),i=(0,eY.fh)(l).unwrapOr(!1);if(rq.ng.uxEnabled()&&!i){let{ongoingTrials:n,expiredTrials:l}=rq.ng.getUpgradableProTrials(o,e),i=l.filter(rq.ng.canSeeProTrialExpiryUx);if(n.length>0||i.length>0)return{type:r4.PRO_TRIALS_UPGRADE,props:{ongoingUpgradableTrials:n,expiredUpgradableTrials:i}};if(a&&r.length>0&&rq.ng.isUserInVariant(t))return{type:r4.PRO_TRIALS_ENTRY}}return null}(),t=function(){let e=(0,J.iZ)(),t=(0,nt.ol)(),a=(0,eD.FC)(),r=(0,_.Rs)(eK.UpR,{}),l=r.data?.currentUser?.eduPeriodEnd,i=(0,n.d4)(e=>e.userFlags),s=(0,eY.Xd)("useEduUpgradeSectionProps"),c=(0,eY.fh)(s).unwrapOr(!1);if(!e||"loaded"!==r.status)return null;let d=(0,r6.x$)(l,(0,r6.cn)(e)),m=d>0&&d!==1/0&&(0,r6.cn)(e)&&t?.student_team_state===eM.kU.STUDENT_TEAM_CURRENT,u=0===d&&t?.student_team_state===eM.kU.STUDENT_TEAM_EXPIRED&&(0,rd.oc)(t.id,a);if((0,o.k)().edu_offboarding_experience&&(m||u))return{type:r4.EDU_EXPIRY,props:{daysLeft:d}};if(!i.dismissed_edu_sidebar&&(0,r6.cn)(e)&&!c){let e=(0,rd.Kg)(a).length>0;return{type:r4.EDU_UPGRADE,props:{type:e?rS.UPGRADE:rS.CREATE}}}return null}(),a=function(){let e=(0,J.iZ)(),t=0===Object.keys((0,n.d4)(e=>e.orgById)).length,a=(0,n.d4)(e=>e.teams),r=(0,nt.ol)(),l=(0,ec.md)(nn),i=!Object.values(a).some(e=>null!==e.subscription||e.student_team_at),s=!!(0,o.k)().ps_benchmark,c=(0,ec.md)(r7.Lm),d=(0,_.Rs)(eK.kQI,{id:r?.id??""},{enabled:!!r&&s}),m=(0,eN.vt)(),u=(0,ex.jn)();if(!e||s&&!r||s&&("loaded"!==d.status||!d.data.team?.hasPermission||"loaded"!==c.status||!c.data))return null;let p=r&&s&&!(0,r6.cn)(e)&&!(0,rd.w5)(a[r.id])&&!m&&!u;return!s&&t&&!(0,r6.cn)(e)&&i||p?{type:r4.UNIVERSAL,props:{onTeam:Object.keys(a).length>0,hitFileLimit:l}}:null}(),r=function(){let e=(0,n.d4)(e=>e.userFlags),t=function(){let e=(0,eD.FC)(),t=(0,r8.R)(e=>({orgUsersByOrgId:e.orgUsersByOrgId,user:e.user,userFlags:e.userFlags,teams:e.teams,currentTeamId:e.currentTeamId})),a=(0,_.Rs)((0,eK.yQw)((0,rs._X)(rs.Pw.GROUP_6)&&t.currentTeamId?{teamId:t.currentTeamId}:null));return(0,rs._X)(rs.Pw.GROUP_6)&&t.currentTeamId?a.transform(({team:a})=>(0,r$.hF)(t,e,a)):r5.Qw.loaded((0,r$.hF)(t,e))}(),a=(0,r$.j)(e);return t.transform(e=>e===r$.VY.NONE||a?null:{type:r4.ORG_UPGRADE,props:{orgUpsellEligibility:e}})}(),l=function(){let e=(0,J.iZ)(),t=(0,n.d4)(e=>e.teams),a=(0,nt.ol)(),r=!!(0,o.k)().ps_benchmark,l=(0,ec.md)(r7.Lm),i=(0,n.d4)(e=>e.userTeamFlags),s=(0,_.Rs)(eK.kQI,{id:a?.id??""},{enabled:!!a&&r}),c=(0,G.Mi)();return!e||!a||!r||"loaded"!==l.status||l.data||(0,r6.cn)(e)||(0,rd.w5)(t[a.id])||"loaded"!==s.status||!s.data.team?.hasPermission||!c()?null:(0,r9.gY)(i,rV,a.id,7776e6)?null:{type:r4.PAID_FREE_SPACE,props:{team:a},overrideLocation:r2.IN_FOOTER}}(),i=function(){let e=(0,J.iZ)(),t=(0,nt.ol)(),a=(0,Q.d)(),r=(0,n.d4)(e=>e.userTeamFlags);return e&&t&&a?(0,r9.gY)(r,rD,t.id,7776e6)?null:{type:r4.LIMITED_TEAM_SPACE,props:{team:t},overrideLocation:r2.IN_FOOTER}:null}();return null!==e?e:null!==i?i:null!==t?t:null!==a?a:"loaded"===r.status&&r.data?r.data:null!==l?l:null}var nd=a(773511),nm=a(947135),nu=a(782073),n_=a(82433),np=a(989232);let nf=(0,ec.eU)(!1);function ng(){let[e,t]=(0,ec.fp)(nf),a=(0,ec.md)(l.Bb);if(!a)return null;let n=async()=>{t(!0);let e=await a.prompt();"dismissed"===e.outcome&&t(!1),(0,np.trackEvent)("add_to_chromebook_clicked",{installed:"accepted"===e.outcome})};return r.createElement(nd.E,{...n_.xk(nE.container,e&&nE.containerFadeOut),onClick:n},r.createElement("span",{className:"x2lah0s"},r.createElement(nm.z,null)),r.createElement(R.E,{truncate:!0,color:"default"},r.createElement("span",{...n_.xk(nE.text)},(0,S.tx)("file_browser.tool_bar.add_to_chromebook"))))}let nE={container:{width:"xh8yej3",display:"x78zum5",alignItems:"x6s0dn4",opacity:"x1hc1fzr",padding:"xtdwleo",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x167g77z",rowGap:null,columnGap:null,":focus-visible_boxShadow":"x1icplyp",$$css:!0},containerFadeOut:{opacity:"xg01cxk",pointerEvents:"x47corl",transition:"x177bw73",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0},text:{...nu.g.textBodyMedium,$$css:!0}};var nb=a(760893),nv=a(376771),nh=a(855965),nw=a(580181),ny=a(660948),nT=a(522258),nI=a(792694);function nx(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.userFlags),a=(0,nw.Om)(),o=(0,nw.tv)();return t[nT.w3]?null:r.createElement(aq.fu,{name:aX.e0.COMMUNITY_MOVED_TO_RESOURCE_HUB_BANNER},r.createElement("div",{className:"x15dj09p"},r.createElement(nb.cV,{icon:r.createElement(nh.U,null),variant:"default",onDismiss:()=>{e(eL.b({[nT.w3]:!0}))}},r.createElement(nv.Q,{title:(0,S.t)("community.resource_hub.a_new_place_to_explore_community")},r.createElement("div",{className:"x1n0bwc9"},(0,S.t)("community.resource_hub.introducing_templates_and_tools"))),r.createElement(nd.E,{"aria-label":(0,S.t)("community.resource_hub.take_me_there"),...n_.xk(nN.button),onClick:()=>{d.Ay.push(new nw.au({...a,tab:ny.N$.COMMUNITY},o).href),(0,nI.lz)()}},r.createElement("div",null,(0,S.t)("community.resource_hub.take_me_there"))))))}let nN={button:{color:"x1quhyk7",...nu.g.textBodyMediumStrong,$$css:!0}};var nC=a(983104),nk=a(318717);function nS(){let e=(0,n.wA)(),t=()=>{(0,np.trackEvent)("community_browser_sidebar_action_clicked"),e(eR.$T({view:"communityHub",subView:"searchAndBrowse",data:(0,nk.Gu)()}))};return r.createElement(aq.L0,{trackingEventName:"community_browser_sidebar_action_clicked",className:$()(k.s.flex.flexRow.itemsCenter.gap12.h48.pl12.pr12.colorText.cursorDefault.$,"explore_community_button--hoverColor--mDUIs"),"data-onboarding-key":nT.vM,onClick:e=>{e.preventDefault(),e.stopPropagation(),t()}},r.createElement(nC.J,null),r.createElement(R.E,null,(0,S.tx)("sidebar.explore_community")))}function nR(e){let t=(0,eU.Fz)(),a=(0,eY.tJ)("SidebarFooter"),n=(0,eU.LQ)(a),o=function(){let e=(0,l.lH)(),t=(0,ec.md)(l.Bb);return!!E.Ay.chromeos&&!!E.Ay.chrome&&!e&&!!t}(),i=!(0,rf.sL)(),s=i&&t&&!n&&"loaded"===a.status,c=i&&(!t||n)&&"loaded"===a.status;return r.createElement("div",{className:k.s.sticky.bottom0.colorBg.zIndex1.if(e.hasTopBorder,k.s.bt1.colorBorder.bSolid).$},e.shouldShowUUBInFooter&&r.createElement("div",{className:k.s.pb10.pt12.$},r.createElement(nl,null)),o&&r.createElement(ng,null),s&&r.createElement(nx,null),c&&r.createElement(nS,null))}var nA=a(254395),nO=a(773455);function nP(e){return r.createElement("div",{className:k.s.flex.flexColumn.colorBg.if(e.hasBottomBorder,k.s.bb1.colorBorder.bSolid).$},r.createElement(nO.Xg,null),r.createElement(nA.Zn,null))}var nL=a(305755);function nF(e){let t=(0,n.wA)(),a=(0,eA._6)(),o=(0,n.d4)(e=>e.currentUserOrgId),l=(0,n.d4)(e=>e.teamFeedBellStates),i=!!(o&&l[o]),s="teamFeed"===a.view;return r.createElement(eS.SidebarRow,{onClick:()=>{t(eR.$T({view:"teamFeed"})),t(eR.Oe({clickedResourceType:"teamFeed"}))},isSelected:s,icon:r.createElement(nL.h,null),text:r.createElement("span",{className:"team_feed_page_link--sectionNameCustomSections--dPwog sidebar--sectionNameCustomSections--9e7LZ sidebar--sectionTextCustomSections---1KFn sidebar--sectionContentCustomSections--wI9mZ ellipsis--ellipsis--Tjyfa"},r.createElement("div",{className:"team_feed_page_link--sectionNameCustomSectionsLeft--MLMFK"},(0,S.tx)("fig_feed.feed"),i&&r.createElement("div",{className:"team_feed_page_link--redDot--t6QPY red_dot--baseRedDot--pgZV7"})))})}var nD=a(498808);function nM({selectedView:e,teamFolderId:t,teamFolderName:a}){let o=(0,n.wA)();return t&&a?r.createElement(eS.SidebarRow,{isSelected:e&&"folder"===e.view&&e.folderId===t,onClick:()=>{o(ta.gN(t)),o(eR.Oe({clickedResourceType:"folder"}))},icon:r.createElement(aT.e,null),text:r.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!1},a),"data-onboarding-key":nD.Jo}):null}var nB=a(557102);function nU(){let e=(0,n.wA)(),t="deletedFiles"===(0,n.d4)(e=>e.selectedView).view;return r.createElement(r.Fragment,null,r.createElement(eS.SidebarRow,{isSelected:t,onClick:()=>{e(eR.$T({view:"deletedFiles"})),e(eR.Oe({clickedResourceType:"deletedFiles"}))},icon:r.createElement(nB.z,null),text:r.createElement("div",{className:k.s.pr36.$},r.createElement(R.E,null,(0,S.tx)("file_browser.tool_bar.trash")))}))}let n$="sidebar--section--COZVK",nj="sidebar--loading--AITp2",nW="sidebar--divider--sHsz4";var nG=a(821527);function nV(e){let t=(0,n.wA)(),a=(0,Y.dq)(),l=(0,n.d4)(e=>e.currentTeamId),i=(0,n.d4)(e=>e.userFlags),s=(0,eD.FC)(),c=(0,n.d4)(e=>e.userStateLoaded),d=(0,eA._6)(),m=(0,n.d4)(e=>e.dragState),u=eC({project:"drafts"}),[_,p]=r.useState(0),[f,g]=r.useState(!1),[b,v]=r.useState(!1),[h,w]=r.useState(!1),y=e=>{t(eL.b({show_create_new_section_banner:!1}))},T=e=>{t(eP.pS({newCustomSectionIndex:0})),y(e)},I=!!l,x=(0,Q.d)(),N=(0,eB.wA)(s),C=(0,eF.a9)(),R=C&&C.permission===eM._D.ADMIN,A=(0,eU.Fz)(),O=(0,H.D6)(a),P=()=>c?r.createElement(nl,null):null,L=I?e.dataDriftCorrectedTeamResources?.favoritedFiles:e.sidebarUser?.favoritedFiles,F=I?e.dataDriftCorrectedTeamResources?.favoritedPrototypes:e.sidebarUser?.favoritedPrototypes,D=I?e.dataDriftCorrectedTeamResources?.favoritedProjects:e.sidebarUser?.favoritedProjects;D&&e.FBGNavigationUpdatesTreatment!==G.ih.CONTROL&&(D=D.filter(t=>t.project?.id!==e.teamFolderId));let M=L?.length===0&&F?.length===0&&D?.length===0,B=e.FBGNavigationUpdatesTreatment===G.ih.CONTROL||!M,U=nc(),j={[G.ih.CONTROL]:r2.BETWEEN_CONTENT,[G.ih.VARIANT_A]:r2.IN_FOOTER,[G.ih.VARIANT_B]:r2.AFTER_CONTENT}[e.FBGNavigationUpdatesTreatment],W=U?.overrideLocation??j,V=!!m.data&&(m.type===e$.R.Folder||m.type===e$.R.Team||m.type===e$.R.Favorite),z=N&&r.createElement("div",{className:n$},i.show_create_new_section_banner?r.createElement("div",{className:"sidebar--betaAnnouncementContainer--FfmFT"},r.createElement("div",{className:"sidebar--betaAnnouncementHeader--g6Qzz"},r.createElement("div",{className:"sidebar--betaAnnouncementHeaderTitle--AyDjm"},(0,S.tx)("favorited_resources.custom_sections_banner_header")),r.createElement("div",{role:"button",tabIndex:0,className:"sidebar--closeX---nRcN",onClick:e=>y(e)},r.createElement(ei.B,{svg:nG.default}))),r.createElement("div",{className:"sidebar--betaAnnouncementBodyContainer--8u60g"},r.createElement("p",null,(0,S.tx)("favorited_resources.custom_sections_banner_body")),r.createElement("br",null),r.createElement("p",null,r.createElement(ea.tM,{className:"sidebar--betaAnnouncementButton--RCpKp",onClick:e=>T(e)},(0,S.tx)("favorited_resources.custom_sections_banner_create_new_section_button"))))):null),K=!(e.showLoadingState||e.showingFileBrowserLoader);return r.createElement(er.A,{loadingElementId:"filebrowser-loading-sidebar",loaded:K},r.createElement(ee.J,null,r.createElement("div",{className:k.s.flex.flexColumn.wFull.$},r.createElement(nP,{hasBottomBorder:h}),r.createElement(eo.P,{className:"sidebar--sidebarScrollContainer--Z95XT",innerClassName:k.s.hFull.$,scrollingDisabled:!1,onScroll:e=>p(e)},r.createElement(el.a,{onIntersectionChange:t=>{w(!t.isIntersecting),t.isIntersecting||f||(e.trackScroll(),g(!0))}}),r.createElement("div",{className:$()("sidebar--navContent--15V3f",{"sidebar--grabbingCursor--6rbhU":V},{"sidebar--navContentRedesigned--npUNY":(0,o.k)().file_browser_sidebar_row_ui})},r.createElement("div",{className:k.s.flexGrow1.flex.flexColumn.$},r.createElement(r.Fragment,null,r.createElement(eO,null),r.createElement(to.r,{selectedView:d,dispatch:t}),A&&r.createElement(rp.w,null),r.createElement("div",{className:nW}),r.createElement("div",{className:k.s.mr8.mt2.mb2.$},r.createElement(rr.b,null)),(0,o.k)().xr_debounce_threshold&&N&&C&&C.permission!==eM._D.GUEST?r.createElement(nF,null):null,e.draftsProject&&r.createElement(tn.s,{folder:e.draftsProject,selectedView:d,dispatch:t,shouldHideCreateFileButton:!u}),I&&r.createElement(r.Fragment,null,x?r.createElement(r.Fragment,null,r.createElement(a7,{selectedView:d}),r.createElement(nU,null)):r.createElement(r.Fragment,null,r.createElement(tr,{selectedView:d}),r.createElement(nU,null),r.createElement(r_,{selectedView:d}),e.FBGNavigationUpdatesTreatment!==G.ih.CONTROL&&r.createElement(nM,{selectedView:d,teamFolderId:e.teamFolderId,teamFolderName:e.teamFolderName}))),W===r2.BETWEEN_CONTENT&&r.createElement("div",{className:n$},!!U&&r.createElement("div",{className:k.s.my8.mx0.h1.$,style:es.sx.add({backgroundColor:"var(--color-border)"}).$}),P()),C&&N&&(c?r.createElement(r.Fragment,null,r.createElement(ra,{hasWorkspaces:e.isOrgWithWorkspaces}),r.createElement(nU,null),N&&C&&!E.Ay.mobile&&r.createElement(r.Fragment,null,r.createElement(te,{selectedView:d,org:N,orgUser:C}),R&&r.createElement(eT,null))):r.createElement("div",{className:nj},r.createElement(en.kt,null))),O&&z,r.createElement("div",{className:nW}),c?r.createElement(r.Fragment,null,a?r.createElement(az,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:L,favoritedPrototypes:F,favoritedProjects:D,favoritedTeams:e.sidebarUser?.favoritedTeams??null,favoritedWorkspaces:e.sidebarUser?.favoritedWorkspaces??null,userSidebarSections:e.sidebarUser?.userSidebarSections?(0,et.oA)(e.sidebarUser.userSidebarSections):[],previewYOffset:_}):r.createElement(r.Fragment,null,B&&r.createElement(aH,{fileBrowserPreferences:e.sidebarUser?.fileBrowserPreferences,favoritedFiles:L,favoritedPrototypes:F,favoritedProjects:D,favoritedTeams:null,favoritedWorkspaces:null,previewYOffset:_})),I&&r.createElement(a6,{teamUser:e.sidebarUser?.currentTeamUser??null,dataDriftCorrectedTeamResources:e.dataDriftCorrectedTeamResources,previewYOffset:_})):r.createElement("div",{className:nj},r.createElement(en.kt,null)),W===r2.AFTER_CONTENT&&r.createElement("div",{className:k.s.sticky.bottom0.colorBg.pb10.pt12.$},P()))),r.createElement(el.a,{onInitialLoad:e=>{v(!e)},onIntersectionChange:e=>{v(!e.isIntersecting)}}))),r.createElement(nR,{hasTopBorder:W===r2.BETWEEN_CONTENT&&(b||h),shouldShowUUBInFooter:W===r2.IN_FOOTER}))))}function nH(e){let t=(0,J.iZ)(),a=(0,Y.dq)(),o=(0,Q.d)(),l=(0,n.d4)(e=>e.currentTeamId),s=(0,n.wA)(),c=(0,Z.Q)({currentOrgId:a,currentTeamId:l||null}),d="loaded"===c.status?c.data:null,m="loaded"!==c.status;(0,i.WX)({markName:"Sidebar",isLoaded:!m});let u=(0,J.TA)(),_=(0,n.d4)(e=>u?e.authedUsers.byId[u]?.plans:null),[{status:f,data:g}]=(0,p.IT)((0,z.Xg)({teamId:l||void 0}),{enabled:!o}),E="loaded"===f&&g?.length===1?g[0]:null,b=E?.id,v=E?.name,h=null,w=(0,r.useMemo)(()=>d?{...d.currentUser}:null,[d]),y=(0,X.Zr)(d?.org??null),T=r.useMemo(()=>{if(w&&w.currentTeamUser&&l)return(0,H.TF)(w,l,_)},[w,l,_]),I=e.showingFileBrowserLoader;if(r.useEffect(()=>{if(l&&w&&w?.currentTeamUser){let e=w.currentTeamUser;!e.fileBrowserPreferences&&w.fileBrowserPreferences&&s(W.Sh({prefs:w.fileBrowserPreferences,orderedFolderSubscriptions:w.fileBrowserSectionPreferences?.filter(e=>e.teamId===l)[0]?.orderedFolderIds??[],teamUser:e}))}},[l,w,s]),w){if(a&&w.baseOrgUser){let e=w.baseOrgUser;w.fileBrowserPreferences=e.fileBrowserPreferences,w.fileBrowserSectionPreferences=e.fileBrowserSectionPreferences}else l&&w.currentTeamUser&&(w.fileBrowserPreferences=w.currentTeamUser?.fileBrowserPreferences);l?h=w.currentTeamUser?.draftsProject??null:a&&(h=w.baseOrgUser?.draftsProject??null)}return r.createElement(nV,{FBGNavigationUpdatesTreatment:(0,G.fn)(),dataDriftCorrectedTeamResources:T,draftsProject:h,isOrgWithWorkspaces:y,showLoadingState:m,showingFileBrowserLoader:I,sidebarUser:w,teamFolderId:b,teamFolderName:v,trackScroll:()=>(0,V.uE)("Sidebar Scrolled",{user:t})})}var nz=(e=>(e.FILE_BROWSER="FileBrowserSidebar",e.ADMIN="AdminSettingsSidebar",e))(nz||{});let nK={FileBrowserSidebar:B.e.WAYFINDING,AdminSettingsSidebar:B.e.SCALE};function nY(e){let t=(0,n.d4)(e=>e.mobileNavShown),a=(0,q.n)()?"AdminSettingsSidebar":"FileBrowserSidebar";return r.createElement("nav",{className:$()("sidebar--navDefault--pYuzm",{"sidebar--navDefaultRedesigned--pttVx":(0,o.k)().file_browser_sidebar_row_ui,"sidebar--showMobileNav--YiFit":t,"sidebar--showMobileNavRedesigned--h3sJb":t&&(0,o.k)().file_browser_sidebar_row_ui})},r.createElement(D.tH,{sentryTags:{area:nK[a]},boundaryKey:a,fallback:r.createElement(j.R,null),hasCustomWASMBuild:K.y4},"FileBrowserSidebar"===a?r.createElement(nH,{...e}):r.createElement(P.ay,null)))}var nq=a(913026),nJ=a(162299),nX=a(411910),nQ=a(175957),nZ=a(67470),n0=a(680655),n1=a(78144),n4=a(448841),n2=a(742379),n3=a(410441),n5=a(610543),n8=a(32731),n6=a(186606),n7=a(141760),n9=a(206639),oe=a(716793),ot=a(877994);let oa=(0,ec.eU)(void 0),or=(0,ec.eU)(!1),on=(0,n9.H0)("#2c2c2c");function oo(e){let t=(0,ec.md)(oa);if(!e||"unset"===t)return;let a=(e.colorConfig?.colors??[])[0];return t?(0,n7.colorToHex)(t):a}function ol(e){return!!e&&"unset"!==e}var oi=a(620964);function os(e){return e.rightSideActions?r.createElement(oc,{headerLabel:e.label,rightSideActions:e.rightSideActions}):e.label}function oc(e){return r.createElement("div",{className:"x78zum5 x1qughib xh8yej3 x6s0dn4 x40hh3e"},r.createElement("div",{className:"x2lah0s"},e.headerLabel),r.createElement("div",{className:"x78zum5 x167g77z xeuugli"},e.rightSideActions))}function od(e){let t=(0,Y.dq)(),a=(0,X.P)(t,(0,n.d4)(oi.o)),o=oo("Unassigned"===a.data?null:a.data);return r.createElement("div",{...n_.xk(om.desktopHeader,e.showNavigationChevrons&&om.desktopHeaderWithChevrons,!!e.pageHeaderContent&&!e.pageHeaderDividerHidden&&om.desktopHeaderBorder),style:{backgroundColor:o},"data-testid":"file-browser-desktop-header"},e.showNavigationChevrons&&r.createElement(n2.J,{parentBackgroundColor:o}),e.pageHeaderContent&&r.createElement("span",{className:"xeuugli xh8yej3"},r.createElement(os,{label:e.pageHeaderContent,rightSideActions:e.pageHeaderActions})))}let om={desktopHeader:{display:"x78zum5",flexDirection:"x1q0g3np",flexShrink:"x2lah0s",gap:"x167g77z",rowGap:null,columnGap:null,alignItems:"x6s0dn4",height:"xsdox4t",paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},desktopHeaderWithChevrons:{paddingLeft:"x5tiur9",paddingInlineStart:null,paddingInlineEnd:null,$$css:!0},desktopHeaderBorder:{borderBottom:"x1n5zjp5",borderBottomWidth:null,borderBottomStyle:null,borderBottomColor:null,$$css:!0}};var ou=a(27776);let o_=(0,n3.jz)(ou.tgj);function op(e){return r.createElement(r.Fragment,null,r.createElement(n5.z,{query:`(min-width: ${o_}px)`,defaultClass:k.s.sticky.top0.colorBg.zIndexTopBar.$},r.createElement(od,{pageHeaderContent:e.pageHeaderContent?r.createElement("h1",{className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},e.pageHeaderContent):void 0,pageHeaderDividerHidden:e.pageHeaderDividerHidden,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:e.showNavigationChevrons})),e.pageHeaderContent&&r.createElement(n8.i,{tabs:[r.createElement("h1",{key:"mobilePageHeaderKey",className:"x193iq5w xuxw1ft xb3r6kr xlyipyv x13saxwh xg4jxnz x39l7i4 x1uvdjgy xo1l8bm"},e.pageHeaderContent)]}))}function of(e){let t=r.useRef(null),a=(0,n.d4)(({selectedView:e})=>e),i=(0,n2.E)(),s=(0,n1.K)(),d=(0,Y.sZ)(),m=s&&d&&!nQ.T8.includes(a.view);!function(){let e=(0,n.Pj)();r.useEffect(()=>{let t=e.getState(),a=(0,rm.getPermissionsState)(t),r=(0,nJ.vp)(a.user,a.currentUserOrgId,a.currentTeamId);r&&(0,nX.Y9)(r.userId,(0,nq.d9)(t.selectedView),r.orgId,void 0,r.teamId)},[e])}();let u=(0,q.n)()||"litmus"===a.view,_=!e.showingFileBrowserLoader&&!u&&(!!c.eD||(0,l.ce)()||e.pageHeaderContent);return r.useEffect(()=>{let e=e=>{e.keyCode===F.Uz.PERIOD&&document.activeElement?.tagName==="BODY"&&(0,o.k)().internal_only_debug_tools&&(0,o.k)().figment_debugger&&(0,n0.Y)()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),r.createElement("div",{className:k.s.flex.flexRow.flexGrow1.$,ref:t},r.createElement(nY,{showLoadingState:!1,showingFileBrowserLoader:e.showingFileBrowserLoader}),r.createElement("div",{className:"file_browser_layout--fileBrowserPageViewContainer--m7oe2"},_&&r.createElement(D.tH,{boundaryKey:"FileBrowserPageHeader",fallback:D.H4.NONE_I_KNOW_WHAT_IM_DOING,hasCustomWASMBuild:K.y4},r.createElement(op,{pageHeaderContent:e.pageHeaderContent,pageHeaderActions:e.pageHeaderActions,showNavigationChevrons:i,pageHeaderDividerHidden:e.pageHeaderDividerHidden})),r.createElement(D.tH,{boundaryKey:"FileBrowserLayout-content",fallback:r.createElement(j.R,null),hasCustomWASMBuild:K.y4},!e.showingFileBrowserLoader&&(m?r.createElement(n4.H,{org:d,isInFileBrowser:!0}):r.createElement(M.z,{layoutRef:t},e.children)))),r.createElement(nZ.G,{entryPoint:nZ.Q.FILE_BROWSER}))}var og=a(564564),oE=a(106355),ob=a(657174),ov=a(830119),oh=a(610345),ow=a(548277),oy=a(213374),oT=a(698656),oI=a(38217);function ox({orgTeamsQuery:e,workspaceId:t,onLoad:a}){let o=(0,n.wA)(),{currentOrgUser:l,teams:i,user:s,roles:c,orgId:d,orgName:m}=(0,r8.R)(e=>({currentOrgUser:e.orgUsersByOrgId[e.currentUserOrgId]?.[e.user.id],teams:e.teams,user:e.user,roles:e.roles,orgId:e.currentUserOrgId,orgName:e.orgById[e.currentUserOrgId].name})),{canCreateTeam:u}=(0,X.LM)(d?{id:d}:null,t),_="loaded"===e.status;r.useEffect(()=>{_&&a?.()},[a,_]);let p=r.useMemo(()=>{let t=e.data??[],a=t.length<tl.Tw;return(0,tl.KQ)(t,"name",{useExpensiveNaturalComparison:a}),t},[e]),f=l&&l.permission===eM._D.GUEST,g=Object.keys((0,ow.t)(c.byTeamId,s.id)).filter(e=>i[e]);if(f){let e=g.map(e=>i[e]).filter(e=>e.org_id===d);return r.createElement(oE.h,{teams:e,onLeave:e=>{o(tf.to({type:oI.p,data:{teamId:e.id}}))},orgName:m})}return _?r.createElement("div",{className:k.s.mt24.$},r.createElement(ov.w,{orgTeams:p,orgTeamStatus:e.status,onCreateTeam:u?()=>{let e={workspaceId:t??oy.O};o(tf.to({type:oT.Uc,data:e}))}:void 0,emptyView:t&&!u?(0,S.t)("team_tile.no_teams.empty_workspace"):void 0})):r.createElement(ob.X,{isLoading:!0})}let oN=(0,ec.eU)(()=>r5.Qw.loaded([]));function oC({workspaceId:e,onlyJoinedTeams:t}){let a=(0,eD.FC)(),n=(0,eY.rs)("useFilteredOrgTeamsQuery").unwrapOr(null),o=(0,eY.H3)(n),l=!(0,rm.canMemberOrg)(o??null,a),i=(0,ec.md)(l?oN:og.EK);return r.useMemo(()=>i.transform(r=>r.filter(r=>{if(t)return(0,rm.hasViewerRoleAccessOnTeam)(r.id,a);if(null===e){if(r.workspace_id)return!1}else if(e&&r.workspace_id!==e)return!1;return(0,oh.ox)(r,a)})),[i,a,t,e])}function ok({children:e}){return r.createElement("section",{"aria-label":(0,S.t)("file_browser.teams")},r.createElement("div",{className:k.s.mx32.textBodyLargeStrong.$},r.createElement("div",null,(0,S.t)("file_browser.teams"))),e)}var oS=a(518052);function oR({avatar:e,title:t,rightSideActions:a,rightSideOfTitleAction:n,pageHeaderIcon:o,textColor:l,badge:i}){return r.createElement("div",{className:$()(k.s.mx32.mb20.$,"page_header--marginMobile--ocPfX")},r.createElement("div",{className:k.s.flex.mt8.itemsCenter.justifyBetween.$},r.createElement("div",{className:k.s.flex.itemsCenter.h40.minW0.$},e,r.createElement("div",{className:k.s.wFull.overflowHidden.$,style:es.sx.if(e&&!o,es.sx.ml16).$},r.createElement("span",{className:k.s.flex.itemsCenter.$},o,r.createElement(R.E,{color:l,fontSize:24,truncate:"line-clamp",lineClamp:2},t," "),r.createElement("div",{className:k.s.ml8.$},i),n&&n.element))),r.createElement("div",{className:k.s.flex.ml16.gap8.$},r.createElement(ee.J,null,a?.map(e=>r.createElement(oS.K,{action:e,key:e.key}))))))}function oA(e){let{belowHeaderItem:t,...a}=e;return r.createElement(r.Fragment,null,r.createElement(n8.i,{tabs:null,hideToolBarOnMobile:!0}),r.createElement(oR,{...a}),t)}var oO=a(746571),oP=a(990140),oL=a(531788),oF=a(996202);function oD(e){return r.createElement(oL.$n,{variant:"secondary",disabled:!0,htmlAttributes:{"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-immediately":!0,onPointerEnter:e.onMouseEnter},"aria-describedby":e.tooltipText},e.text)}function oM({backgroundColor:e}){let t=(0,oF.NV)(V.WL),a=(0,n.d4)(e=>e.selectedView.view),o=(0,S.t)("license_group_view.toolbar.new_team_button"),l=()=>{t(V.jd,{placement:a})};return e?r.createElement("button",{className:$()("button_custom--buttonBase--H2KEL button--buttonBase---72nl",(0,n9.kx)(e)?"button_custom--buttonColorsForDarkBackground--CiydL":"button_custom--buttonColorsForLightBackground--wejKf","button_custom--buttonHugContents--Ntibj"),"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":(0,S.t)("license_group_view.toolbar.create_team_disabled"),"data-tooltip-show-immediately":!0,onMouseEnter:l,disabled:!0},r.createElement(R.E,{fontSize:11,fontWeight:"medium",truncate:!0},o)):r.createElement(oD,{text:o,tooltipText:(0,S.t)("license_group_view.toolbar.create_team_disabled"),onMouseEnter:l})}var oB=(e=>(e.NEW_FILE="NEW_FILE",e.NEW_RESOURCE="NEW_RESOURCE",e.PROJECT_OVERFLOW_MENU="PROJECT_OVERFLOW_MENU",e.NEW_TEAM="NEW_TEAM",e.NEW_PROJECT="NEW_PROJECT",e.IMPORT="IMPORT",e.INVITE="INVITE",e.SHARE="SHARE",e.FAVORITE="FAVORITE",e.LOG_OUT="LOG_OUT",e.CLAIM="CLAIM",e.NEW_WHITEBOARD_FILE="NEW_WHITEBOARD_FILE",e.VIEW_COMMUNITY_PROFILE="VIEW_COMMUNITY_PROFILE",e.REQUEST_TO_EDIT="REQUEST_TO_EDIT",e.JOIN_TEAM="JOIN_TEAM",e.UPGRADE_TO_TEAM_ADMIN="UPGRADE_TO_TEAM_ADMIN",e.DROPDOWN="DROPDOWN",e.VIEW_MEMBERS="VIEW_MEMBERS",e.TEAM_OVERFLOW_MENU="TEAM_OVERFLOW_MENU",e.VIEW_LIBRARIES="VIEW_LIBRARIES",e.NEW_SITE_FILE="NEW_SITE_FILE",e.NEW_SLIDES_FILE="NEW_SLIDES_FILE",e.NEW_FIGMAKE_FILE="NEW_FIGMAKE_FILE",e.GET_DESKTOP_APP="GET_DESKTOP_APP",e.ADD_TO_CHROMEBOOK="ADD_TO_CHROMEBOOK",e.REQUEST_SENT_DESIGN="REQUEST_SENT_DESIGN",e.REQUEST_SENT_WHITEBOARD="REQUEST_SENT_WHITEBOARD",e.REQUEST_SENT_ALL="REQUEST_SENT_ALL",e.SETTINGS="SETTINGS",e))(oB||{});function oU(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.currentUserOrgId),r=(0,eA._6)();return()=>{a?t(tf.to({type:oT.Uc,data:{workspaceId:e??oy.O}})):t(ta.Dw({previousView:r}))}}function o$({workspace:e,org:t}){let{canCreateTeam:a,cannotCreateTeamReason:n}=(0,X.LM)(t,e?.id??null),o=oo(e),l=oU(e?.id);return n===X.z4.TEAM_CREATION_CONTROL?{kind:oS.A.CUSTOM,key:oB.NEW_TEAM,element:r.createElement(oM,{backgroundColor:o})}:a?{kind:oS.A.CUSTOM,key:oB.NEW_TEAM,element:r.createElement(rI.c,{"aria-label":(0,S.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:l,iconPrefix:r.createElement(oP.e,null)},(0,S.t)("license_group_view.toolbar.new_team_button"))}:null}function oj(){let e=(0,Y.sZ)(),t=o$({org:e,workspace:null}),a=oC({workspaceId:null,onlyJoinedTeams:!1});return r.createElement(oO.r,{header:r.createElement(oA,{title:(0,S.t)("license_group_view.meta.unassigned_title",{orgName:e.name}),rightSideActions:t?[t]:void 0}),content:r.createElement("div",{className:k.s.flex.flexColumn.my24.$},r.createElement(ok,null,r.createElement(ox,{orgTeamsQuery:a,workspaceId:null})))})}var oW=a(383592),oG=a(143823),oV=a(531711),oH=a(710070),oz=a(730455),oK=a(952647),oY=a(202272);function oq(e){let t=(0,n.wA)(),a=r.useRef(null),o=(0,n.d4)(({dropdownShown:e})=>e),l=!!(e.dropdownKey&&e.dropdownOptions&&o&&o.type===e.dropdownKey&&o.data&&o.data.targetRect),i=(0,aq.j6)();return r.createElement(ee.J,null,r.createElement("div",{className:"x1iog12x"},r.createElement(tF.d,{ref:a,"aria-expanded":l,"aria-label":e.buttonAriaLabel,onClick:()=>{if(a.current){if(o){t(eR.oB());return}t(eR.j7({type:e.dropdownKey,data:{targetRect:a.current.getBoundingClientRect()}}))}},"data-onboarding-key":e.dataOnboardingKey},r.createElement(oY.k,null)),l&&(0,aq.T8)(r.createElement(tg.j,{parentRect:o?.data?.targetRect,minWidth:224,rootAndSubmenuMaxWidth:224,items:e.dropdownOptions,dispatch:t,onSelectItem:e=>{e.callback&&e.callback("",null,t),e.trackingProperties&&(0,V.Cu)({...i.properties,trackingContext:i.name,...e.trackingProperties})},showPoint:!0}),aX.e0.PAGE_HEADER_DROPDOWN)))}var oJ=a(220133),oX=a(7373),oQ=a(97790),oZ=a(926198),o0=a(358847),o1=a(224191);let o4=t8.M4.Mutation(async e=>{await o0.u.updateDescription(e)}),o2=(0,tu.Ju)(function({workspace:e}){let t=(0,n.wA)(),a=(0,t8.gY)(o4);return r.createElement(o1.c,{title:(0,S.t)("workspace_view.description_modal.title"),subtitle:r.createElement("div",{className:k.s.mb16.$},r.createElement(R.E,{color:"secondary"},(0,S.tx)("workspace_view.description_modal.subtitle",{allWorkspacesText:r.createElement("span",{className:k.s.fontSemiBold.$},(0,S.t)("sidebar.browse.all_workspaces"))}))),initialName:e.description??"",placeholder:(0,S.t)("workspace_view.description.placeholder"),submitText:(0,S.t)("workspace_view.description.save"),onRename:r=>a({workspaceId:e.id,description:r}).then(()=>t(tj.F.enqueue({message:(0,S.t)("workspace_view.description_update_updated")})),()=>{let e=(0,S.t)("workspace_view.description_update_error");t(rP.s.error(e)),console.error(e)})})},"UpdateWorkspaceDescriptionModal");function o3(){let e=(0,n.wA)(),t=(0,J.TA)();return r.useCallback(a=>{let r=a.workspace.admins.some(e=>e.baseOrgUser?.user.id===t),n=[];return r&&n.push({displayText:(0,S.t)("workspace_view.toolbar.admin_settings"),callback:()=>{e(eR.$T({view:"workspace",subView:e9.V0.ADMIN,workspaceId:a.workspace.id,selectedTab:e9._C}))}}),n.length>0&&n.push({displayText:"",separator:!0}),n.push({displayText:(0,S.t)("file_browser.copy_link"),callback:()=>{let t=(0,t6.fO)(a.workspace.id,a.org.id);e(tq.S({url:t}))}}),a.workspace.canAdmin&&n.push({displayText:(0,S.t)("license_group_view.toolbar.change_icon"),callback:()=>{e((0,oZ.X)({entity:a.workspace,entityType:oX.ck.WORKSPACE,shape:"SQUARE"}))}}),n},[e,t])}var o5=a(156974),o8=a(506428),o6=a(289520),o7=a(782288),o9=a(747174),le=(e=>(e.SOLID="solid",e.NO_FILL="no_fill",e))(le||{});function lt({selectedFillOption:e,onSelectFillOption:t}){let a={solid:(0,S.t)("workspace_view.toolbar.solid"),no_fill:(0,S.t)("workspace_view.toolbar.no_fill")};return r.createElement(o5.Ve,{className:k.s.ml8.colorTextMenuSecondary.colorIconMenuSecondary.$,dropdownButton:function({onClick:t}){return r.createElement(o7.$n,{className:k.s.ml4.mr4.$,role:"combobox",onClick:t,caret:"down"},r.createElement("span",{className:k.s.minW32.mr8.$},a[e]))},dropdownOptionsClassName:k.s.mt4.$,options:["solid","no_fill"].map((e,n)=>r.createElement(o5.c$,{className:k.s.colorTextMenuSecondary.$,key:n,id:e,onClick:()=>{t(e)}},a[e])),optionsBelowSelector:!0,noBorder:!0})}let la=t8.M4.Mutation(async e=>{await o0.u.updateColor(e)});function lr({workspace:e,onClose:t}){let a=(0,n.wA)(),o=(0,t8.gY)(la),l=[{option:on},...(0,ot.TS)("base").filter(e=>!(0,n9.DA)(e,(0,ot.BV)(n6.daH.BLACK,"base"))).map(e=>({option:e})),...(0,ot.TS)("baseLight").map(e=>({option:e}))],i=r.useRef(null),[s,c]=r.useState(!1),d=(0,o8.DP)(),m=function(e){try{if(e)return(0,n9.H0)(e)}catch(e){console.error(e)}}((e?.colorConfig?.colors??[])[0]),[u,_]=r.useState(m?"solid":"no_fill"),[p,f]=(0,ec.fp)(oa);return r.useEffect(()=>(f(m),()=>{f(void 0)}),[]),r.useEffect(()=>{if(!s){let e=e=>{"Escape"===e.key&&t()},a=e=>{i.current&&!i.current.contains(e.target)&&t()};return document.addEventListener("keydown",e),document.addEventListener("pointerdown",a),()=>{document.removeEventListener("keydown",e),document.removeEventListener("pointerdown",a)}}},[s,t]),r.createElement(r.Fragment,null,r.createElement("div",{role:"button","aria-label":(0,S.t)("common.close"),tabIndex:0,className:k.s.absolute.wFull.hFull.top0.left0.zIndexTertiaryModal.$,onClick:t}),r.createElement("div",{className:k.s.absolute.flex.h40.justifyCenter.alignCenter.flexShrink0.bRadius4.colorBgMenu.elevation400.mt8.ml32.zIndexModal.$,ref:i},r.createElement(lt,{selectedFillOption:u,onSelectFillOption:e=>{if(_(e),"solid"===e){let e="dark"===d?on:n9.UE;f(m??e)}else f("unset")}}),ol(p)&&r.createElement(r.Fragment,null,r.createElement(o7.wv,null),r.createElement(o6.qW,{buttonClassName:k.s.ml2.mr2.$,buttonSize:"xsmall",dropperDisabled:!0,fixedNumColumns:9,hasNonWhiteboardColors:!0,isColorPopoverOpen:s,onColorChange:e=>{f(e.option)},optionSize:"medium",options:l,paletteType:"base",positionX:()=>0,positionY:(e,t)=>(0,o9.DH)(e,t,4),setIsColorPopoverOpen:c,shouldCustomColorPopoverCloseOnEscape:!0,shouldDisableDataTooltip:!0,value:{option:p}})),r.createElement(o7.wv,null),r.createElement(o7.$n,{className:k.s.ml4.mr2.$,onClick:t},r.createElement("span",{className:k.s.mr1.colorTextToolbarSecondary.$},(0,S.t)("workspace_view.color.toolbar.cancel"))),r.createElement(o7.$n,{className:k.s.mr8.$,onClick:()=>{o({workspaceId:e.id,colors:ol(p)?[(0,n7.colorToHex)(p)]:[],onfulfilled:()=>a(tj.F.enqueue({message:(0,S.t)("workspace_view.toolbar.workspace_color_updated")})),onrejected:()=>{let e=(0,S.t)("workspace_view.toolbar.workspace_color_update_error");a(rP.s.error(e)),console.error(e)}}),t()}},r.createElement("span",{className:k.s.colorTextOnbrand.$},(0,S.t)("workspace_view.color.toolbar.save")))))}var ln=a(582039),lo=a(879169),ll=a(309488),li=a(93275),ls=a(847240),lc=a(391205);let ld=(0,n.Ng)(e=>({currentUserId:e.user?.id}))(function(e){let t=t=>{t.stopPropagation(),e.canLeave&&e.onLeaveClick()},a=e.members.length,n=e.membersToShow||10;return r.createElement("div",null,!e.removeHeader&&r.createElement("div",{className:k.s.font13.fontMedium.mb12.$},e.label||(0,S.t)("file_browser.team_overview.member_label")),e.members.slice(0,n).map(a=>{let n=a.id===e.currentUserId,o=e.showAdminBadge&&e.showAdminBadge(a);return r.createElement(aL.az,{key:a.id,size:24,entity:a,className:e.customAvatarRowStyle?e.customAvatarRowStyle:k.s.font13.mb16.$,showIsMe:n,onClick:e.onMemberClick,badge:o?{color:aK.zE.DEFAULT,text:(0,S.t)("file_browser.badge_label.admin")}:void 0,includeUserEmailAddress:e.shouldIncludeUserEmailAddress},e.canLeave&&n&&r.createElement("span",{onClick:t,className:"members_preview--leaveLink--v8vxs text--fontPos13--xW8hS text--_fontBase--QdLsd blue_link--blueLink--9rlnd"},(0,S.tx)("file_browser.team.leave_confirm")))}),a>n&&(e.customOverflowRow||r.createElement("div",{className:"members_preview--totalMemberCountContainer--wYQwX",onClick:e.onClickShowMore},r.createElement(ei.B,{svg:lc.A,className:"members_preview--teamIcon--UFW2s"}),r.createElement("div",{className:"members_preview--totalMemberCount--D3Q8a text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("file_browser.team_overview.num_others",{numMembers:a-n})))))});var lm=a(493571),lu=(e=>(e.MEMBERS="MEMBERS",e.ADMINS="ADMINS",e))(lu||{});function l_(e){return r.createElement("div",{className:"workspace_members_modal--searchContainer--KGPrU modal--searchContainer--EA8ib"},r.createElement(ls.IW,{className:"workspace_members_modal--searchBar--z110d",focusOnMount:!0,query:e.query,clearSearch:()=>{e.onChange("")},onChange:e.onChange,hideXIcon:!0,hasTransparentBackground:!0,iconClassName:"workspace_members_modal--searchIcon--7DSd4",placeholder:(0,S.t)("workspace_view.members_modal.search_placeholder")}))}function lp(e){return r.createElement("div",{className:"workspace_members_modal--emptyContainer--bTf-s"},r.createElement("div",{className:"workspace_members_modal--emptyState--IwqA2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.content))}let lf=(e,t)=>null===e.baseOrgUser?-1:null===t.baseOrgUser?1:e.baseOrgUser.user.handle.localeCompare(t.baseOrgUser.user.handle),lg=(0,tu.Ju)(function(e){let t=ln.hS(e),[a,n]=(0,r.useState)(""),[o,l,i]=lo.t.useTabs({MEMBERS:!0,ADMINS:!0});r.useEffect(()=>{n("")},[n,i.activeTab]);let s=e.workspace.members.slice().sort(lf),c=e.workspace.admins.slice().sort(lf),d={};s.forEach(e=>{e.baseOrgUser&&(d[e.baseOrgUser.user.id]=e.permission)});let m=e=>d[e.id]===eM.bp.ADMIN&&"MEMBERS"===i.activeTab;return r.createElement(ll.bL,{manager:t,width:"lg",height:"fixed"},r.createElement(li.vo,null,r.createElement(li.Y9,null,r.createElement(li.r1,null,(0,S.t)("workspace_view.members_modal.title")),r.createElement(lo.t.TabStrip,{manager:i},r.createElement(lo.t.Tab,{...o.MEMBERS},(0,S.t)("workspace_view.members_modal.members")),r.createElement(lo.t.Tab,{...o.ADMINS},(0,S.t)("workspace_view.members_modal.admins")))),r.createElement(li.nB,{scrolling:"none",padding:0},(o.MEMBERS.display?s:c).length>0&&r.createElement(l_,{query:a,onChange:n}),r.createElement(eo.P,{className:"workspace_members_modal--outerContainer--in03x",innerClassName:"workspace_members_modal--membersContainer--16pMi"},r.createElement("div",{className:"workspace_members_modal--modalContainer--3d9wu"},r.createElement(lo.t.TabPanel,{...l.MEMBERS},0===s.length?r.createElement(lp,{content:(0,S.tx)("workspace_view.members_modal.no_members",{workspaceName:e.workspace.name})}):r.createElement(lE,{getShouldShowAdminBadge:m,query:a,users:s})),r.createElement(lo.t.TabPanel,{...l.ADMINS},0===c.length?r.createElement(lp,{content:(0,S.tx)("workspace_view.members_modal.no_admins",{workspaceName:e.workspace.name})}):r.createElement(lE,{getShouldShowAdminBadge:m,query:a,users:c})))))))},"WORKSPACE_MEMBERS_MODAL",tu.ZU.YES);function lE({getShouldShowAdminBadge:e,query:t,users:a}){let o=(0,n.wA)(),l=r.useCallback((e,t)=>{o(eR.$T({view:"user",userId:t.id,userViewTab:lm.o.INTERNAL_PROFILE})),o(tf.Ce())},[o]),i=a.filter(e=>{let a=e.baseOrgUser?.user,r=t.toLocaleLowerCase();return!!a?.email?.toLocaleLowerCase().includes(r)||!!a?.handle.toLocaleLowerCase().includes(r)}).map(e=>{let t=e.baseOrgUser.user;return{id:t.id,handle:t.handle,img_url:t.imgUrl,email:t.email}})||[];return 0===i.length?r.createElement(lp,{content:(0,S.tx)("workspace_view.members_modal.no_results",{query:t})}):r.createElement(ld,{members:i,showAdminBadge:e,membersToShow:i.length,canLeave:!1,customAvatarRowStyle:"workspace_members_modal--memberPopup--y5bbv text--fontPos13--xW8hS text--_fontBase--QdLsd admin_settings_page--avatarWithHandle--awCiS ellipsis--ellipsis--Tjyfa",onMemberClick:l,removeHeader:!0,shouldIncludeUserEmailAddress:!0})}function lb(e){let{workspace:t,org:a}=e,o=(0,n.wA)(),l=(0,n.d4)(e=>e.currentUserOrgId),i=(0,n.d4)(e=>e.avatarEditorState),s=t.canAdmin,[c,d]=(0,ec.fp)(or),{canCreateTeam:m}=(0,X.LM)(a,t.id),u=(0,tm.S)(),_=window.innerWidth<=(0,n3.hG)(ou.tgj),p=t?t.id:oy.O,f=oo(t),g=function(e){if(e&&"unset"!==e)return(0,n9.kx)(e)?"dark":"light"}(f),E=t?.members||[],b=(0,oz.GA)(),v=oU(t.id),h=r.useCallback((e,a,r)=>{if(t){let n={workspace:{id:t.id,name:t.name??"",imgUrl:t.imgUrl},entrypoint:"workspace_page_view",sectionId:r,favoriteId:a};e?o(eP.ZW(n)):o(eP.if(n))}},[o,t]),w={kind:oS.A.CUSTOM,key:oB.VIEW_MEMBERS,element:r.createElement(rI.c,{variant:"secondary",onClick:()=>{o(tf.to({type:lg,data:{workspace:e.workspace,tab:lu.MEMBERS}}))},iconPrefix:r.createElement(oV._,null),htmlAttributes:{"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":(0,S.t)("file_browser.team.view_members")},"aria-label":(0,S.t)("file_browser.team.view_members")},e.isWorkspaceMembersLoading?r.createElement(oG.k,null):r.createElement(r.Fragment,null,E.length.toString()))},y=r.useMemo(()=>r.createElement(oJ.i,{setFavorite:h,favoriteType:eM.bk.WORKSPACE,resourceId:p,orgId:l,monochrome:!!f,size:"lg"}),[p,h,l,f]),T=function(){let e=o3(),t=(0,n.wA)(),[a,o]=(0,ec.fp)(or);return r.useCallback(a=>{let r=e(a);return a.workspace.canAdmin&&(r.push({displayText:(0,S.t)("workspace_view.toolbar.change_color"),callback:()=>o(!0)}),r.push({displayText:(0,S.t)("workspace_view.description.title"),callback:()=>{t(tf.to({type:o2,data:{workspace:a.workspace}}))}})),r},[e,t,o])}(),I=t&&a?T({workspace:t,org:a}):m&&_?[{displayText:(0,S.t)("org_view.new_team"),callback:v}]:void 0,x=[],N=o$({workspace:t,org:a});if(N&&x.push(N),e.showMembersButton&&x.push(w),u&&t&&x.push({kind:oS.A.CUSTOM,key:oB.FAVORITE,element:y}),!t)return r.createElement(oA,{title:(0,S.t)("license_group_view.meta.unassigned_title",{orgName:a.name}),rightSideActions:x});let C=I?{kind:oS.A.CUSTOM,key:oB.DROPDOWN,element:r.createElement(oq,{buttonAriaLabel:(0,S.t)("org_view.page_header_dropdown_label"),dropdownKey:`workspace-context-${t.id}`,dropdownOptions:I,dropdownColorClassName:f?(0,n9.kx)(f)?"workspace_page_header--dropdownColorsForDarkBackground--OIHSt":"workspace_page_header--dropdownColorsForLightBackground--uH-aL":void 0})}:void 0;return r.createElement("div",{style:{backgroundColor:f}},r.createElement(oK.J,{mode:f?g:b.color},r.createElement(oA,{avatar:s?r.createElement(oQ.j,{avatarEditorState:i,entityType:oX.ck.WORKSPACE,entity:t,dispatch:o,size:40}):r.createElement(aL.z6,{entity:t,size:40}),title:r.createElement("span",{className:"workspace_page_header--titleColorForBackground--e6EH9"},t.name),badge:t.orgAccess===eM.bU.SECRET?r.createElement("div",{"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":(0,S.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,S.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},r.createElement(oH.$,{className:"workspace_page_header--iconColorForBackground--QSzJh"})):void 0,rightSideActions:x,rightSideOfTitleAction:C,belowHeaderItem:c?r.createElement(lr,{workspace:t,onClose:()=>d(!1)}):void 0})))}function lv(e){let t=(0,n.wA)(),a=e.workspace.members,o=r.useMemo(()=>a||[],[a]),l=r.useMemo(()=>o.slice(0).sort(()=>Math.random()-.5),[o]),i={};return o.forEach(e=>{e.baseOrgUser&&(i[e.baseOrgUser.user.id]=e.permission)}),r.createElement("div",{className:k.s.my24.mr8.ml24.$},r.createElement("div",{className:"workspace_page_meta_content--membersHeader--0jaJ3 text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.t)("workspace_view.sidebar.members")),r.createElement(ld,{removeHeader:!0,members:l.map(e=>e.baseOrgUser?.user).filter(e=>!!e),onMemberClick:(e,a)=>{t(eR.$T({view:"user",userId:a.id,userViewTab:lm.o.INTERNAL_PROFILE}))},canLeave:!1,showAdminBadge:e=>i[e.id]===eM.bp.ADMIN,customOverflowRow:r.createElement(r.Fragment,null,r.createElement("button",{className:"workspace_page_meta_content--seeAllMembers--mIOar text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:()=>{t(tf.to({type:lg,data:{workspace:e.workspace,tab:lu.MEMBERS}}))}},(0,S.t)("workspace_view.sidebar.see_all_members")))}))}var lh=a(647029),lw=a(523669);function ly({isExpanded:e,fill:t,onClick:a}){return r.createElement("div",{role:"button",tabIndex:-1,className:$()("expand_caret--animation--GOE8s",{"expand_caret--expanded--MmsW9":e}),onClick:a},r.createElement(lw.In,{icon:"caret-right-16",fill:t}))}function lT({isOpen:e,toggleIsOpen:t,collapseHeader:a,content:n}){return r.createElement("div",{className:k.s.flex.flexColumn.wFull.$},r.createElement("div",{className:k.s.flex.flexRow.gap4.itemsCenter.wFull.$},r.createElement(ly,{isExpanded:e,fill:"secondary",onClick:t}),a),r.createElement("div",{className:k.s.grid.ml20.$,"aria-hidden":!e,style:es.sx.add({transition:"grid-template-rows 0.3s ease"}).if(e,es.sx.add({gridTemplateRows:"1fr"}),es.sx.add({gridTemplateRows:"0fr"})).$},r.createElement("div",{className:k.s.if(!e,k.s.overflowHidden).$},n)))}var lI=a(813321),lx=a(810505),lN=a(769642),lC=a(858839),lk=a(430163);function lS({title:e,confirmText:t,emptyStateText:a,onSelectFile:n,onSubmit:o,files:l,tileClassName:i,renderFileTile:s,query:c,setQuery:d,gridText:m,shouldDisableTile:u}){let[_,p]=r.useState(null),f=r.useCallback(()=>{_&&o(_)},[o,_]),E=r.useCallback(e=>{if(e.length>0){let t=e[0].key;n?.(t),p(t)}else p(null)},[n]);return r.createElement(lR,{title:e,onSubmit:f,confirmText:t,isDisabled:!_,query:c,onSearchChange:d,clearSearch:()=>d(""),searchPlaceholder:(0,S.t)("file_browser.choose_file_modal.search_for_a_file")},0===l.length?r.createElement("div",{className:"x78zum5 x1q0g3np x195vfkc x6s0dn4 xl56j7k x1n0bwc9 x5yr21d xh8yej3 x1iyjqo2 x2b8uid"},a):r.createElement(r.Fragment,null,m&&r.createElement("span",{className:"x1n0bwc9"},m),r.createElement(lk.g,{canSelectItem:e=>!u?.(e),containerStyle:lA.grid,doNotFocusOnLoad:!0,getAriaLabel:e=>e.name,handleContextMenu:g.lQ,isDraggable:!1,items:l,keepSelectionOnFocusLost:!0,multiselectDisabled:!0,onSelection:E,renderTile:s,renderTileFooter:()=>r.createElement(r.Fragment,null),tileClassName:i})))}function lR({title:e,confirmText:t,onSubmit:a,isDisabled:n,children:o,query:l,onSearchChange:i,clearSearch:s,searchPlaceholder:c}){return r.createElement(a1.Eo,{title:e,confirmText:t,onSubmit:a,disabled:n,maxWidth:1024,useRedesign:!0,fullWidthContent:!0},r.createElement(ls.IW,{className:$()(k.s.px16.py8.colorBg.wFull.bb1.bSolid.colorBorder.borderBox.$,"choose_file_modal--heightOverride--QTue5"),hasTransparentBackground:!0,placeholder:c,focusOnMount:!0,query:l,onChange:i,clearSearch:s,iconClassName:k.s.colorIcon.$,hideXIcon:!0}),r.createElement(eo.P,{className:"choose_file_modal--gridMaxHeight--8NKvW",innerClassName:k.s.hFull.gap12.flex.flexColumn.pt16.px24.borderBox.$},o))}let lA={grid:{paddingBottom:"x1l90r2v",$$css:!0}};var lO=a(566371),lP=a(348040);function lL({file:e,isDisabled:t,orgName:a}){let n=(0,aE.NN)();return r.createElement(lP.i,{thumbnail:r.createElement(ab.NM,{file:e,noBorder:!0}),bottomLeftIcon:r.createElement(aE.w4,{size:16,type:n(e)}),title:r.createElement("div",{className:"x78zum5 x1q0g3np x1jnr06f x1jud9m8 x6s0dn4"},r.createElement("span",{...n_.xk(lF.truncate,t&&lF.secondaryText)},e.name),t&&a&&r.createElement("span",{"data-tooltip-type":"text","data-tooltip":(0,S.t)("file_browser.pinning.choose_file_to_pin_modal.file_not_workspace_visible.tooltip",{orgName:a}),"data-tooltip-show-immediately":!0,"data-tooltip-show-above":!0,"data-tooltip-max-width":500},r.createElement(lO.B,{className:"xmauxvm"}))),subtitle:e.project?.name})}let lF={truncate:{whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,textOverflow:"xlyipyv",$$css:!0},secondaryText:{color:"x1n0bwc9",$$css:!0}},lD=(0,tu.Ju)(function({workspaceId:e}){let t=(0,n.wA)(),a=(0,eY.tJ)("ChooseFileToPinModal").unwrapOr(null),o=a?.name??null,[l,i]=r.useState(""),[s]=(0,lI.A)(l,400),[c,d]=r.useState(null),m=r.useCallback(e=>{d(e)},[]);(0,_.Rs)(eK.wtK,{fileKey:c??""},{enabled:!!c});let u=function({searchQuery:e,workspaceId:t}){let a=r5.Qw.useTransformShallowEqual((0,_.Rs)(eK.z07,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:a}of e.currentUser?.recentFiles2)a&&t.push(a);return t}),r=function({searchQuery:e,workspaceId:t}){let a=(0,Y.dq)();(0,C.vA)(!!a,"currentUserOrgId must be defined in useSearchWorkspaceFilesQuery");let r=(0,_.Rs)(eK.Imb,{query:e,workspaceId:t,orgId:a,sort:"relevancy",desc:"true"},{enabled:!!e});return r5.Qw.useTransformShallowEqual(r,e=>{let t=[];for(let a of e.searchWorkspaceFiles)a.file&&t.push(a.file);return t})}({searchQuery:e,workspaceId:t}),n="disabled"!==r.status?r:a;return(0,lN.z1)(n,t)}({searchQuery:s,workspaceId:e}),p=r5.Qw.useTransformShallowEqual(u,e=>e.map(e=>e.key)),f=(0,lN.H6)(p.unwrapOr([])),E=r.useCallback(e=>{t(tf.ES(lD)),t(tf.to({type:(0,lx.a)(),data:{fileKey:e,source:l?"add_file_modal_search":"add_file_modal_suggested"}}))},[t,l]);r.useEffect(()=>(t(lC.Dy({entryPoint:"file_browser:file_picker_modal"})),t(lC.Rz({workspaceFilter:e})),()=>{t(lC.Rz({workspaceFilter:null})),t(lC.ky())}),[t,i,e]);let b=r.useCallback(e=>{i(e)},[]);if("loaded"!==f.status||"loaded"!==u.status)return r.createElement(lR,{title:(0,S.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,S.t)("general.next"),isDisabled:!0,query:l,onSearchChange:b,clearSearch:g.lQ,searchPlaceholder:(0,S.t)("file_browser.choose_file_modal.search_for_a_file")},r.createElement("div",{className:$()(k.s.flex.itemsCenter.justifyCenter.wFull.hFull.flexGrow1.$)},r.createElement(en.qc,null)));let v=e=>{let t=f.data.get(e.key);return!!t&&!t?.canPinFileToWorkspace};return r.createElement(lS,{confirmText:(0,S.t)("general.next"),emptyStateText:l?(0,S.tx)("file_browser.workspace_pinning.no_files_matching_query",{searchQuery:r.createElement("div",{className:k.s.colorText.fontMedium.truncate.$},l)}):(0,S.t)("file_browser.workspace_pinning.no_suggested_files"),files:u.data,gridText:l?void 0:(0,S.t)("file_browser.pinning.suggested"),onSelectFile:m,onSubmit:E,query:l,renderFileTile:(e,t)=>r.createElement(lL,{file:e,orgName:o,isDisabled:v(e)}),setQuery:b,shouldDisableTile:v,tileClassName:"choose_file_to_pin_modal--showOnHoverContainer--DO9-h",title:(0,S.t)("file_browser.pinning.pin_modal.pin_file_to_workspace")})},"ChooseFileToPinModal");var lM=a(484169),lB=a(687113),lU=a(89853),l$=a(944539),lj=a(344132),lW=a(568681),lG=a(244417),lV=a(106340),lH=a(970320);let lz={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,pinToWorkspace:!0};function lK({suggestedFiles:e}){let t=e.slice(0,8),a=(0,eA._6)(),o=(0,n.wA)(),{showing:l,show:i,data:s}=(0,lj.L)(),c=r.useCallback((e,t)=>{d.Ay.redirect((0,t2.r1)(e)),(0,V.k1)(e.key,{selectedViewName:a.view,entrypoint:"suggested_files_empty_state"}),t.stopPropagation(),t.preventDefault()},[a.view]),m=r.useCallback((e,t)=>{c(e,t)},[c]),u=r.useCallback((e,t,a)=>{let r=e[0];r&&i({data:{tile:(0,lN.bn)(r),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a}})},[i]);return r.createElement(r.Fragment,null,r.createElement("div",{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr"},(0,S.t)("file_browser.pinning.suggested")),r.createElement(lG.A,{items:t,multiselectDisabled:!0,isDraggable:!1,handleOpenItem:m,onSelection:e=>{o(tQ.an()),o(tQ.PW({type:t9.F.FILES,keys:e.map(e=>e.key)}))},handleContextMenu:u,gridViewProps:{containerStyle:lq.grid,renderTile:e=>r.createElement("div",{className:"x1dmp6jm xkib98w xbyyjgo x12oqio5 xgk9eko xb3r6kr"},r.createElement(ab.NM,{file:e,noBorder:!0,size:aA.y.SMALL})),tileBorderRadius:8,tileBorderStyle:"dashed",tileFooterPosition:"right",renderTileFooter:(e,{isSelected:t,isHovered:a})=>r.createElement(lY,{file:e,isHovered:a,isSelected:t})},viewType:lH.XU.GRID}),l&&s?.tile?r.createElement(lW.i,{tileActions:lz,openTile:e=>c(s.tile.file,e),tile:s.tile,selectedTiles:[s.tile],dropdownVisible:l}):null)}function lY({file:e,isHovered:t,isSelected:a}){let o=(0,n.wA)(),l=r.useCallback(t=>{o(tf.to({type:(0,lx.a)(),data:{fileKey:e.key,source:"suggested_files_empty_state"}})),t.stopPropagation(),t.preventDefault()},[o,e]),i=e.project?.name;return r.createElement("div",{className:"x78zum5 xdt5ytf x195vfkc x1iyjqo2 xl56j7k xb3r6kr xq1n1xh"},r.createElement("div",{...n_.xk(lq.fileName)},e.name),t||a||E.Ay.mobile||E.Ay.tablet?r.createElement("div",{role:"button",tabIndex:0,className:"x1quhyk7 xlyipyv xuxw1ft xb3r6kr x1ypdohk",onClick:l},(0,S.t)("file_browser.pinning.pin_file")):i?r.createElement("div",{className:"x1n0bwc9 xlyipyv xuxw1ft xb3r6kr"},i):null)}let lq={fileName:{...nu.g.textBodyMedium,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},grid:{gridTemplateColumns:"xem2tbl",gap:"xou54vl",rowGap:null,columnGap:null,$$css:!0}};function lJ({workspaceId:e}){let t;let a=function(e){let t=r5.Qw.useTransform((0,_.Rs)(eK.m28,{}),e=>{if(!e.currentUser.recentFiles2)return[];let t=[];for(let{file:a}of e.currentUser?.recentFiles2)a&&t.push(a);return t});return(0,lN.z1)(t,e)}(e);return t="loaded"!==a.status?r.createElement("div",{className:k.s.py1.h20.wFull.$},r.createElement(en.qc,null)):a.data.length>0?r.createElement(lK,{suggestedFiles:a.data}):r.createElement("span",{className:k.s.colorTextSecondary.truncate.textBodyLarge.alignCenter.$},(0,S.t)("file_browser.pinning.no_pinned_files")),r.createElement("div",{className:k.s.bRadius8.colorBgSecondary.px32.py24.flex.flexColumn.gap16.mt8.$},t)}var lX=a(891627),lQ=a(376852),lZ=a(879378),l0=a.n(lZ),l1=a(398612),l4=a(459633),l2=a(952401),l3=a(173926),l5=a(239851),l8=a(289297),l6=a(806362);function l7({pinnedFile:e}){let t=(0,lN.bn)(e.file),a=(0,l5.l)(e.file.folderId),n=(0,l8.C)(t);return r.createElement("div",{className:k.s.bRadius8.borderBox.p16.flex.flexColumn.gap16.colorBg.colorText.b1.bSolid.colorBorder.elevation300.flexGrow1.$,style:es.sx.add({width:"422px",overflowY:"auto",overflowX:"hidden"}).$},r.createElement("div",{className:k.s.flex.flexRow.gap16.$},r.createElement("div",{className:k.s.flexBasisAuto.$},r.createElement(l6.e,{entity:{id:e.creator.id,img_url:e.creator.imgUrl,name:e.creator?.name??void 0,handle:e.creator?.handle}})),r.createElement("div",{className:k.s.flex.flexColumn.overflowHidden.$},r.createElement("div",{className:k.s.flex.flexRow.gap8.textBodyLarge.$},r.createElement(R.E,{fontWeight:"semi-bold",truncate:!0},e.creator.name),r.createElement("span",{className:k.s.flexBasisAuto.flexGrow1.flexShrink0.$},r.createElement(R.E,{color:"secondary"},r.createElement(l3.h1,{date:e.createdAt})))),r.createElement("div",{className:k.s.textBodyLarge.overflowBreakWord.$,dangerouslySetInnerHTML:{__html:(0,l2.p)((0,lM.sP)(e.description))}}))),r.createElement("div",{className:k.s.flex.flexColumn.$},r.createElement("div",{className:k.s.bRadius8.b1.colorBorder.bSolid.wFull.overflowHidden.$},r.createElement("div",null,r.createElement(lB.e,{tile:t,noBorder:!0})),r.createElement("div",{className:k.s.flex.flexRow.gap8.itemsCenter.bt1.bSolid.colorBorder.p16.$},r.createElement("div",{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4"},r.createElement(aE.w4,{size:16,type:n}),r.createElement("div",{className:k.s.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$},r.createElement("div",{...n_.Ay.props(it.title)},e.file.name),"loaded"===a.status&&a.data?r.createElement("div",{...n_.Ay.props(it.subtitle)},a.data):null))))))}let l9={width:0,height:0};function ie({pinnedFile:e,targetRef:t,shouldHide:a}){let n=(0,l4.s)(t),[o,l]=(0,l4.M)(),[i,s]=r.useState(l9),[c,d]=r.useState(!1),m=r.useCallback(()=>{if(!t.current)return;let e=(0,l1.E)(t.current.getBoundingClientRect()),a=window.innerWidth,r=window.innerHeight,n=r-e.top-8,o=n>100;if(a-e.right>438&&o){s({transform:`translate(${e.right+8}px, ${e.top}px)`,maxHeight:n});return}if(e.left>438&&o){s({transform:`translate(${e.left-430}px, ${e.top}px)`,maxHeight:n});return}let l=430-(a-e.left),i=r-e.bottom-16;if(i>100){s({transform:`translate(${(0,lQ.qE)(e.left-l,0,e.left)}px, ${e.bottom+8}px)`,maxHeight:i});return}let c=e.top-16;s({top:"auto",bottom:"100vh",transform:`translate(${(0,lQ.qE)(e.left-l,0,e.left)}px, ${e.top-8}px)`,maxHeight:c})},[t,s]),_=!a&&(n||l),p=(0,u.ZC)(_);if(r.useEffect(()=>{if(!p&&_)m();else if(p&&!_){d(!0);let e=setTimeout(()=>{d(!1)},(0,n3.XB)("150ms"));return()=>{clearTimeout(e)}}},[_,p,m]),r.useEffect(()=>{let e=l0()(m),t=()=>{_&&e()};return document.addEventListener("scroll",t,!0),()=>{document.removeEventListener("scroll",t,!0)}},[_,m]),!t.current)return null;let f=r.createElement("div",{className:"pinned_files_hover--hoverCardOverflowWrapper--VaAZM"},r.createElement("div",{className:$()("pinned_files_hover--hoverCard--MLJbb",_&&"pinned_files_hover--makeVisible--QrDF7"),style:i,ref:o,role:"tooltip",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(_||c)&&r.createElement(l7,{pinnedFile:e})));return lX.createPortal(f,document.body)}let it={title:{...nu.g.textBodyMediumStrong,$$css:!0},subtitle:{...nu.g.textBodyMedium,$$css:!0}},ia={open:!0,openNewTab:!0,showInFolder:!0,copyLink:!0,share:!0,duplicateToDrafts:!0,pinToWorkspace:!0,publishOrgTemplate:!0,favoriteFile:!0,unfavoriteFile:!0},ir=[];function io({workspace:e}){let t=(0,n.wA)(),a=(0,eA._6)(),o=(0,J.TA)(),{showing:l,show:i,data:s}=(0,lj.L)(),c=(0,l$.v)(),d=r.useCallback((t,r,n,o)=>{c(t,n),(0,V.E9)(V.gH,r.file,{entrypoint:o,selectedView:a.view,resourceType:"workspace",resourceId:e.id,pinDescription:(0,lM._Z)(r.description)})},[c,a.view,e.id]),m=r.useCallback((e,t)=>{d((0,lN.bn)(e.file),e,t,"pinned files")},[d]),u=e.pinnedFiles??ir,_=r.useCallback(a=>{let r=a[0];r&&(e.canAdmin||r.creator?.id===o)&&t(tf.to({type:(0,lU.I)(),data:{pinnedFileId:r.id}}))},[e.canAdmin,o,t]),p=r.useMemo(()=>u.filter(({file:e})=>!!e).map(e=>(0,lN.bn)(e.file)),[u]),f=(0,t1.nw)(p),g=r.useMemo(()=>u.sort((e,t)=>e.createdAt>t.createdAt?1:-1),[u]);return r.createElement(r.Fragment,null,u.length>0?r.createElement(lG.A,{doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,gridViewProps:{containerStyle:is.grid,renderTile:e=>r.createElement(il,{pinnedFile:e,isDropdownOpen:l}),renderTileFooter:e=>r.createElement(ii,{pinnedFile:e}),renderTileDragImage:e=>r.createElement(ab.NM,{file:e.file,noBorder:!0})},handleContextMenu:(e,a,r)=>{t(tQ.an());let n=e.map(e=>e.file).filter(e=>null!==e);t(tQ.PW({type:t9.F.FILES,keys:n.map(e=>e.key)}));let o=n[0];o&&i({data:{tile:(0,lN.bn)(o),targetRect:{top:a.clientY,right:a.clientX,bottom:a.clientY,left:a.clientX,width:1,height:1},index:r}})},handleDeleteKey:_,handleDragDataTransfer:(e,t)=>{t.setFigFilesData(e.map(e=>lV.F.toSinatra(e.file)))},handleOpenItem:m,isDraggable:!0,items:g,viewType:lH.XU.GRID}):r.createElement(lJ,{workspaceId:e.id}),(()=>{let e=s?.tile??null,t=s?.index??0;return r.createElement(lW.i,{tile:e,selectedTiles:f,tileActions:ia,openTile:a=>{e&&d(e,u[t],a,"pinned files: context menu")},dropdownVisible:l})})())}function il({pinnedFile:e,isDropdownOpen:t}){let a=r.useRef(null),n=(0,lN.bn)(e.file);return r.createElement(r.Fragment,null,r.createElement(ie,{pinnedFile:e,targetRef:a,shouldHide:t}),r.createElement("div",{ref:a},r.createElement(lB.e,{tile:n,noBorder:!0,size:aA.y.SMALL})))}function ii({pinnedFile:e}){return r.createElement("div",{className:"x1y1aw1k x78zum5 xdt5ytf"},r.createElement("span",{...n_.xk(is.fileName)},e.file.name),r.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary"},(0,S.t)("tile.file_tile.pinned_by_user",{name:e.creator?.name??""})))}let is={fileName:{...nu.g.textBodyLargeStrong,textOverflow:"xlyipyv",whiteSpace:"xuxw1ft",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},grid:{paddingTop:"xyamay9",gridTemplateColumns:"x1g5i94c",userSelect:"x87ps6o",$$css:!0}},ic=(0,ec.Iz)(e=>(0,ec.E2)(`file_browser.workspace.pinned_section_open.${e}`,!0,lh.z.boolean()));function id({workspace:e,isAssignedWorkspace:t,onLoad:a}){r.useEffect(()=>{a?.()},[a]);let[o,l]=(0,ec.fp)(ic(e.id)),i=r.useCallback(()=>l(e=>!e),[l]),s=(0,n.wA)(),c=e.pinnedFiles?.length??0,d=t||e.canAdmin,m=c>=lN.D1,u=d||c>0,_=r.useCallback(()=>{s(tf.to({type:lD,data:{workspaceId:e.id}}))},[s,e.id]);return r.createElement(r.Fragment,null,u&&r.createElement(lT,{isOpen:o,toggleIsOpen:i,collapseHeader:r.createElement("div",{className:k.s.flex.justifyBetween.itemsCenter.wFull.$},r.createElement("div",{"aria-expanded":o,role:"button",tabIndex:0,className:k.s.flex.flexRow.gap4.itemsCenter.textBodyLargeStrong.cursorDefault.$,onClick:i},(0,S.t)("file_browser.pinning.pinned_files")),d&&r.createElement(oL.$n,{variant:"link",onClick:_,disabled:m,htmlAttributes:{"data-tooltip":m?(0,S.t)("file_browser.pinning.max_files.add_button_tooltip",{maxPins:lN.D1}):void 0,"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip-show-above":!0}},(0,S.t)("file_browser.pinning.add_file"))),content:r.createElement(io,{workspace:e})}))}function im({workspaceId:e}){let t=(0,Y.sZ)(),a=(0,_.Rs)(eK.aON,{orgId:t.id,workspaceId:e}),n=(0,_.Rs)(eK.nD$,{workspaceId:e}).transform(e=>e.workspace?.members??null),o=oC({workspaceId:e,onlyJoinedTeams:!1}),l=function(){let e=r.useRef(void 0);e.current||(e.current=performance.now());let t=r.useRef("hidden"===document.visibilityState),a=r.useRef(!1===navigator.onLine);return r.useEffect(()=>{let e=new AbortController;return document.addEventListener("visibilitychange",()=>{"hidden"===document.visibilityState&&(t.current=!0)},{signal:e.signal}),window.addEventListener("offline",()=>{a.current=!0},{signal:e.signal}),()=>{e.abort()}},[]),r.useCallback(r=>{t.current||a.current||np.definedAnalyticsHandler.trackDefinedEvent("file_browser.workspace_page_load_time",{type:r,durationMs:Math.round(performance.now()-e.current)})},[])}();if("loading"===a.status)return r.createElement(en.qc,null);if("loaded"!==a.status)return r.createElement(oW.S,{resourceType:nQ.Ft.WORKSPACE});let i=a.data.workspace;if(!i||!i.canView)return r.createElement(oW.S,{resourceType:nQ.Ft.WORKSPACE});let s=(0,X.eO)(a.data.currentUser)===i.id;return r.createElement(iu,{org:t,workspace:i,workspaceMembersQuery:n,workspaceOrgTeamsQuery:o,isAssignedWorkspace:s,trackPerfEvent:l})}function iu({org:e,workspace:t,workspaceMembersQuery:a,workspaceOrgTeamsQuery:n,isAssignedWorkspace:o,trackPerfEvent:l}){(0,tZ.hL)(t.name);let s={...t,members:a.data??[]},c=a.transform(e=>!!e&&e.length>0),d=t.admins.length>0,m=c.transform(e=>e||d).unwrapOr(!0);r.useEffect(()=>{l("initial_load")},[l]),r.useEffect(()=>{"loaded"===a.status&&l("members_load")},[a.status,l]);let u=r.useCallback(()=>{l("pinned_files_load")},[l]),_=r.useCallback(()=>{l("teams_load")},[l]);return(0,i.kF)("Workspace"),(0,i.WX)({markName:"MainBodyContent",isLoaded:"loaded"===n.status,contextArgs:{numTeams:n.transform(e=>e.length).unwrapOr(null)}}),r.createElement(oO.r,{header:r.createElement(lb,{workspace:s,org:e,isWorkspaceMembersLoading:"loading"===a.status,showMembersButton:m}),content:r.createElement("div",{className:k.s.flex.flexColumn.gap24.my24.$},r.createElement("section",{"aria-label":(0,S.t)("file_browser.pinning.pinned_files"),className:k.s.pl12.pr32.borderBox.wFull.$},r.createElement(id,{workspace:t,isAssignedWorkspace:o,onLoad:u})),r.createElement(ok,null,r.createElement(ox,{orgTeamsQuery:n,workspaceId:t.id,onLoad:_}))),metaContent:c.unwrapOr(!1)?r.createElement(lv,{workspace:s}):void 0})}var i_=a(956494),ip=a(118287),ig=a(852314),iE=a(434289),ib=a(129723),iv=a(26435),ih=a(603592),iw=a(66325),iy=a(352185),iT=a(580213),iI=a(69862),ix=a(3649),iN=a(84257),iC=a(627062),ik=a(628875);function iS({tab:e}){return r.createElement("div",null,r.createElement("h1",{...n_.xk(iR.headerText)},(0,S.t)("community.resource_hub.browse_resources")),r.createElement("div",{...n_.xk(iR.subHeaderText)},e===ny.N$.INTERNAL?(0,S.t)("community.resource_hub.browse_resources_internal_subheader"):(0,S.t)("community.resource_hub.browse_resources_community_subheader")))}let iR={headerText:{...nu.g.textHeadingMedium,paddingTop:"xz9dl7a",$$css:!0},subHeaderText:{...nu.g.textBodyMedium,paddingTop:"x1y1aw1k",color:"x1n0bwc9",$$css:!0}};var iA=a(661915),iO=a(935528),iP=a(700660),iL=a(582261),iF=a(536549),iD=a(221511);let iM=new Set([iL.LJ.uiKits,iL.LJ.wireframes,iL.LJ.designTemplates,iL.LJ.mobileApps,iL.LJ.portfolios,iL.LJ.resumes,iL.LJ.visualAssets,iL.LJ.illustrations,iL.LJ.icons,iL.LJ.shapesColors]),iB=new Set([iL.LJ.brainstorming,iL.LJ.diagramming,iL.LJ.funGames,iL.LJ.teamMeetings,iL.LJ.whiteboarding,iL.LJ.strategicPlanning]),iU=new Set([iL.LJ.editingEffects,iL.LJ.fileOrganization,iL.LJ.development,iL.LJ.whiteboarding,iL.LJ.designTools,iL.LJ.importExport,iL.LJ.accessibility,iL.LJ.prototypingAnimation]),i$=new Set([iL.LJ.presentations]),ij=new Set([iL.LJ.desktopAppsWebsites]),iW={DESIGN_RESOURCES:"designResources",PLUGINS_AND_WIDGETS:"pluginsAndWidgets",WHITEBOARDING:"whiteboarding",PRESENTATIONS:"presentations",WEBSITES:"websites"};function iG(e){let t=(0,nw.Om)(),a=(0,nw.tv)();return(0,r.useMemo)(()=>Object.fromEntries(e.map(({key:e,category:r,resource_type:n,editor_type:o,tag:l})=>[e,new iT.Dv({...t,categorySlug:r,tagSlug:l},{resource_type:n??iD.L.BrowseResourceTypes.FILES,editor_type:o??void 0,...a})])),[e,t,a])}var iV=(e=>(e.marketing="marketing",e.product="product",e.pitchDeck="pitch-deck",e.sales="sales",e.landingPages="landing-pages",e.portfolio="portfolio",e.ecommerce="ecommerce",e.blog="blog",e.wedding="wedding",e.photography="photography",e))(iV||{});function iH(e,t,a){let r=t?({marketing:(0,S.t)("community.resource_hub.categories.marketing_presentations"),product:(0,S.t)("community.resource_hub.categories.product_presentations"),"pitch-deck":(0,S.t)("community.resource_hub.categories.pitch_decks"),sales:(0,S.t)("community.resource_hub.categories.sales_presentations"),"landing-pages":(0,S.t)("community.resource_hub.categories.landing_pages"),portfolio:(0,S.t)("community.resource_hub.categories.portfolio"),ecommerce:(0,S.t)("community.resource_hub.categories.ecommerce"),blog:(0,S.t)("community.resource_hub.categories.blog"),wedding:(0,S.t)("community.resource_hub.categories.wedding"),photography:(0,S.t)("community.resource_hub.categories.photography")})[t]:void 0;if(r)return r;let n=a?function(e,t){let a={[iL.LJ.whiteboarding]:{[iD.L.BrowseResourceTypes.WIDGETS]:(0,S.t)("categories.widgets")},[iL.LJ.designTools]:{[iD.L.BrowseResourceTypes.PLUGINS]:(0,S.t)("community.view_bar.plugins")}};return a[e]?.[t]}(e,a):void 0;return n?n:({[iL.LJ.mobileApps]:(0,S.t)("community.resource_hub.categories.mobile_app_templates"),[iL.LJ.desktopAppsWebsites]:(0,S.t)("community.resource_hub.categories.websites")})[e]||(0,iF.xF)(e)}var iz=a(278905),iK=a(88706),iY=a(478538);let iq="category_menu_button--buttonText--0inUk";function iJ({defaultText:e,iconPrefix:t,categorySlug:a,tagSlug:n,resourceType:o,getTriggerProps:l,isSelected:i}){let s=a?iH(a,n,o):void 0;return r.createElement(nd.E,{"aria-pressed":i,className:$()(iY.x6,iY.Mg,i&&iY.wH),...l()},r.createElement("span",{className:iY.IO},t,r.createElement("span",{className:iq},s||e),r.createElement(iK.r,null)))}function iX({parentDropdown:e,defaultText:t,iconPrefix:a,menuItemsByGroup:n}){let{getTriggerProps:o,manager:l}=iz.b(),i=(0,iC.Rd)(iT.Dv),s=i?.categorySlug,c=i?.tagSlug,m=(0,iC.vA)(iT.Dv),u=m?.resource_type,_=s&&(s?s===iL.LJ.whiteboarding?u===iD.L.BrowseResourceTypes.WIDGETS?iW.PLUGINS_AND_WIDGETS:iW.WHITEBOARDING:iB.has(s)?iW.WHITEBOARDING:iU.has(s)?iW.PLUGINS_AND_WIDGETS:iM.has(s)?iW.DESIGN_RESOURCES:i$.has(s)?iW.PRESENTATIONS:ij.has(s)?iW.WEBSITES:null:null)===e;return r.createElement(iz.bL,{manager:l},r.createElement(iJ,{defaultText:t,iconPrefix:a,categorySlug:_?s:void 0,tagSlug:c,resourceType:u,getTriggerProps:o,isSelected:l.isOpen}),r.createElement(iz.mc,null,n.map((e,t)=>r.createElement(iz.YJ,{key:t},e.map((e,t)=>r.createElement(iz.q7,{key:t,onClick:()=>{(0,nI.pt)(e?.href??""),d.Ay.push(e?.href??"")}},e.text))))))}function iQ(){let e=iG([{key:"uikitRoute",category:iL.LJ.uiKits},{key:"wireframesRoute",category:iL.LJ.wireframes},{key:"socialMediaTemplatesRoute",category:iL.LJ.socialMediaTemplates,editor_type:iP.k.Editors.COOPER},{key:"cardTemplatesRoute",category:iL.LJ.cardTemplates,editor_type:iP.k.Editors.COOPER},{key:"designTemplatesRoute",category:iL.LJ.designTemplates},{key:"mobileAppRoute",category:iL.LJ.mobileApps},{key:"portfolioRoute",category:iL.LJ.portfolios},{key:"resumeRoute",category:iL.LJ.resumes},{key:"visualAssetsRoute",category:iL.LJ.visualAssets},{key:"illustrationsRoute",category:iL.LJ.illustrations},{key:"iconsRoute",category:iL.LJ.icons},{key:"shapesColorsRoute",category:iL.LJ.shapesColors}]),t=[[{href:e.uikitRoute?.href,text:(0,S.t)("categories.ui_kits")},{href:e.wireframesRoute?.href,text:(0,S.t)("categories.wireframes")}],[{href:e.socialMediaTemplatesRoute?.href,text:(0,S.t)("categories.social_media_templates")},{href:e.cardTemplatesRoute?.href,text:(0,S.t)("categories.cards_and_invites")}],[{href:e.mobileAppRoute?.href,text:(0,S.t)("community.resource_hub.categories.mobile_app_templates")},{href:e.resumeRoute?.href,text:(0,S.t)("categories.resume_templates")},{href:e.portfolioRoute?.href,text:(0,S.t)("categories.portfolio_templates")},{href:e.designTemplatesRoute?.href,text:(0,S.t)("community.resource_hub.see_more")}],[{href:e.iconsRoute?.href,text:(0,S.t)("categories.icons")},{href:e.illustrationsRoute?.href,text:(0,S.t)("categories.illustrations")},{href:e.shapesColorsRoute?.href,text:(0,S.t)("categories.shapes_colors")},{href:e.visualAssetsRoute?.href,text:(0,S.t)("community.resource_hub.see_more")}]].filter(e=>e.length>0);return r.createElement(iX,{parentDropdown:iW.DESIGN_RESOURCES,menuItemsByGroup:t,defaultText:(0,S.t)("community.homepage.figma_section.header"),iconPrefix:r.createElement(iO.n,null)})}var iZ=a(80145);function i0(){let e=iG([{key:"editingEffectsRoute",category:iL.LJ.editingEffects,resource_type:iD.L.BrowseResourceTypes.PLUGINS},{key:"fileOrganizationRoute",category:iL.LJ.fileOrganization,resource_type:iD.L.BrowseResourceTypes.PLUGINS},{key:"developmentRoute",category:iL.LJ.development,resource_type:iD.L.BrowseResourceTypes.PLUGINS},{key:"widgetsRoute",category:iL.LJ.whiteboarding,resource_type:iD.L.BrowseResourceTypes.WIDGETS},{key:"pluginsRoute",category:iL.LJ.designTools,resource_type:iD.L.BrowseResourceTypes.PLUGINS},{key:"importExportRoute",category:iL.LJ.importExport,resource_type:iD.L.BrowseResourceTypes.PLUGINS},{key:"accessibilityRoute",category:iL.LJ.accessibility,resource_type:iD.L.BrowseResourceTypes.PLUGINS},{key:"prototypingAnimationRoute",category:iL.LJ.prototypingAnimation,resource_type:iD.L.BrowseResourceTypes.PLUGINS}]),t=[[{href:e.fileOrganizationRoute?.href,text:(0,S.t)("categories.file_organization")},{href:e.developmentRoute?.href,text:(0,S.t)("categories.navbar.development")},{href:e.editingEffectsRoute?.href,text:(0,S.t)("categories.editing_effects")},{href:e.importExportRoute?.href,text:(0,S.t)("categories.import_export")},{href:e.accessibilityRoute?.href,text:(0,S.t)("categories.accessibility_tools")},{href:e.prototypingAnimationRoute?.href,text:(0,S.t)("categories.prototyping_animation")}],[{href:e.widgetsRoute?.href,text:(0,S.t)("community.resource_hub.categories.see_all_widgets")},{href:e.pluginsRoute?.href,text:(0,S.t)("community.resource_hub.categories.see_all_plugins")}]];return r.createElement(iX,{parentDropdown:iW.PLUGINS_AND_WIDGETS,defaultText:(0,S.t)("community.resource_hub.categories.plugins_and_widgets"),iconPrefix:r.createElement(iZ.u,null),menuItemsByGroup:t})}var i1=a(901948);function i4(){let e=iG([{key:"marketingRoute",category:iL.LJ.presentations,tag:iV.marketing,editor_type:iP.k.Editors.SLIDES},{key:"productRoute",category:iL.LJ.presentations,tag:iV.product,editor_type:iP.k.Editors.SLIDES},{key:"pitchDecksRoute",category:iL.LJ.presentations,tag:iV.pitchDeck,editor_type:iP.k.Editors.SLIDES},{key:"salesRoute",category:iL.LJ.presentations,tag:iV.sales,editor_type:iP.k.Editors.SLIDES},{key:"presentationsRoute",category:iL.LJ.presentations,editor_type:iP.k.Editors.SLIDES}]),t=[[{href:e.marketingRoute?.href,text:(0,S.t)("community.resource_hub.categories.marketing_presentations")},{href:e.productRoute?.href,text:(0,S.t)("community.resource_hub.categories.product_presentations")},{href:e.pitchDecksRoute?.href,text:(0,S.t)("community.resource_hub.categories.pitch_decks")},{href:e.salesRoute?.href,text:(0,S.t)("community.resource_hub.categories.sales_presentations")}],[{href:e.presentationsRoute?.href,text:(0,S.t)("community.resource_hub.see_more")}]];return r.createElement(iX,{parentDropdown:iW.PRESENTATIONS,menuItemsByGroup:t,defaultText:(0,S.t)("categories.presentations"),iconPrefix:r.createElement(i1.l,null)})}function i2(){let e=iG([{key:"websitesRoute",category:iL.LJ.desktopAppsWebsites,editor_type:iP.k.Editors.SITES},{key:"landingPagesRoute",category:iL.LJ.desktopAppsWebsites,tag:iV.landingPages,editor_type:iP.k.Editors.SITES},{key:"portfolioRoute",category:iL.LJ.desktopAppsWebsites,tag:iV.portfolio,editor_type:iP.k.Editors.SITES},{key:"ecommerceRoute",category:iL.LJ.desktopAppsWebsites,tag:iV.ecommerce,editor_type:iP.k.Editors.SITES},{key:"blogRoute",category:iL.LJ.desktopAppsWebsites,tag:iV.blog,editor_type:iP.k.Editors.SITES},{key:"weddingRoute",category:iL.LJ.desktopAppsWebsites,tag:iV.wedding,editor_type:iP.k.Editors.SITES},{key:"photographyRoute",category:iL.LJ.desktopAppsWebsites,tag:iV.photography,editor_type:iP.k.Editors.SITES}]),t=[[{href:e.landingPagesRoute?.href,text:(0,S.t)("community.resource_hub.categories.landing_pages")},{href:e.portfolioRoute?.href,text:(0,S.t)("community.resource_hub.categories.portfolio")},{href:e.ecommerceRoute?.href,text:(0,S.t)("community.resource_hub.categories.ecommerce")},{href:e.blogRoute?.href,text:(0,S.t)("community.resource_hub.categories.blog")},{href:e.weddingRoute?.href,text:(0,S.t)("community.resource_hub.categories.wedding")},{href:e.photographyRoute?.href,text:(0,S.t)("community.resource_hub.categories.photography")}],[{href:e.websitesRoute?.href,text:(0,S.t)("community.resource_hub.see_more")}]];return r.createElement(iX,{parentDropdown:iW.WEBSITES,menuItemsByGroup:t,defaultText:(0,S.t)("community.resource_hub.categories.websites"),iconPrefix:r.createElement(nC.J,null)})}var i3=a(763276);function i5(){let e=iG([{key:"brainstormingRoute",category:iL.LJ.brainstorming},{key:"diagrammingRoute",category:iL.LJ.diagramming},{key:"funGamesRoute",category:iL.LJ.funGames},{key:"teamMeetingsRoute",category:iL.LJ.teamMeetings},{key:"whiteboardingRoute",category:iL.LJ.whiteboarding},{key:"strategicPlanningRoute",category:iL.LJ.strategicPlanning}]),t=[[{href:e.diagrammingRoute?.href,text:(0,S.t)("categories.diagramming")},{href:e.brainstormingRoute?.href,text:(0,S.t)("categories.brainstorming")},{href:e.funGamesRoute?.href,text:(0,S.t)("categories.fun_games")},{href:e.teamMeetingsRoute?.href,text:(0,S.t)("categories.team_meetings")},{href:e.strategicPlanningRoute?.href,text:(0,S.t)("categories.strategic_planning")}],[{href:e.whiteboardingRoute?.href,text:(0,S.t)("community.resource_hub.see_more")}]];return r.createElement(iX,{parentDropdown:iW.WHITEBOARDING,menuItemsByGroup:t,defaultText:(0,S.t)("categories.whiteboarding"),iconPrefix:r.createElement(i3.D,null)})}function i8(){return r.createElement(iA.a,{mode:"match"},r.createElement("div",{className:"x78zum5 x1q0g3np x167g77z x1a02dak"},r.createElement(iQ,null),r.createElement(i0,null),r.createElement(i4,null),r.createElement(i5,null),r.createElement(i2,null)))}var i6=a(986336),i7=a(897163);function i9({limit:e,resourceType:t,category:a,editorType:r,caller:n,includeContent:o}){let[{data:l,status:i}]=(0,p.IT)(i7.a.ResourcesPaginatedQuery({resourceType:[t],category:a,editorType:r,caller:n,pageSize:e,includeContent:o}));return{resources:l,loading:"loading"===i}}var se=a(238445),st=a(805608),sa=a(972382),sr=a(413927),sn=a(491383),so=a(230618);let sl={card:{borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},cardShadow:{boxShadow:"x1u3p76b",$$css:!0},cardWidth:{width:"xamxeob",$$css:!0},cardTransition:{transition:"x1el4u5y",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,$$css:!0}};function si({imageSources:e,isHovered:t}){return r.createElement("div",{className:"x10l6tqk x1y0lptx xxbcxho x78zum5 x1q0g3np x1v2ro7d x1g75g36"},e.map((e,a)=>r.createElement(so.oW,{key:a,...n_.xk(ss.image,sl.card,t&&ss.hoveredImage),src:(0,rf.ck)(e),alt:""})))}let ss={image:{...sl.cardShadow,transition:"x1i5byms",transitionBehavior:null,transitionDelay:null,transitionDuration:null,transitionProperty:null,transitionTimingFunction:null,flexGrow:"x1iyjqo2",aspectRatio:"xacr46v",$$css:!0},hoveredImage:{transform:"xqc4caa",$$css:!0}};function sc({imageSources:e,isHovered:t}){return r.createElement(r.Fragment,null,r.createElement(so.oW,{...n_.xk(sd.image,sd.frontImage,sl.card,t&&sd.frontImageHovered),src:(0,rf.ck)(e[0]),alt:""}),r.createElement(so.oW,{...n_.xk(sd.image,sd.backImage,sl.card,t&&sd.backImageHovered),src:(0,rf.ck)(e[1]),alt:""}))}let sd={image:{...sl.cardWidth,...sl.cardShadow,...sl.cardTransition,position:"x10l6tqk",left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,$$css:!0},frontImage:{transform:"xkz1y4k",bottom:"x874rk5",$$css:!0},backImage:{transform:"xpdgo6v",bottom:"x1y0lptx",$$css:!0},frontImageHovered:{transform:"xcvh5f3",$$css:!0},backImageHovered:{transform:"xgz6438",$$css:!0}};function sm({imageSource:e,isHovered:t}){return r.createElement("div",{className:"x10l6tqk x1d9swqr x5yr21d"},r.createElement(so.oW,{...n_.xk(su.image,t&&su.hoveredImage),src:(0,rf.ck)(e),alt:""}))}let su={image:{...sl.cardTransition,position:"x1n2onr6",height:"xlxyqfn",bottom:"x1y0lptx",$$css:!0},hoveredImage:{transform:"xeybphm",$$css:!0}};function s_({imageSource:e,containerStyle:t,isHovered:a}){let n="sheetStyle"===t?sp.hoveredSheetImage:sp.hoveredWidgetImage;return r.createElement("div",{...n_.xk(sp[t])},r.createElement(so.oW,{...n_.xk(sp.image,a&&n),src:(0,rf.ck)(e),alt:""}))}let sp={sheetStyle:{...sl.cardWidth,...sl.cardShadow,left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,transform:"xv9q2wl",position:"x10l6tqk",$$css:!0},hoveredSheetImage:{transform:"xfx47b9",$$css:!0},widgetCardStyle:{height:"x5yr21d",top:"x8l1umf",right:"x3m8u43",insetInlineStart:null,insetInlineEnd:null,opacity:"x1us6l5c",position:"x10l6tqk",$$css:!0},hoveredWidgetImage:{transform:"x1bao77f",$$css:!0},image:{...sl.cardTransition,width:"xh8yej3",height:"x5yr21d",$$css:!0}};function sf({imageSources:e,isHovered:t}){return r.createElement(r.Fragment,null,r.createElement(so.oW,{...n_.xk(sg.image,sg.bottomImage),src:(0,rf.ck)(e[0]),alt:""}),r.createElement(so.oW,{...n_.xk(sg.image,sg.middleImage,t&&sg.hoveredMiddleImage),src:(0,rf.ck)(e[1]),alt:""}),r.createElement(so.oW,{...n_.xk(sg.image,sg.topImage,t&&sg.hoveredTopImage),src:(0,rf.ck)(e[2]),alt:""}))}let sg={image:{...sl.cardWidth,...sl.cardTransition,position:"x10l6tqk",left:"x1nrll8i",insetInlineStart:null,insetInlineEnd:null,transform:"xuuh30",bottom:"x1y0lptx",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},bottomImage:{width:"xqjhr6n",boxShadow:"x1u3p76b",$$css:!0},middleImage:{width:"x8uc0wx",bottom:"x1g84rlc",boxShadow:"x1wu5q8a",$$css:!0},topImage:{bottom:"x1otreau",$$css:!0},hoveredMiddleImage:{transform:"xbtikzi",$$css:!0},hoveredTopImage:{transform:"x16ui88a",$$css:!0}};function sE({header:e,route:t,content:a,showSeeMore:n}){let o=t&&n?r.createElement(rI.e6,{"aria-label":(0,S.t)("community.resource_hub.see_more"),onClick:()=>{(0,nI.CA)(t.pathname),d.Ay.push(t.href)},className:"x78zum5 x8rdmch x6s0dn4 x19y5rnk x1d4akdp"},r.createElement("h3",{...n_.xk(sb.headerText),"data-testid":"section-header"},e),r.createElement(eH.a,null)):r.createElement("h3",{...n_.xk(sb.headerText),"data-testid":"section-header"},e);return r.createElement("div",null,r.createElement("div",{className:"x78zum5 x6s0dn4 x1y1aw1k xwib8y2 x1jnr06f"},o),a)}let sb={headerText:{...nu.g.textBodyLarge,lineHeight:"x1o2sk6j",$$css:!0}};var sv=(e=>(e.BRAINSTORMING="brainstorming",e.CARD_TEMPLATES="cardTemplates",e.CLASSROOM_ACTIVITIES="classroomActivities",e.DATA_TEMPLATES="dataTemplates",e.DESIGN_TUTORIALS="designTutorials",e.DEVELOPMENT="development",e.DIAGRAMMING="diagramming",e.EDITING_EFFECTS="editingEffects",e.FILE_ORGANIZATION="fileOrganization",e.PRESENTATIONS_LARGE="presentationsLarge",e.PRESENTATIONS_SMALL="presentationsSmall",e.RESUMES="resumes",e.STRATEGIC_PLANNING="strategicPlanning",e.TEAM_MEETINGS_SMALL="teamMeetingsSmall",e.TEAM_MEETINGS_LARGE="teamMeetingsLarge",e.UI_KITS="uiKits",e.VISUAL_ASSETS="visualAssets",e.WIDGETS="widgets",e.WIREFRAMES="wireframes",e.WORKSHOP_TEMPLATES="workshopTemplates",e))(sv||{});let sh={brainstorming:{category:iL.LJ.brainstorming,size:"large",art:e=>r.createElement(si,{imageSources:["f01ed35801ea5830119fbe503b42f18f8b8fa6bb","d96670e9dd7d8f500b1d82f97d4d08ca5762f014","25a7262271550cf605425ae1f9dbb3186df9e938","75319ef48f81cc1e0f733b2a9ee834ae20ad7383","1d6892175c739459b51f88450efd4fd63647a2d6","0e81b3f80cb2491aac0675bd33fbbbb79db59ddd"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},cardTemplates:{category:iL.LJ.cardTemplates,editorType:iP.k.Editors.COOPER,size:"small",art:e=>r.createElement(s_,{imageSource:"2c4bc9301e89bc080dbadbdb33df70febe9bf82f",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"cooper"},classroomActivities:{category:iL.LJ.classroomActivities,size:"small",art:e=>r.createElement(sc,{imageSources:["ad9ed6524f8541f00d3968f21e59fcc627be04a6","9633b9c063fd07075008ee206a4ea712c2931994"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},dataTemplates:{category:iL.LJ.dataTemplates,size:"small",art:e=>r.createElement(sc,{imageSources:["85c247027dd036bb720dbaac9ecf63318e138266","55da4072453228deaa707a61fac742fd6b8a1022"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},designTutorials:{category:iL.LJ.designTutorials,size:"large",art:e=>r.createElement(si,{imageSources:["f341d1cb6464b9ff5d2eb63c89eb380249fc7c78","985e74dda7ed515202f6b7a55ffc2e1562c9ff94","d48320278ece5f694fe686c2c971bcb9c5381f88","1864952e1f5b8fbc94fe85f548d41b77458dcc87","deb79a32eabbdaed5b86904ec9c4adda486345fb","3e63b05276c55b2d9e95c49e90969cc51023344b"],isHovered:e}),backgroundColor:sn.Tj.bgSecondary},development:{category:iL.LJ.development,resourceType:iD.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>r.createElement(sm,{isHovered:e,imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e"}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"design"},diagramming:{category:iL.LJ.diagramming,size:"large",art:e=>r.createElement(si,{imageSources:["378c5389dc551daa4f2a3daa5f4e4748fa811eb9","f5fa32f34d57e6b4b01f67f10c13fa4ced6fa20f","82cc8e76b689ad016a0e4871ad99f68fe7c67864","b1f9c2bb18232dd55c41e0528227a2a82ecdd151","37903eb6b345c31cc1ad0967dc6ff8a541a16b90","9f70f6b78199251bb1213c6f3e5e00df8fc0572b"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},editingEffects:{category:iL.LJ.editingEffects,resourceType:iD.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>r.createElement(sm,{imageSource:"6ce1bcbe88b8f4f202e4307f0de131f8fb6cf61e",isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"design"},fileOrganization:{category:iL.LJ.fileOrganization,resourceType:iD.L.BrowseResourceTypes.PLUGINS,size:"small",art:e=>r.createElement(sm,{imageSource:"2f1dc06209ebe620cb42e03cdb85da7ef9d9efa0",isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"design"},presentationsLarge:{category:iL.LJ.presentations,size:"large",art:e=>r.createElement(si,{imageSources:["0b6a114955ffe1c7a56e993323f212990422a525","0b8f4c7881cf0404fb105a1a680d74564205bc8c","b9d5d2df7dfd58ee29a44ecd72c83dbb6f6588c0","1eb484ec6df2d5d6874b92bae0b221fcbbebc79c","ed0ab6a51ef9b7275a9c123994db37df3188fee7","b616eae234aeefb2ad7c62d5f0bd84c843c3d86d"],isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"piper"},presentationsSmall:{category:iL.LJ.presentations,size:"small",art:e=>r.createElement(sf,{imageSources:["8b73180892c70a676c567732411c422e46f1fcae","4963a5a549df301b0ba8dbdc788c2c3424c4217e","e66ce4f446be08f56a330a9b39c5e9c72e6d3338"],isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"piper"},teamMeetingsLarge:{category:iL.LJ.teamMeetings,size:"large",art:e=>r.createElement(si,{imageSources:["b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d","61830de70c1cec8ae28737c1f9c36ff5a7b07d18","742fbce6b78404d48f62e39a6be510dce4cae699","6405c322fda966de6578a55cb0c861d2fb774b84","d22c05d35fc088e4d089e814f42379b395b86e26","89d7df8b21116cbf283086a5056f305de01f91a4"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},teamMeetingsSmall:{category:iL.LJ.teamMeetings,size:"small",art:e=>r.createElement(sc,{imageSources:["742fbce6b78404d48f62e39a6be510dce4cae699","b7e05a6d6b76b8b377e5c4f0eb006dfe99e5875d"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},resumes:{category:iL.LJ.resumes,size:"small",art:e=>r.createElement(s_,{imageSource:"ba7504eb5c18069ca8c0455768fcf46c6bc4ee52",containerStyle:"sheetStyle",isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"design"},strategicPlanning:{category:iL.LJ.strategicPlanning,size:"small",art:e=>r.createElement(sc,{imageSources:["3b212f16a905705728bf1dc973fa25001844b4bc","28c8e9a68927b0f9f55a41efd6df2251b8823eea"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},uiKits:{category:iL.LJ.uiKits,size:"small",art:e=>r.createElement(sc,{imageSources:["52e2511dc978b4b6aad9ad3799dd2fb75139cb2a","fc614bae349b646e1ea8ffe00e5b6e723ec9f13f"],isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"design"},visualAssets:{category:iL.LJ.visualAssets,size:"large",art:e=>r.createElement(sm,{imageSource:"a9b2bb97699222fc52104170706120e06c6f971a",isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"design"},widgets:{category:iL.LJ.whiteboarding,resourceType:iD.L.BrowseResourceTypes.WIDGETS,size:"large",art:e=>r.createElement(s_,{imageSource:"c14d817322fb0a630ceb76de93d5669b91e6bce1",containerStyle:"widgetCardStyle",isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"},wireframes:{category:iL.LJ.wireframes,size:"large",art:e=>r.createElement(si,{imageSources:["4c787218f1399d78e7035575c6041d05b7c51abf","4a119c09ddc4e5a598728b3121b81e7df52f30f0","d380df1c57eb9d1c6d963673d2c718d515b69e9e","c04936ee5bd33d718c78e37fd42e4f8dbe058f35","c8e4c4f9dd45d76797e4c8f1a7515fbbb0f49a61","448ad0f1bc089057cf63f983b7fe865ae1395a56"],isHovered:e}),backgroundColor:sn.Tj.bgBrandTertiary,brand:"design"},workshopTemplates:{category:iL.LJ.workshopTemplates,size:"small",art:e=>r.createElement(sc,{imageSources:["c6bfc0d07a504cbb9daa39452cb5d1afa29f4e36","6899629efb49a4e0cb289017a2a6c8380e494fae"],isHovered:e}),backgroundColor:sn.Tj.bgFigjamTertiary,brand:"seascape"}};function sw({size:e,title:t,description:a,art:n,backgroundColor:o,brand:l,route:i,userJobTitle:s}){let[c,m]=(0,r.useState)(!1);return r.createElement(sr.v,{mode:l},r.createElement(nd.E,{"aria-label":t,...n_.xk(sy.card,l?sy.cardBrandBorder:sy.cardStrongBorder,"large"===e?sy.largeCard:sy.smallCard),onClick:()=>{i&&((0,nI.rC)(s,i.href),d.Ay.push(i.href))},htmlAttributes:{onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1)},style:{backgroundColor:o},key:t},r.createElement("div",{className:"x78zum5 xdt5ytf x10l6tqk x13vifvy x1nejdyq x7eqkm1"},r.createElement("div",{...n_.xk(sy.title)},t),r.createElement("div",{className:"x1n0bwc9"},a)),n(c)))}let sy={smallCard:{flexBasis:"xhnlq4v",flexGrow:"x1iyjqo2",$$css:!0},largeCard:{flexBasis:"x4pfjvb",flexGrow:"xgyuaek",$$css:!0},card:{position:"x1n2onr6",display:"x1lliihq",placeItems:"x1hd2rbs",alignItems:null,justifyItems:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,height:"x5yr21d",overflow:"xb3r6kr",overflowX:null,overflowY:null,textAlign:"x1yc453h",$$css:!0},cardBrandBorder:{border:"xehbxol x1fz536k",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},cardStrongBorder:{border:"xehbxol x12jpku1",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0},title:{...nu.g.textHeadingSmall,fontWeight:"xk50ysn",$$css:!0}};function sT(){let e=(0,sa.w)(),t=function(e){let t={designer:["visualAssets","presentationsSmall","editingEffects"],developer:["diagramming","development","teamMeetingsSmall"],"product-manager":["widgets","presentationsSmall","teamMeetingsSmall"],marketer:["brainstorming","cardTemplates","resumes"],researcher:["diagramming","teamMeetingsSmall","strategicPlanning"],education:["classroomActivities","designTutorials","workshopTemplates"],"ux-writer":["uiKits","teamMeetingsLarge","fileOrganization"],data:["dataTemplates","presentationsLarge","strategicPlanning"],other:["wireframes","presentationsSmall","uiKits"],unknown:["wireframes","presentationsSmall","uiKits"]};return(t[e]||t.unknown).map(e=>sh[e]).filter(e=>void 0!==e)}(e),a=iG(t.map(e=>({key:e.category,category:e.category,resource_type:e.resourceType||void 0,editor_type:e.editorType||void 0}))),n=t.map(t=>({...function(e){switch(e){case iL.LJ.brainstorming:return{title:(0,S.t)("categories.brainstorming"),description:(0,S.t)("community.resource_hub.category_description.brainstorming")};case iL.LJ.cardTemplates:return{title:(0,S.t)("community.resource_hub.featured_categories.invites_templates"),description:(0,S.t)("community.resource_hub.category_description.card_templates")};case iL.LJ.classroomActivities:return{title:(0,S.t)("community.resource_hub.featured_categories.classroom_activities"),description:(0,S.t)("community.resource_hub.category_description.classroom_activities")};case iL.LJ.dataTemplates:return{title:(0,S.t)("community.footer.data_templates"),description:(0,S.t)("community.resource_hub.category_description.data_templates")};case iL.LJ.designTutorials:return{title:(0,S.t)("community.resource_hub.featured_categories.design_tutorials"),description:(0,S.t)("community.resource_hub.category_description.design_tutorials")};case iL.LJ.development:return{title:(0,S.t)("community.resource_hub.featured_categories.plugins_for_development"),description:(0,S.t)("community.resource_hub.category_description.development")};case iL.LJ.diagramming:return{title:(0,S.t)("categories.diagramming"),description:(0,S.t)("community.resource_hub.category_description.diagramming")};case iL.LJ.editingEffects:return{title:(0,S.t)("community.resource_hub.featured_categories.plugins_for_editing_and_effects"),description:(0,S.t)("community.resource_hub.category_description.editing_effects")};case iL.LJ.fileOrganization:return{title:(0,S.t)("community.resource_hub.featured_categories.plugins_for_file_organization"),description:(0,S.t)("community.resource_hub.category_description.file_organization")};case iL.LJ.presentations:return{title:(0,S.t)("categories.presentations"),description:(0,S.t)("community.resource_hub.category_description.presentations")};case iL.LJ.resumes:return{title:(0,S.t)("categories.resume_templates"),description:(0,S.t)("community.resource_hub.category_description.resumes")};case iL.LJ.strategicPlanning:return{title:(0,S.t)("categories.strategic_planning"),description:(0,S.t)("community.resource_hub.category_description.strategic_planning")};case iL.LJ.teamMeetings:return{title:(0,S.t)("community.resource_hub.featured_categories.team_meetings"),description:(0,S.t)("community.resource_hub.category_description.team_meetings")};case iL.LJ.uiKits:return{title:(0,S.t)("categories.ui_kits"),description:(0,S.t)("community.resource_hub.category_description.ui_kits")};case iL.LJ.visualAssets:return{title:(0,S.t)("community.resource_hub.featured_categories.assets"),description:(0,S.t)("community.resource_hub.category_description.visual_assets")};case iL.LJ.whiteboarding:return{title:(0,S.t)("categories.widgets"),description:(0,S.t)("community.resource_hub.category_description.widgets")};case iL.LJ.wireframes:return{title:(0,S.t)("categories.wireframes"),description:(0,S.t)("community.resource_hub.category_description.wireframes")};case iL.LJ.workshopTemplates:return{title:(0,S.t)("community.resource_hub.featured_categories.workshop_templates"),description:(0,S.t)("community.resource_hub.category_description.workshop_templates")};default:(0,C.xb)(e)}}(t.category),size:t.size,art:t.art,backgroundColor:t.backgroundColor,brand:t.brand,route:a[t.category],userJobTitle:e})),o=(0,r.useRef)(null),[l,i]=(0,r.useState)(0);(0,r.useEffect)(()=>{let e=new ResizeObserver(e=>{i(e[0]?.contentRect.width??0)});return o.current&&(i(o.current.clientWidth),e.observe(o.current)),()=>{e.disconnect()}},[o]);let s=(0,r.useMemo)(()=>{let e=[],t=0;return n.forEach(a=>{let r="large"===a.size?420:210;t+r<=l&&(e.push(a),t+=r)}),e},[l,n]);return r.createElement(sE,{header:(0,S.t)("community.resource_hub.featured_categories"),content:r.createElement("div",{className:"x78zum5 x1q0g3np x1665zp3 xc6p2dh",ref:o},s.map(e=>r.createElement(sw,{key:e.title,...e}))),showSeeMore:!1})}var sI=a(350021),sx=(e=>(e.BRAINSTORMING="brainstorming",e.COOPER_TEMPLATE="cooperTemplate",e.DATA_TEMPLATE="dataTemplate",e.DESIGN_TEMPLATE="designTemplate",e.DESIGN_TOOLS="designTools",e.DIAGRAMMING="diagramming",e.EDUCATION="education",e.FIGJAM_TEMPLATE="figJamTemplate",e.FUN_AND_GAMES="funAndGames",e.PRESENTATION_TEMPLATE="presentationTemplate",e.SITE_TEMPLATE="siteTemplate",e.STRATEGIC_PLANNING="strategicPlanning",e.UI_KITS="uiKits",e.WEBSITE_TEMPLATE="websiteTemplate",e.WHITEBOARDING="whiteboarding",e.WIREFRAMES="wireframes",e))(sx||{});function sN({sizingInfo:e,resourceImpressionTracking:t}){let a=(function(e){let t={brainstorming:{key:"brainstorming",header:(0,S.t)("categories.brainstorming"),categoryForQuery:iL.LJ.brainstorming,categorySlug:iL.LJ.brainstorming,resourceType:se.vt.FIGJAM_TEMPLATE},cooperTemplate:{key:"cooperTemplate",header:(0,S.t)("categories.social_media_templates"),categoryForQuery:iL.LJ.socialMediaTemplates,categorySlug:iL.LJ.socialMediaTemplates,resourceType:se.vt.COOPER_TEMPLATE_FILE,resourceEditorType:st.q.COOPER,apiEditorType:iP.k.Editors.COOPER},dataTemplate:{key:"dataTemplate",header:(0,S.t)("community.footer.data_templates"),categoryForQuery:iL.LJ.dataTemplates,categorySlug:iL.LJ.dataTemplates,resourceType:se.vt.DESIGN_TEMPLATE},designTemplate:{key:"designTemplate",header:(0,S.t)("categories.design_templates"),categorySlug:iL.LJ.designTemplates,resourceType:se.vt.DESIGN_TEMPLATE},designTools:{key:"designTools",header:(0,S.t)("community.view_bar.plugins"),categorySlug:iL.LJ.designTools,resourceType:se.vt.PLUGIN,isPlugin:!0},diagramming:{key:"diagramming",header:(0,S.t)("categories.diagramming"),categoryForQuery:iL.LJ.diagramming,categorySlug:iL.LJ.diagramming,resourceType:se.vt.FIGJAM_TEMPLATE},education:{key:"education",header:(0,S.t)("categories.education"),categoryForQuery:iL.LJ.education,categorySlug:iL.LJ.education,resourceType:se.vt.DESIGN_TEMPLATE},figJamTemplate:{key:"figJamTemplate",header:(0,S.t)("community.resource_hub.figjam_templates"),categorySlug:iL.LJ.whiteboarding,resourceType:se.vt.FIGJAM_TEMPLATE,resourceEditorType:st.q.WHITEBOARD,apiEditorType:iP.k.Editors.FIGJAM},funAndGames:{key:"funAndGames",header:(0,S.t)("categories.fun_games"),categoryForQuery:iL.LJ.funGames,categorySlug:iL.LJ.funGames,resourceType:se.vt.WIDGET,apiResourceType:iD.L.BrowseResourceTypes.WIDGETS},presentationTemplate:{key:"presentationTemplate",header:(0,S.t)("community.footer.presentations"),categoryForQuery:iL.LJ.presentations,categorySlug:iL.LJ.presentations,resourceType:se.vt.SLIDE_TEMPLATE,resourceEditorType:st.q.SLIDES,apiEditorType:iP.k.Editors.SLIDES},siteTemplate:{key:"siteTemplate",header:(0,S.t)("categories.website_templates"),categoryForQuery:iL.LJ.websiteTemplates,categorySlug:iL.LJ.websiteTemplates,resourceType:se.vt.SITE_TEMPLATE,resourceEditorType:st.q.SITES,apiEditorType:iP.k.Editors.SITES},strategicPlanning:{key:"strategicPlanning",header:(0,S.t)("categories.strategic_planning"),categoryForQuery:iL.LJ.strategicPlanning,categorySlug:iL.LJ.strategicPlanning,resourceType:se.vt.FIGJAM_TEMPLATE},uiKits:{key:"uiKits",header:(0,S.t)("categories.ui_kits"),categoryForQuery:iL.LJ.uiKits,categorySlug:iL.LJ.uiKits,resourceType:se.vt.DESIGN_TEMPLATE},websiteTemplate:{key:"websiteTemplate",header:(0,S.t)("categories.website_templates"),categoryForQuery:iL.LJ.websiteTemplates,categorySlug:iL.LJ.websiteTemplates,resourceType:se.vt.DESIGN_TEMPLATE,resourceEditorType:st.q.DESIGN},whiteboarding:{key:"whiteboarding",header:(0,S.t)("categories.whiteboarding"),categoryForQuery:iL.LJ.whiteboarding,categorySlug:iL.LJ.whiteboarding,resourceType:se.vt.FIGJAM_TEMPLATE},wireframes:{key:"wireframes",header:(0,S.t)("categories.wireframes"),categoryForQuery:iL.LJ.wireframes,categorySlug:iL.LJ.wireframes,resourceType:se.vt.DESIGN_TEMPLATE}},a={designer:["siteTemplate","uiKits","figJamTemplate","designTools","cooperTemplate"],developer:["siteTemplate","wireframes","whiteboarding","uiKits","cooperTemplate"],"product-manager":["brainstorming","strategicPlanning","dataTemplate","uiKits","siteTemplate"],marketer:["cooperTemplate","presentationTemplate","strategicPlanning","uiKits","whiteboarding"],researcher:["brainstorming","presentationTemplate","dataTemplate","uiKits","cooperTemplate"],education:["education","presentationTemplate","funAndGames","uiKits","siteTemplate"],"ux-writer":["brainstorming","presentationTemplate","wireframes","cooperTemplate","siteTemplate"],data:["diagramming","brainstorming","uiKits","siteTemplate","cooperTemplate"],other:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"],unknown:["brainstorming","cooperTemplate","designTools","uiKits","siteTemplate"]};return(a[e]||a.unknown||[]).map(e=>t[e]).filter(e=>void 0!==e)})((0,sa.w)()).map(e=>({key:e.key,header:e.header,categoryForQuery:e.categoryForQuery,categorySlug:e.categorySlug,resourceType:e.resourceType,resourceEditorType:e.resourceEditorType,apiResourceType:e.apiResourceType,apiEditorType:e.apiEditorType,isPlugin:e.isPlugin}));return r.createElement("div",{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3"},a.map((a,n)=>r.createElement("div",{key:n},2===n&&r.createElement("div",{className:"x1hq5gj4"},r.createElement(sT,null)),a.isPlugin?r.createElement(sk,{key:a.key,header:a.header,categorySlug:a.categorySlug,resourceImpressionTracking:t}):r.createElement(sC,{key:a.key,header:a.header,categoryForQuery:a.categoryForQuery,categorySlug:a.categorySlug,resourceType:a.resourceType,resourceEditorType:a.resourceEditorType,apiResourceType:a.apiResourceType,apiEditorType:a.apiEditorType,sizingInfo:e}))))}function sC({header:e,categoryForQuery:t,categorySlug:a,resourceType:n,resourceEditorType:o,apiResourceType:l,apiEditorType:i,sizingInfo:s}){let{resources:c,loading:d}=i9({limit:ny.u8,resourceType:n,editorType:o,category:t,caller:i7.z.RESOURCE_HUB,includeContent:!1}),m=iG([{key:"categoryRoute",category:a,resource_type:l,editor_type:i}]);return d||c&&0!==c.length?r.createElement(sE,{header:e,route:m.categoryRoute,content:r.createElement(sI.T,{resources:(c&&c.slice(0,s.numberOfTiles))??[],loadingTileCount:s.numberOfTiles,isLoading:d}),showSeeMore:!0}):null}function sk({header:e,categorySlug:t,resourceImpressionTracking:a}){let{resources:n,loading:o}=i9({limit:ny.l_,resourceType:se.vt.PLUGIN,category:t,caller:i7.z.RESOURCE_HUB,includeContent:!0}),l=iG([{key:"pluginsRoute",category:t,resource_type:iD.L.BrowseResourceTypes.PLUGINS}]);return o||n&&0!==n.length?r.createElement(sE,{header:e,route:l.pluginsRoute,content:r.createElement(i6.M,{plugins:(n??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:a,isOrgTeamBrowsing:!1,isLoading:o,loadingRowCount:ny.l_}),showSeeMore:!0}):null}var sS=a(469508);function sR({currentOrgId:e}){return r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_COMMUNITY_TAB_DISABLED_PAGE,properties:{orgId:e}},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x14o0rcq"},r.createElement(so.oW,{className:"x193iq5w xl1xv1r",src:(0,rf.ck)("8b7c6fb3e353c1972267681e37a56765b96f5b3c"),alt:(0,S.t)("community.resource_hub.your_admins_have_restricted_access"),loading:"lazy"})),r.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 xycev2y xo3t2mw x6s0dn4 x1nhvcw1"},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},r.createElement("div",{...n_.xk(sA.heading)},(0,S.t)("community.resource_hub.your_admins_have_restricted_access")),r.createElement("div",{...n_.xk(sA.description)},(0,S.tx)("community.resource_hub.looking_for_inspiration_you_can",{link:r.createElement(sS.N,{href:"/community",newTab:!0},(0,S.t)("community.resource_hub.community_link"))})))),r.createElement("div",{className:"x78zum5 xdt5ytf xjwf9q1 x98rzlu"})))}let sA={heading:{color:"x1akne3o",...nu.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...nu.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0}};function sO(){let e=(0,r.useRef)(null),[t,a]=(0,r.useState)(0),n=(0,r.useCallback)(e=>{a(Math.floor((e-4+32)/304))},[]);return(0,r.useLayoutEffect)(()=>{let t=e.current;if(!t)return;n(t.clientWidth);let a=new ResizeObserver(e=>{n(e[0]?.target.clientWidth??0)});return a.observe(e.current),()=>a.disconnect()},[e,n]),(0,r.useMemo)(()=>({numberOfTiles:t,sizeRef:e}),[t,e])}function sP({currentOrgId:e,isCommunityTabDisabledForOrg:t}){let a=sO(),{trackResourceImpression:n}=(0,ik.GS)(),o=(0,r.useCallback)((e,t)=>{t&&n(e)},[n]);return t?r.createElement(sR,{currentOrgId:e}):r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_COMMUNITY_RESOURCES_HOME_PAGE},r.createElement("div",{className:"x78zum5 xdt5ytf xh8yej3 x5yr21d x1665zp3",ref:a.sizeRef},r.createElement(iS,{tab:ny.N$.COMMUNITY}),r.createElement(i8,null),r.createElement(sN,{sizingInfo:a,resourceImpressionTracking:o})))}var sL=a(652021),sF=a(324747);function sD(e,t){let a={orgId:e??void 0,teamId:t??void 0,isInternal:!0},{trackResourceImpression:n,flushAndResetResourceImpressions:o}=(0,ik.GS)({extraProperties:a}),{trackResourceImpression:l,flushAndResetResourceImpressions:i}=(0,ik.r4)({extraProperties:a}),{trackResourceImpression:s,flushAndResetResourceImpressions:c}=(0,ik.FD)({extraProperties:a});return{onIntersectionChange:(0,r.useCallback)((e,t)=>{t&&((0,sL.o_)(e)?l(e):(0,sL.ws)(e)?n(e):(0,sF.I0)(e)&&s(e))},[n,l,s]),flushAndResetImpressions:(0,r.useCallback)(()=>{o(),i(),c()},[o,i,c])}}var sM=a(506752),sB=a(589853),sU=a(97481),s$=a(171506),sj=a(419791),sW=a(372240),sG=a(911433);let sV=new Set([eM._Y.COOPER,eM._Y.SLIDES,eM._Y.WHITEBOARD]),sH=new Set([eM._Y.COOPER,eM._Y.SLIDES]);function sz({newFileFrom:e,contextClicked:t,forceOpenNewTab:a}){let r=(0,n.d4)(e=>e.user?.drafts_folder_id),{data:o,status:l}=(0,sU.nt)(r),i=(0,s$.h)(o),s=(0,eY.tJ)("useTemplatesOmnicreateMenuItemsProps"),c=i.filter(({editorType:e})=>{switch(s.data?.tier){case eM.Ag.STUDENT:case eM.Ag.PRO:return sH.has(e);case eM.Ag.ORG:case eM.Ag.ENTERPRISE:return sV.has(e);case eM.Ag.STARTER:default:return!0}}),[d,m]=(0,ec.fp)(sG.bW),u=m({showOrgTemplateView:!0}),_=(0,sW.E)({isDraftsFolder:!0,newFileFrom:e,forceOpenNewTab:a,newFileDataLocalStorageKey:u}),p="loading"===l||"loading"===s.status;return{newFiles:c.map(({editorType:e,canCreate:a})=>(0,sj.p)({editorType:e,isDisabled:!a,isLoading:p,onClick:_({editorType:e,contextClicked:t})})),import:null}}var sK=a(207496);function sY({planTier:e}){let t;let{color:a}=(0,oz.GA)();t=e===eM.Ag.ORG||e===eM.Ag.ENTERPRISE?"dark"===a?(0,rf.ck)("156640b467fc94700549db25a70310582e3ef24b"):(0,rf.ck)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===a?(0,rf.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,rf.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let n=sz({newFileFrom:iE.f6.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,contextClicked:aX.e0.RESOURCE_HUB_FEW_TEMPLATES_UPSELL,forceOpenNewTab:!0});return r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_FEW_TEMPLATES_UPSELL},r.createElement("div",{className:"x78zum5 x1q0g3np xh8yej3 xeq9io7 xgqmno8 x3s0vfn"},r.createElement("div",{className:"x3nfvp2 x13a6bvl xgqmno8 xb3r6kr"},r.createElement(so.oW,{className:"xnq0rdo x15elv7b x1sy10c2 x1d6c7ev xl1xv1r",src:t,alt:(0,S.t)("community.resource_hub.get_more_done"),loading:"lazy"})),r.createElement("div",{className:"x1iyjqo2 x1264ykn xmcgfsh"}),r.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 x1d3hk7y x1cy8zhl xw8ila8 x1n2onr6"},r.createElement("div",{className:"x78zum5 xdt5ytf xl56j7k x1cy8zhl x167g77z xkh2ocl xh8yej3 x2lah0s"},r.createElement("div",{...n_.xk(sq.heading)},(0,S.t)("community.resource_hub.get_more_done")),r.createElement("div",{...n_.xk(sq.description)},(0,S.t)("community.resource_hub.create_custom_templates_to_add"))),r.createElement(sK.a,{menuItems:n}))))}let sq={heading:{color:"x1akne3o",...nu.g.textHeadingMedium,$$css:!0},description:{color:"x1n0bwc9",...nu.g.textBodyMedium,$$css:!0}};function sJ({planTier:e,isTemplatesPublishingDisabledForOrg:t}){let a;let n=(0,nw.Om)(),o=(0,nw.tv)(),{color:l}=(0,oz.GA)();a=e===eM.Ag.ORG||e===eM.Ag.ENTERPRISE?t?(0,rf.ck)("ceafb20933e03362e3d3f6c8191e892c8321d3db"):"dark"===l?(0,rf.ck)("156640b467fc94700549db25a70310582e3ef24b"):(0,rf.ck)("923655d3d7ad0e0261946e6b8175911e0daceff3"):"dark"===l?(0,rf.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,rf.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596");let i=sz({newFileFrom:iE.f6.RESOURCE_HUB_NO_RESOURCES_UPSELL,contextClicked:aX.e0.RESOURCE_HUB_NO_RESOURCES_UPSELL,forceOpenNewTab:!0}),s=new nw.au({...n,tab:ny.N$.COMMUNITY},o),c=t?(0,S.t)("community.resource_hub.template_publishing_has_been_disabled"):(0,S.t)("community.resource_hub.streamline_your_work_with_custom");return r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_NO_RESOURCES_UPSELL},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c"},r.createElement(so.oW,{className:"x193iq5w xl1xv1r xetamn0",src:a,alt:c,loading:"lazy"})),r.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4"},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},r.createElement("div",{...n_.xk(sX.heading)},c),r.createElement("div",{...n_.xk(sX.description)},(0,S.t)("community.resource_hub.create_templates_to_keep_up"))),r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s"},!t&&r.createElement(sK.a,{menuItems:i}),r.createElement(aq.o3,{...n_.xk(sX.browseResourcesFromCommunity),to:s.to,trackingEventName:nI.HH.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED,trackingProperties:{route:s.pathname}},(0,S.t)("community.resource_hub.browse_resources_from_community"))))))}let sX={heading:{color:"x1akne3o",...nu.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...nu.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0},browseResourcesFromCommunity:{color:"x1quhyk7",...nu.g.textBodyMedium,textAlign:"x2b8uid",cursor:"x1ypdohk",$$css:!0}};var sQ=a(679617),sZ=a(872240);function s0({teamId:e}){let t=(0,n.wA)(),a=(0,nw.Om)(),o=(0,nw.tv)(),{color:l}=(0,oz.GA)(),i=new nw.au({...a,tab:ny.N$.COMMUNITY},o);return r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_UPGRADE_UPSELL,properties:{planTier:eM.Ag.STARTER,teamId:e}},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xh8yej3 x16g6g8t xgqmno8 x1sjmt1f xl56j7k"},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xvue9z xwbyk0q x2lah0s xk1l47c"},r.createElement(so.oW,{className:"x193iq5w xl1xv1r xetamn0",src:"dark"===l?(0,rf.ck)("199fc5fd43ab7b8cdb2208db7a7a1c8b4f039119"):(0,rf.ck)("363ceafa11ccd8ba7b2d9fe2b9aba1f8f8477596"),alt:(0,S.t)("community.resource_hub.custom_templates_for_your_team"),loading:"lazy"})),r.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3 xz84dc7 xo3t2mw x6s0dn4"},r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 x167g77z xkh2ocl xh8yej3 x2lah0s"},r.createElement("div",{...n_.xk(s1.heading)},(0,S.t)("community.resource_hub.custom_templates_for_your_team")),r.createElement("div",{...n_.xk(s1.description)},(0,S.t)("community.resource_hub.upgrade_to_the_professional_plan"))),r.createElement("div",{className:"x78zum5 xdt5ytf x6s0dn4 xou54vl xkh2ocl xh8yej3 x2lah0s"},r.createElement(rI.$z,{onClick:()=>{t(sQ.WX({teamId:e,entryPoint:sZ.TN.RESOURCE_HUB,openInNewTab:!1}))}},(0,S.t)("community.resource_hub.upgrade_to_professional")),r.createElement(aq.o3,{...n_.xk(s1.browseResourcesFromCommunity),to:i.to,trackingEventName:nI.HH.RESOURCE_HUB_BROWSE_COMMUNITY_CLICKED},(0,S.t)("community.resource_hub.browse_resources_from_community"))))))}let s1={heading:{color:"x1akne3o",...nu.g.textHeadingMedium,textAlign:"x2b8uid",$$css:!0},description:{color:"x1n0bwc9",...nu.g.textBodyMedium,textAlign:"x2b8uid",$$css:!0},browseResourcesFromCommunity:{color:"x1quhyk7",...nu.g.textBodyMedium,textAlign:"x2b8uid",cursor:"x1ypdohk",$$css:!0}};var s4=a(660434),s2=a(103959);function s3({resourceTypeSlugs:e}){return r.createElement("div",{className:"x78zum5 x167g77z x1a02dak"},e.map(e=>r.createElement("div",{className:"x167g77z x4vwp2a",key:e},r.createElement(s5,{resourceTypeSlug:e}))))}function s5({resourceTypeSlug:e}){let t=(0,nw.Om)(),a=(0,nw.tv)(),n=(0,eU.i_)(e),o=function(e){switch(e){case iI.M.PLUGINS:return r.createElement(iZ.u,null);case iI.M.FIGJAM_TEMPLATES:return r.createElement(i3.D,null);case iI.M.WIDGETS:return r.createElement(s4.v,null);case iI.M.SLIDE_TEMPLATES:return r.createElement(i1.l,null);case iI.M.LIBRARIES:break;case iI.M.COOPER_TEMPLATES:return r.createElement(s2.W,null);case iI.M.RECENTLY_ADDED_TEMPLATES:break;default:(0,C.S9)(e,null)}return null}(e);return r.createElement(nd.E,{"aria-label":n,className:$()(iY.x6,iY.Mg,iY.pU),onClick:()=>{let r=new iI.U({...t,resourceTypeSlug:e},a);(0,nI.ng)(e),d.Ay.push(r.href)}},r.createElement("span",{className:iY.IO},o,r.createElement("span",{className:iq},n)))}function s8({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:a,currentTeamId:n}){let l;let i=sO(),{onIntersectionChange:s}=sD(a??void 0,n??void 0),c=(0,sB.er)(e,n??null,!!t),d=(0,sB.NQ)(e,a??null,!!t),{[eM._Y.COOPER]:{templates:m,isLoading:u,hasMoreTemplates:_},[eM._Y.WHITEBOARD]:{templates:p,isLoading:f,hasMoreTemplates:g},[eM._Y.SLIDES]:{templates:E,isLoading:b,hasMoreTemplates:v}}=a?d:c,{resources:h,loading:w,hasNextPage:y}=(0,sB.wO)({limit:6,caller:i7.z.RESOURCE_HUB,orgId:a,includeContent:!0}),{resources:T,loading:I,hasNextPage:x}=(0,sB.GO)({resourceType:se.vt.WIDGET,orgId:a,teamId:n,planTier:e,sortBy:sM.e.Browse.ALL_TIME,isTemplatesPublishingDisabledForOrg:!!t});if(u||f||b||w||I)return r.createElement("div",{className:"x78zum5 xl56j7k x6s0dn4 xg87l8a",ref:i.sizeRef},r.createElement(oG.k,null));let N=(0,o.k)().cooper,C=(h??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),k=[];if([...N?[{resources:m,slug:iI.M.COOPER_TEMPLATES}]:[],{resources:p,slug:iI.M.FIGJAM_TEMPLATES},{resources:E,slug:iI.M.SLIDE_TEMPLATES},{resources:C,slug:iI.M.PLUGINS},{resources:T,slug:iI.M.WIDGETS}].forEach(({resources:e,slug:t})=>{e&&e.length>0&&k.push(t)}),e===eM.Ag.STARTER&&n)return r.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:i.sizeRef},r.createElement(s0,{teamId:n}));let S=0===C.length&&0===T.length,R=m.length+p.length+E.length;if(t&&S||0===R&&S)return r.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:i.sizeRef},r.createElement(sJ,{planTier:e,isTemplatesPublishingDisabledForOrg:t}));if(!t){if(0===R)l=r.createElement("div",{className:"x78zum5 xdt5ytf xw7yly9"},r.createElement(sY,{planTier:e}));else if(R<4){let t=[...m,...p,...E];l=r.createElement(r.Fragment,null,r.createElement(s6,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:t??[]}),r.createElement("div",{className:"x78zum5 xdt5ytf xw7yly9"},r.createElement(sY,{planTier:e})))}else l=r.createElement(r.Fragment,null,N&&r.createElement(s7,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:m,hasNextPage:_}),r.createElement(ce,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:p,hasNextPage:g}),r.createElement(s9,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:E,hasNextPage:v}),1===k.length&&r.createElement("div",{className:"x78zum5 xdt5ytf xw7yly9"},r.createElement(sY,{planTier:e})))}return r.createElement("div",{className:"x78zum5 xdt5ytf x1665zp3",ref:i.sizeRef},r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_INTERNAL_RESOURCES_HOME_PAGE},r.createElement(iS,{tab:ny.N$.INTERNAL}),k.length>1&&r.createElement("div",{className:"x78zum5 x1qughib x6s0dn4 x1a02dak xou54vl"},r.createElement(s3,{resourceTypeSlugs:k})),l,r.createElement(ct,{resourceImpressionTracking:s,resources:C??[],hasNextPage:y}),r.createElement(ca,{resourceImpressionTracking:s,numberOfTiles:i.numberOfTiles,resources:T??[],hasNextPage:x})))}function s6({resourceImpressionTracking:e,numberOfTiles:t,resources:a}){return r.createElement(cr,{resourceTypeSlug:iI.M.RECENTLY_ADDED_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:!1})}function s7({resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n}){return r.createElement(cr,{resourceTypeSlug:iI.M.COOPER_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n})}function s9({resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n}){return r.createElement(cr,{resourceTypeSlug:iI.M.SLIDE_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n})}function ce({resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n}){return r.createElement(cr,{resourceTypeSlug:iI.M.FIGJAM_TEMPLATES,resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n})}function ct({resourceImpressionTracking:e,resources:t,hasNextPage:a}){let n=(0,nw.Om)(),o=(0,nw.tv)();return t&&0!==t.length?r.createElement(sE,{header:(0,eU.i_)(iI.M.PLUGINS),route:new iI.U({...n,resourceTypeSlug:iI.M.PLUGINS},o),content:r.createElement(i6.M,{plugins:t,onIntersectionChange:e,isOrgTeamBrowsing:!1,isLoading:!1,loadingRowCount:6,layoutV1:"twoColumn"}),showSeeMore:!!a}):null}function ca({resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n}){return r.createElement(cr,{resourceTypeSlug:iI.M.WIDGETS,resourceImpressionTracking:e,numberOfTiles:t,resources:a,hasNextPage:n})}function cr({resourceTypeSlug:e,resources:t,hasNextPage:a,resourceImpressionTracking:n,numberOfTiles:o}){let l=(0,nw.Om)(),i=(0,nw.tv)();if(0===t.length)return null;let s=!!a||t.length>o;return r.createElement(sE,{header:(0,eU.i_)(e),route:new iI.U({...l,resourceTypeSlug:e},i),content:r.createElement(sI.T,{resources:t.slice(0,o),resourceImpressionTracking:n}),showSeeMore:s})}let cn="resource_hub--pageContainer--0k53S";function co({planTier:e,isTemplatesPublishingDisabledForOrg:t,currentOrgId:a,currentTeamId:n,isCommunityTabDisabledForOrg:o}){let l;let{tab:i}=(0,iC.RA)(nw.au);switch(i){case ny.N$.INTERNAL:l=r.createElement(s8,{planTier:e,currentOrgId:a??void 0,currentTeamId:n??void 0,isTemplatesPublishingDisabledForOrg:t});break;case ny.N$.COMMUNITY:l=r.createElement(sP,{currentOrgId:a??void 0,isCommunityTabDisabledForOrg:o});break;default:(0,C.xb)(i)}return r.createElement("div",{className:cn},l)}var cl=a(767281),ci=a(425835);function cs(){let e=(0,eY.tJ)("useTeamTemplatesPageData"),{templatesTeamId:t,resourceTypeSlug:a}=(0,iC.Rd)(iI.U)??{},r=null;if(a)try{let e=(0,eU.W6)(a);e.length>0&&e[0]&&(r=(0,sL.J2)(e[0]))}catch{}let n=e.data?.type===eM.OL.ORG?t:e.data?.key.parentId;return(0,ci.li)({teamId:n??null,editorType:r,enabled:!!r&&!!n&&"loaded"===e.status})}function cc(){let{requestLoadMoreForTeam:e,templatesByTeam:t,isLoading:a}=cs(),{onIntersectionChange:n}=sD(void 0,t?.teamId),o=(0,r.useRef)(null),l=(0,r.useRef)(null);return((0,cl.X)({containerRef:o,targetRef:l,onIntersectionChange:e}),a||!t)?null:r.createElement("div",{ref:o},r.createElement(sI.T,{resources:t?.templates??[],resourceImpressionTracking:n}),r.createElement("div",{ref:l}))}function cd({resourceType:e,planTier:t,orgId:a,internalResourcesRoute:n,resourceImpressionTracking:o}){let l;let i=(0,sL.J2)(e),s=sO(),{onIntersectionChange:c}=sD(a??void 0,void 0),{teamTemplates:d,isLoading:m,requestLoadMoreForOrg:u}=(0,ci.e2)({orgId:a,areWorkspacesEnabled:t===eM.Ag.ENTERPRISE,numTemplatesPerTeam:ny.u8+1,editorType:i,filterByIds:null,enabled:!!i}),_=d?.[d.length-1]?.teamId??null,p=(0,r.useRef)(null);return(0,cl.X)({containerRef:s.sizeRef,targetRef:p,targetKey:_,onIntersectionChange:u}),l=m?null:0===d.length?r.createElement(sJ,{planTier:t}):d.map(e=>{let t=e.teamName??"",a=e.templates.length>s.numberOfTiles,o=e.templates.slice(0,s.numberOfTiles).map(e=>e.template),l=n.copyWith({templatesTeamId:e.teamId},void 0);return r.createElement("div",{key:e.teamId,ref:e.teamId===_?p:null},r.createElement(sE,{header:(0,S.t)("community.resource_hub.internal_tab",{orgOrTeamName:t}),route:l,content:r.createElement(sI.T,{resources:o,resourceImpressionTracking:c}),showSeeMore:a}))}),r.createElement(eo.P,{scrollContainerRef:s.sizeRef},r.createElement("div",{className:"x78zum5 xdt5ytf xou54vl x1120s5i"},l))}function cm({planTier:e,currentOrgId:t,currentTeamId:a,fallbackRedirectRoute:n}){let l;let i=(0,o.k)().cooper,s=(0,iC.a4)(iI.U),{resourceTypeSlug:c,templatesTeamId:m}=s.params,{onIntersectionChange:u,flushAndResetImpressions:_}=sD(t??void 0,a??void 0);if(r.useEffect(()=>{_()},[c,_]),!c)return d.Ay.redirect(n.href),null;let p=(0,eU.W6)(c).filter(e=>i||e!==se.vt.COOPER_TEMPLATE_FILE);return 0===p.length?null:(p[0]&&(0,eU.Pe)(e,p[0])&&(l=p[0]===se.vt.PLUGIN?r.createElement(cp,{orgId:t??void 0,resourceImpressionTracking:u,planTier:e}):p[0]===se.vt.WIDGET||c===iI.M.RECENTLY_ADDED_TEMPLATES?r.createElement(c_,{resourceTypes:p,orgId:t??void 0,teamId:a??void 0,resourceImpressionTracking:u,planTier:e}):a||m?r.createElement(cc,null):r.createElement(cd,{resourceType:p[0],planTier:e,orgId:t??"",internalResourcesRoute:s,resourceImpressionTracking:u})),r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_INTERNAL_RESOURCES_PAGE},r.createElement("div",{className:cn},l)))}function cu({hasNextPage:e,fetchNextPage:t,isFetchingNextPage:a,loading:n,containerRef:o}){return(0,r.useEffect)(()=>{o.current&&e&&!a&&!n&&o.current.scrollHeight<window.innerHeight&&t()},[e,a,t,n,o]),r.createElement(r.Fragment,null,e&&r.createElement("div",{className:"resource_hub--loadingSpinner--wxRsE"},r.createElement(oG.k,null),r.createElement(el.a,{onIntersectionChange:e=>{e.isIntersecting&&t()}})))}function c_({resourceTypes:e,orgId:t,teamId:a,resourceImpressionTracking:n,planTier:o}){let l=sO(),{resources:i,loading:s,hasNextPage:c,fetchNextPage:d,isFetchingNextPage:m}=(0,sB.yH)({resourceTypes:e,limit:ny.u8,caller:i7.z.RESOURCE_HUB,orgId:t,teamId:a,includeContent:!0,sortBy:e.some(e=>[se.vt.SLIDE_TEMPLATE,se.vt.COOPER_TEMPLATE_FILE,se.vt.FIGJAM_TEMPLATE].includes(e))?sM.e.Browse.PUBLISHED_AT:sM.e.Browse.ALL_TIME});if(!s&&(!i||0===i.length))return r.createElement(sJ,{planTier:o});let u=l.numberOfTiles;return r.createElement("div",{ref:l.sizeRef},r.createElement(sI.T,{resources:i??[],isLoading:s,loadingTileCount:u*ny.Z_,resourceImpressionTracking:n}),r.createElement(cu,{hasNextPage:c,fetchNextPage:d,isFetchingNextPage:m,loading:s,containerRef:l.sizeRef}))}function cp({orgId:e,resourceImpressionTracking:t,planTier:a}){let{resources:n,loading:o,hasNextPage:l,isFetchingNextPage:i,fetchNextPage:s}=(0,sB.wO)({limit:10,caller:i7.z.RESOURCE_HUB,orgId:e,includeContent:!0}),c=(0,r.useRef)(null);return o||n&&0!==n.length?r.createElement("div",{ref:c},r.createElement(i6.M,{plugins:(n??[]).map(e=>e.content?.plugin).filter(e=>void 0!==e),onIntersectionChange:t,isOrgTeamBrowsing:!1,isLoading:o}),r.createElement(cu,{hasNextPage:l,fetchNextPage:s,isFetchingNextPage:i,loading:o,containerRef:c})):r.createElement(sJ,{planTier:a})}var cf=a(389571),cg=a(738342),cE=a(700574),cb=a(90290),cv=a(735343),ch=a(500365),cw=a(502310),cy=a(10855);function cT({text:e,isSelected:t,onClick:a}){return r.createElement(nd.E,{"aria-label":e,"aria-pressed":t,className:$()(iY.x6,iY.Mg,"category_link_pill--tagPill--vb98J",t&&iY.wH),onClick:a},r.createElement("span",{className:$()(iY.IO,"category_link_pill--tagPillContent--tADeA")},e))}function cI({links:e}){let t=(0,iC.a4)(iT.Dv),{tagSlug:a}=(0,iC.RA)(iT.Dv),n=r.useRef(null),[o,l]=r.useState(!1),[i,s]=r.useState(!1),c=(0,cy.l)(),[m,u]=r.useState(0),[_,p]=r.useState(0);return r.useLayoutEffect(()=>{if(!n.current)return;let t=Array.from(n.current.children).filter(e=>!e.className.includes("expansionButton"));if(i)t.every(e=>0===e.offsetTop)&&s(!1),n.current.scrollWidth>n.current.clientWidth&&(s(!1),u(-1));else if(n.current.scrollWidth>n.current.clientWidth){let e=n.current.clientWidth-83,a=Array.from(t).findIndex(t=>t.offsetLeft+t.offsetWidth>e)-1;if(u(a),a<0){l(!1);return}p(t[a].offsetLeft+t[a].offsetWidth+8),l(!0)}else u(e.length-1),l(!1)},[i,o,c,e]),r.createElement(r.Fragment,null,r.createElement("div",{...n_.xk(cx.container,i?cx.expandedContainer:cx.collapsedContainer),ref:n},e.map(({to:e,translatedTitle:n,categorySlug:o,tagSlug:l},s)=>{let c=!!(l&&a&&l===a),u=i||s<=m;return r.createElement("div",{...n_.xk(cx.pillContainer,!u&&cx.hiddenPill),key:e},r.createElement(cT,{text:n,categoryTagSlug:l,onClick:()=>{if(c){let e=t.copyWith({categorySlug:o,tagSlug:void 0}).href;(0,nI.uo)(t.href,e),d.Ay.push(e)}else(0,nI.uo)(t.href,e),d.Ay.push(e)},isSelected:c}))}),(o||i)&&r.createElement(nd.E,{className:"expansion-button",...n_.xk(cx.expansionButton),style:o?{left:`${_}px`,position:"absolute"}:{},onClick:()=>{l(!o),s(!i)}},o?(0,S.t)("community.shelves.show_more"):(0,S.t)("community.detail_view.show_less"))))}let cx={collapsedContainer:{flexWrap:"xozqiw3",$$css:!0},expandedContainer:{flexWrap:"x1a02dak",$$css:!0},container:{display:"x78zum5",gap:"x167g77z",rowGap:null,columnGap:null,maxWidth:"x193iq5w",$$css:!0},pillContainer:{flex:"xkz0k9k",flexGrow:null,flexShrink:null,flexBasis:null,$$css:!0},hiddenPill:{visibility:"xlshs6z",$$css:!0},expansionButton:{whiteSpace:"xuxw1ft",color:"x1n0bwc9",outlineWidth:"x1qgsegg",outlineStyle:"xaatb59",outlineColor:"xru40mv",borderRadius:"x1sxf85j",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,padding:"xdqdrvq",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,outlineOffset:"x1g40iwv",...nu.g.textBodyMedium,":hover_backgroundColor":"x133fa97",$$css:!0}};function cN({category:e,showTags:t=!1}){let a=(0,iC.a4)(iT.Dv),n=(0,cw.S)(e.url_slug,iL.LJ);if(!n)return null;let o=(0,ch.m)(e,n,t,a);return r.createElement("div",{className:"x78zum5 x167g77z xgp1u7p"},r.createElement(cI,{links:o}))}var cC=a(227953),ck=a(167759),cS=a(393287),cR=a(373728);function cA({context:e,filterState:t,allowedEditorTypes:a}){let{resourceType:n,editorType:o=(0,cR.MF)(n),price:l}=t;return r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_FEED_FILTERS},r.createElement(iA.a,{mode:"match"},r.createElement("div",{className:"x78zum5"},r.createElement(cC.Z,{context:e,resourceType:n,editorType:o,allowedEditorTypes:a}),e===cv.g.CATEGORY&&r.createElement(cS.y,{context:e,resourceType:n,editorType:o}),r.createElement(ck.OQ,{context:e,price:l}))))}function cO(){let e=sO(),t=(0,iC.a4)(iT.Dv);(0,iT.pj)(t);let a=t.params,{categorySlug:n,tagSlug:o}=a,[l,i]=r.useState(null),s=t.search,[{data:c,status:d}]=(0,p.IT)((0,cb.Zp)({categorySlug:n,tagSlug:o})),m="loading"===d;r.useEffect(()=>{c&&!m&&i(c)},[c,m]);let u=(0,cg.V)(a,s,ny.u8),_=u.filterState;return r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_CATEGORY,properties:{category:n,tag:o}},r.createElement("div",{className:"x78zum5 xdt5ytf xou54vl x1gan7if",ref:e.sizeRef},l?r.createElement(r.Fragment,null,r.createElement("div",{className:"x78zum5 x1qughib x1cy8zhl xozqiw3 xou54vl"},r.createElement("div",{className:"x78zum5 xdt5ytf x1n2onr6 x12lumcd xeuugli"},r.createElement(cN,{category:l,showTags:!!l.tags.length})),r.createElement("div",{className:"x78zum5 x13a6bvl x3psx0u xuxw1ft"},r.createElement(cA,{context:cv.g.CATEGORY,filterState:_,allowedEditorTypes:l.editor_types}))),r.createElement("div",{className:"xw7yly9"},r.createElement(cf.e,{category:l,categoryPageData:u,numTilesPerRow:e.numberOfTiles}))):r.createElement("div",{className:"x7z7khe"},r.createElement(cE.y$,null))))}var cP=a(645838);let cL="resource_hub_community_tab";function cF({selectedTab:e,orgOrTeamName:t}){let a=(0,n.wA)(),o=(0,iC.a4)(nw.au),l=(0,n.d4)(e=>e.userFlags),i=e=>{e!==ny.N$.COMMUNITY||l[nT.w3]||a(eL.b({[nT.w3]:!0})),(0,nI._K)(e),d.Ay.push(o.copyWith({tab:e}).href)},[s,c,m]=lo.t.useManagedTabs({[ny.N$.INTERNAL]:!0,[ny.N$.COMMUNITY]:!0},e,e=>{i(e)}),u=Object.keys(ny.N$).map(e=>{let a=ny.N$[e]===ny.N$.COMMUNITY;return r.createElement(lo.t.Tab,{key:e,...s[ny.N$[e]],...a&&{"data-onboarding-key":cL}},function(e,t){switch(e){case ny.N$.INTERNAL:if(t)return(0,S.t)("community.resource_hub.internal_tab",{orgOrTeamName:t});return(0,S.t)("community.resource_hub.internal_tab_default");case ny.N$.COMMUNITY:return(0,S.t)("community.resource_hub.community_tab");default:(0,C.xb)(e)}}(ny.N$[e],t))});return r.createElement(lo.t.TabStrip,{manager:m},u)}let cD=(0,ep.r1)(nT.xH);function cM({isCommunityTabDisabledForOrg:e}){let t=(0,ec.md)(cD),a=(0,cP.P)()===ny.N$.COMMUNITY,{show:n,isShowing:o,complete:l}=(0,e_.e)({overlay:ev.cvy,priority:eg.N.DEFAULT_MODAL},[t]);return(0,m.h)(()=>{n({canShow:t=>!t&&!a&&!e})}),r.createElement(eE.rq,{arrowPosition:eb.F_.TOP,clickOutsideToHide:!0,description:r.createElement(r.Fragment,null,r.createElement(ea.Kz,{direction:"y",multiple:1}),(0,S.tx)("community.resource_hub.see_what_community_has_to_offer"),r.createElement(ea.Kz,{direction:"y",multiple:2})),emphasized:!0,isShowing:o,onClose:l,primaryCta:{label:(0,S.tx)("community.resource_hub.got_it"),type:"button",onClick:()=>l(),ctaTrackingDescriptor:eu.c.GOT_IT},targetKey:cL,title:(0,S.tx)("community.resource_hub.get_more_inspiration"),trackingContextName:nI.HH.COMMUNITY_TAB_ONBOARDING_OVERLAY,userFlagOnShow:nT.xH,width:240})}var cB=a(118797);function cU(){return r.createElement("div",{className:"resource_hub_search_bar--searchInputContainer--6WP25"},r.createElement(cB.M,null))}function c$({orgOrTeamName:e,isCommunityTabDisabledForOrg:t}){let{tab:a}=(0,iC.RA)(nw.au);return r.createElement("div",null,r.createElement(nA.g2,{leftSide:r.createElement(cj,{selectedTab:a||ny.N$.INTERNAL,orgOrTeamName:e}),rightSide:a!==ny.N$.COMMUNITY||t||(0,ip.Fm)()?[]:[r.createElement(cU,{key:"resource-hub-search-bar"})]}),r.createElement(cM,{isCommunityTabDisabledForOrg:t}))}function cj({selectedTab:e,orgOrTeamName:t}){let a=!!(0,iC.ed)(iN.bP),n=!!(0,iC.ed)(ix.jT),o=(0,iC.ed)(iT.Dv),l=(0,iC.ed)(iI.U),{templatesByTeam:i}=cs();if(n)return null;let s="";return a||o||l?(a?s=(0,S.t)("community.search.search_results_from_community"):l?(s=(0,eU.i_)(l.params.resourceTypeSlug),l.params.templatesTeamId&&(s=i?.teamName?(0,S.t)("community.resource_hub.internal_tab",{orgOrTeamName:i.teamName}):"")):o&&(s=iH(o.params.categorySlug,void 0,o.search.resource_type)||""),r.createElement("h1",{...n_.xk(cW.headerText)},s)):r.createElement(cF,{selectedTab:e,orgOrTeamName:t})}let cW={headerText:{...nu.g.textHeadingMedium,$$css:!0}};var cG=a(352483),cV=a(96237),cH=a(621813),cz=a(775204),cK=a(568510),cY=a(549260);function cq(){let e=(0,n.wA)(),t=(0,iC.RA)(ix.jT),a=t.apiResourceType,o=t.resourceId,[l]=(0,p.IT)((0,cK.Z)({apiResourceType:a,id:o})),i=l.data,s=i&&(0,sL.XW)(i)?(0,sL.qY)(i):i;r.useEffect(()=>{s&&(0,cY.S)(e,s)},[e,s]);let c=(0,cG.eJ)(),d=(0,cz.Jm)(),m=(0,cz.BY)(),u=(0,nI.W6)(a,o,d,m);return i&&s?r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_COMMUNITY_RESOURCE_DETAIL_PAGE,properties:u},r.createElement("div",null,r.createElement(cH.Y,{resource:i,resourceContent:s}),r.createElement(cV.X,{resource:i,resourceContent:s,rdpImpressionId:c}))):r.createElement(r.Fragment,null)}var cJ=a(431272),cX=a(624490),cQ=a(140630),cZ=a(874328);function c0({selectedTab:e,resultsByType:t,filtersControlState:a}){let n=(0,iC.a4)(iN.bP),o=(0,nw.tv)(),l=(0,cZ.v)(t),i=(e,t)=>{let a=n.copyWith({},{...o,resource_type:t}).href;d.Ay.push(a),(0,np.trackEvent)("resource_type_filter_changed",{resource_type:t,from:e})},[s,c,m]=lo.t.useManagedTabs({[iD.t.FILES]:!0,[iD.t.PLUGINS]:!0,[iD.t.WIDGETS]:!0},e,t=>{i(e,t)}),u=Object.keys(iD.t).map(e=>{let{count:t=0,hasMore:a}=l[iD.t[e]];return r.createElement(lo.t.Tab,{key:e,...s[iD.t[e]]},r.createElement("span",null,function(e){switch(e){case iD.t.FILES:return(0,S.t)("community.view_bar.files_and_templates_tab");case iD.t.PLUGINS:return(0,S.t)("community.view_bar.plugins");case iD.t.WIDGETS:return(0,S.t)("community.view_bar.widgets");default:(0,C.xb)(e)}}(iD.t[e])),r.createElement("span",null,` (${t??0}${a?"+":""})`))});return r.createElement("div",null,r.createElement(nA.g2,{leftSide:r.createElement(lo.t.TabStrip,{manager:m},u),rightSide:[r.createElement(cA,{key:"filters",context:cv.g.SEARCH,filterState:a})]}))}let c1=e=>({query:e.search.query??"",editor_type:e.search.editor_type??iP.k.Editors.ALL,price:e.search.price??cX.C.Price.ALL,resource_type:e.search.resource_type??iD.t.FILES});function c4(){let e=(0,iC.a4)(iN.bP);(0,cR._4)(e);let t=c1(e),a=t.resource_type,{trackResourceImpression:n,flushAndResetResourceImpressions:o}=(0,ik.GS)({extraProperties:{resourceType:t.resource_type}}),l=(0,r.useMemo)(()=>({resourceType:t.resource_type,editorType:t.editor_type,price:t.price,sortBy:(0,sM.H)()}),[t]);r.useEffect(()=>{o()},[t.resource_type,t.query,t.editor_type,t.price,o]);let{resultsByType:i,loadedStatusByType:s}=(0,cJ._w)((0,r.useMemo)(()=>({query:t.query,editor_type:t.editor_type,price:t.price,sort_by:sM.e.Search.RELEVANCY}),[t.query,t.editor_type,t.price]),a),c=sO();return r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB_SEARCH},r.createElement("div",{className:cn,ref:c.sizeRef},r.createElement(c0,{selectedTab:a,resultsByType:i,filtersControlState:l}),r.createElement(cQ.G,{searchParams:t,trackResourceImpression:n,resultsByType:i,isLoadingThisView:!s[a],numTilesPerRow:c.numberOfTiles})))}function c2(){let e=(0,n.wA)(),t=(0,nw.Om)(),a=(0,nw.tv)(),o=(0,eY.tJ)("ResourceHubApp"),l=(0,eU.LQ)(o),i=(0,ip.a0)(),s=o.data?.type===eM.OL.ORG?o.data?.key.parentId:void 0,c=o.data?.type===eM.OL.TEAM?o.data?.key.parentId:void 0,d=(0,eU.Fz)(),m=o.data?.type!==eM.OL.ORG||(0,et.oA)(o.data.customTemplatesAllowed),u=(0,r.useMemo)(()=>{let e=ny.N$.INTERNAL;return"loaded"===o.status&&o.data?.tier===eM.Ag.STARTER&&(e=ny.N$.COMMUNITY),new nw.au({...t,tab:e},a)},[t,a,o]);return"loading"!==o.status&&t?(d||e(eR.$T({view:"recentsAndSharing"})),r.createElement(aq.fu,{name:aX.e0.RESOURCE_HUB},r.createElement(iy.Rj.Provider,{value:iy.mk.RESOURCE_HUB},r.createElement(ee.J,null,r.createElement(iw.qh,{path:nw.VR},r.createElement("div",{className:"xv90nub x78see"},r.createElement(c$,{orgOrTeamName:o.data?.name,isCommunityTabDisabledForOrg:l}),r.createElement(iw.dO,null,r.createElement(iw.qh,{path:ix.jT.path},!l&&i?r.createElement(cq,null):r.createElement(iw.rd,{to:u.to})),r.createElement(iw.qh,{path:iN.bP.path},l?r.createElement(iw.rd,{to:u.to}):r.createElement(c4,null)),r.createElement(iw.qh,{path:iI.U.path},r.createElement(cm,{planTier:o.data?.tier??null,currentOrgId:s,currentTeamId:c,fallbackRedirectRoute:u})),r.createElement(iw.qh,{path:iT.Dv.path},l?r.createElement(iw.rd,{to:u.to}):r.createElement(cO,null)),r.createElement(iw.qh,{path:nw.au.path},r.createElement(co,{planTier:o.data?.tier??null,currentOrgId:s,currentTeamId:c,isCommunityTabDisabledForOrg:l,isTemplatesPublishingDisabledForOrg:!m})),r.createElement(iw.rd,{to:u.to})))))))):null}var c3=a(823898);function c5(){let e=(0,nw.Om)(),t=(0,nw.tv)();return e?r.createElement(c8,{sharedRouteParams:e,sharedSearchParams:t}):null}function c8({sharedRouteParams:e,sharedSearchParams:t}){let[a,n]=r.useState(null),[o,l]=r.useState(null),[i,s]=r.useState(null),{templatesByTeam:c}=cs(),m=[],u=iC.Rd(nw.au)?.tab||ny.N$.INTERNAL,_=u===ny.N$.COMMUNITY?(0,S.t)("community.resource_hub.templates_and_tools_from_community"):(0,S.t)("sidebar.templates_and_tools");m=[{text:_,to:new nw.au({...e,tab:u},t).href,trackingProperties:{name:nI.HH.RESOURCE_HUB_HOME_BREADCRUMB_CLICKED,text:_}}];let f=(0,iC.ed)(iT.Dv),g=!!f,E=(0,iC.ed)(ix.jT),b=!!E,v=g||b;r.useEffect(()=>{v||(n(null),s(null),l(null))},[v]);let h=E?.params.apiResourceType,w=E?.params.resourceId,[y]=(0,p.IT)((0,cK.Z)({apiResourceType:h,id:w}),{enabled:b&&!!h&&!!w}),T=f?.params.categorySlug||y.data?.category_slug||"",I=f?.params.tagSlug||"",[{data:x,status:N}]=(0,p.IT)((0,cb.Zp)({categorySlug:T,tagSlug:I}),{enabled:v});r.useEffect(()=>{if("loaded"===N){s(x?.selected_tag||null);let{parent_category:e}=x||{parent_category:null};l(e||null),n(x)}},[x,N]),v&&a&&(m=[...m,...function({currentCategory:e,currentParentCategory:t,currentTag:a,sharedRouteParams:r,sharedSearchParams:n,categoryRoute:o}){if(!e)return[];let l=(0,cw.S)(t?.url_slug,iL.LJ),i=(0,cw.S)(e.url_slug,iL.LJ);return[t&&l&&{text:iH(l,void 0,o?.search.resource_type)||(0,S.Yd)(t.i18n_meta?.title,t.title),to:o?o.copyWith({categorySlug:l,tagSlug:void 0}).href:new iT.Dv({...r,categorySlug:l},{...n}).href,trackingProperties:{name:nI.HH.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:iH(l,void 0,o?.search.resource_type)||(0,S.Yd)(t.i18n_meta?.title,t.title),category_slug:l}},e&&i&&{text:iH(i,void 0,o?.search.resource_type)||(0,S.Yd)(e.i18n_meta?.title,e.title),to:o?o.copyWith({categorySlug:i,tagSlug:void 0}).href:new iT.Dv({...r,categorySlug:i},{...n}).href,trackingProperties:{name:nI.HH.RESOURCE_HUB_CATEGORY_BREADCRUMB_CLICKED,text:iH(i,void 0,o?.search.resource_type)||(0,S.Yd)(e.i18n_meta?.title,e.title),category_slug:i}},a&&{text:(0,S.Yd)(a.i18n_meta?.text,a.text)}].filter(Boolean)}({currentCategory:a,currentParentCategory:o,currentTag:i,sharedRouteParams:e,sharedSearchParams:t,categoryRoute:g?f:void 0})]);let C=y.data;if(b&&C&&(a||!C.category_slug)){let e={text:(0,c3.K2)(C)||""};m=[...m,e]}if((0,iC.ed)(iN.bP)){let e={text:(0,S.t)("community.resource_hub.search_breadcrumb")};m=[...m,e]}let k=(0,iC.ed)(iI.U);if(k){let e=k.params.resourceTypeSlug,t={text:(0,eU.i_)(e)};if(m=[...m,t],k?.params.templatesTeamId){t.to=k.copyWith({templatesTeamId:void 0}).href,t.trackingProperties={name:nI.HH.RESOURCE_HUB_INTERNAL_RESOURCE_TYPE_BREADCRUMB_CLICKED,text:(0,eU.i_)(e)};let a=c?.teamName;a&&(m=[...m,{text:a}])}}return r.createElement(i_.A5,null,...m.map((e,t)=>r.createElement(i_.J5,{text:e.text,onClick:()=>{e.to&&d.Ay.push(e.to),e.trackingProperties&&(0,nI.Ox)(e.trackingProperties)},hasTrailingDivider:t<m.length-1,key:`resource_hub_breadcrumb_${t}`,disabled:t===m.length-1})))}function c6(){let e=r.createElement(c5,null);return(0,ip.Fm)()?r.createElement(nA.g2,{leftSide:e,rightSide:[r.createElement(iy.Rj.Provider,{key:"resource-hub-context",value:iy.mk.RESOURCE_HUB},r.createElement("div",{className:"xnuq7ks"},r.createElement(cU,{key:"resource-hub-search-bar"})))]}):e}var c7=a(996982),c9=a(631684),de=a(841807),dt=a(942524),da=a(170954),dr=a(176677),dn=a(304756);let dl=new class{markFeedVisited(e){return dn.Ay.post(`/api/feed_visited/${e.currentOrgId}`)}};var di=a(355739),ds=a(343651),dc=a(287498),dd=a(710044),dm=a(412865),du=a(511067),d_=a(259939);let dp=new class{markFeedViewed(e){dn.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){dn.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}};var df=a(387594),dg=a(16808),dE=a(539454),db=a(524767),dv=a(483337),dh=a(311139),dw=a(809651),dy=a(298944);let dT="feed_tile--commentPillText--goQ26",dI="feed_tile--feedPostHoverContainerSelectable--rhPI9";var dx=a(505e3);function dN(e){let t=(0,n.wA)(),a=r.useRef(null),[o,l]=(0,l4.M)(),[i,s]=(0,l4.M)(),{requestToOpenPostByFeedIdx:c}=e,d=r.useCallback((a,r)=>{a?.stopPropagation();let n=e.itemIdx+1;(0,np.trackEvent)("Team Feed Tile Clicked",{postUuid:e.post.publicUuid,feedRank:n}),t((0,tf.to)({type:di.K,data:{postUuid:e.post.publicUuid,initialPreloadedPost:e.post,feedIdx:e.feedIdx,requestToOpenPostByFeedIdx:c,autofocusCommentInput:r?.autofocusCommentInput,selectedContentIdx:r?.selectedContentIdx,onSetSelectedContentIdx:r?.onSetSelectedContentIdx}}))},[e.itemIdx,e.post,t,e.feedIdx,c]),{refSetter:m}=function(e){let t=r.useRef(null),a=r.useRef(e);a.current=e;let n=r.useMemo(()=>new ResizeObserver(()=>{a.current(t.current)}),[]);return r.useEffect(()=>()=>{n.disconnect()},[n]),{refSetter:r.useCallback(e=>{null!==t.current&&n.unobserve(t.current),t.current=e,null!==t.current&&n.observe(t.current)},[n])}}(e.virtualRowItem.measureRef),u={position:"absolute",top:e.virtualRowItem.start,left:0,right:0},_=e.feedListRef.current?.getBoundingClientRect().left??0,p=Math.max(0,(a.current?.getBoundingClientRect().left??0)-_),f=r.createElement("div",{className:"feed_tile--caughtUpContainer--5uyiy"},r.createElement("div",{className:"feed_tile--caughtUpTitle--PVabL"},(0,S.t)("fig_feed.youre_all_caught_up")),r.createElement("div",{className:"feed_tile--caughtUpSubtitle--j2qKn"},(0,S.t)("fig_feed.come_back_later_for_more_posts")));return r.createElement("div",{className:"feed_tile--postContainer--jD-OA",ref:e=>{m(e),e&&(a.current=e,o(e))},style:u},r.createElement("div",{className:"feed_tile--hoverExtension--aYeAh",ref:i}),r.createElement("div",{className:"feed_tile--tileContainer---NbBK"},r.createElement(dC,{feedPost:e.post,feedIdx:e.feedIdx,onTileMouseDown:d,horizontalMargin:p,isHovered:l||s}),e.mostRecentUnviewed&&f))}function dC(e){let t=parseInt(e.feedPost.numComments,10),a=(0,dm.o8)(e.feedPost.descriptionMeta),n=[...new Map(e.feedPost.comments.map(e=>[e.user.id,e.user])).values()],o=r.createElement("div",{className:"feed_tile--commentPill--ZWfdc feed_reactions_section--reactionPill--qE8nJ reactions--reaction--BGfYE text--fontPos11--2LvXf text--_fontBase--QdLsd",onMouseDown:t=>e.onTileMouseDown(t,{autofocusCommentInput:!0}),role:"button",tabIndex:0},t>0?r.createElement(r.Fragment,null,r.createElement(dc.u,{users:n,totalNum:n.length,numAvatarsToDisplay:4}),r.createElement("div",{className:dT},(0,S.tx)("fig_feed.num_comments",{numComments:t}))):r.createElement("div",{className:dT},(0,S.tx)("fig_feed.add_comment"))),[l,i]=r.useState(!1),s=r.useRef(null);r.useEffect(()=>{let e=s.current;e&&i(e.scrollHeight>e.offsetHeight)},[]);let c=r.useMemo(()=>(a.length>0&&(a[0].t=a[0].t?.trimStart(),a[a.length-1].t=a[a.length-1].t?.trimEnd()),a),[a]),d=(0,d_.q)(),m=r.useCallback((e=[],t)=>e?e.map((e,a)=>{let n=(e.user_annotated?e.user_annotated.handle:e.t)||"",o=(0,l2.F)(n),l=null,i=e.link&&(0,df.xT)(e.link);if(e.user_annotated&&o)l=r.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},r.createElement(df.E4,{href:`/files${d}/user/${e.user_id}`,userId:e.user_annotated.id,handle:o,imgUrl:e.user_annotated.img_url}));else if(i&&o&&(0,dE.$)(i))l=r.createElement("span",{onMouseDown:e=>e.stopPropagation(),role:"link",tabIndex:0},r.createElement(df.Rk,{text:o,hyperlink:i}));else{let e=(0,ds.x6)(o?.replace(/\n\s*\n/g,"\n").split("\n").join(" ")||"");l=r.createElement("span",null,e)}return r.createElement(r.Fragment,{key:`${t}-${a}`},l,e.children?.length&&e.styles?.length&&e.children.map((n,o)=>r.createElement(r.Fragment,{key:`${t}-${a}-${o}`}," ",e.styles.includes("ol")?`${o+1}. `:"\u2022 ",m(n.children,`${t}-${a}-${o}`)," ")))}):[r.createElement(r.Fragment,null)],[d]),u=r.useMemo(()=>m(c,e.feedPost.id),[c,m,e.feedPost.id]),{onTileMouseDown:_}=e,p=r.useMemo(()=>r.createElement("div",{className:"feed_tile--postDescriptionContainer--xP5Fz",onMouseDown:_,role:"button",tabIndex:0},r.createElement("div",{className:"feed_tile--postTitle--DY-Hh"},e.feedPost.title),r.createElement("div",{className:"feed_tile--postDescription--PiaCx","data-testid":"feed-post-description",ref:s},r.createElement("div",{className:$()("feed_tile--postDescriptionMessage--6ThT1 comment_message--commentMessage--kZCzD","feed_tile--collapsed--ruER6",l&&"feed_tile--hasShowMore--6Nm-e")},u),l&&r.createElement("div",{onMouseDown:e=>{e.stopPropagation(),_()},className:"feed_tile--viewMore--o-NxF",role:"button",tabIndex:0},r.createElement("div",{className:"feed_tile--viewMoreEllipsis--k1nCe"},"..."),r.createElement("div",{className:"feed_tile--viewMoreText--WpL2K"},(0,S.t)("fig_feed.see_more"))))),[l,s,e.feedPost,_,u]),f=(0,db.DG)(e.feedPost.publicUuid,db.dy.TILE),g=(0,du.Um)(),E=e.isHovered||g?.type===(0,dy.j8)(dy.Hx.USER,e.feedPost.publicUuid,db.Zp.TILE);return r.createElement(r.Fragment,null,r.createElement("div",{className:"feed_tile--topRowUGC--oWJxs"},r.createElement("div",{className:"feed_tile--avatarFloat--h-EFM"},r.createElement(dh.A,{user:e.feedPost.creator,size:tV.Pf.LARGE,noHandle:!0})),r.createElement(dh.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,onTileMouseDown:e.onTileMouseDown,noAvatar:!0}),r.createElement("div",{className:k.s.flex.flexRow.$},r.createElement(dy.Wu,{hideTarget:!E,feedPost:e.feedPost,source:db.Zp.TILE}),E&&r.createElement(dg.K0,{"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":(0,S.t)("fig_feed.copy_link_to_post"),onClick:f},r.createElement(lw.In,{icon:"hyperlink-32"})))),p,r.createElement(dk,{feedPost:e.feedPost,feedIdx:e.feedIdx,backgroundColor:e.feedPost.backgroundColor,onTileMouseDown:e.onTileMouseDown,horizontalMargin:e.horizontalMargin}),r.createElement("div",{className:"feed_tile--bottomRow--CTXwC"},r.createElement(dw.Q$,{type:dw.Us.FULL,source:dw.zY.TILE_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions,prependToList:[o]})))}function dk(e){let t=r.useRef(null),a=e.feedPost.content.map(e=>JSON.parse(e)),[n,o]=r.useState(!1),[l,i]=r.useState(!1),[s,c]=r.useState(0);r.useEffect(()=>{0!==s&&dp.markFeedViewed({publicUuid:e.feedPost.publicUuid})},[s,e.feedPost.publicUuid]);let d=(0,dw.mz)({type:"post",id:e.feedPost.publicUuid},dw.zY.TILE_CONTENT),m=a.length>1,u=$()(m?"feed_tile--feedPostHoverContainerWithThumbnails--pAnNB feed_tile--feedPostHoverContainer--238j6":"feed_tile--feedPostHoverContainer--238j6",!(n||l||d)&&"feed_tile--hidden--9bafI"),_={selectedContentIdx:s,onSetSelectedContentIdx:c},{fileData:p,fileIcon:f,fileLoaded:g,openFile:E}=(0,db.rS)(e.feedPost.publicUuid,a,e.feedPost.fileKey);return r.createElement("div",{ref:e=>{e&&(t.current=e)},className:$()("feed_tile--fullHeightContentSection--qE0UO feed_tile--contentSection--1-urk",m&&"feed_tile--fullHeightContentSection_WithThumbnails--l-If7")},r.createElement(dv.x,{contentItems:a,feedPostIdx:e.feedIdx,feedPostUuid:e.feedPost.publicUuid,onContentHover:e=>o(e),onSelectedTileMouseDown:t=>e.onTileMouseDown(t,_),pageBackgroundColor:e.backgroundColor||void 0,selectedContentIdx:s,setSelectedContentIdx:c,source:db.Zp.TILE,staticContent:!0}),g&&r.createElement("button",{className:$()(u,dI,"feed_tile--hoverTopLeft--zVWFQ"),onClick:E,onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},r.createElement(dd.MW,{type:f,size:dd.LE.SMALL}),r.createElement("div",null,p.name)),r.createElement("button",{className:$()(u,dI,"feed_tile--hoverTopRight---lyoe"),onMouseDown:t=>e.onTileMouseDown(t,_),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1)},r.createElement(ei.B,{svg:dx.A})))}function dS(e){let t=(0,n.wA)(),a=r.useRef(null),o=(0,J.iZ)(),l=(0,n.d4)(e=>e.teamFeedRefreshNonce),[i,s]=r.useState(null),c=(0,eA._6)(),d="teamFeed"===c.view,m="user"===c.view;r.useEffect(()=>{d&&(dl.markFeedVisited({currentOrgId:e.currentOrgId}).then(e=>{s(e.data.meta?new Date(e.data.meta):null)}),t(eL.b({has_visited_feed:!0})))},[e.currentOrgId,l,t,d]);let p=(0,_.Rs)(eK.KhA,{orgId:e.currentOrgId,firstPageSize:50,feedFilter:JSON.stringify({creator_id:e.selectedUser?.id??null}),refreshNonce:l}),f=(0,u.ZC)(l);f&&f!==l&&a.current&&(a.current.scrollTop=0),r.useEffect(()=>{"errors"===p.status&&t(tj.F.enqueue({message:(0,S.t)("general.an_error_occurred"),error:!0}))},[t,p.status]);let g=r.useMemo(()=>"loaded"===p.status?{isLoadingNextPage:p.data.feedPosts.isLoadingNextPage,hasNextPage:p.data.feedPosts.hasNextPage,loadNext:p.data.feedPosts.loadNext}:null,[p]),E=r.useMemo(()=>"loaded"===p.status?{...p,data:p.data.feedPosts.filter(e=>!!e.feedPost)}:p,[p]),b="loaded"===E.status&&"loaded"===p.status,v=r.useCallback(()=>512,[]),h=E.data?E.data.length:0,w=(0,dr.z)({size:h,parentRef:a,estimateSize:v,overscan:15,paddingStart:0}),y=r.useRef(0);r.useEffect(()=>{y.current=E.data?.length??0},[b,E.data?.length]),r.useEffect(()=>{b&&(0,np.trackEvent)("Team Feed Posts Rendered",{numPosts:y.current,view:c.view,selectedUserId:e.selectedUser?.id},{forwardToDatadog:!0})},[e.selectedUser,y,b,c.view]);let[T,I]=r.useState(!1),x=r.useCallback((e,t)=>{e>0&&!T&&((0,np.trackEvent)("Team Feed User Scrolled Down"),I(!0));let a=h/50,r=e+t.trackHeight,n=t.scrollHeight;1-(n-r)/(n/a)>=.5&&g&&!g.isLoadingNextPage&&g.hasNextPage()&&g.loadNext(50)},[T,g,h]),N=r.useMemo(()=>{let e={};return E.data&&E.data.forEach((t,a)=>{e[t.publicUuid]=a}),e},[E]),[C,R]=r.useState(void 0),A=r.useCallback(e=>{R(e)},[]);r.useEffect(()=>{if(void 0===C||(R(void 0),C<0)||(C>=.5*h&&g&&g.loadNext(50),C>=h))return;let e=E.data[C];t(tf.hm({type:di.K.type,data:{postUuid:e.publicUuid,initialPreloadedPost:e.feedPost,feedIdx:C,requestToOpenPostByFeedIdx:A}}))},[C,t,E,A,g,h]);let O=r.useMemo(()=>{if(!i||!E.data)return null;let e=0,t=E.data.length-1,a=-1,r=0;for(;e<=t;){let n=Math.floor((e+t)/2);if(new Date(E.data[n].createdAt)>i?(a=n,e=n+1):t=n-1,(r+=1)>50)break}for(;a>=0&&o&&E.data[a].feedPost?.creator.id===o.id;)a-=1;return a},[i,E.data,o]),P=b&&E.data&&0===E.data.length&&e.selectedUser;return r.createElement(eo.P,{scrollContainerRef:a,className:"feed_list_view--scrollContainer--84INP main_feed_view--scrollContainer--BunJg",innerClassName:$()("feed_list_view--scrollContainerInner--8Le-r",m&&"feed_list_view--scrollContainerInnerProfile--izApr"),onScroll:x},r.createElement("div",{className:"feed_list_view--feedListContainer--2BMds"},P?r.createElement("div",{className:"feed_list_view--noPostsFound--COpgM"},r.createElement("div",{className:k.s.fontMedium.$},(0,S.tx)("fig_feed.no_posts_found_title")),r.createElement("div",{className:k.s.colorTextSecondary.$},(0,S.tx)("fig_feed.no_posts_found_description"))):r.createElement("div",{style:{margin:"0 8px",height:`${w.totalSize}px`,position:"relative"}},w.virtualItems.map(e=>{let t=e.index;if(!E.data||!E.data[t].feedPost)return null;let n=E.data[t].feedPost;return r.createElement(dN,{post:n,key:e.key,virtualRowItem:e,feedListRef:a,itemIdx:t,feedIdx:N[n.publicUuid],requestToOpenPostByFeedIdx:A,mostRecentUnviewed:d&&N[n.publicUuid]===O})}))))}function dR(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.teamFeedRefreshNonce);return r.useEffect(()=>{t(da.yu({orgId:e.currentOrgId,bellActive:!1}))},[t,a,e.currentOrgId]),r.createElement(dS,{...e})}let dA="new_post_indicator--icon--uvRMg";var dO=a(185333);function dP(e){return r.createElement("div",{className:"new_post_indicator--notification--NxIRJ text--_negText--j9g-L _overlayBase--_overlayBase--Rkj8l"},r.createElement("div",{className:"new_post_indicator--leftSide--Y7k6-",onClick:e.onRefresh,role:"button",tabIndex:0},r.createElement(ei.B,{svg:dO.A,className:dA}),(0,S.tx)("fig_feed.new_posts")),r.createElement("div",{className:"new_post_indicator--dismiss--BAIvc",onClick:e.onDismiss,role:"button",tabIndex:0},r.createElement(ei.B,{svg:nG.default,className:dA})))}function dL(e){let t=(0,n.wA)();r.useEffect(()=>((0,np.trackEvent)("Team Feed Posts List View Visited"),t(da.yu({orgId:e.currentOrgId,bellActive:!1})),()=>{(0,np.trackEvent)("Team Feed List View Closed")}),[t,e.currentOrgId]);let a=r.useCallback(()=>t(da.Y9()),[t]),o=r.useCallback(()=>{a()},[a]),l=(0,n.d4)(t=>t.teamFeedBellStates[e.currentOrgId]),[i,s]=r.useState(!1),c=(0,u.ZC)(l);return r.useEffect(()=>{l&&!1===c?s(!0):c&&!1===l&&s(!1)},[l,c,t]),r.useEffect(()=>{e.initialPostUuidToShow&&t((0,tf.to)({type:di.K,data:{postUuid:e.initialPostUuidToShow}}))},[t,e.initialPostUuidToShow]),r.createElement(r.Fragment,null,i&&r.createElement(dP,{onRefresh:o,onDismiss:()=>s(!1)}),r.createElement(dR,{currentOrgId:e.currentOrgId}),r.createElement(dt.cx,null))}function dF(e){let t=(0,n.d4)(e=>e.currentUserOrgId),a=r.useRef(new de.M4);return(r.useEffect(()=>{a.current.start()},[]),t)?r.createElement(dL,{currentOrgId:t,initialPostUuidToShow:e.postUuid,creatorId:e.creatorId,feedViewTimer:a.current}):null}var dD=a(179507);function dM(e){let t=e.tabs?r.createElement(ee.J,null,r.createElement(lo.t.TabStrip,{manager:e.tabManager},e.tabs.map(e=>r.createElement(lo.t.Tab,{...e.tabProps,key:e.tabName},e.tabName)))):r.createElement(r.Fragment,null);return r.createElement(nA.g2,{leftSide:t,rightSide:e.viewbarActions||[]})}var dB=a(631265);let dU=e=>({tileSortFilterConfig:e.deletedFiles,sortKeys:[lH.C0.TRASHED_AT]}),d$=e=>({tileSortFilterConfig:e.trashedFolders,sortKeys:[lH.C0.TRASHED_AT,lH.C0.NAME]}),dj=(e,t,a)=>{let n=(0,dD.xx)(dU)(t);return[r.createElement(nA.gr,{key:0,dispatch:e,options:n,selectedView:a}),r.createElement(nA.ye,{key:1,config:n.tileSortFilterConfig}),r.createElement(nA.mc,{key:2,dispatch:e,options:n,selectedView:a}),r.createElement(nA.$c,{key:3,initialViewMode:n.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,np.trackEvent)("file view toggle",{viewType:t===lH.XU.GRID?"grid":"list"}),e(eR.JF({selectedView:a,config:{...n.tileSortFilterConfig,viewMode:t}}))}})]},dW=(e,t,a)=>{let n=(0,dD.xx)(d$)(t);return[r.createElement(nA.KH,{key:6,dispatch:e,options:n,selectedView:a}),r.createElement(nA.mc,{key:4,dispatch:e,options:n,selectedView:a}),r.createElement(nA.$c,{key:5,initialViewMode:n.tileSortFilterConfig.viewMode,onViewModeChange:t=>{(0,np.trackEvent)("folder view toggle",{viewType:t===lH.XU.GRID?"grid":"list"}),e(eR.JF({selectedView:a,config:{...n.tileSortFilterConfig,viewMode:t}})),e(eR.uV({viewId:dB.l,viewMode:t}))}})]};function dG({currView:e}){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.tileSortFilterStateByView),o=dj(t,a,e),l=dW(t,a,e),[i,s,c]=lo.t.useManagedTabs({deletedFiles:!0,trashedFolders:!0},e.view,r.useCallback(e=>{t(eR.$T({view:e}))},[t]));return r.createElement(dM,{tabManager:c,tabs:[{tabName:(0,S.t)("file_browser.tool_bar.trashed_files"),view:{view:"deletedFiles"},ariaLabel:(0,S.t)("file_browser.tool_bar.trashed_files.aria_label"),tabProps:i.deletedFiles},{tabName:(0,S.t)("file_browser.tool_bar.trashed_projects"),view:{view:"trashedFolders"},ariaLabel:(0,S.t)("file_browser.tool_bar.trashed_projects.aria_label"),tabProps:i.trashedFolders}],viewbarActions:"deletedFiles"===e.view?o:l})}var dV=a(191802),dH=a(127974),dz=a(315933),dK=a(426550),dY=a(750294);function dq({text:e,tooltipText:t,currentProgress:a,totalProgress:n}){return r.createElement(rK.Y,{direction:"vertical",height:"hug-contents",spacing:"7px"},r.createElement(rK.Y,{horizontalAlignItems:"space-between"},r.createElement(rK.Y,{spacing:4},r.createElement(R.E,{fontSize:13,fontWeight:"medium"},e),r.createElement("div",{"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0},r.createElement(lw.In,{icon:"info-16",fill:"secondary"}))),r.createElement(R.E,{fontSize:13,fontWeight:"medium"},a,"/",n)),r.createElement("div",{className:k.s.relative.wFull.$},r.createElement("div",{className:k.s.absolute.wFull.$},r.createElement(rK.Y,{cornerRadius:5,height:5,backgroundColor:"disabled"})),r.createElement("div",{className:k.s.absolute.wFull.$},r.createElement(rK.Y,{cornerRadius:5,height:5,width:`${Math.min(a/n*100,100)}%`,backgroundColor:a>=n?"warning":"brand"}))))}function dJ({canEditTeam:e,isDraftsFolder:t}){let a=(0,n.wA)(),o=(0,nt.ol)(),l=(0,eA._6)();return t||!o||(0,rd.w5)(o)||"folder"!==l.view?null:r.createElement(dX,{folderId:l.folderId,showPlanComparisonModal:()=>{a((0,tf.to)({type:rb.V,data:{upsellSource:rw.b.STARTER_LIMIT_OVERVIEW,teamId:o.id}}))},canEditTeam:e})}function dX({folderId:e,showPlanComparisonModal:t,canEditTeam:a}){let n=(0,_.Rs)(eK.yU5,{projectId:e}),o=rG.h.useTrackingContext({trigger:rw.b.STARTER_LIMIT_OVERVIEW});if("loaded"!==n.status)return null;let l=n.data.project?.team?.projectsCount.status==="loaded"?n.data.project?.team?.projectsCount.data??1:1,i=n.data.project?.team?.teamFileCounts?.designFileCount??0,s=n.data.project?.team?.teamFileCounts?.whiteboardFileCount??0,c=n.data.project?.team?.teamFileCounts?.slideFileCount,d=c?parseInt(c,10):0,m=(0,et.oA)(n.data.project?.team?.teamFileCounts?.totalFileCount)??0,u=i>=rd.WW||s>=rd.WW;return r.createElement(aq.fu,{name:"Starter Limit Overview",properties:o},r.createElement("div",{className:$()(k.s.cursorDefault.mr32.maxW300.colorBg.$,"starter_limit_overview--responsiveHide--nMkA0"),style:es.sx.sticky.add({alignSelf:"flex-start",top:"128px"}).$},r.createElement(rK.Y,{direction:"vertical",padding:32,spacing:24,cornerRadius:8,strokeWidth:1,strokeColor:"default",height:"hug-contents"},r.createElement(R.E,{fontSize:14,fontWeight:"semi-bold"},(0,S.tx)("file_browser.starter_limit.your_starter_team_overview")),r.createElement(dQ,{numProjects:l,numFigmaFilesUsed:i,numFigjamFilesUsed:s,numSlidesFilesUsed:d,totalFilesUsed:m}),a?r.createElement(rK.Y,{direction:"vertical",spacing:"12px"},r.createElement(R.E,{fontSize:13},(0,S.tx)(u?"file_browser.starter_limit.running_out_of_files":"file_browser.starter_limit.enough_for_you_to_get_started")),r.createElement(aY.vd,{onClick:t,trackingProperties:{trackingDescriptor:eu.c.VIEW_PLANS}},(0,S.tx)("upgrade.view_plans"))):r.createElement(R.E,{fontSize:13},(0,S.tx)("file_browser.starter_limit.trying_things_out")))))}function dQ({numProjects:e,numFigmaFilesUsed:t,numFigjamFilesUsed:a,numSlidesFilesUsed:n,totalFilesUsed:o}){let l=(0,G.E9)();return r.createElement(rK.Y,{direction:"vertical",spacing:24,width:234},r.createElement(dq,{text:(0,S.t)("file_browser.starter_limit.projects"),tooltipText:(0,S.t)("file_browser.starter_limit.projects.tooltip"),currentProgress:e,totalProgress:rd.Wf}),l&&r.createElement(dq,{text:(0,S.t)("file_browser.starter_limit.global_files"),tooltipText:(0,S.t)("file_browser.starter_limit.global_files.tooltip"),currentProgress:o,totalProgress:rd.WW}),!l&&r.createElement(r.Fragment,null,r.createElement(dq,{text:(0,S.t)("file_browser.starter_limit.design_files"),tooltipText:(0,S.t)("file_browser.starter_limit.design_files.tooltip"),currentProgress:t,totalProgress:rd.WW}),r.createElement(dq,{text:(0,S.t)("file_browser.starter_limit.figjam_boards"),tooltipText:(0,S.t)("file_browser.starter_limit.figjam_boards.tooltip"),currentProgress:a,totalProgress:rd.WW}),r.createElement(dq,{text:(0,S.t)("file_browser.starter_limit.slides"),tooltipText:(0,S.t)("file_browser.starter_limit.slides.tooltip"),currentProgress:n,totalProgress:rd.WW})))}var dZ=a(86521),d0=a(954080),d1=a(565294),d4=a(414324),d2=a(503933),d3=a(587745),d5=a(338104),d8=a(656320),d6=a(200130),d7=a(259964),d9=a(812295),me=a(878339);let mt="open_invoice_reminder_card--icon--gcN35";function ma(e){let t=(0,n.wA)(),a=e.team.restrictions_list?.includes(eM.P4.LOCKED),o=e.canAdminTeam?a?(0,S.t)("billing.open_invoice_reminder.title"):(0,S.t)("billing.open_invoice_reminder.grace_period_title"):(0,S.t)("billing.open_invoice_reminder.title_viewer"),l=e.canAdminTeam?a?(0,S.t)("billing.open_invoice_reminder.locked_admin_description"):(0,S.t)("billing.open_invoice_reminder.grace_period_admin_description"):(0,S.t)("billing.open_invoice_reminder.locked_viewer_description"),i=e.canAdminTeam?(0,S.t)("billing.open_invoice_reminder.cta"):null,s={"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":(0,S.t)("billing.open_invoice_reminder.button_tooltip"),"data-tooltip-show-immediately":!0};return r.createElement(rK.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:288,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},r.createElement("div",{className:k.s.flex.justifyBetween.wFull.$},r.createElement("div",{className:k.s.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},a?r.createElement(d9.s,{className:mt}):r.createElement(me.R,{className:mt}))),r.createElement("div",{className:k.s.font14.fontSemiBold.lh24.$},o),r.createElement("div",{className:k.s.font13.lh24.$},l),!!i&&r.createElement("div",{className:k.s.flex.justifyEnd.wFull.$},r.createElement(oL.IK,{onClick:()=>t(eR.$T({view:"teamAdminConsole",teamId:e.team.id,teamAdminConsoleViewTab:eJ.Iv.BILLING})),variant:"primary",htmlAttributes:s},i)))}function mr(e){return e.team.restrictions_list?.includes(eM.P4.LOCKED)||e.canAdminTeam?r.createElement(aq.fu,{name:"Open Invoice Reminder Card",properties:{teamId:e.team.id}},r.createElement(ma,{...e})):null}var mn=a(579879),mo=a(603826);let ml="tiles_view--container--u00AG",mi="tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd";function ms({tile:e,index:t,dispatch:a,selectedView:r,currentPlanFilter:n,currentSharedByFilter:o,isListView:l}){e.type===t1.nb.FILE&&(a(ta.UN({fileKey:e.file.key,entrypoint:"file tile",currentPlanFilter:n,currentSharedByFilter:o,viewMode:void 0!==l?l?"list":"grid":void 0})),(0,d8.K)(r)&&a(ta.T5({index:t})),c.eD&&(0,np.trackEvent)("Open File Click",{fileKey:e.file.key,fileRepoId:e.file.fileRepoId,uiSelectedView:JSON.stringify(r)}))}let mc=(e,t)=>{let a=t1.Tf.getName(e)||"",r=t1.Tf.getName(t)||"";return tl.Tt.compare(a,r)},md=(e,t)=>{let a=(t1.Tf.getName(e)||"").toLowerCase(),r=(t1.Tf.getName(t)||"").toLowerCase();return a===r?0:a<r?-1:1},mm=(e,t)=>{if(e.type!==t1.nb.FILE||t.type!==t1.nb.FILE)return 0;let a=e.file,r=t.file;return a.createdAt<r.createdAt?1:-1},mu=(e,t)=>e.type!==t1.nb.PROTOTYPE||t.type!==t1.nb.PROTOTYPE?0:e.prototype.file_key<t.prototype.file_key?-1:1,m_=(e,t)=>{let a=t1.Tf.getAccessedAt(e),r=t1.Tf.getAccessedAt(t);return a&&r?a>r?1:-1:r?-1:a?1:0},mp=(e,t)=>t1.Tf.getCreatedAt(e)>t1.Tf.getCreatedAt(t)?1:-1,mf=(e,t)=>{let a=t1.Tf.getTouchedAt(e),r=t1.Tf.getTouchedAt(t);return null===a||null===r?0:a>r?1:-1},mg=(e,t)=>e.type!==t1.nb.FILE&&e.type!==t1.nb.REPO||t.type!==t1.nb.FILE&&t.type!==t1.nb.REPO?0:(e.type===t1.nb.FILE?e.file.trashedAt:e.repo.trashed_at)>(t.type===t1.nb.FILE?t.file.trashedAt:t.repo.trashed_at)?1:-1;function mE({currentPlanFilter:e,currentSharedByFilter:t,emptyStateContent:a,emptyStateText:l,isDataPartial:i,isFolder:s,isEligbileForProTeamLockedRevampUI:m,newFileTile:u,overFilteredText:p,sortFilterOptions:f,tileActions:g,tiles:b}){let v=(0,J.iZ)(),h=(0,eA._6)(),w="folder"===h.view?h.folderId:null,y=t8.M4.Folder.useValue(w).data,T=[v?.drafts_folder_id,v?.personal_drafts_folder_id].includes(y?.id),{showing:I,show:x,data:N}=(0,lj.L)(),R=(0,eD.FC)(),A=(0,nt.ol)(),O=y?.team_id||A?.id,P=(0,_.Rs)((0,eK.yQw)((0,rs.DQ)(rs.Pw.GROUP_7)&&O?{teamId:O}:null)),L=r.useMemo(()=>P.transform(({team:e})=>!!e?.canEdit),[P]),F=(0,rc.MF)({label:rc.A5.TilesView.canEditTeam,oldValue:r5.Qw.useMemoizedLoaded((0,rm.canEditTeam)(y?.team_id||A?.id||"",R)),newValue:L,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_7),contextArgs:{folderTeamId:y?.team_id,teamFromFileBrowserId:A?.id}}).unwrapOr(!1),D=r.useMemo(()=>P.transform(({team:e})=>!!e?.canAdmin).unwrapOr(!1),[P]);r.useEffect(()=>{let e="page_selected_view",t=dz.sn.get(e);if(t&&t.isRunning&&!t.isUnreliable){let t=dz.sn.tryStop(e);t&&(0,np.trackEvent)("File Browser Tab Switch Page Load Time",{elapsedMs:t,selectedView:h.view},{forwardToDatadog:!0,batchRequest:!0})}},[h.view,w]);let{userStateLoaded:M,userExternallyRestricted:B,selectedBranchKeyByRepoId:U}=(0,r8.R)(e=>({userStateLoaded:e.userStateLoaded,userExternallyRestricted:(0,rm.isOrgUserExternallyRestrictedFromState)(R),selectedBranchKeyByRepoId:e.selectedBranchKeyByRepoId})),$=(0,n.wA)(),j=(0,eN.vt)(A?.id),W=!!A&&j,G=!!A&&!!m,V=f.tileSortFilterConfig.viewMode===lH.XU.LIST,H="recentsAndSharing"===h.view&&h.tab===iv.G.SHARED_FILES,z=(e,t,a)=>e===lH.rJ.ANY||e===lH.rJ.SELF&&a.type===t1.nb.FILE&&a.file.creatorId===t||e===lH.rJ.SELF&&a.type===t1.nb.REPO&&a.branches[0].creator_id===t||e===lH.rJ.OTHER&&a.type===t1.nb.FILE&&a.file.creatorId!==t||e===lH.rJ.OTHER&&a.type===t1.nb.REPO&&a.branches[0].creator_id!==t,K=(e,t)=>{let a="design";switch(t.type===t1.nb.FILE?a=t.file.editorType:t.type===t1.nb.PINNED_FILE?a=t.file.editorType:t.type===t1.nb.OFFLINE_FILE&&(a=t.file.editorType),e){case lH.t2.ANY:return!0;case lH.t2.DESIGN:if(t.type===t1.nb.FILE||t.type===t1.nb.REPO||t.type===t1.nb.PINNED_FILE||t.type===t1.nb.OFFLINE_FILE)return"design"===a;return!1;case lH.t2.FIGJAM:if(t.type===t1.nb.FILE||t.type===t1.nb.PINNED_FILE||t.type===t1.nb.OFFLINE_FILE)return"whiteboard"===a;return!1;case lH.t2.PROTOTYPE:return t.type===t1.nb.PROTOTYPE;case lH.t2.SLIDES:if(t.type===t1.nb.FILE||t.type===t1.nb.PINNED_FILE||t.type===t1.nb.OFFLINE_FILE)return"slides"===a;return!1;case lH.t2.SITES:if(t.type===t1.nb.FILE||t.type===t1.nb.PINNED_FILE||t.type===t1.nb.OFFLINE_FILE)return"sites"===a;return!1;case lH.t2.COOPER:if(t.type===t1.nb.FILE||t.type===t1.nb.PINNED_FILE||t.type===t1.nb.OFFLINE_FILE)return"cooper"===a;return!1;case lH.t2.MAKE:if(t.type===t1.nb.FILE||t.type===t1.nb.PINNED_FILE||t.type===t1.nb.OFFLINE_FILE)return"figmake"===a;return!1;default:(0,C.xb)(e)}},Y=(e,t)=>!e||e===`${t1.Tf.getSharedBy(t)}`,q=r.useCallback((e,t)=>{if("recentsAndSharing"===h.view&&h.tab===iv.G.SHARED_FILES||!e||!e.planId)return!0;let a=e.planId;switch(t.type){case t1.nb.FILE:return("org"===e.planType?t.file.parentOrgId:t.file.teamId)===a;case t1.nb.REPO:return("org"===e.planType?t.repo.parent_org_id:t.repo.team_id)===a;case t1.nb.PROTOTYPE:return("org"===e.planType?t.prototype.parent_org?.id:t.prototype.parent_team?.id)===a;case t1.nb.OFFLINE_FILE:return"org"===e.planType&&t.file.orgId===a;default:return!1}},[h]),X=r.useCallback((e,t)=>{let a,r,n;let o=e.filter(e=>Y(t.filters.sharedBy,e)&&K(t.filters.fileType,e)&&z(t.filters.creator,R.user?.id,e)&&q(t.filters.plan,e));if(a=H?o.filter(e=>e.type===t1.nb.FILE||e.type===t1.nb.PROTOTYPE||e.type===t1.nb.REPO):o.filter(e=>e.type===t1.nb.FILE||e.type===t1.nb.REPO||e.type===t1.nb.OFFLINE_FILE),"recentsAndSharing"===h.view&&h.tab===iv.G.SHARED_FILES)return o;let l=t.sort.dir===lH.ue.DESC;switch(t.sort.key){case lH.C0.ACCESSED_AT:r=dY.f.byComparators(m_),n=o;break;case lH.C0.CREATED_AT:r=dY.f.byComparators(mp),n=o;break;case lH.C0.TOUCHED_AT:r=dY.f.byComparators(mf),n=a;break;case lH.C0.NAME:if(T){r=dY.f.byComparators(mc,dY.f.byProperty("type")),n=o;break}let s=o.length<tl.Tw;r=dY.f.byComparators(s?mc:md,dY.f.byProperty("type"),mm,mu),n=o;break;case lH.C0.TRASHED_AT:r=dY.f.byComparators(mg),n=a;break;case lH.C0.SHARED_AT:return o;default:return console.error("Unknown sort key",t.sort.key),[]}if(r=l?dY.f.reverse(r):r,n.sort(r),i)for(;n[n.length-1]?.type===t1.nb.OFFLINE_FILE;)n.pop();return n},[H,q,i,T,h,R.user?.id]),Q=r.useMemo(()=>X(b,f.tileSortFilterConfig),[X,b,f.tileSortFilterConfig]);!function(e){let t=(0,eA._6)(),a=(0,n.wA)(),o=(0,dH.k9)(()=>{if("deletedFiles"===t.view)return[];let a=[];return e.forEach(e=>{switch(e.type){case t1.nb.FILE:a.push({fileKey:e.file.key});break;case t1.nb.REPO:a.push(...e.branches.map(e=>({fileKey:e.key})))}}),a},[t.view,e]),l=(0,_.p)(eK.hqi,o);r.useEffect(()=>{for(let{result:e,args:t}of l)if("loaded"===e.status&&e.data){let r=(0,d2.ZF)(e.data);a(tJ.Lk({fileKey:t.fileKey,users:r}))}},[l,a])}(Q);let Z=(0,ec.md)(t1.Y6),ee=r.useCallback((a,r,n)=>{ms({tile:a,index:n,dispatch:$,selectedView:h,currentPlanFilter:e,currentSharedByFilter:t,isListView:V}),function({tile:e,e:t,dispatch:a,selectedView:r,permissionsState:n,selectedBranchKeyByRepoId:o,renamingItem:l}){if(t1.Tf.isRenaming(e,l)||e.type===t1.nb.FILE&&e.file.trashedAt||e.type===t1.nb.REPO&&e.repo.trashed_at){t.preventDefault(),t.stopPropagation();return}let i=E.Ay.mac?t.metaKey:t.ctrlKey,s=null;i&&t.shiftKey?s=c.aw.FOCAL_TAB:i?s=c.aw.BACKGROUND_TAB:t.shiftKey&&(s=c.aw.NEW_WINDOW);let m=n.user;if(c.eD){let r;switch(s=s??c.aw.FOCAL_TAB,t.preventDefault(),t.stopPropagation(),e.type){case t1.nb.FILE:r=!!(e.file.isTeamTemplate&&(0,eF.LQ)(n)),c.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,target:s,isBranch:(0,d3.Kz)(e.file),isLibrary:!!e.file.lastPublishedAt,isTeamTemplate:r,userId:m?.id});break;case t1.nb.PINNED_FILE:r=!!(e.file.isTeamTemplate&&(0,eF.LQ)(n)),c.eD.openFile({fileKey:e.file.key,title:e.file.name||"Untitled",fileEditorType:e.file.editorType,isTeamTemplate:r,target:s,userId:m?.id});break;case t1.nb.PROTOTYPE:c.eD.openPrototype(e.prototype.file_key,e.prototype.page_id,e.prototype.fig_file.name||"",s,m?.id);break;case t1.nb.REPO:let l=(0,d3.mr)(e.repo,e.branches,o);c.eD.openFile({fileKey:l.key,title:l.name,fileEditorType:l.editor_type,target:s,isBranch:(0,d3.Xm)(l),isLibrary:!!l.last_published_at,userId:m?.id});break;case t1.nb.OFFLINE_FILE:a(d1.NA({file:e.file,openNewFileIn:iE.ai.NEW_TAB,source:d6.U.OFFLINE_FILE_TILE}));break;default:(0,C.xb)(e)}return}if(null!=s){if(a(eR.oB()),e.type===t1.nb.OFFLINE_FILE){a(d1.NA({file:e.file,openNewFileIn:iE.ai.NEW_TAB,source:d6.U.OFFLINE_FILE_TILE})),t.preventDefault(),t.stopPropagation();return}if(t instanceof KeyboardEvent){let a=t1.Tf.getUrl(e,o);d.Ay.redirect(a,"_blank"),t.preventDefault(),t.stopPropagation()}return}t.preventDefault(),t.stopPropagation();let u=n.currentUserOrgId,_=n.currentTeamId,p="recentsAndSharing"===r.view||"folder"===r.view?r:void 0;a(d4.c5({planId:u||_,planType:u?ib.O.ORG:ib.O.TEAM}));let f={user:m,teamId:_,orgId:u,selectedView:r};switch(e.type){case t1.nb.FILE:(0,l1.N7)(u,e.file.parentOrgId,_,e.file.teamId)?(0,l1.QV)({file:{key:e.file.key,editorType:e.file.editorType||void 0}},f):a(eR.$T({view:"fullscreen",fileKey:e.file.key,editorType:d5.z4.getIsExtension()?d7.nT.DevHandoff:e.file.editorType?(0,d7.wN)(e.file.editorType):d7.nT.Design,prevSelectedView:p}));break;case t1.nb.PINNED_FILE:(0,l1.N7)(u,e.file.parentOrgId,_,e.file.teamId)?(0,l1.QV)({file:{key:e.file.key,editorType:e.file.editorType}},f):a(eR.$T({view:"fullscreen",fileKey:e.file.key,editorType:e.file.editorType?(0,d7.wN)(e.file.editorType):d7.nT.Design,prevSelectedView:p}));break;case t1.nb.PROTOTYPE:let g=e.prototype.fig_file;(0,l1.N7)(u,g.parent_org_id,_,g.team_id)?(0,l1.QV)({base:"proto",file:{key:g.key,editorType:g.editor_type||void 0},nodeId:e.prototype.page_id},f):a(eR.$T({view:"prototype",file:g,nodeId:e.prototype.page_id,prevSelectedView:p}));break;case t1.nb.REPO:{let t=(0,d3.mr)(e.repo,e.branches,o);if(!t)throw Error(`Branch not found for repo ${e.repo.id}`);let r=t.key;(0,l1.N7)(u,t.parent_org_id,_,t.team_id)?(0,l1.QV)({file:{key:r}},f):a(eR.$T({view:"fullscreen",fileKey:r,editorType:d7.nT.Design,prevSelectedView:p}));break}case t1.nb.OFFLINE_FILE:a(d1.NA({file:e.file,openNewFileIn:iE.ai.SAME_TAB,source:d6.U.OFFLINE_FILE_TILE}));break;default:(0,C.xb)(e)}}({tile:a,e:r,dispatch:$,selectedView:h,permissionsState:R,selectedBranchKeyByRepoId:U,renamingItem:Z})},[V,e,t,$,R,U,h,Z]),et=r.useCallback((a,r,n)=>{ms({tile:a,index:n,dispatch:$,selectedView:h,currentPlanFilter:e,currentSharedByFilter:t,isListView:V})},[V,e,t,h,$]),ea=r.useCallback((e,t,a)=>{let r=t1.Tf.getId(e);dZ.$.start(r),x({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a}})},[x]),er=(0,t1.nw)(b),[en,eo]=r.useState([]);if((0,dK.Cm)(en),0===Q.length){let e=(()=>{if(b.length>0&&""!==p){let e=p??(0,S.t)("file_browser.tiles_view.default_overfiltered_text");return r.createElement("div",{className:mi,"data-test-id":"over-filtered-state-text"},e)}let e="";return(l?e=l:(E.Ay.mobile||E.Ay.tablet)&&(e=(0,S.t)("file_browser.folder.this_project_is_empty")),e)?r.createElement("div",{className:mi,"data-test-id":"empty-state-text"},e):null})();if(e)return r.createElement("div",{className:ml},r.createElement("div",{className:k.s.flex.$},e,W&&r.createElement("div",{className:k.s.mr32.$},r.createElement(mn.R,{teamId:A.id,canEditTeam:F})),G&&r.createElement("div",{className:k.s.mr32.$},r.createElement(mr,{team:A,canAdminTeam:D}))));if(a)return r.createElement("div",{className:ml},a)}let el=ml+(V?` ${mo._O} `:` ${mo.CK} `),ei=b.length>0;if(!M&&!(0,o.k)().stop_rendering_tiles_view_loading_spinner)return r.createElement("div",{className:"tiles_view--loading--6rn3X"},r.createElement(oG.k,null));let es=!!A?.restrictions_list?.includes(eM.P4.LOCKED),ed=W||es&&G;return r.createElement("div",{className:ml},r.createElement("div",{className:el},r.createElement("div",{className:k.s.flex.$},ei&&r.createElement(d0.d,{sortConfig:f.tileSortFilterConfig.sort,handleOpenTile:et,items:Q,sortBy:e=>{let t=f.tileSortFilterConfig,a=t.sort.dir===lH.ue.DESC?lH.ue.ASC:lH.ue.DESC;$(eR.JF({selectedView:h,config:{...t,sort:{key:e,dir:e===t.sort.key?a:t.sort.dir}},tab:"recentsAndSharing"===h.view?h.tab:void 0}))},viewType:V?lH.XU.LIST:lH.XU.GRID,updateRenderedItems:eo,handleOpenDropdown:ea,checksForViewOnlyLabels:ed?{teamId:A.id,isLockedTeam:!0}:void 0}),ei&&(W?r.createElement("div",{className:k.s.mr32.$},r.createElement(mn.R,{teamId:A.id,canEditTeam:F})):G?r.createElement("div",{className:k.s.mr32.$},r.createElement(mr,{team:A,canAdminTeam:D})):r.createElement(dJ,{canEditTeam:F,isDraftsFolder:T}))),!(E.Ay.mobile||E.Ay.tablet)&&u&&!B&&!ei&&r.createElement("div",{className:k.s.flex.$},r.createElement("div",{className:"tiles_view--importPrompt--srrJn"},r.createElement("div",{className:mi},r.createElement("div",{className:"tiles_view--emptyTitle--3Vwmu"},s?(0,S.t)("file_browser.folder.this_project_doesn_t_have_any_files"):(0,S.t)("file_browser.folder.no_files_yet")),(0,S.tx)("file_browser.folder.create_a_new_file_to_start_from_scratch_with_pptx"))),W?r.createElement("div",{className:k.s.mr32.$},r.createElement(mn.R,{teamId:A.id,canEditTeam:F})):G?r.createElement("div",{className:k.s.mr32.$},r.createElement(mr,{team:A,canAdminTeam:D})):r.createElement(dJ,{canEditTeam:F,isDraftsFolder:T}))),(()=>{let e=N?.tile??null,t=N?.index;return r.createElement(aq.fu,{name:s?aX.e0.PROJECT_TILES_VIEW_DROPDOWN:aX.e0.TILES_VIEW_DROP_DOWN,enabled:I,properties:{tileType:e?.type,tileFileId:e?.type===t1.nb.FILE?e?.file.key:void 0}},r.createElement(lW.i,{tileActions:g,tile:e,selectedTiles:er,openTile:a=>{e&&ee(e,a,t)},dropdownVisible:I}))})())}var mb=a(345644),mv=a(568290);function mh(){let e=(0,Q.d)(),t=(0,n.d4)(e=>e.currentTeamId),a=(0,n.d4)(e=>e.tileSortFilterStateByView),o=(0,eN.vt)(),l=(0,ex.R)(t),i=(0,dD.xx)(e=>({tileSortFilterConfig:e,sortKeys:[lH.C0.TRASHED_AT,lH.C0.NAME,lH.C0.CREATED_AT,lH.C0.TOUCHED_AT]}))(a.deletedFiles),{creatorFilter:s,fileTypeFilter:c}=function(e){let t="your_files";switch(e.tileSortFilterConfig.filters.creator){case lH.rJ.SELF:t="your_files";break;case lH.rJ.OTHER:t="other_files";break;case lH.rJ.ANY:t="all";break;default:(0,C.xb)(e.tileSortFilterConfig.filters.creator)}let a="";switch(e.tileSortFilterConfig.filters.fileType){case lH.t2.DESIGN:a="design";break;case lH.t2.FIGJAM:a="whiteboard";break;case lH.t2.PROTOTYPE:a="prototype";break;case lH.t2.SLIDES:a="slides";break;case lH.t2.SITES:a="sites";break;case lH.t2.COOPER:a="cooper";break;case lH.t2.MAKE:a="figmake";break;case lH.t2.ANY:a="";break;default:(0,C.xb)(e.tileSortFilterConfig.filters.fileType)}return{creatorFilter:t,fileTypeFilter:a}}(i),d=(0,eY.rC)({reportErrorsToTeam:B.e.WAYFINDING}),{subscription:m,fetchNextPage:u,isFetchingNextPage:p}=function(e){let t=(0,_.Rs)(eK.R89,{...e,firstPageSize:55}),a=(0,r.useCallback)(()=>{let e=t.data?.trashedResources;"loaded"===t.status&&e&&e.hasNextPage()&&e.loadNext(55)},[t,55]),o="loaded"===t.status&&t.data.trashedResources.isLoadingNextPage,l=(0,r.useMemo)(()=>t.transform(e=>{let t=e.trashedResources;return t?t.reduce((e,t)=>{if(t.file&&t.file.trashedAt){var a;e.push((a=t.file,{type:t1.nb.FILE,file:{...a,signedPreviewThumbnailUrls:null},sharedWithYouFields:null}))}else if(t.repo&&t.repo.trashedAt){let a=function(e){if(!e.sourceFile)return null;let t=mv.H.toSinatra(e);return{type:t1.nb.REPO,repo:t,branches:[lV.F.toSinatra(e.sourceFile)],selectedBranchKey:e.sourceFile.key}}(t.repo);a&&e.push(a)}return e},[]):[]}),[t]),i=(0,n.wA)();return(0,r.useEffect)(()=>{if(l.data){let e=l.data?.filter(e=>e.type===t1.nb.FILE).map(e=>lV.F.toSinatra(e.file))||[],t=l.data?.filter(e=>e.type===t1.nb.REPO).map(e=>e.repo)||[];i(tJ.uo({files:e})),i(tX.uo({repos:t}))}},[l.data,i]),{subscription:l,fetchNextPage:a,isFetchingNextPage:o}}({cursor:null,creatorFilter:s,fileTypeFilter:c,sortType:i.tileSortFilterConfig.sort.key===lH.C0.TRASHED_AT?"trashed_at":"name",sortDirection:i.tileSortFilterConfig.sort.dir===lH.ue.ASC?"asc":"desc",planId:d?.key.parentId??null,planType:d?.key.type??null,queryParams:null}),f=(0,r.useMemo)(()=>m.unwrapOr([]),[m]),{trackPerformanceEvent:g}=(0,mb.S)("trashed_resources_pagination_performance","livegraph",!0);(0,r.useEffect)(()=>{g("fetch_end")},[g,f.length]),(0,r.useEffect)(()=>{"errors"===m.status&&g("fetch_error",{errors:JSON.stringify(m.errors??{})})},[g,m.status,m.errors]),(0,r.useEffect)(()=>(g("fetch_start"),()=>{g("fetch_cancel")}),[g]);let E=r.useCallback(()=>{p||(g("fetch_next"),u())},[p,u,g]),b=i.tileSortFilterConfig.filters,v=i.tileSortFilterConfig.sort;return r.createElement(er.A,{loadingElementId:"loading-content-pane",loaded:"loading"!==m.status,loadingElementClassName:k.s.pr32.$},r.createElement(dV.B,{key:`${s}-${b.fileType}-${v.key}-${v.dir}`,onShouldFetchNextPage:E,isFetchingNextPage:p},r.createElement(mw,{tiles:f,tileActions:{restore:!0,restoreToOtherFolders:!0,deleteForever:!0,duplicateToDrafts:!e},sortFilterOptions:i,isTeamLockedDueToStarterLimits:o,isEligbileForProTeamLockedRevampUI:l})),r.createElement(dt.cx,null))}function mw({tiles:e,tileActions:t,sortFilterOptions:a,isEligbileForProTeamLockedRevampUI:n}){return r.createElement(mE,{tiles:e,newFileTile:!1,tileActions:t,sortFilterOptions:a,emptyStateText:(0,S.t)("file_browser.tool_bar.trashed_empty_state"),isEligbileForProTeamLockedRevampUI:n})}var my=a(136126),mT=a(87770),mI=a(381673),mx=a(520779),mN=a(274016);function mC(e,t,a){return e&&t&&!(0,rd.w5)(e)&&"recentsAndSharing"!==a&&"trashedFolders"!==a}function mk({canEditTeam:e}){let t=(0,n.wA)(),a=(0,nt.ol)(),o=(0,eA.z3)(),l=(0,b.I7)("exp_fbg_project_limit_upsell"),i=rG.h.useTrackingContext({trigger:rw.b.FOLDER_UPSELL_CARD});if(!(0,eY.yN)({component:"FolderUpsellCard",attribute:"canShowUpsellValue",legacy:t=>!!mC(t,e,o),migrated:t=>!!t&&!!e&&t.tier===eM.Ag.STARTER&&"recentsAndSharing"!==o&&"trashedFolders"!==o})||!l.getConfig().getValue("show_upsell",!1))return null;let s=r.createElement(ea.Us,{className:k.s.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,tf.to)({type:rb.V,data:{upsellSource:rw.b.FOLDER_UPSELL_CARD,teamId:a?.id}}))},trackingProperties:{trackingDescriptor:eu.c.PROFESSIONAL_PLAN,...i},trusted:!0},(0,S.tx)("team_view.folder_upsell.professional_plan"));return r.createElement(aq.fu,{name:"Folder Upsell Card",properties:i},r.createElement(aq.$z,{className:$()(k.s.flex.flexColumn.alignLeft.p24.$,"folder_upsell--card--m7-Lh"),onClick:()=>{t((0,tf.to)({type:mN.DV,data:{team:a,resource:mx.vL.FOLDER,action:tK.ZN.CREATE_FOLDER,currentPlan:mI.F.Plan.STARTER,upsellPlan:mI.F.Plan.PRO,editorType:null,upsellSource:rw.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:eu.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},r.createElement("div",{className:k.s.relative.wFull.$},r.createElement(mT.X,{FileThumbnailComponent:mS}),r.createElement("div",{style:es.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},r.createElement(rK.Y,{cornerRadius:20,backgroundColor:"brand",height:40,width:40},r.createElement(lw.In,{icon:"new-40",fill:"onbrand"})))),r.createElement(rK.Y,{direction:"vertical",padding:{top:16},spacing:0,height:"hug-contents"},r.createElement(R.E,{fontSize:13,fontWeight:"medium"},(0,S.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),r.createElement(R.E,{fontSize:11,color:"secondary"},(0,S.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:s})))))}function mS(){return r.createElement("div",{className:k.s.wFull.hFull.colorBg.$})}function mR({canEditTeam:e}){let t=(0,n.wA)(),a=(0,nt.ol)(),o=(0,eA.z3)(),l=rG.h.useTrackingContext({trigger:rw.b.FOLDER_UPSELL_CARD}),i=(0,b.I7)("exp_fbg_project_limit_upsell");if(!mC(a,e,o)||!i.getConfig().getValue("show_upsell",!1))return null;let s=r.createElement(ea.Us,{className:k.s.noWrap.cursorDefault.$,onClick:e=>{e.stopPropagation(),t((0,tf.to)({type:rb.V,data:{upsellSource:rw.b.FOLDER_UPSELL_CARD,teamId:a?.id}}))},trackingProperties:{trackingDescriptor:eu.c.PROFESSIONAL_PLAN,...l},trusted:!0},(0,S.tx)("team_view.folder_upsell.professional_plan"));return r.createElement(aq.fu,{name:"Folder Upsell List",properties:l},r.createElement("div",{className:k.s.flex.mt16.bRadius8.b1.colorBorder.$,style:es.sx.add({borderStyle:"dashed"}).$},r.createElement(aq.$z,{className:$()(k.s.flex.alignLeft.gap12.py24.px16.bRadius8.wFull.pl36.$,"folder_upsell--list--2Higk"),onClick:()=>{t((0,tf.to)({type:mN.DV,data:{team:a,resource:mx.vL.FOLDER,action:tK.ZN.CREATE_FOLDER,currentPlan:mI.F.Plan.STARTER,upsellPlan:mI.F.Plan.PRO,editorType:null,upsellSource:rw.b.FOLDER_UPSELL_CARD}}))},trackingProperties:{trackingDescriptor:eu.c.FOLDER_UPSELL_CARD},dataTestId:"folder_upsell_button"},r.createElement("div",{className:$()(k.s.relative.flexShrink0.h40.w64.py4.px8.colorBgSecondary.bRadius4.$,"folder_upsell--listCard--qnkxf")},r.createElement("div",{style:es.sx.absolute.topHalf.leftHalf.add({transform:"translate(-50%, -50%)"}).$},r.createElement(rK.Y,{cornerRadius:12,backgroundColor:"brand",height:24,width:24,horizontalAlignItems:"center",verticalAlignItems:"center"},r.createElement(lw.In,{icon:"plus-32",fill:"onbrand"}))),r.createElement(rK.Y,{direction:"vertical",spacing:4},r.createElement(rK.Y,{direction:"horizontal",spacing:4},r.createElement(rK.Y,{cornerRadius:2,backgroundColor:"default"}),r.createElement(rK.Y,{cornerRadius:2,backgroundColor:"default"})),r.createElement(rK.Y,{direction:"horizontal",spacing:4},r.createElement(rK.Y,{cornerRadius:2,backgroundColor:"default"}),r.createElement(rK.Y,{cornerRadius:2,backgroundColor:"default"})))),r.createElement(rK.Y,{direction:"vertical",spacing:0},r.createElement(R.E,{fontSize:13},(0,S.tx)("team_view.folder_upsell.upgrade_to_create_more_projects")),r.createElement(R.E,{fontSize:11,color:"secondary"},(0,S.tx)("team_view.folder_upsell.get_unlimited_everything",{professionalPlanLink:s}))))))}var mA=a(629117),mO=a(415399),mP=a(376613),mL=a(241304),mF=a(8303);let mD="folder_list_view--emptyState--8vmgw tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd";var mM=a(367542);function mB(e){let t=(0,n.d4)(e=>e.dropdownShown),a=(0,n.d4)(e=>e.currentUserOrgId),o=(0,tm.S)(),l=(0,n.d4)(e=>e.user),{folderList:i}=e,s=()=>e.viewMode===lH.XU.LIST,c=(0,eN.vt)(e.teamId),d=!!e.teamId&&!!e.isEligbileForProTeamLockedRevampUI,m=(0,ex.jn)(),u=e.teamId?{teamId:e.teamId,isLockedTeam:!!c||m}:void 0,_=o?(0,mA.H)(t):void 0;return 0===i.length?r.createElement(r.Fragment,null,e.onCreateNewFolder&&!(0,eI.R$)(l,a)?r.createElement("div",{className:mD},e.canEditTeamContents?r.createElement(r.Fragment,null,r.createElement("div",{className:"folder_list_view--emptyTitle--t1u0a tiles_view--emptyTitle--3Vwmu"},(0,S.tx)("team_view.folder_empty_view.no_projects_yet")),(0,S.tx)("team_view.folder_empty_view.projects_help_you_organize"),r.createElement(ea.cw,{className:"folder_list_view--emptyButton--g-yAA tiles_view--emptyButton--oAaGe",onClick:e.onCreateNewFolder},r.createElement(ei.B,{svg:mM.A,className:"folder_list_view--newProjectIcon--O3wnv tiles_view--newFileIcon--LR1sm"}),(0,S.tx)("team_view.folder_empty_view.new_project"))):(0,S.tx)("team_view.folder_empty_view.this_team_does_not_have_any_projects_yet")):null!=e.emptyStateText?r.createElement("div",{className:k.s.flex.gap32.$},r.createElement("div",{className:mD},e.emptyStateText),c&&r.createElement(mn.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&d&&r.createElement(mr,{team:e.team,canAdminTeam:!!e.canAdminTeam})):(0,S.tx)("team_view.folder_empty_view.no_projects")):r.createElement(r.Fragment,null,(()=>{let t=i.length>=2?1:1===i.length?0:void 0;return r.createElement("div",{className:k.s.flex.flexRow.wFull.$},r.createElement("div",{className:k.s.wFull.$},r.createElement(mO.m,{checksForViewOnlyLabels:u,currentPlanFilter:e.currentPlanFilter,dataOnboardingKey:"project-card",dataOnboardingKeyIndex:t,folderList:i,isSharerInfoIncluded:e.isSharerInfoIncluded,onChangeSortOptions:e.onChangeSortOptions,trailingGridElements:c||m?r.createElement(r.Fragment,null):r.createElement(mk,{canEditTeam:e.canEditTeamContents}),viewType:e.viewMode}),!c&&!m&&s()&&r.createElement(mR,{canEditTeam:e.canEditTeamContents})),r.createElement("div",{className:"folder_list_view--infoCard--DzZGD"},c&&r.createElement(mn.R,{teamId:e.teamId,canEditTeam:!!e.canEditTeamContents}),e.team&&d&&r.createElement(mr,{team:e.team,canAdminTeam:!!e.canAdminTeam})))})(),_&&r.createElement(mP.p,{folder:_}))}let mU=[t7.Dq.NAME,t7.Dq.LAST_MODIFIED],m$={[lH.XU.GRID]:{[t7.Dq.NAME]:(0,S.tx)("tile.sort_filter.sort_alphabetical"),[t7.Dq.TEAM]:(0,S.tx)("tile.sort_filter.team"),[t7.Dq.OWNER]:(0,S.tx)("tile.sort_filter.owner"),[t7.Dq.LAST_MODIFIED]:(0,S.tx)("tile.sort_filter.sort_last_modified"),[t7.Dq.SHARED_AT]:(0,S.tx)("tile.sort_filter.date_shared"),[t7.Dq.CREATED_AT]:(0,S.tx)("tile.sort_filter.sort_date_created"),[t7.Dq.TRASHED_AT]:(0,S.tx)("tile.sort_filter.sort_date_trashed")},[lH.XU.LIST]:{[t7.Dq.NAME]:(0,S.tx)("tile.sort_filter.sort_alphabetical"),[t7.Dq.TEAM]:(0,S.tx)("tile.sort_filter.team"),[t7.Dq.OWNER]:(0,S.tx)("tile.sort_filter.owner"),[t7.Dq.LAST_MODIFIED]:(0,S.tx)("tile.sort_filter.sort_last_modified"),[t7.Dq.SHARED_AT]:(0,S.tx)("tile.sort_filter.date_shared"),[t7.Dq.CREATED_AT]:(0,S.tx)("tile.sort_filter.sort_date_created"),[t7.Dq.TRASHED_AT]:(0,S.tx)("tile.sort_filter.sort_date_trashed")}},mj={viewMode:lH.XU.GRID,sortMode:{sortKey:t7.Dq.LAST_MODIFIED,sortDesc:!0}},mW={...mj,sortMode:{sortKey:t7.Dq.SHARED_AT,sortDesc:!0}},mG={name:dY.f.byProperty("name",dY.f.LEXICOGRAPHICALLY),lastModified:dY.f.byProperty("folderLastUpdated"),team:dY.f.byProperty("folderTeamName",dY.f.LEXICOGRAPHICALLY),owner:dY.f.byProperty("folderOwnerName",dY.f.LEXICOGRAPHICALLY),sharedAt:dY.f.byProperty("folderSharedAt"),createdAt:dY.f.byProperty("created_at"),trashedAt:dY.f.byProperty("trashed_at")};function mV(e){let{folderList:t,...a}=e,o="trashedFolders"===e.selectedView.view,l=(0,n.d4)(e=>e.teams),i=(0,n.d4)(e=>e.roles),s=(0,n.d4)(e=>e.viewBarViewModeOptionByView),c=(0,n.d4)(e=>e.viewBarSortOptionsByView),d=(0,n.d4)(e=>e.tileSortFilterStateByView),m=e.isSharerInfoIncluded?mW:mj,u=r.useMemo(()=>({viewMode:(0,mF.y2)(e.viewId,s,m.viewMode),sortMode:(0,mF.bV)(e.viewId,{viewBarSortOptionsByView:c},mU,m.sortMode)}),[m.sortMode,m.viewMode,e.viewId,mU,c,s]),_=(0,n.wA)(),p=t=>{_(eR.ZR({viewId:e.viewId,sortMode:{sortKey:t.sortKey,sortDesc:t.sortDesc}}))},f="recentsAndSharing"!==e.selectedView.view&&!o,g=r.useMemo(()=>{if("recentsAndSharing"===e.selectedView.view)return e.folderList;let t=d.trashedFolders,a=o?mG[(0,lH.jx)(t.sort.key)??"trashedAt"]:mG[u.sortMode.sortKey];if(!a)return e.folderList;let r=o?t.sort.dir===lH.ue.DESC?dY.f.reverse(a):a:u.sortMode.sortDesc?dY.f.reverse(a):a,n=e.folderList.map(e=>({...e,...(0,mL.Z)({teams:l,roles:i},e)}));return n.sort(r),n},[e.selectedView.view,u.sortMode.sortKey,u.sortMode.sortDesc,e.folderList,l,i,o,d.trashedFolders]),E=o&&u.viewMode===lH.XU.GRID?"folder_list_view--trashedGridViewContainer--efhyK":"folder_list_view--tabContentContainer--lHQoT",b=r.createElement("div",{className:"x78zum5 x1q0g3np x6s0dn4 x167g77z"},r.createElement(nA.wA,{dropdownId:"view-bar-sort-filter",values:mU,valuesToDisplayText:m$[u.viewMode],checkedValue:u.sortMode.sortKey,onChange:(e,t)=>p({sortKey:e,sortDesc:t===lH.ue.DESC}),includeSortDirection:!0,tileSortValues:nA.D$.values,currentDirection:u.sortMode.sortDesc?lH.ue.DESC:lH.ue.ASC}),r.createElement(nA.$c,{initialViewMode:u.viewMode,onViewModeChange:t=>{_(eR.uV({viewId:e.viewId,viewMode:t}))}}));return r.createElement("div",{className:o&&u.viewMode===lH.XU.LIST?void 0:E},f?r.createElement(nA.lU,{leftSide:null,rightSide:b}):null,o&&d.trashedFolders.filters.role===lH.Jh.CAN_BE_VIEWED&&r.createElement("div",{className:`${k.s.mb16.$} ${u.viewMode===lH.XU.LIST&&k.s.px32.$}`},r.createElement(my._,{dataTestId:"may-not-restore-or-permanently-delete-banner",color:my.S.INFORMATION,text:r.createElement("p",{className:k.s.fontMedium.$},r.createElement("span",{className:k.s.fontSemiBold.$},(0,S.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner")),"\xa0",(0,S.tx)("file_browser.folder_list_view.may_not_restore_or_permanently_delete_banner_content"))})),r.createElement(mB,{folderList:g,chunkSize:e.chunkSize,viewMode:u.viewMode,onChangeSortOptions:p,...a}))}function mH(){let e=(0,n.d4)(e=>e.currentUserOrgId),t=(0,nt.ol)(),a=(0,_.Rs)(eK.kQI,{id:t?t.id:""},{enabled:!!t?.id}),o=(0,_.Rs)(eK.TNJ,{id:t?t.id:""},{enabled:!!t?.id}),l=(0,n.d4)(e=>e.tileSortFilterStateByView),i=(0,eA._6)(),s=(0,ex.R)(t?.id),c=l.trashedFolders,[{data:d,status:m}]=(0,p.IT)((0,ta.p5)({orgId:e,teamId:t?.id??null,roleFilter:c.filters.role})),u="loaded"===a.status&&!!a.data.team&&a.data.team.hasPermission,f="loaded"===o.status&&!!o.data.team&&o.data.team.hasPermission;return r.createElement(er.A,{loadingElementId:"loading-content-pane",delay:250,loaded:"loading"!==m,loadingElementClassName:k.s.pr32.$},r.createElement("div",{style:es.sx.mt1.$},r.createElement(mV,{canAdminTeam:f,canEditTeamContents:u,chunkSize:d?.folders?.length||0,emptyStateText:(0,S.t)("file_browser.trash_project.trashed_empty_state"),folderList:d?.folders||[],isEligbileForProTeamLockedRevampUI:s,isSharerInfoIncluded:!1,selectedView:i,team:t,teamId:t?.id,useLGPerms:!0,viewId:dB.l})))}var mz=(e=>(e.FILES="files",e.FOLDERS="folders",e))(mz||{});function mK(e){let t=(0,eA._6)();if("deletedFiles"!==t.view&&"trashedFolders"!==t.view)return r.createElement(r.Fragment,null);let a=r.createElement(dG,{currView:t}),n="folders"===e.selectedTab?r.createElement(mH,null):r.createElement(mh,null);return r.createElement(oO.r,{viewBarSticky:!0,viewbar:a,content:n})}var mY=a(920043);let mq=[ev.Wb3,ev.KoA,ev.Ult,ev.kmq,ev.USq,ev.jQF,ev.Ob5,ev.s7O,ev.Qlc,ev.I$z,ev.X5_,ev.RJL,ev.LB2,ev.I5n,ev.Msu,ev.UmN,ev.Ql8,ev.pIP,ev.Q16,ev.O5v,ev.rv,ev.HaT,ev.rQs,ev.YHe,ev.hxO,ev.sqw,ev.Duq,ev.yjU,ev.BTz,ev.I3H,ev.tZO,ev.LPt,ev.cJy,ev.tUL,ev.tBR,ev.K69,ev.Tp6,ev.fz8,ev.XIg,ev.fQh,ev.O9D,ev.c6t,ev.NM0,ev.YPG,ev.j9$,ev.LQ8,ev.r3Y].map(e=>e.id);function mJ({children:e}){return r.createElement(mY.A,{name:"FileBrowser",order:mq},e)}var mX=a(998568);function mQ({folderId:e,enabled:t=!0}){let a=(0,n.d4)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),o=(0,r.useMemo)(()=>({file_type:mZ(a.filters.fileType),sort_order:a.sort.dir===lH.ue.ASC?"asc":"desc",sort_column:m0(a.sort.key)}),[a.filters.fileType,a.sort.dir,a.sort.key]);return(0,p.IT)((0,z.BU)({folderId:e,...o}),{enabled:t})}let mZ=e=>{switch(e){case lH.t2.DESIGN:return"design";case lH.t2.FIGJAM:return"whiteboard";case lH.t2.PROTOTYPE:return"prototype";case lH.t2.SITES:return"sites";case lH.t2.SLIDES:return"slides";case lH.t2.COOPER:return"cooper";case lH.t2.MAKE:return"figmake";case lH.t2.ANY:return"";default:(0,C.xb)(e)}},m0=e=>{switch(e){case lH.C0.NAME:return"name";case lH.C0.CREATED_AT:return"created_at";case lH.C0.TOUCHED_AT:return"touched_at";default:return(0,mX.$D)(B.e.WAYFINDING,Error(`Attempting to sort by an unsupported sort key: ${e}`)),"created_at"}};var m1=a(281294),m4=a(536490),m2=a(560596),m3=a(156495),m5=a(957273),m8=a(94831),m6=a(451727),m7=a(62870),m9=a(2147);let ue=(0,tu.Ju)(function(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.teams)[e.teamId].subscription,o=e.paymentRequiresAction;return(0,r.useEffect)(()=>{m9.T.getHostedInvoicesPage({teamId:e.teamId}).then(({data:e})=>{(0,l1.FJ)(e.meta.hosted_invoice_url,"_blank","noopener")})},[e.teamId]),(0,r.useEffect)(()=>{o||a===eM.Qh.INCOMPLETE||t(tf.ES({type:ue.type}))},[a,t,o]),r.createElement(a1.Eo,{title:(0,S.t)("payments.pending_subscription_modal_header"),hideCancel:!0,confirmText:(0,S.t)("payments.got_it"),trackedConfirmationProperties:{trackingDescriptor:eu.c.CONFIRM_VERIFY_PAYMENT,trackingContextName:"Confirm Verify Payment"}},(0,S.tx)("payments.pending_subscription_modal_description"))},"PENDING_SUBSCRIPTION_CHANGE_MODAL");var ut=a(549833);let ua="banners--warn--bC4ke",ur="banners--primaryCtaButton--tyhCJ",un="banners--content--ciED3",uo="banners--titleSmall--ceZgU",ul="banners--bold--qt00U",ui="banners--message--9BMLM",us="banners--messageSmall--YT-82",uc="banners--secondaryCtaButton--uYrvi",ud="banners--ctaButtonGroup--r8cfU",um="banners--closeButton--IXY-V",uu="banners--teamBannerWithBackground--CwS6V banners--banner--l8udl",u_="banners--teamUpgradeNotice--gqc9c",up="banners--softWarningBanner--QK9Y5",uf="banners--softWarningBannerBlue--uQmhb";var ug=a(616591),uE=a(169256),ub=a(205778),uv=a(128912);function uh(e,t,a){let n=r.useMemo(()=>({canAdmin:(0,rm.canAdminOrg)(e.currentUserOrgId,e),canMember:(0,rm.canMemberOrg)(e.currentUserOrgId,e)}),[e]),o=(0,eY.px)(),l=(0,eY.j_)(o),i=(0,eY.Kd)(o),s=r.useMemo(()=>r5.Qw.transformAll([l,i],(e,t)=>({canAdmin:e,canMember:t})),[l,i]),c=(0,rc.MF)({oldValue:r5.Qw.useMemoizedLoaded(n),newValue:s,label:a,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_7),contextArgs:{callsite:"useOrgBannerContentQuery"}});return r.useMemo(()=>c.transform(({canAdmin:a,canMember:n})=>(function(e,t,a,n){let o;if(!e.currentUserOrgId||!(0,rd.wn)(e.currentUserOrgId,e))return null;let l=e.orgById[e.currentUserOrgId];if(!l)return null;let i=l.past_due_at&&(0,ed.A)(l.past_due_at).add(2,"weeks")>(0,ed.A)(new Date);if(!a&&i)return null;let s=e.orgUsersByOrgId[e.currentUserOrgId]??{},c=(0,ef.zR)(s).map(e=>r.createElement("span",{key:e.id,className:ul},e.user.handle," (",e.user.email,")"));return o=a?l.billing===m3.EZ.CHARGE_IMMEDIATELY?(0,S.tx)("payments.org_past_due_on_payment",{invoice:r.createElement("a",{onClick:()=>{t?.(eR.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.BILLING}))}},(0,S.tx)("payments.outstanding_invoice")),orgName:l.name}):(0,S.tx)("payments.org_past_due_on_payment_invoiced",{email:r.createElement("b",{className:ul},(0,rf.W4)()),orgName:l.name}):(0,S.tx)("payments.please_reach_out_to_org_admins",{orgName:l.name,admins:n&&r.createElement("span",null," ",r.createElement(m4.T,{formatType:"disjunction"},c)),numAdmins:c.length}),{severity:ut.c.WARN,title:(0,S.t)("payments.payment_not_received"),message:o,cta:null,onClickCta:null}})(e,t,a,n)),[t,c,e])}function uw(e){return e?.status==="open"&&!!e.payment_intent&&[tK.pk.REQUIRES_ACTION,tK.pk.REQUIRES_SOURCE_ACTION].includes(e.payment_intent.status)}function uy(e,t,a,n,l,i){let s=r.useMemo(()=>({canOwn:!!a&&(0,rm.canOwnTeam)(a,n),canAdmin:!!a&&(0,rm.canAdminTeam)(a,n),canEdit:!!a&&(0,rm.canEditTeam)(a,n),hasEditRoleOnTeam:!!a&&(0,rm.hasMinRole)((0,rm.getRolesForUserAndTeam)(a,n),m8.e6.EDITOR)}),[a,n]),c=(0,rc.MF)({oldValue:r5.Qw.useMemoizedLoaded(s),newValue:function(e){let t=(0,_.Rs)((0,eK.yQw)((0,rs._X)(rs.Pw.GROUP_7)&&e?{teamId:e}:null));return r.useMemo(()=>"disabled"===t.status?r5.Qw.loaded({canOwn:!1,canAdmin:!1,canEdit:!1,hasEditRoleOnTeam:!1}):t.transform(({team:e})=>({canOwn:e?.isOwner??!1,canAdmin:e?.canAdmin??!1,canEdit:e?.canEdit??!1,hasEditRoleOnTeam:e?.canEdit??!1})),[t])}(a),label:i,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_7),contextArgs:{callsite:"useBannerContentQuery",resourceType:e,resourceId:t?.id,teamId:a}}),m=uh(n,l,i);return r.useMemo(()=>r5.Qw.transformAll([m,c],(i,s)=>i||function(e,t,a,n,l,i){let s=a?n.teams[a]:null;if(a&&!s||"file"===e)return null;let c=n.currentTeamId,m=s&&s.subscription===eM.Qh.GRACE_PERIOD,u=n.billingSummary,_=s?.subscription===eM.Qh.INCOMPLETE,p=!!s?.org_id,f=!!s?.subscription,g=m&&!p&&f&&(uw(u?.last_monthly_invoice)||uw(u?.last_annual_invoice)),b=s&&(_||g),v=s&&s.subscription===eM.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED,h=i.canOwn,w=i.canAdmin,y=i.canEdit,T=s&&(0,rd.oc)(s.id,n),I="folder"===e?t:null,x=0,N={showReminder:!1,showAccessRestricted:!1},C="folder"===e&&!I,k=!!(0,o.k)().limited_plan_spaces&&(0,rf.Ay)().is_limited_team_plan&&C;if(n.user){let t=i.hasEditRoleOnTeam,r=["folder","team"].includes(e)&&t,o=(0,r6.cn)(n.user),l=n.userEduGracePeriods;C?c&&(0,r6.hP)(n.user.id,n.roles.byTeamId,n.teams[c])&&(N=(0,r6.df)(l,o),x=(0,r6.Me)(l)):a&&r&&(N=(0,r6.GU)(l,o,a,!!n.teams[a].student_team),x=(0,r6.qS)(l,a))}let R=s&&!(0,rd.n0)(s)&&!s.student_team&&I&&!(0,ah.Gi)(I),A=R&&I.is_invite_only,O=R&&I.is_view_only,P=I&&(0,ah.sp)(I),L=!P&&!s&&I&&(0,rd.ZZ)(I,n),F=()=>l?.(sQ.WX({teamId:s.id,selectedView:n.selectedView})),D=()=>d.Ay.redirect("/education/apply",E.Ay.isIpadNative?void 0:"_blank"),M=()=>l?.(sQ.WX({teamId:s.id,openInNewTab:!1,selectedView:{view:"team",teamId:s.id}})),B=()=>l?.(tf.to({type:rb.V,data:{upsellSource:rw.b.BANNER}})),U=(0,rd._b)(s),$=s&&s.subscription_raw!==eM.Qh.OK&&(0,rd.WQ)(s)&&w&&rq.ng.getProTrialStatus(s)!==m5.a.IN_TRIAL&&U,j=["team","folder"].includes(e)&&y&&(0,nt.cU)(s),W=y&&function(e,t){let a=e&&t[e.id]?.dismissed_legacy_team_upgrade_notice_banner;return(0,nt.zs)(e)&&!a}(s,n.userTeamFlags),G=(0,eI.R$)(n.user,n.currentUserOrgId),V=rq.ng.canSeeExpiredProTrialBanner(n.userTeamFlags,s,n),H=s&&n.userTeamFlags[s.id]?.[rq.lg],z=n.user?(0,r6.x$)(n.eduPeriodEnd,(0,r6.cn)(n.user)):1/0,K=z>0&&z!==1/0,Y=0===z,q=s&&s.student_team_state===eM.kU.STUDENT_TEAM_CURRENT,J=s&&s.student_team_state===eM.kU.STUDENT_TEAM_EXPIRED&&T,X=K&&h&&q,Q=Y&&h&&J,Z=K&&y&&q,ee=Y&&!y&&q,et=(0,o.k)().edu_offboarding_experience&&(X||Q||Z||ee),er=(0,o.k)().edu_offboarding_experience&&J;if(v)return{severity:ut.c.WARN,title:(0,S.t)("payments.locked"),message:w?r.createElement("span",null,(0,S.tx)("payments.no_monthly_sub_over_editor_limit_admin.seat_rename",{contactSupport:r.createElement("a",{href:`mailto:${(0,rf.W4)()}`},(0,S.tx)("payments.contact_support"))})):r.createElement("span",null,(0,S.tx)("payments.no_monthly_sub_over_editor_limit.seat_rename")),cta:w?(0,S.t)("payments.manage_plan"):null,onClickCta:w?()=>{l?.(eR.$T({view:"teamAdminConsole",teamId:a,teamAdminConsoleViewTab:eJ.Iv.SETTINGS}))}:null};if(V&&(T||y&&!H)){let e,t,n,o;return T?(e=y?(0,S.tx)("payments.pro_trial_expiry.locked_description_on_team",{teamName:s.name,lowerUsageLink:r.createElement(aq.$z,{onClick:e=>{e.preventDefault(),l?.(tf.to({type:m7.v,data:{teamId:a}}))}},(0,S.tx)("payments.pro_trial_expiry.lower_usage"))}):(0,S.tx)("payments.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:s.name}),t=y?(0,S.tx)("payments.pro_trial_upgrade_cta.upgrade"):null,n=`${up} `,o="Pro Trial Expiry Banner Locked"):(e=s?(0,S.tx)("payments.pro_trial.trial_ended_banner_message",{teamName:s.name}):(0,S.tx)("payments.pro_trial.trial_ended_banner_message.no_name"),t=(0,S.tx)("payments.pro_trial.trial_ended_banner_upgrade_cta"),n=`${up} ${uf}`,o="Pro Trial Expiry Banner Unlocked"),{severity:ut.c.WARN_SOFT,title:(0,S.t)("payments.pro_trial.trial_ended_banner_title"),message:e,cta:t,onClickCta:y?M:void 0,svg:uE.A,bannerClassName:n,trackingContextName:o,dismissible:!T,onClose:T?void 0:()=>{a&&l?.(rL.bE({all_team_flags:[{team_id:a,flags:{[rq.lg]:!0}}]}))}}}if(k)return{severity:ut.c.WARN_SOFT,title:(0,S.tx)("file_browser.limited_space_banner.heading"),message:(0,S.tx)("file_browser.limited_space_banner.description"),cta:null,hideIcon:!0,bannerClassName:"banners--limitedSpaceBanner--Pq6k8"};if(et){let e=()=>l?.(tf.to({type:m6.ZL,data:{team:s}}));if(X||Z)return{severity:ut.c.WARN_SOFT,title:(0,S.tx)("edu.banner.your_education_status_is_expiring_soon"),message:(0,S.tx)("edu.banner.to_keep_collaborating_upgrade_team",{teamName:s.name,verify:r.createElement(ea.Us,{href:"/education/apply",target:"_blank",trusted:!0},(0,S.tx)("edu.banner.verify_your_education_status"))}),cta:(0,S.tx)("edu.banner.learn_more"),onClickCta:e,svg:ug.A,bannerClassName:`${up} ${uf}`,trackingContextName:"Edu Offboarding Banner"};if(Q)return{severity:ut.c.WARN_SOFT,title:(0,S.tx)("edu.banner.your_education_plan_has_expired"),message:(0,S.tx)("edu.banner.team_is_now_view_only_for_all_members",{teamName:s.name}),cta:(0,S.tx)("edu.banner.learn_more"),onClickCta:e,svg:ug.A,bannerClassName:up,trackingContextName:"Edu Offboarding Banner"};if(ee)return{severity:ut.c.WARN_SOFT,title:(0,S.tx)("edu.banner.your_education_plan_has_expired"),message:(0,S.tx)("edu.banner.you_can_no_longer_edit_files",{teamName:s.name}),cta:(0,S.tx)("edu.banner.learn_more"),onClickCta:e,svg:ug.A,bannerClassName:up,trackingContextName:"Edu Offboarding Banner"}}else if(er)return{severity:ut.c.WARN_SOFT,title:(0,S.tx)("edu.banner.team_s_education_status_has_expired",{teamName:s.name}),message:(0,S.tx)("edu.banner.move_or_duplicate_files_to_another_location_to_save_your_work"),cta:null,svg:ug.A,bannerClassName:up,trackingContextName:"Edu Offboarding Banner"};else if(G){let e=n.user.external_restricted_org_id,t=(0,S.t)("external_collaboration_restricted.banner.restriction_description.no_org");if(e&&n.orgById[e]){let a=n.orgById[e];t=(0,S.t)("external_collaboration_restricted.banner.restriction_description",{organizationName:a.name})}return{severity:ut.c.WARN,title:(0,S.t)("external_collaboration_restricted.banner.title"),message:t,cta:null,ctaTrackingProperties:void 0,onClickCta:null}}else if(n.user&&["team","folder"].includes(e)&&N.showAccessRestricted){let e,t=(0,S.t)("banner.edu_grace_period.your_education_plan_has_expired");return s?(0,r6.eB)(n.user.id,n.roles.byTeamId,s)?e=(0,S.t)("banner.edu_grace_period.team_is_now_view_only_for_all_members",{teamName:s.name}):(0,r6.QS)(n.user.id,n.roles.byTeamId,s)?e=(0,S.t)("banner.edu_grace_period.you_can_no_longer_edit_files_in_team",{teamName:s.name}):(t=(0,S.t)("banner.edu_grace_period.your_education_plan_has_expired.is_member",{teamName:s.name}),e=(0,S.t)("banner.edu_grace_period.move_or_duplicate_files_to_another_location_to_save_your_work")):e=(0,S.t)("banner.edu_grace_period.education_team_members_need_to_verify_their_education_status"),{severity:ut.c.ANNOUNCEMENT,title:t,message:e,learnMoreUrl:"/education/",cta:(0,S.t)("banner.edu_grace_period.verify_status_button"),onClickCta:D,svg:ug.A,bannerClassName:u_}}else if(["team","folder"].includes(e)&&N.showReminder)return{severity:ut.c.ANNOUNCEMENT,title:(0,S.t)("banner.edu_grace_period.only_edu_grace_period_days_left",{daysLeft:x}),message:(0,S.t)("banner.edu_grace_period.to_keep_collaborating_on_figma_s_education_plan_please_verify_your_status_soon"),cta:(0,S.t)("banner.edu_grace_period.verify_status_button"),onClickCta:D,svg:uv.A};else if(A||O)return{severity:ut.c.WARN,title:(0,S.t)("payments.folder_locked"),message:(0,S.t)("payments.folder_locked_description",{projectType:"Invite"==(A?"Invite":"View")?(0,S.t)("payments.invite_only_projects"):(0,S.t)("payments.view_only_projects"),teamName:s.name}),learnMoreUrl:"/pricing",cta:y?(0,S.t)("payments.upgrade_now"):(0,S.t)("payments.contact_admin_for_details"),ctaTrackingProperties:y?{trackingDescriptor:eu.c.UPGRADE_NOW,upsellSource:rw.b.BANNER}:void 0,onClickCta:y?F:null};else if(L&&"folder"===e)return(0,rc.HZ)({label:rc.A5.getBannerContent.personalProjectDeprecated,oldValue:L&&"folder"===e,newValue:!1,maxReports:3}),{severity:ut.c.WARN,title:(0,S.t)("payments.locked"),message:(0,S.t)("payments.projects_deprecated"),learnMoreUrl:"/pricing-faq#what-changes-for-me",cta:null,onClickCta:null};else if(P&&"folder"===e)return{severity:ut.c.WARN,title:(0,S.t)("payments.abandoned_project"),message:(0,S.t)("payments.abandoned_project_description"),cta:null,onClickCta:null};else if(W){let e=(0,S.t)("payments.file_limit_unified",{figmaFiles:rd.WW,figjamFiles:rd.WW});j?W||(e=(0,S.t)("payments.file_limit_figjam",{figjamFiles:rd.WW})):e=(0,S.t)("payments.file_limit_figma",{figmaFiles:rd.WW});let t=()=>r.createElement("button",{type:"button",onClick:B,className:"banners--bannerInlineTextButton--GRx12"},(0,S.tx)("payments.check_out_our_paid_plans")),a=s?r.createElement("span",null,(0,S.tx)("payments.team_over_starter_team_limit_with_button.legacy_team",{fileLimitString:e,checkoutOurPlans:t(),teamName:s.name})):r.createElement("span",null,(0,S.tx)("payments.team_over_starter_team_limit_with_button.no_legacy_team_present",{fileLimitString:e,checkoutOurPlans:t()}));return{severity:ut.c.ANNOUNCEMENT,title:(0,S.t)("payments.team_over_starter_team_limit_title"),message:a,cta:(0,S.t)("payments.upgrade_now"),ctaTrackingProperties:{trackingDescriptor:eu.c.UPGRADE_NOW,upsellSource:rw.b.BANNER},onClickCta:F,svg:ub.A,bannerClassName:u_,trackingContextName:"Unified Legacy / Beta File Limit Banner"}}else if($){let e=(0,ed.A)(s.grace_period_end).toDate(),t=(0,S.tx)("payments.pro_plan_ends_relative_time_string",{relative_time_string:r.createElement(l3.h1,{date:e})});return U||(t=(0,S.tx)("payments.pro_plan_ends_on_date",{end_date:new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",year:"numeric"}).format(e)})),{severity:ut.c.ANNOUNCEMENT,title:t,message:(0,S.t)("payments.pro_plan_ends_for_team_description",{teamName:s.name}),cta:(0,S.t)("payments.pro_plan_ends_button"),onClickCta:M,svg:U?ub.A:uE.A,trackingContextName:"Promo Code Expiration Banner",bannerClassName:U?u_:void 0}}else if(b){let e=_?(0,S.t)("payments.complete_team_payment_description",{teamName:s.name}):(0,S.t)("payments.complete_team_renewal_payment_description");return{severity:ut.c.WARN,title:(0,S.t)("payments.complete_payment"),message:e,cta:r.createElement(m2.V,{trackingProperties:{trackingDescriptor:eu.c.VERIFY_PAYMENT,trackingContextName:"Verify Payment Banner"},onClick:()=>l?.(tf.to({type:ue,data:{teamId:a,paymentRequiresAction:!!g}}))},(0,S.tx)("payments.complete_payment_cta")),onClickCta:null}}return null}(e,t,a,n,l,s)),[m,c,e,t,a,n,l])}function uT(e){let t=(0,eD.FC)(),a=(0,n.d4)(e=>e.userEduGracePeriods),o=(0,n.d4)(e=>e.userFlags),l=(0,n.d4)(e=>e.userTeamFlags),i=(0,n.d4)(e=>e.selectedView),s=(0,n.d4)(e=>e.isFreeUser),c=(0,n.d4)(e=>e.userAnalyticsData),d=(0,n.d4)(e=>e.fileKeysByFolderId),m=r.useMemo(()=>({...t,checks:e.checks,fileKeysByFolderId:d,isFreeUser:s,selectedView:i,userAnalyticsData:c,userEduGracePeriods:a,userFlags:o,userTeamFlags:l}),[t,e.checks,d,s,i,c,a,o,l]);return uy(e.resourceType||eM.vt.FOLDER,e.resource||null,e.teamId||null,m,null,e.shadowReadLabel).transform(e=>!!e)}function uI(e,t){let a={...e};return"string"==typeof t.title&&(a.title=t.title),"string"==typeof t.message&&(a.message=t.message),a}var ux=a(442214),uN=a(578888);let uC=r.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"}),r.createElement("mask",{id:"mask0_4:25",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"48",height:"48"},r.createElement("path",{d:"M0 24C0 10.7452 10.7452 0 24 0V0C37.2548 0 48 10.7452 48 24V24C48 37.2548 37.2548 48 24 48V48C10.7452 48 0 37.2548 0 24V24Z",fill:"var(--color-bg-inverse, black)"})),r.createElement("g",{mask:"url(#mask0_4:25)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 20H17.5C16.1193 20 15 21.1193 15 22.5C15 23.8807 16.1193 25 17.5 25H20L20 20ZM21 19.9963L21 25H21.6738C23.3383 25 24.9874 25.3196 26.5314 25.9416L28 26.5333V17.7761L27.3548 18.1614C25.4287 19.3116 23.2393 19.9428 21 19.9963ZM17.5 19H20.6897C22.8561 19 24.9821 18.4135 26.8421 17.3028L28.2437 16.4658C28.5769 16.2668 29 16.507 29 16.8951V27.2737C29 27.628 28.6418 27.8699 28.3132 27.7375L26.1577 26.8692C24.7325 26.2951 23.2103 26 21.6738 26H21.3286L22.5613 29.698C22.7771 30.3455 22.2951 31.0142 21.6126 31.0142H20.4415C19.5807 31.0142 18.8164 30.4634 18.5442 29.6467L17.3333 26.0142L17.3272 25.9958C15.4745 25.9057 14 24.375 14 22.5C14 20.567 15.567 19 17.5 19ZM18.3874 26.0142L19.4928 29.3304C19.6289 29.7388 20.0111 30.0142 20.4415 30.0142H21.6126L20.2792 26.0142H18.3874Z",fill:"var(--color-icon-oninverse, white)"}),r.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.5 22C32.5 21.1716 31.8284 20.5 31 20.5V19.5C32.3807 19.5 33.5 20.6193 33.5 22C33.5 23.3807 32.3807 24.5 31 24.5V23.5C31.8284 23.5 32.5 22.8284 32.5 22Z",fill:"var(--color-icon-oninverse, white)"}));function uk(e){let{title:t,message:a,cta:n,ctaTrackingProperties:o,learnMoreUrl:l,onClickCta:i,severity:s,secondaryCTA:c,secondaryOnClickCta:d,svg:m,trackingContextName:u="Banner",contentStyles:_,reverseCtas:p,dismissible:f,onClose:g}=e;return s===ut.c.ANNOUNCEMENT?r.createElement(aq.fu,{name:u,properties:{severity:s,...e.tracking}},r.createElement("div",{className:un},m&&r.createElement(ei.B,{svg:m,useOriginalSrcFills_DEPRECATED:!0}),r.createElement("div",{className:ui},r.createElement("div",{className:uo},t),r.createElement("div",{className:us},a)),r.createElement(ea.e2,{reversed:p,className:ud},i&&r.createElement(ea.vd,{className:ur,onClick:i,trackingProperties:o},n),d&&r.createElement(ea.tM,{className:uc,onClick:d},c),f&&g&&r.createElement(rT.Jn,{className:um,onClick:g})))):s===ut.c.EVENT?r.createElement(aq.fu,{name:u,properties:{severity:s,...e.tracking}},r.createElement("div",{className:`${un} ${_}`},r.createElement("div",{className:"banners--eventMegaphoneIcon--7J3rx"},uC),r.createElement("div",{className:ui},r.createElement("p",{className:uo},t),r.createElement("p",{className:us},a)),r.createElement(ea.e2,{className:ud},i&&r.createElement(ea.vd,{className:ur,onClick:i,trackingProperties:o},n),d&&r.createElement(ea.tM,{className:uc,onClick:d},c),f&&g&&r.createElement(rT.Jn,{className:um,onClick:g})))):r.createElement(aq.fu,{name:u,properties:{severity:s,...e.tracking}},r.createElement("div",{className:`${un} ${_}`},!e.hideIcon&&r.createElement(ei.B,{svg:uN.A,className:"banners--warningIcon--A5YS-",autosize:s===ut.c.WARN_SOFT}),r.createElement("div",{className:ui},r.createElement("span",{className:"banners--title--OIA0P"},t),a,l&&r.createElement("span",null,"\xa0",r.createElement("a",{target:"_blank",rel:"noopener",href:l},(0,S.tx)("payments.learn_more")))),r.createElement(ea.e2,{reversed:p,className:ud},i&&r.createElement(ea.vd,{className:ur,onClick:i,trackingProperties:o},n),!i&&r.createElement("div",{className:"banners--ctaMessage--5MB88"},n),f&&g&&r.createElement(rT.Jn,{className:um,onClick:g}))))}let uS=(0,n.Ng)(e=>({userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView,userEduValidated:!!e.user?.student_validated_at,userEduGracePeriods:e.userEduGracePeriods,fileKeysByFolderId:e.fileKeysByFolderId,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,rm.getPermissionsState)(e)}))(function(e){let t;let a=(0,_.Rs)(eK.UpR,{}),o=e.folderId?e.folders[e.folderId]:null,l=o?o.team_id:null,i=e.dispatch,s=l?e.teams[l]:null,c=!!s?.org_id,d=!!s?.subscription,m=l&&(0,rm.canAdminTeam)(l,e),u=(0,_.Rs)((0,eK.Ywy)((0,rs._X)(rs.Pw.GROUP_5)&&l?{teamId:l}:null)),p=r.useMemo(()=>u.transform(({team:e})=>!!e?.canAdmin),[u]),g=(0,rc.MF)({oldValue:f.Qw.loaded(m),newValue:p,label:rc.A5.FolderBannerInner.canAdminTeam,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_5)}).unwrapOr(!1);(0,r.useEffect)(()=>{l&&!c&&d&&g&&i(ux.Be({teamId:l}))},[i,l,c,d,g]);let E=(0,n.d4)(e=>e.teamBilling?.summary),b=uy(eM.vt.FOLDER,o??null,l,{eduPeriodEnd:a.data?.currentUser?.eduPeriodEnd,billingSummary:E,...e},e.dispatch,rc.A5.FolderBannerInner.bannerContent).unwrapOr(null);if(!b)return r.createElement("div",null);t=o?uI({resourceType:eM.vt.TEAM,teamId:l,folderId:o.id},b):uI({resourceType:"recents"},b);let v=b.severity===ut.c.WARN?ua:"",h=b.bannerClassName||"",w=`${uu} ${v} ${h}`;return r.createElement("div",{className:w},r.createElement(uk,{...b,tracking:t}))});var uR=a(879263);let uA=(0,o.k)().drafts_page_viewbar_slim_lg?()=>{let e=(0,n.d4)(e=>e.currentUserOrgId),t=(0,n.d4)(e=>e.currentTeamId),a=(0,_.Rs)(eK._aE,{currentOrgId:e,currentTeamId:t});return"loaded"===a.status?a.data:null}:Z.S;function uO(){let e;let t=(0,n.wA)(),a=(0,n.d4)(e=>e.currentUserOrgId),l=(0,n.d4)(e=>e.currentTeamId),i=uA();(0,uR.oY)(null!==i,e=>{np.definedAnalyticsHandler.trackDefinedEvent("file_browser.sidebar_data_lg_migration",{durationMs:Math.round(e),isPostMigration:(0,o.k)().drafts_page_viewbar_slim_lg??!1,callsite:"drafts_page_viewbar"})}),a?e=i?.currentUser.baseOrgUser?.draftsProject:l&&(e=i?.currentUser.currentTeamUser?.draftsProject);let s=(0,n.d4)(e=>e.tileSortFilterStateByView),c=(0,eA._6)();if(!i||!e)return r.createElement(dM,{viewbarActions:[]});let d="deletedFiles"===c.view?(0,dD.xx)(dU)(s):(0,dD.xx)(ah.ZN)(e.id,s),m=[r.createElement(nA.ye,{key:0,config:d.tileSortFilterConfig}),r.createElement(nA.mc,{key:1,dispatch:t,options:d,selectedView:c}),r.createElement(nA.$c,{key:2,initialViewMode:d.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,np.trackEvent)("file view toggle",{viewType:e===lH.XU.GRID?"grid":"list"}),t(eR.JF({selectedView:c,config:{...d.tileSortFilterConfig,viewMode:e}}))}})];return r.createElement(dM,{viewbarActions:m})}let uP={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,moveFile:!0},uL=(0,dD.xx)(ah.ZN);function uF(e){let{sortFilterOptions:t,selectedBranchKeyByRepoId:a}=(0,r8.R)(t=>({sortFilterOptions:uL(e.folderId,t.tileSortFilterStateByView),selectedBranchKeyByRepoId:t.selectedBranchKeyByRepoId})),o=(0,m1.Rp)(),l=(0,n.d4)(({currentUserOrgId:e})=>e),s=(0,b.I7)("exp_aa_test_org_drafts");l&&s.getConfig();let c=()=>{},[d,m]=mQ({folderId:e.folderId}),u=d.data?.folder,_=(0,ex.R)(u?.team_id),p=uT({resourceType:eM.vt.FOLDER,resource:u,teamId:u?.team_id||null,shadowReadLabel:rc.A5.DraftsPageView.hasBanner}).unwrapOr(!1);c=r.useCallback(()=>{!d.isFetchingNextPage&&d.hasNextPage&&m.fetchNextPage()},[d.isFetchingNextPage,d.hasNextPage,m]);let f=r.useMemo(()=>{let e=(d.data?.files||[]).map(e=>(0,t1.fA)(e)),t=d.data?.filesByRepoId||{};return[...e,...(d.data?.repos||[]).map(e=>({type:t1.nb.REPO,repo:e,branches:t[e.id],selectedBranchKey:a[e.id]||""})),...Object.values(o).filter(e=>e.orgId===l).map(t1.gB)]},[l,d.data?.files,d.data?.filesByRepoId,d.data?.repos,o,a]),g=r.createElement(r.Fragment,null,r.createElement(mE,{newFileTile:!0,tiles:f,tileActions:uP,sortFilterOptions:t,emptyStateText:"",isDataPartial:!!d.hasNextPage,isEligbileForProTeamLockedRevampUI:_}),r.createElement(dt.cx,null)),E="loaded"===d.status,v=r.createElement(er.A,{loadingElementId:"loading-content-pane",loaded:E,loadingElementClassName:k.s.pr32.$},r.createElement(dV.B,{key:`${t.tileSortFilterConfig.filters.fileType}`,onShouldFetchNextPage:c},g));return(0,i.kF)("Drafts"),(0,i.WX)({markName:"MainBodyContent",isLoaded:E,contextArgs:{numFiles:d.transform(e=>e.files.length).unwrapOr(null)}}),(0,aq.T8)(r.createElement(oO.r,{viewBarSticky:!0,banner:p?r.createElement(uS,{folderId:e.folderId}):void 0,content:v,viewbar:r.createElement(uO,null)}),aX.e0.FILE_BROWSER,{view:"drafts"})}var uD=a(196008),uM=a(281408),uB=a(522463),uU=a(133930),u$=a(439382),uj=a(908301),uW=a(414354),uG=a(425451);let uV=(0,tu.Ju)(function(e){let t,a;let l=(0,n.wA)(),[i,s]=r.useState(""),c=(0,n.d4)(e=>e.deletedReposById),d=(0,n.d4)(e=>e.fileByKey),{reposToDelete:m,draftsToDelete:u,deleteAllDraftsAsync:_,isDeleteAll:p,isPermanentDeletion:f}=e,g=u.map(e=>e.name).concat(m.map(e=>e.name)),E=g.length>1;t=f?E?(0,S.t)("file_browser.draft_delete_modal.header_multiple_files_delete",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.header_single_file_delete",{fileName:g[0]}):E?(0,S.t)("file_browser.draft_delete_modal.header_multiple_files_trash",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.header_single_file_trash");let b=(t,a)=>{if(t.length>0){if(f){let a=t.reduce((e,t)=>(e[t.key]=!0,e),{});l(uj.YK({fileKeys:a,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess}))}else{let a=t.reduce((e,t)=>(e[t.key]=lV.F.toSinatra(t),e),{});l(uj.VK({fileKeys:a,userInitiated:!0,onSuccessCallback:e.onDeleteSuccess,hideVisualBell:!0}))}}let r={};a.forEach(e=>{let t=c[e.id];if(t)r[e.id]=t;else{let t=e.default_file_key&&d[e.default_file_key];t&&(r[e.id]={repo:e,main_file:t})}}),a.length>0&&(f?l((0,uW.YM)({repoIds:Object.keys(r),userInitiated:!0})):l((0,uW.hT)({reposById:r,userInitiated:!0})))},v=()=>uG.k.deleteAllPersonalDrafts().then(()=>l(tj.F.enqueue({message:(0,S.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled")}))).catch(()=>l(tj.F.enqueue({message:(0,S.t)("file_browser.draft_delete_modal.async_delete_drafts_scheduled_error")}))),h=()=>{let{draftsToDelete:t,reposToDelete:a}=e;t.length+a.length>100?l(rP.s.error((0,S.t)("file_browser.draft_delete_modal.unable_to_delete",{maxSize:100}))):(e.setSynchronousFileTransferInProgress(t.length>0),b(t,a))},w=()=>{_?v():h(),e.onClose()},y=r.useMemo(()=>i.trim().toLowerCase()!==(0,S.t)("file_browser.draft_delete_modal.button_delete").toLocaleLowerCase(),[i]);a=f?E?(0,S.t)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.permanently_delete_one_draft"):E?(0,S.t)("file_browser.draft_delete_modal.you_are_about_to_delete_multiple_drafts",{fileCount:g.length}):(0,S.t)("file_browser.draft_delete_modal.you_are_about_to_delete_single_draft",{fileName:g[0]});let T=f?r.createElement(ea.qM,{onClick:w,disabled:y,trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:f},dataTestId:"draft-delete-confirmation-button"},r.createElement("span",{"data-tooltip":(0,S.t)("file_browser.draft_delete_modal.draft_deletion_tooltip",{deletionString:(0,S.t)("file_browser.draft_delete_modal.button_delete")}),"data-tooltip-type":y?aJ.Ib.TEXT:null,"data-tooltip-max-width":180,"data-tooltip-show-above":!0},(0,o.k)().ps_trashed_drafts_enabled?(0,S.t)("file_browser.draft_delete_modal.button_permanently_delete_files",{numFiles:g.length}):(0,S.t)("file_browser.draft_delete_modal.button_delete"))):r.createElement(aY.vd,{onClick:w,"data-testid":"draft-delete-confirmation-button",trackingProperties:{isDeletingDraftFromDTM:!0,isPermanentDeletion:f}},(0,S.tx)("file_browser.draft_delete_modal.button_delete_files",{numFiles:g.length}));return r.createElement(aq.fu,{name:"draftDeleteModal",properties:{itemCount:g.length,isDeleteAsync:!!_,isDeleteAll:!!p}},r.createElement(a1.XV,{title:t,minWidth:480,maxWidth:480,onClose:e.onClose,truncateTitleText:!0,fixedCenter:!0},r.createElement("div",{className:"draft_delete_modal--modalContent--QYGIS"},r.createElement("p",null,a," ",!f&&r.createElement("p",null,r.createElement("br",null),(0,S.tx)("file_browser.draft_delete_modal.you_can_access_drafts_from_deleted_drafts_section",{fileCount:g.length}))),r.createElement("p",{className:"draft_delete_modal--confirmationTextSpacing---MQEW"},f&&(0,S.tx)("file_browser.draft_delete_modal.permanently_delete_multiple_drafts_confirmation",{deletionString:(0,S.t)("file_browser.draft_delete_modal.button_delete")})),r.createElement("form",{onSubmit:w},f&&r.createElement("div",null,r.createElement(u$.L,{autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",className:"draft_delete_modal--deleteDraftsInput--pCTUB",dataTestId:"draft-delete-confirmation-input",onChange:e=>{s(e.currentTarget.value)},onKeyDown:e=>{"Enter"===e.key&&e.preventDefault()},spellCheck:!1,type:"text",value:i})),r.createElement("div",{className:"draft_delete_modal--footer--SRSo6"},r.createElement(ea.nR,{onClick:e.onClose},(0,S.tx)("modal.cancel")),T)))))},"DraftDeleteModal");var uH=a(762759),uz=a(67391),uK=a(405002),uY=a(464758);let uq="drafts_to_move_page_view--fileCellDateSpan--xWiCm",uJ="drafts_to_move_page_view--dateColumn--V3e9G drafts_to_move_page_view--column--jpRzM table--column--974RA",uX="drafts_to_move_page_view--emptyContentContainer--w1lwc",uQ="drafts_to_move_page_view--emptyContentHeader--35cXt",uZ=(0,n3.jz)(ou.ISO),u0=(0,rf.ck)("c9f2d8cbce5754a2b6e3e3e81adf5fe313429577"),u1=(0,rf.ck)("6212099329ba7714b869112a09f8dfffce71edf5");var u4=(e=>(e.DRAFT_FILES="draft-files",e.DELETED_DRAFT_FILES="deleted-draft-files",e))(u4||{}),u2=(e=>(e.NONE="NONE",e.SYNCHRONOUS_DELETION_OR_MIGRATION="SYNCHRONOUS_DELETION_OR_MIGRATION",e.ASYNC_FILE_MIGRATION="ASYNC_FILE_MIGRATION",e.ASYNC_FILE_DELETION="ASYNC_FILE_DELETION ",e.TRANSFER_COMPLETED="TRANSFER_COMPLETED",e))(u2||{});function u3(e){let t=e=>{switch(e){case"draft-files":return(0,S.t)("file_browser.drafts_to_move.drafts");case"deleted-draft-files":return(0,S.t)("file_browser.drafts_to_move.deleted_drafts");default:(0,C.xb)(e)}},a=t=>{let a=u4[t].replace(/-/g,"_");(0,V.Cu)({text:a,name:"Drafts to move tab switch"},"cta_clicked"),e.setSelectedTab(u4[t])},n=Object.keys(u4).map(n=>r.createElement(uU.r,{tab:u4[n],onClick:()=>a(n),isSelected:e.selectedTab===u4[n],tabName:t(u4[n]),key:n}));return r.createElement(nA.g2,{leftSide:r.createElement(uU.f,{tabs:n}),rightSide:[]})}function u5(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.selectedView),o=(0,l$.v)(),{item:l}=e,i=t1.Tf.getFileKey(l)??"",s=e=>r=>{r.detail>1&&!t1.Tf.getTrashedAt(l)&&(ms({tile:e,index:0,dispatch:t,selectedView:a}),o(e,r),r.stopPropagation())},c=(0,l8.C)(l);return r.createElement("div",{className:k.s.inlineFlex.minW0.$},r.createElement("button",{className:"drafts_to_move_page_view--draftThumbnail--whTtS",onClick:s(l),"data-testid":`fileTile-${i}`},r.createElement(lB.e,{tile:l,noBorder:!0}),r.createElement("div",{className:"drafts_to_move_page_view--topLeftControls--kfCRe"},r.createElement(aE.w4,{size:16,type:c}))),r.createElement("div",{className:k.s.ml14.minW0.flex.flexColumn.itemSelfCenter.$},r.createElement("button",{className:"drafts_to_move_page_view--fileName--U3mn4",onClick:s(l)},t1.Tf.getName(l)),e.shouldDisplayFileDates&&r.createElement("div",{className:"drafts_to_move_page_view--fileCellDatesSection--LFnvg"},r.createElement("span",{className:uq},(0,S.tx)("file_browser.drafts_to_move.file_created_at_label",{timeDifference:r.createElement(l3.h1,{date:t1.Tf.getCreatedAt(l)})})),r.createElement("span",{className:uq},(0,S.tx)("file_browser.drafts_to_move.file_last_modified_at_label",{timeDifference:r.createElement(l3.h1,{date:t1.Tf.getTouchedAt(l)??""})})))))}function u8({currentFileTransferState:e}){let t="dark"===(0,o8.DP)(),a=e=>r.createElement(r.Fragment,null,r.createElement(en.kt,{size:"large"}),r.createElement("p",{className:"drafts_to_move_page_view--transferContentHeader--ljikD"},(0,S.tx)("file_browser.drafts_to_move.file_transfer_header",{transferType:"ASYNC_FILE_MIGRATION"===e?(0,S.tx)("file_browser.drafts_to_move.file_transfer_migration_type"):(0,S.tx)("file_browser.drafts_to_move.file_transfer_deletion_type")})),r.createElement("p",null,(0,S.tx)("file_browser.drafts_to_move.file_transfer_description"))),n=()=>r.createElement("div",{className:"drafts_to_move_page_view--slideIn--c-NGK"},r.createElement("div",{className:"drafts_to_move_page_view--animatedContentContainer--z1sdh"},r.createElement(uz.Gv,{src:t?u0:u1,containerClassName:"drafts_to_move_page_view--allDoneGif--mwZxC",height:100,width:100}),r.createElement("p",{className:uQ},(0,S.tx)("file_browser.drafts_to_move.empty_header")),r.createElement("p",null,(0,S.tx)("file_browser.drafts_to_move.empty_body_text")))),o=()=>r.createElement(en.kt,{size:"large"});return r.createElement("div",{className:uX},(()=>{switch(e){case"ASYNC_FILE_MIGRATION":case"ASYNC_FILE_DELETION ":return a(e);case"TRANSFER_COMPLETED":return n();default:return o()}})())}function u6(){let e=(0,n.wA)(),t=(0,n.d4)(e=>e.user?.personal_drafts_folder_id),a=(0,n.d4)(e=>e.fileKeysByFolderId),l=(0,n.d4)(e=>e.fileKeysByRepoId),i=(0,n.d4)(e=>e.repoIdsByFolderId),s=(0,n.d4)(e=>e.repos),c=(0,n.d4)(e=>e.fileByKey),d=(0,n.d4)(e=>e.selectedView),m=(0,n.d4)(e=>e.selectedBranchKeyByRepoId),u=(0,n.d4)(e=>e.userFlags),p=u.personal_draft_migration_scheduled,f=u.personal_draft_migration_completed,g=u.personal_draft_deletion_scheduled,E=u.personal_draft_deletion_completed,v=(0,n.d4)(e=>e.loadedFolders),h=(0,n.d4)(e=>e.deletedFilesByKey),w=(0,n.d4)(e=>e.deletedReposById),{windowInnerWidth:y}=(0,cy.l)(),T=(0,_.Rs)(eK.vXh,{}),I=(0,_.Rs)(eK.Jzf,{projectId:t??""},{enabled:!!t}),x=(0,l$.v)(),[N,C]=r.useState("draft-files"),[R,A]=r.useState(!1),[O,P]=r.useState("NONE"),[L,F]=r.useState(!1),[D,M]=r.useState(!1);r.useEffect(()=>{p&&(0,aQ.rO)(p.updatedAt,f?.updatedAt)?P("ASYNC_FILE_MIGRATION"):g&&(0,aQ.rO)(g.updatedAt,E?.updatedAt)?P("ASYNC_FILE_DELETION "):L?P("SYNCHRONOUS_DELETION_OR_MIGRATION"):P("NONE")},[p,f,g,E,L]),r.useEffect(()=>{e(ta.h3({orgId:null}))},[e]);let B="loaded"===T.status,U=r.useMemo(()=>{if(!B)return[];let e=[];return T.data?.currentUser?.draftsFolderId&&e.push(T.data.currentUser.draftsFolderId),e},[B,T]),j=r.useMemo(()=>I.data?.project?.status!==uD.tT.Loaded?new Set:new Set((I.data?.project.data?.undeletedFilesHighLimit??[]).map(e=>e.key)),[I]),W=r.useMemo(()=>{if(I.data?.project?.status!==uD.tT.Loaded)return new Set;let e=new Set;return(I.data?.project.data?.undeletedFilesHighLimit??[]).forEach(t=>{t.fileRepoId&&e.add(t.fileRepoId)}),e},[I]),G=r.useCallback(e=>j.has(e),[j]),V=r.useCallback(e=>W.has(e),[W]);r.useEffect(()=>U.forEach(t=>B&&e((0,z.jl)({folderId:t,loadedFolders:v}))),[v,U,e,B]);let{getConfig:H}=(0,b.I7)("ps_async_draft_move_limit",void 0,!0),K=H().get("async_limit",100),Y=B&&U.every(e=>e&&"loaded"===v[e]),q=r.useMemo(()=>Object.keys(h).map(e=>h[e]).filter(e=>!e.file_repo_id&&e.folder_id===t&&G(e.key)),[h,t,G]),J=r.useMemo(()=>Object.keys(w).map(e=>w[e]).filter(e=>e&&e.main_file&&e.main_file.folder_id===t&&e.repo&&V(e.repo.id)),[w,t,V]),X=r.useMemo(()=>U.flatMap(e=>i[e]).map(e=>s[e]).filter(e=>!!e&&V(e.id)),[U,s,i,V]),Q=r.useMemo(()=>U.flatMap(e=>a[e]).map(e=>c[e]).filter(e=>!!e&&G(e.key)),[U,c,a,G]);r.useEffect(()=>{let e=Q.length+X.length,t=q.length+J.length;Y&&!D&&(0===e&&t>0&&C("deleted-draft-files"),M(!0))},[Y,D,Q.length,X.length,J.length,q.length]);let Z=r.useMemo(()=>Q.concat(q).map(e=>(0,t1.fA)(e)),[Q,q]),ee="deleted-draft-files"===N?q:Q,et=r.useMemo(()=>ee.map(e=>(0,t1.fA)(e)),[ee]),en=r.useMemo(()=>X.map(e=>{let t=l[e.id].map(e=>c[e]).filter(e=>!!e);return{type:t1.nb.REPO,repo:e,branches:t,selectedBranchKey:m[e.id]}}),[X,m,c,l]),eo=r.useMemo(()=>J.map(e=>({type:t1.nb.REPO,repo:e.repo,branches:[e.main_file],selectedBranchKey:e.main_file?.key})),[J]),el="deleted-draft-files"===N?eo:en,ei=eo.concat(en),es=et.concat(el),ec=Z.length>0||ei.length>0,ed=es.length>0,[em,eu]=r.useState([]),e_=()=>{e(tf.Ce()),A(!1)},ep=(t,a)=>{e(tj.F.enqueue({message:(0,S.t)("visual_bell.files_moved_to_folder",{fileCount:a,folderName:t})})),F(!1),eu([])},ef=()=>{F(!1),eu([])},eg=e=>{let t=[],a=[];return e.forEach(e=>{e.type===t1.nb.FILE&&t.push(e.file),e.type===t1.nb.REPO&&a.push(e.repo)}),{draftsToMove:t,reposToMove:a}},eE=t=>{let{draftsToMove:a,reposToMove:r}=eg(em);A(!0),e(tf.to({type:uV,data:{isPermanentDeletion:t,draftsToDelete:a,reposToDelete:r,deleteAllDraftsAsync:em.length>K,setSynchronousFileTransferInProgress:F,onDeleteSuccess:ef,onClose:e_}}))},eb=()=>{let{draftsToMove:t,reposToMove:a}=eg(em);A(!0),e(tf.to({type:uH.K,data:{draftsToMove:t,reposToMove:a,moveAllDraftsAsync:em.length>K,onMoveSuccess:ep,onClose:e_,setSynchronousFileTransferInProgress:F}}))},ev=function(e,t,a,n){let o=n>=1200,l=[{name:(0,S.t)("file_browser.drafts_to_move.table_header_name"),className:"drafts_to_move_page_view--nameColumn--sSZYF drafts_to_move_page_view--column--jpRzM table--column--974RA",getSortValue:e=>t1.Tf.getName(e),cellComponent:e=>r.createElement(u5,{item:e,shouldDisplayFileDates:!o})}];return o&&l.push({name:(0,S.t)("file_browser.drafts_to_move.table_header_last_modified"),className:uJ,getSortValue:e=>t1.Tf.getTouchedAt(e)??"",cellComponent:e=>{let t=t1.Tf.getTouchedAt(e);return t?r.createElement(l3.h1,{date:t}):""}},{name:(0,S.t)("file_browser.drafts_to_move.table_header_created"),className:uJ,getSortValue:e=>t1.Tf.getCreatedAt(e),cellComponent:e=>r.createElement(l3.h1,{date:t1.Tf.getCreatedAt(e)})}),l.push({name:"",className:"drafts_to_move_page_view--moveButtonColumn--Mvc2P drafts_to_move_page_view--column--jpRzM table--column--974RA",cellComponent:n=>0===a?r.createElement(r.Fragment,null,r.createElement(ea.tM,{className:$()("drafts_to_move_page_view--openDraftButton--zXZGf",k.s.if(!!t1.Tf.getTrashedAt(n),k.s.invisible).$),onClick:e=>t(e,n)},(0,S.tx)("file_browser.drafts_to_move.open_draft_button")),r.createElement(ea.tM,{className:"drafts_to_move_page_view--moveDraftButton--GmBWa",onClick:t=>e(t,n)},(0,S.tx)("file_browser.drafts_to_move.move_draft_button"))):r.createElement(r.Fragment,null)}),l}((t,a)=>{let{draftsToMove:r,reposToMove:n}=eg([a]);e(tf.to({type:uH.K,data:{draftsToMove:r,reposToMove:n,onMoveSuccess:ep,onClose:e_,setSynchronousFileTransferInProgress:F}})),t.stopPropagation()},(t,a)=>{ms({tile:a,index:0,dispatch:e,selectedView:d}),x(a,t),t.stopPropagation()},em.length,y),[eh,ew,ey]=(0,uB.z)({columnName:(0,S.t)("file_browser.drafts_to_move.table_header_last_modified"),isReversed:!0},es,ev),eT=r.createElement("div",{className:uX},r.createElement("span",{className:uQ},(0,S.tx)("file_browser.drafts_to_move.empty_header")),r.createElement("span",null,(0,S.tx)("file_browser.drafts_to_move.empty_content_description",{tab:r.createElement("button",{className:"drafts_to_move_page_view--emptyContentTab--GKlRP",onClick:()=>C("draft-files"===N?"deleted-draft-files":"draft-files")},"draft-files"===N?(0,S.t)("file_browser.drafts_to_move.deleted_drafts"):(0,S.t)("file_browser.drafts_to_move.drafts"))})));if("NONE"!==O)return r.createElement(u8,{currentFileTransferState:O});let eI=em.length<=0||em.length>K,ex="deleted-draft-files"===N||!(0,o.k)().ps_trashed_drafts_enabled,eN=r.createElement(er.A,{loadingElementClassName:"drafts_to_move_page_view--loadingPage--ZZyqG",loadingElementId:"loading-content-pane",loaded:Y},ed?r.createElement(r.Fragment,null,r.createElement("div",{className:"drafts_to_move_page_view--tableWrapper--b-sz2"},r.createElement(uK.Cj,{actionBar:e=>r.createElement("div",{className:"drafts_to_move_page_view--actionBarButtons--RUREB"},!eI&&r.createElement(ea.rb,{className:"drafts_to_move_page_view--deleteDraftsButton--Aesaa",onClick:()=>eE(ex)},ex?(0,S.tx)("file_browser.drafts_to_move.bulk_delete_drafts_button"):(0,S.tx)("file_browser.drafts_to_move.bulk_trash_drafts_button")),r.createElement(ea.vd,{className:"drafts_to_move_page_view--moveDraftsButton--fZf6H",disabled:eI,onClick:eb},(0,S.tx)("file_browser.drafts_to_move.bulk_move_drafts_button",{numSelected:em.length}))),actionBarClassName:$()("drafts_to_move_page_view--actionBar--BbYQh",{"drafts_to_move_page_view--actionBarHidden--l4K4A":R}),columns:ev,emptyContent:"",getItemKey:e=>t1.Tf.getFileKey(e)??"",isLoading:!uY.s1,itemTypeContext:{itemType:"draftToMove",getSelectedCountString:e=>(0,S.t)("file_browser.drafts_to_move.selected_count_files",{numSelected:e})},items:ey,minContentWidth:728,onSelectedItemsChange:eu,onSetSortState:ew,rowHeightOverride:uZ,scrollContainerInnerClassName:"drafts_to_move_page_view--scrollContainer--yiQAz",selectAllDisabled:ey.length>K,shouldRoundBordersForSelectedRows:!0,sortState:eh,styleOverrideClassNames:{row:"drafts_to_move_page_view--row--v9ugA",header:"drafts_to_move_page_view--header--qsyde",unselectedCheckbox:"drafts_to_move_page_view--visibleCheckbox--UOqli",batchActionClearButton:"drafts_to_move_page_view--batchActionClearButton--Qk923"}}))):ec?eT:r.createElement(u8,{currentFileTransferState:"TRANSFER_COMPLETED"}));return(0,aq.T8)(r.createElement(oO.r,{content:eN,viewbar:ec&&r.createElement(r.Fragment,null,r.createElement("div",{className:"drafts_to_move_page_view--viewbar--wJ6Pu"},r.createElement("div",{className:"drafts_to_move_page_view--viewbarWarning--6T7y-"},r.createElement(uM.E,{className:"drafts_to_move_page_view--yellowIcon--xHN3r"}),r.createElement("div",null,r.createElement("h1",{className:"drafts_to_move_page_view--viewbarHeading--02fvs"},(0,S.tx)("file_browser.drafts_to_move.viewbar_heading")),r.createElement("ul",{className:"drafts_to_move_page_view--viewbarDescription--dV8s3"},r.createElement("li",null,(0,S.tx)("file_browser.drafts_to_move.move_drafts_below")),r.createElement("li",null,(0,S.tx)("file_browser.drafts_to_move.drafts_for_personal_work")),r.createElement("li",null,(0,S.tx)("file_browser.drafts_to_move.access_to_drafts"))),r.createElement("div",{className:"drafts_to_move_page_view--viewbarActions--v-cwt"},r.createElement(ea.vd,{className:"drafts_to_move_page_view--moveAllDraftsButton--9-TlX",onClick:()=>{A(!0),e(tf.to({type:uH.K,data:{reposToMove:ei.map(e=>e.repo),draftsToMove:Z.map(e=>e.file),onMoveSuccess:ep,isMoveAll:!0,moveAllDraftsAsync:Z.length>K,onClose:e_,setSynchronousFileTransferInProgress:F}}))}},(0,S.tx)("file_browser.drafts_to_move.move_all_drafts_button")),r.createElement(ea.NY,{className:"drafts_to_move_page_view--learnMoreButton--lUnQ9 drafts_to_move_page_view--moveAllDraftsButton--9-TlX",href:"https://www.figma.com/blog/updates-to-how-drafts-work/",target:"_blank"},(0,S.tx)("file_browser.drafts_to_move.viewbar_learn_more_link")))))),r.createElement("div",{className:"drafts_to_move_page_view--tabViewBarContainer--lsoH0"},r.createElement(u3,{selectedTab:N,setSelectedTab:C})))}),aX.e0.FILE_BROWSER,{view:"draftsToMove",selectedTab:N})}function u7({org:e,currentResourceId:t,hasTrailingDivider:a}){let o=(0,n.wA)();return r.createElement(i_.J5,{text:e.name,onClick:a=>{o(eR.$T({view:"org",orgId:e.id,orgViewTab:th.X.HOME})),(0,V.Cu)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})},hasTrailingDivider:a})}var u9=a(776412);function _e({planEntity:e}){return r.createElement(rK.Y,{spacing:4},r.createElement(u9.H,{entityId:e.id,entityName:e.name,imgUrl:e.imgUrl??void 0}),r.createElement(R.E,{fontSize:13,color:"secondary"},e.name))}function _t({team:e,currentResourceId:t,orgId:a,hasTrailingDivider:o}){let l=(0,n.wA)();return r.createElement(i_.J5,{text:e.name,onClick:r=>{l(eR.$T({view:"team",teamId:e.id})),(0,V.Cu)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:a})},hasTrailingDivider:o})}var _a=a(573502);function _r({workspace:e,currentResourceId:t,orgId:a,hasTrailingDivider:n}){let o=(0,_a.$)(),l=e.id===oy.O,i=!e.canRead;return r.createElement(i_.J5,{text:l?(0,S.t)("breadcrumbs.unassigned_license_group"):i?(0,S.t)("breadcrumbs.private_workspace_ellipses"):e.name,onClick:r=>{o(e.id,r),(0,V.Cu)({clickedResourceType:"workspace",clickedResourceId:e.id,currentResource:t,orgId:a})},hasTrailingDivider:n,disabled:l||i})}function _n({folderId:e}){let t=(0,_.Rs)(eK.L8O,{projectId:e}),a=t.data?.project||null,n=(0,Y.dq)(),o=(0,eY.rs)("FolderPageBreadcrumbs").unwrapOr(null),l=o?.key.type===eM.OL.ORG;if(!a?.team)return null;if(l||a.team.org?n!==a.team.org?.id:!a.team.canRead)return r.createElement(_e,{planEntity:a.team.org??a.team});let i=(0,X.Zr)(a.team.org);return r.createElement(i_.A5,null,a.team.org&&r.createElement(u7,{org:a.team.org,currentResourceId:a.id,hasTrailingDivider:!0}),(a.team.workspace||i)&&a.team.org&&r.createElement(_r,{workspace:a.team.workspace??{id:oy.O},currentResourceId:a.id,orgId:a.team.org.id,hasTrailingDivider:!0}),r.createElement(_t,{team:a.team,currentResourceId:a.id,orgId:a.team.org?.id,hasTrailingDivider:!1}))}var _o=a(198850),_l=a(496522),_i=a(250795);let _s="seen_folder_settings_connected_projects_onboarding",_c="FOLDER_SETTINGS_CONNECTED_PROJECTS_ONBOARDING_KEY",_d=(0,ep.r1)(_s);function _m({folder:e}){let t=(0,ec.md)(_d),a=(0,n.wA)(),o=r.useMemo(()=>{let t=e?.pendingAssetTransferRequest,a=e?.team?.pendingAssetTransferRequest;return t||a},[e]),{show:l,isShowing:i,complete:s}=(0,e_.e)({overlay:ev.YPG,priority:eg.N.DEFAULT_MODAL},[t]);return(0,m.h)(()=>{l({canShow:e=>!e})}),r.createElement(eE.rq,{clickOutsideToHide:!0,description:(0,S.tx)("folder_settings_modal.callout.projects_with_external_teams.description"),emphasized:!0,isShowing:i,onClose:s,primaryCta:{label:(0,S.tx)("resource_connection.onboarding.try_it"),ctaTrackingDescriptor:eu.c.TRY_IT,type:"button",onClick:()=>{let t=e?.plan;null!=t&&a(tf.to({type:_i.B,data:{folder:{...e,plan:t},entryPoint:_l.wR.PROJECT_SETTINGS_ONBOARDING_CTA,assetTransferRequestWarning:!!o}}))}},secondaryCta:{label:(0,S.tx)("resource_connection.request_modal.learn_more"),ctaTrackingDescriptor:eu.c.LEARN_MORE,type:"link",href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects"},shouldCenterArrow:eb.EL.FALLBACK,targetKey:_c,title:(0,S.tx)("folder_settings_modal.callout.projects_with_external_teams"),trackingContextName:"seen folder settings connected projects modal onboarding overlay",userFlagOnShow:_s})}let _u="seen_folder_settings_disconnected_project_share_copy_onboarding",__="FOLDER_SETTINGS_DISCONNECTED_PROJECT_SHARE_COPY_ONBOARDING_KEY",_p=(0,ep.r1)(_u);function _f({folder:e}){let t=(0,ec.md)(_p),a=r.useMemo(()=>{let t=(0,et.oA)(e.mostRecentResourceConnection),a=!!t&&!!t.disconnectedAt,r=!!t&&!t.assetTransferRequestId,n=e.canTransferCopy;return r5.Qw.loaded(a&&r&&n)},[e]),{show:n,isShowing:o,complete:l}=(0,e_.e)({overlay:ev.j9$,priority:eg.N.DEFAULT_MODAL},[t,a]);(0,m.h)(()=>{n({canShow:(e,t)=>!e&&t})});let i=e=>r.createElement("span",{className:"folder_settings_disconnected_project_share_copy_onboarding_overlay--planName--0GWpT"},e);return r.createElement(eE.rq,{arrowPosition:eb.F_.TOP,clickOutsideToHide:!0,description:(0,S.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_description",{hostPlanName:i(et.oA(e.mostRecentResourceConnection)?.hostPlanName),connectedPlanName:i(et.oA(e.mostRecentResourceConnection)?.connectedPlanName)}),emphasized:!0,isShowing:o,onClose:l,primaryCta:{label:(0,S.tx)("general.got_it"),ctaTrackingDescriptor:eu.c.GOT_IT,type:"button",onClick:l},shouldCenterArrow:eb.EL.FALLBACK,targetKey:__,title:(0,S.tx)("resource_connection.onboarding.share_a_project_copy_onboarding_title"),trackingContextName:"seen folder settings disconnected project share copy onboarding overlay",userFlagOnShow:_u})}function _g(e){let{selectedView:t,userFlags:a,userTeamFlags:o,userEduVerified:l,isFreeUser:i,userAnalyticsData:s,...c}=(0,r8.R)(e=>({selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,userEduVerified:!!e.user?.student_validated_at,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData,...(0,rm.getPermissionsState)(e)})),d=(0,n.wA)(),m=(0,_.Rs)(eK.UpR,{}),{teamId:u,selectedTab:p}=e,g=c.teams[u]??null,E=!!g?.org_id,b=!!g?.subscription,v=u&&(0,rm.canAdminTeam)(u,c),h=(0,_.Rs)((0,eK.LKQ)((0,rs._X)(rs.Pw.GROUP_5)&&u?{teamId:u}:null)),w=r.useMemo(()=>h.transform(({team:e})=>!!e?.canAdmin),[h]),y=(0,rc.MF)({oldValue:f.Qw.loaded(v),newValue:w,label:rc.A5.TeamUpgradeBanner.canAdminTeam,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_5)}).unwrapOr(!1);(0,r.useEffect)(()=>{u&&!E&&b&&y&&d(ux.Be({teamId:u}))},[d,u,E,b,y]);let T=(0,n.d4)(e=>e.teamBilling?.summary),I=uy(eM.vt.TEAM,g,u,{selectedView:t,userFlags:a,userTeamFlags:o,selectedTab:p,isFreeUser:i,userAnalyticsData:s,eduPeriodEnd:m.data?.currentUser?.eduPeriodEnd,billingSummary:T,...c},d,rc.A5.TeamUpgradeBanner.bannerContent).unwrapOr(null);if(!I)return r.createElement("div",null);let x=uI({resourceType:eM.vt.TEAM,teamId:u},I),N=I.severity===ut.c.WARN?ua:"",C=I.bannerClassName||"",k=`${uu} ${N} ${C}`;return r.createElement("div",{className:k},r.createElement(uk,{...I,tracking:x}))}var _E=a(679111);function _b({folderId:e,pinnedFiles:t,tileActions:a}){let o=(0,n.wA)(),l=(0,eA._6)(),i=(0,J.TA)(),{showing:s,show:c,data:d}=(0,lj.L)(),m=(0,l$.v)(),u=r.useCallback((t,a,r)=>{m(t,a);let n=t.type===t1.nb.PINNED_FILE?t.file:null;(0,V.E9)(V.gH,n,{entrypoint:r,selectedView:l.view,resourceType:"folder",resourceId:e,pinDescription:"file open from pinned files for file named "+n?.name})},[m,l.view,e]),_=r.useCallback((e,t)=>{u(_w(e.file),t,"pinned files")},[u]),p=r.useCallback((e,t,a)=>{o(tQ.an()),o(tQ.PW({type:t9.F.PINNED_FILES,keys:e.map(e=>e.file.key)})),c({data:{tile:_w(e[0].file),targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a}})},[o,c]),f=r.useCallback(t=>{if(1!==t.length)return;let a=t[0];a?.pinnedByUser?.id===i&&o(_E.z6({folderId:e,fileKey:a.file.key}))},[i,o,e]),g=r.useMemo(()=>t.filter(({file:e})=>!!e).map(e=>_w(e.file)),[t]),E=(0,t1.nw)(g),b=r.useMemo(()=>t.sort((e,t)=>e.file.createdAt>t.file.createdAt?1:-1),[t]);return r.createElement("div",{className:k.s.px32.pb32.m0.$},t.length>0?r.createElement(lG.A,{handleContextMenu:p,items:b,doNotFocusOnLoad:!0,getAriaLabel:e=>e.file.name,viewType:lH.XU.GRID,handleOpenItem:_,handleDeleteKey:f,gridViewProps:{containerStyle:_y.grid,renderTile:e=>r.createElement(_v,{pinnedFile:e,isDropdownOpen:s}),renderTileFooter:e=>r.createElement(_h,{pinnedFile:e}),renderTileDragImage:e=>r.createElement(ab.NM,{file:e.file,noBorder:!0})}}):r.createElement("div",null),(()=>{let e=d?.tile??null;return r.createElement(lW.i,{tile:e,selectedTiles:E,tileActions:a,openTile:t=>{e&&u(e,t,"pinned files: context menu")},dropdownVisible:s})})())}function _v({pinnedFile:e}){let t=_w(e.file);return r.createElement(lB.e,{tile:t,noBorder:!0,size:aA.y.SMALL})}function _h({pinnedFile:e}){return r.createElement("div",{className:k.s.pt8.flex.flexColumn.$},r.createElement("span",{className:k.s.ellipsis.textBodyLargeStrong.truncate.$},e.file.name),r.createElement(R.E,{truncate:!0,showTooltipWhenTruncated:!0,color:"secondary"},(0,S.t)("tile.file_tile.pinned_by_user",{name:e.pinnedByUser?.name??""})))}function _w(e){return{type:t1.nb.PINNED_FILE,file:e}}let _y={grid:{gridTemplateColumns:"x1g5i94c",userSelect:"x87ps6o",$$css:!0}};var _T=a(124810),_I=a(926036),_x=a(772283),_N=a(514019),_C=a(530292),_k=a(654574),_S=a(240176),_R=a(944239);let _A=new Set(["PM","ENG","DES","MKT","UR"]),_O=(e,t)=>e?_x.Dw.loadingKeyForPayload({shelfType:sF.cS.FILE_BROWSER_RECOMMENDED_TEMPLATES,filterLabel:t}):_x.sz.loadingKeyForPayload({shelfType:sF.cS.FILE_BROWSER_RECOMMENDED_TEMPLATES}),_P=(0,_R.n)(e=>(function(e){if(!e)return"OTH";let t={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in t)return t[e];let a={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in a?a[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"})(e?.profile?.job_title??"OTH"));var _L=a(543177),_F=a(922484),_D=a(152545),_M=a(140497),_B=a(892576);let _U=[eM._Y.WHITEBOARD,eM._Y.SLIDES],_$=(0,ec.eU)(!1);function _j(e){let t=(0,n.wA)(),a=_P((0,J.iZ)()),o=_O(!1,a),l=(0,_F.oh)(o),i=(0,_F.mC)(o),s=_A.has(a)?a:sF.iF.ALL,c=(0,ec.Xr)(_$);r.useEffect(()=>(c(!0),()=>c(!1)),[c]),r.useEffect(()=>{if(!l&&!i)return t(_x.Dw({shelfType:sF.cS.FILE_BROWSER_TEMPLATES_BAR,filterLabel:s}))},[l,i,t,a,s]);let d=(0,n.d4)(e=>e.communityHub.shelves[sF.cS.FILE_BROWSER_TEMPLATES_BAR]||[]),m=r.useMemo(()=>{let e=new Map;return d.forEach(t=>{e.set(t.id,t.shelf_content.map(e=>e))}),e},[d]),u=r.useCallback(e=>{switch(e){case"All":return(0,S.t)("file_browser.templates_shelf.for_you");case"Brainstorm":return(0,S.t)("file_browser.templates_shelf.brainstorm");case"Reviews":return(0,S.t)("file_browser.templates_shelf.reviews");case"Meetings":return(0,S.t)("file_browser.templates_shelf.meetings");case"Planning":return(0,S.t)("file_browser.templates_shelf.planning");case"Diagram":return(0,S.t)("file_browser.templates_shelf.diagram");default:return null}},[]),_=r.useMemo(()=>{let e=[];return d.forEach(t=>{t.shelf_content.length>0&&e.push({tabKey:t.id,tabTitle:t.title,modifiedTabTitle:u(t.title)})}),e},[d,u]);return 0===_.length?null:r.createElement(aq.fu,{name:"topbar_templates_shown"},r.createElement("div",{className:"templates_bar--container--0nCIh"},r.createElement(_W,{tabNameToTemplatesMap:m,folderId:e.folderId,onClose:e.onClose,tabList:_,newFileFrom:e.newFileFrom})))}function _W(e){let[t,a]=r.useState(e.tabList[0]),[n,o]=r.useState(e.tabNameToTemplatesMap.get(t.tabKey)??[]),[l,i]=r.useState(null),{sizeRef:s,numTemplates:c,templateWidth:d,templateHeight:m}=function(e){let t=(0,r.useRef)(null),[a,n]=(0,r.useState)(0),o=Math.min(a-4,2229);(0,r.useLayoutEffect)(()=>{n(t?.current?.offsetWidth??0)},[n,t]),(0,_I.wY)(t,e=>{n(e.width)});let l=(0,r.useMemo)(()=>o?Math.min(Math.floor((o+16)/187),e):0,[o,e]),i=l&&o?Math.floor((o-16*(l+1))/l):0,s=i?Math.floor(136*i/171):0;return{sizeRef:t,numTemplates:l,templateWidth:i,templateHeight:s}}(n?.length??0);r.useEffect(()=>{if(!e.tabList||0===e.tabList.length)return;let t=e.tabList[0];a(t),o(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[e.tabList,e.tabNameToTemplatesMap]),r.useEffect(()=>{o(e.tabNameToTemplatesMap.get(t.tabKey)??[])},[t,e.tabNameToTemplatesMap]);let u=r.createElement(_z,{tabs:e.tabList,activeTab:t,setActiveTab:a});return r.createElement(r.Fragment,null,r.createElement("div",{className:"templates_bar--headerContainer--3-3sN"},r.createElement("div",{className:"templates_bar--headerLeft--p4T6m"},r.createElement(_G,null)),r.createElement("div",{className:"templates_bar--headerEnd--rI6SI"},u),r.createElement("div",{className:"templates_bar--headerRightOld--j-Via"},r.createElement("div",{className:"templates_bar--closeButton--XeG8e"},r.createElement(tD.K,{onClick:e.onClose,"aria-label":(0,S.t)("general.close")},r.createElement(_T.A,null))))),r.createElement("div",{className:"templates_bar--body--PKvm-",ref:s},r.createElement("div",{className:"templates_bar--tilesContainer--OHkyf","data-testid":"templates-bar-tiles-container"},n?.slice(0,c??0).map((a,n)=>r.createElement("div",{key:a.id,style:{width:d,height:m,marginRight:16}},r.createElement(_H,{hubFile:a,rank:n,folderId:e.folderId,tab:t,duplicatingHubId:l,setDuplicatingHubId:i,newFileFrom:e.newFileFrom}))))))}function _G(){return r.createElement("div",{className:"templates_bar--headerTitle--6BSKy text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("file_browser.templates_shelf.interim_title"))}let _V=e=>e===eM.y4.WHITEBOARD?"whiteboard":e===eM.y4.SLIDE_TEMPLATE?"piper":"design";function _H(e){let t=(0,n.wA)(),a=e.hubFile,o=a.id,l=null!==e.duplicatingHubId,i=e.duplicatingHubId===o,s=a&&(0,_L.a6)(e.hubFile),c=r=>{r.stopPropagation(),e.setDuplicatingHubId(o),t(_N.rL({hubFileId:o,hubFileName:s?.name||"this file",openInNewTab:!1,folderId:e.folderId,source:iE.f6.FILE_BROWSER_TEMPLATES_BAR,callback:t=>{e.setDuplicatingHubId(null),(0,V.Cu)({fileKey:t,rank:e.rank,templateId:o,productType:(0,_C.L)(a.viewer_mode)},"topbar_template_selected"),(0,_k._)("resource_inserted",{fileKey:t,resourceId:o,resourceName:s.name,resourceType:"template",templateType:_D.n.HubFile,triggeredFrom:e.newFileFrom,category:e.tab.tabTitle,templateCategory:e.tab.tabKey})}}))};return a?r.createElement(_M.zq,{containerStyle:"templates_bar--templatesTileContainer--yy7Q2",onClick:l?void 0:c,image:r.createElement(_M.FK,{backgroundColor:(0,_S.Cn)(a.client_meta),removeBorder:!0,className:"templates_bar--templatesTileImage--y0sA9",customRatioClassName:"templates_bar--imageRatio--enx9l"},r.createElement(_M.zx.Cover,null,r.createElement("button",{className:"templates_bar--hoverOverlay--bQBil browse_templates_modal--hoverOverlay--sFj3y",onClick:c,disabled:l})),r.createElement(_M.zx.Center,null,r.createElement("div",{className:$()("templates_bar--useTemplateButton--4KFhz",k.s.bRadius6.$),tabIndex:-1},r.createElement(sr.v,{mode:_V(a.viewer_mode)},r.createElement(oL.$n,{onClick:c,disabled:l},i?r.createElement(oG.k,null):(0,S.tx)("file_browser.new_file_creation_topbar.use_templates"))))),r.createElement(_B.Ho,{image:e.overrideThumbnailUrl||a.thumbnail_url||void 0,isSet:!!e.overrideThumbnailUrl||!!a.thumbnail_is_set,isWhiteboard:a.viewer_mode===eM.y4.WHITEBOARD,hubFileId:a.id,alt:(0,_L.a6)(a).name,imageClassName:a.viewer_mode===eM.y4.SLIDE_TEMPLATE?"templates_bar--slidesThumbnailImage--uJ-8c templates_bar--thumbnailImage--ymHpx":"templates_bar--thumbnailImage--ymHpx",resizedThumbnailUrls:a.resized_thumbnail_urls})),bottomRow:r.createElement(_M.Wf.NameAndFileIconMetadata,{name:s.name,className:"templates_bar--tilesBottomRowContainer--GxsNx",textClassName:"templates_bar--tileBottomRowNameOnly--SMVhN text--fontPos11--2LvXf text--_fontBase--QdLsd",viewerMode:a.viewer_mode}),bottomRowStyle:"templates_bar--bottomRowStyle--a32JN"}):null}function _z(e){return r.createElement("div",{className:"templates_bar--tabs--a8HOf text--fontPos13--xW8hS text--_fontBase--QdLsd",style:es.sx.add({columnGap:"26px"}).$},e.tabs.map(t=>r.createElement(_K,{key:t.tabKey,tab:t,isActive:t.tabKey===e.activeTab.tabKey,setActiveTab:e.setActiveTab})))}function _K(e){return r.createElement(nd.E,{className:$()("templates_bar--tab---drzF text--fontPos11--2LvXf text--_fontBase--QdLsd",{"templates_bar--activeTab--c7Hid":e.isActive}),onClick:()=>{(0,V.Cu)({triggeredFrom:"file-browser",category:e.tab.tabTitle},"template_shelf_category_toggled"),e.setActiveTab(e.tab)}},e.tab.modifiedTabTitle??e.tab.tabTitle)}var _Y=a(442393),_q=a(877146),_J=a(282920),_X=a(766930),_Q=a(576076),_Z=a(692853),_0=a(710923);let _1="connected_folder_empty_view--subtitle--eKq7-",_4="connected_folder_empty_view--betaTag--xypkD";function _2(e){var t;let{lgFolder:a,hostPlanName:o,user:l}=e,i=(0,n.wA)(),s=(0,N.RR)(),{properties:c}=(0,aq.j6)(),{handleUpgrade:d,getUpgradeEligibility:m,hasPendingRequest:u,getUpgradePathway:_}=(0,ag.wH)({folderId:a.id}),p=a.canCreateDesignFileWithReasons.result&&a.canEdit,f=(e=>{if(s){let t=m(eM.G_.DESIGN,p);return t===_Z.q.CAN_UPGRADE?((0,V.Cu)({...c,trackingDescriptor:eu.c.CREATE_FILE,isBillingRemodelEnabled:s,licenseType:eM.G_.DESIGN,billableProductKey:(0,_J.F)(eM.G_.DESIGN),needsUpgrade:!0}),d({afterUpgradeCallback:e,licenseType:eM.G_.DESIGN,upgradeReason:_0.i.CREATE_FILE,entryPoint:_q.tc.CREATE_FILE_EMPTY_CONNECTED_PROJECT})):t===_Z.q.CANNOT_UPGRADE?()=>i(tj.F.enqueue({message:"Can't upgrade",error:!0})):e}return g.lQ})((0,sW.$)({isDraftsFolder:(0,ah.T9)(a),editorType:eM._Y.DESIGN,newFileFrom:iE.f6.FILE_BROWSER_CONNECT_FOLDER_EMPTY_PAGE,contextClicked:"empty_connected_project_page",folderId:a.id})),E=()=>s&&!p&&m(eM.G_.DESIGN)===_Z.q.CANNOT_UPGRADE&&u(eM.G_.DESIGN),b=a.team?.org?.id,v=(0,eI.R$)(l,b),h=(0,_Q.ud)(a)&&!v;return r.createElement("div",{className:"connected_folder_empty_view--connectEmptyStateContainer--YGdYq"},r.createElement("div",{className:"connected_folder_empty_view--connectedEmptyHeading--UNTZ6"},(0,S.tx)("file_browser.folder.what_s_a_connected_project_without_files")),r.createElement("div",{className:"connected_folder_empty_view--creationButtonsContainer--vedbb"},r.createElement(_3,{hideDisabledTooltip:E(),isDisabled:E(),onClick:f,showRequestSentTag:E(),showRequestTag:s&&!p&&m(eM.G_.DESIGN)===_Z.q.CAN_UPGRADE&&_(eM.G_.DESIGN)!==_Z.J.AUTO_PATHWAY&&!u(eM.G_.DESIGN),subtitle:(0,S.t)("file_browser.folder.create_a_file_in_any_figma_product"),title:(0,S.t)("file_browser.folder.start_from_scratch")}),h&&r.createElement(_3,{title:(0,S.t)("file_browser.folder.use_existing_work"),onClick:()=>{a&&(i(ta.gN(a.id)),i((0,_X.L)()))},subtitle:(0,S.t)("file_browser.folder.import_images_sketch_files_and_pdfs")})),r.createElement("div",{className:_1},r.createElement(_Y.l,{className:"connected_folder_empty_view--libraryIcon--jFzUk"}),r.createElement("div",null,(0,S.tx)("file_browser.folder.the_host_team_can_add_libraries",{hostPlanName:r.createElement("span",{className:"connected_folder_empty_view--bold--6ZKfX"},o),learnMoreLink:r.createElement("a",{className:"connected_folder_empty_view--learnMore--4py5l modal--blueLink--9GcJu blue_link--blueLink--9rlnd",href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects#h_01JMJDKJFD68CH88F663KG08AJ",target:"_blank"},t||(0,S.tx)("resource_connection.request_modal.learn_more"))}))))}function _3(e){let t=e.isDisabled,a=e.onClick,n=r.useRef(null),o=r.useCallback(e=>{a(e),n.current?.blur()},[a]);return r.createElement("button",{className:$()("connected_folder_empty_view--creationButton--CQHPo",t&&"connected_folder_empty_view--disabled--eER6x"),ref:n,"data-testid":"connect_file_browser_create_file_button",tabIndex:0,disabled:t,onClick:t?void 0:o,"data-tooltip":e.isDisabled&&!e.hideDisabledTooltip?(0,S.t)("file_browser.creation_buttons.disabled_by_organization"):void 0,"data-tooltip-type":aJ.Ib.TEXT},r.createElement("div",{className:"connected_folder_empty_view--creationIcon--ieYan"},r.createElement(oP.e,null)),r.createElement("div",{className:"connected_folder_empty_view--productNameContainer--w-3vG"},r.createElement("span",{className:"connected_folder_empty_view--productName--19C6G"},e.title),r.createElement("span",{className:_1},e.subtitle)),e.showRequestTag&&r.createElement(aK.Ex,{className:_4,text:(0,S.t)("upgrades.request"),color:aK.zE.DEFAULT_TRANSLUCENT}),e.showRequestSentTag&&r.createElement(aK.Ex,{className:_4,text:(0,S.t)("upgrades.request_sent"),color:aK.zE.DEFAULT_TRANSLUCENT}))}let _5={open:!0,openNewTab:!0,restoreFromVersion:!0,share:!0,copyLink:!0,rename:!0,duplicate:!0,delete:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToFolder:!0,pinToWorkspace:!0};function _8(e){let t=(0,n.wA)(),a=(0,_.Rs)(eK.CH9,{folderId:e.folderId}),o=r.useMemo(()=>"loaded"===a.status?(a.data.project?.pinnedFiles||[]).filter(e=>!!e.file):[],[a]);r.useEffect(()=>{t(_E.MR({folderId:e.folderId,fileKeys:o.map(e=>e.file.key)}))},[o,t,e.folderId]);let l=r.useCallback(()=>{t(tQ.an())},[t]);return 0!==o.length?r.createElement(r.Fragment,null,r.createElement("div",{className:"folder_page_view--pinnedHeader--YJufT",onMouseDown:l},r.createElement(R.E,{fontSize:13,color:"secondary"},(0,S.tx)("file_browser.folder.pinned"))),r.createElement(_b,{pinnedFiles:o,folderId:e.folderId,tileActions:e.tileActions})):null}function _6({files:e,filesByRepoId:t,folderId:a,hasBanner:o,isEditingLocked:l,lgFolder:i,repos:s,team:c,activeProjectConnection:d,isConnectEnabledForProjectPlan:m,infiniteScrollOptions:u}){let _=(0,J.Pc)(),p=(0,ex.R)(c?.id),f=(0,ex.jn)(),g=(0,n.d4)(e=>_7(a,e.tileSortFilterStateByView)),b=(0,n.d4)(e=>e.selectedBranchKeyByRepoId),v=(0,eN.vt)(c?.id),h=!!i&&(0,sU.f3)(i),w=h&&!l,y=w?"":(0,S.t)("file_browser.folder.no_files_yet"),{shouldShowTemplatesBar:T,hideTemplatesBar:I}=function({folderId:e,hideTemplatesUserFlag:t,isShowingLockedRedesign:a,additionalVisibilityRequirements:o=!0}){var l;let i=(0,n.wA)(),s=(0,J.TA)(),{data:c}=(0,sU.nt)(e),d=!!c&&_U.every(e=>(0,sU.d6)(c,e)),m=(0,n.d4)(eB.yK),u=(0,n.d4)(e=>e.userFlags[t]),_=(l={component:"useTemplatesBarVisibility"},(0,eY.FR)(l));return{shouldShowTemplatesBar:!E.Ay.mobile&&d&&!m&&!u&&!a&&_&&o,hideTemplatesBar:(0,r.useCallback)(()=>{i(eL.b({[t]:!0})),(0,V.Cu)({userId:s,opening:!1},"topbar_recommended_templates_toggled")},[s,i,t])}}({folderId:a,hideTemplatesUserFlag:"hide_recommended_templates_in_projects",isShowingLockedRedesign:v||f&&p,additionalVisibilityRequirements:!o}),x=[...(0,r.useMemo)(()=>e.map(e=>(0,t1.fA)(e)),[e]),...s.filter(e=>!e.trashed_at).map(e=>({type:t1.nb.REPO,repo:e,branches:t[e.id],selectedBranchKey:b[e.id]||""}))];return r.createElement(dV.B,{onShouldFetchNextPage:u.onShouldFetchNextPage,isFetchingNextPage:u.isFetchingNextPage},T&&r.createElement(_j,{folderId:a,newFileFrom:iE.f6.FILE_BROWSER_TOPBAR_FOLDER,onClose:I}),r.createElement(_8,{folderId:a,repos:s,tileActions:_5}),r.createElement(mE,{newFileTile:w,tiles:x,tileActions:_5,sortFilterOptions:g,emptyStateText:y,emptyStateContent:(()=>{if(0===x.length&&d&&h&&m)return r.createElement(_2,{lgFolder:i,hostPlanName:d.hostPlanName,user:_})})(),isFolder:!0,isEligbileForProTeamLockedRevampUI:p}))}let _7=(0,dD.xx)(ah.ZN);var _9=a(892419),pe=a(175393),pt=a(190500);let pa="CONNECTED_PROJECTS_PROJECT_PAGE_ONBOARDING_KEY";function pr({resourceConnection:e}){let t=r.createElement(sS.N,{href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects",newTab:!0},(0,S.tx)("resource_connection.onboarding.connected_projects_capitalized")),a=(0,S.tx)("resource_connection.onboarding.connected_projects_are_just_like_normal_projects",{hostPlanName:e.hostPlanName,connectedProjects:t,connectedPlanName:e.connectedPlanName});return r.createElement(pt.b,{description:a,title:(0,S.tx)("resource_connection.onboarding.projects_are_better_together"),trackingContext:"Connected Projects Project Page Onboarding Modal",onboardingKey:pa,arrowPosition:pe.F_.BOTTOM})}var pn=a(465233),po=a(335744),pl=a(190597),pi=a(493300),ps=a(930602);function pc(e){let t=(0,n.wA)(),a=r.useRef(null),o=(0,n.d4)(({dropdownShown:e})=>e),l=(0,n.d4)(t=>(0,ah.oq)(e.folder.id,t))??null,i=(0,Z.Q)({currentOrgId:l,currentTeamId:null}),s=r.useMemo(()=>{if("loaded"===i.status)return(0,H.T0)(i.data,e.folder.id)},[i,e.folder.id]);if("loaded"!==i.status)return r.createElement("div",{className:k.s.flex.itemsCenter.colorIcon.$},r.createElement(ei.B,{svg:pi.A}));let c=(0,H.gV)(i.data,l),d=e.dropdownKey&&o&&o.type===e.dropdownKey&&o.data&&o.data.targetRect,m=a.current&&o?.data?.targetRef===a.current&&o?.type===nD.jU,u=a.current,_=[];return e.folder.canRead&&_.push(r.createElement(o5.c$,{key:"share",children:(0,S.tx)("file_browser.folder.share"),onClick:e.onShareClick})),_.push(r.createElement(o5.c$,{key:"add-to-favorites-section",children:r.createElement("div",{className:k.s.flex.justifyBetween.itemsCenter.w150.$},(0,S.tx)("favorited_resources.add_to_sidebar"),r.createElement(ei.B,{svg:ps.A})),onClick:r=>{r.stopPropagation(),a.current&&t(eR.j7({type:nD.jU,data:{targetRect:u.getBoundingClientRect(),targetRef:u,resourceId:e.folder.id}}))}})),r.createElement("span",null,r.createElement(nd.E,{className:$()(k.s.flex.itemsCenter.colorIcon.$,pl.HM),ref:a,onClick:a=>{e.dropdownKey&&u&&t(eR.j7({type:e.dropdownKey,data:{targetRect:u?.getBoundingClientRect()}}))}},r.createElement(tM.J,null)),d&&r.createElement(po.Cf,{targetRect:o.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},_),m&&r.createElement(pn.t,{setFavorite:e.setFavorite,resourceId:e.folder.id,resourceType:eM.bk.FOLDER,favoriteId:s?.id,orgId:l,sections:(0,et.oA)(i.data?.currentUser?.userSidebarSections)??[],customSectionOrdering:i.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],userHasMaxFavorites:c}))}var pd=a(511783),pm=a(590318),pu=a(705693),p_=a(654793),pp=a(644722),pf=a(111777),pg=a(18904);function pE({lgFolder:e,currentOrgId:t}){return!e.canEdit&&!!e.plan?.isMember&&!e.team?.canAdmin&&null!==t}var pb=a(549491);function pv({folder:e,lgFolder:t,team:a}){let o=(0,n.wA)(),l=(0,n.d4)(e=>"folder"===e.selectedView.view&&e.selectedView.shouldShowRenameModal||!1),i=function(){let e=(0,eN.vt)(),t=(0,ex.jn)();return e||t}(),s=function(){let e=(0,n.Pj)();return(0,r.useCallback)(async t=>{try{await dn.Ay.post(`/api/folders/${t}/claim`),e.dispatch(_E.qp({folderId:t})),(0,ah.qF)(t)||e.dispatch((0,z.jl)({folderId:t,loadedFolders:{}}))}catch(t){e.dispatch(rP.s.error(t.message||(0,S.t)("file_browser.file_browser_actions.claim_team_error")))}},[e])}(),c=r.useCallback(()=>s(t.id),[s,t.id]),d=(0,ez.H)({useCurrentPlan:!0}),u=function(e){let t=(0,n.wA)(),a=e.canEdit;return(0,r.useCallback)(()=>{e.name&&a&&(t(_E.WC()),t(tf.to({type:(0,pg.y)(),data:{folder:e}})))},[t,e,a])}(t);(0,m.h)(()=>{l&&u()});let _=(0,G.fn)()===G.ih.CONTROL,p=(0,eD.FC)(),f=(0,n.d4)(e=>e.currentUserOrgId),g=(0,n.d4)(e=>e.teamRoleRequests),E=t.team?.org?.id,b=t.team?.id,v=pE({lgFolder:t,currentOrgId:f}),h=function({lgFolder:e}){let t=eC({project:e}),a=(0,tW.R)(),r=(0,n.d4)(e=>e.currentUserOrgId);return e.canEdit&&!e.isEditingLockedForUser&&t&&(!a||!pE({lgFolder:e,currentOrgId:r}))}({lgFolder:t}),w=()=>{o(tf.to({type:pf.W,data:{folderId:t.id}}))},y=t.canRead,T=r.useMemo(()=>{if(v&&g&&a&&g[a.id]&&g[a.id].status===p_.c.PENDING)return g[a.id].id},[v,g,a]);r.useEffect(()=>{v&&f&&o((0,pu.Rw)())},[v,o,f]);let I=(0,tZ.jm)(E,b),x=i?(0,S.t)("locked_team.label.tooltip"):void 0,N=i?aJ.Ib.TEXT:void 0,C=(t,a,r)=>{let n={folder:e,entrypoint:"folder_page_view",sectionId:r,favoriteId:a};t?o(eP.Mv(n)):o(eP.jv(n))},k=(0,ah.c8)(t.id,t.teamId,p),R=(0,rc.MF)({label:rc.A5.FolderPageViewHeader.canClaim,oldValue:k,newValue:r5.Qw.useMemoizedLoaded(!t.ownerRole&&t.team?.canAdmin),enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_6),contextArgs:{folderId:t.id,folderTeamId:t.team?.id}}).unwrapOr(!1),A=function(e){let t=(0,mP.a)(e.id),a=e.canRead,n=e.team?.org?.id,o=(0,r.useMemo)(()=>t({folder:{...e,orgId:n??null},shouldShowJoinButton:!1}),[t,e,n]);return(0,r.useMemo)(()=>{if(a&&0!==o.length)return{kind:oS.A.CUSTOM,key:oB.DROPDOWN,element:r.createElement(oq,{dataOnboardingKey:__,buttonAriaLabel:(0,S.t)("file_browser.folder.page_header_dropdown_label"),dropdownKey:`folder-${e.id}`,dropdownOptions:o})}},[a,o,e.id])}(t),O=t?.activeProjectResourceConnections?.[0];return r.createElement(D.tH,{boundaryKey:"FolderPageViewHeader",fallback:D.H4.NONE_I_KNOW_WHAT_IM_DOING,severity:mX.DZ.Critical,sentryTags:{area:B.e.MONETIZATION_EXPANSION}},r.createElement(oA,{title:t.name,badge:d&&O?r.createElement(aI.W,{hostPlanName:O?.hostPlanName,connectedPlanName:O?.connectedPlanName,large:!0,dataOnboardingKey:pa}):void 0,rightSideActions:(()=>{let e=[];if(R&&e.push({kind:oS.A.CUSTOM,key:oB.CLAIM,element:r.createElement(rI.c,{variant:"secondary",onClick:c},(0,S.t)("file_browser.folder.join_as_owner"))}),h&&e.push({kind:oS.A.CUSTOM,key:oB.NEW_RESOURCE,showOnMobile:!0,element:r.createElement(pb.FolderPageViewOmnicreateDropdown,{lgFolder:t,newFileFrom:iE.f6.FILE_BROWSER_TOPBAR_FOLDER})}),y){let t={kind:oS.A.CUSTOM,key:oB.SHARE,element:r.createElement(rI.c,{variant:"secondary",onClick:w,htmlAttributes:{"data-tooltip-type":N,"data-tooltip":x},disabled:i},(0,S.t)("file_browser.folder.share"))};e.push(t)}v&&e.push({kind:oS.A.CUSTOM,key:oB.REQUEST_TO_EDIT,element:r.createElement(rI.c,{variant:"secondary",onClick:()=>{T?o(pm.lT({requestId:T})):a&&o(tf.to({type:pp.$,data:{team:a,requesterCurrentLevel:m8.e6.VIEWER,source:"FolderPageView"}}))}},void 0!==T?(0,S.t)("file_browser.team.cancel_request"):(0,S.t)("file_browser.team.request_to_edit"))}),e.push({kind:oS.A.CUSTOM,key:oB.SETTINGS,element:r.createElement(rI.Me,{variant:"secondary",size:"lg",onClick:()=>{o(tf.to({type:pd.l,data:{folderId:t.id}}))},"aria-label":(0,S.t)("file_browser.folder_settings_modal.tooltip.settings"),htmlAttributes:{"data-tooltip":(0,S.t)("file_browser.folder_settings_modal.tooltip.settings"),"data-onboarding-key":_c}},r.createElement(_9.P,null))}),_&&I&&e.push({kind:oS.A.CUSTOM,key:oB.FAVORITE,element:r.createElement(oJ.i,{setFavorite:C,favoriteType:eM.bk.FOLDER,resourceId:t.id,orgId:f,teamId:b,size:"lg"})});let n=r.createElement(pc,{dropdownKey:"project-overflow-dropdown",folder:t,onShareClick:w,setFavorite:C});return e.push({kind:oS.A.CUSTOM,key:oB.PROJECT_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:n}),e})(),rightSideOfTitleAction:A}),d&&O?r.createElement(pr,{resourceConnection:O}):r.createElement(r.Fragment,null))}function ph({folderId:e}){let t=(0,_.Rs)(eK.L8O,{projectId:e}),a=(0,eD.FC)(),[l,s]=function(e){let t=!!(0,o.k)().file_browser_paginated_folder_shadow_reads,a=!!(0,o.k)().file_browser_paginated_folder_full_reads,l=(0,z.LK)(e,t||!a),[i,s]=mQ({folderId:e,enabled:t||a}),c=r.useCallback(()=>{a&&!i.isFetchingNextPage&&i.hasNextPage&&s.fetchNextPage()},[i.isFetchingNextPage,i.hasNextPage,s,a]),d=(0,n.d4)(t=>t.tileSortFilterStateByView.folders.byId[e]??t.tileSortFilterStateByView.folders.default),[m]=r.useState("loaded"!==l.status&&"loaded"!==i.status);return(0,rc.MF)({label:rc.A5.FolderPageView.folderFiles,oldValue:l,newValue:i,enableShadowRead:t&&m,comparator:py,contextArgs:{folderId:e,fileTypeFilterValue:d.filters.fileType,sortKey:d.sort.key,sortDir:d.sort.dir===lH.ue.ASC?"asc":"desc"}}),[a?i:l,c]}(e),c=l.data?.folder,d=t.data?.project||null,m=(0,ez.H)({planParentId:d?.plan?.key.parentId||null,planType:d?.plan?.key.type||null,useCurrentPlan:!1}),u=(0,n.wA)(),p=(0,_.Rs)(eK.Udv,{id:e}),f=(0,eA._6)(),g="loaded"===p.status&&!p.data.project?.hasPermission||d?.trashedAt,E=d?.trashedAt,b=d?.isAbandonedDrafts&&d?.currentPlanUser?.permission===eM.Xn.ADMIN;r.useLayoutEffect(()=>{if(g||E){if(d?.team){let e=d.team.id;u(eR.$T({view:"team",teamId:e}))}else u(eR.$T({view:"recentsAndSharing"}))}b&&d.plan&&d.plan.key.parentId&&(d.plan.tier===eM.Ag.PRO?u(eR.$T({view:"abandonedDraftFiles",abandonedDraftFolderId:d.id,planId:d.plan.key.parentId,adminPlanType:ib.O.TEAM})):d.plan.key.type===eM.OL.ORG&&u(eR.$T({view:"abandonedDraftFiles",abandonedDraftFolderId:d.id,planId:d.plan.key.parentId,adminPlanType:ib.O.ORG})))},[u,p,d,g,E,b]);let v=a.teams[d?.teamId||""]||null;r.useEffect(()=>{d&&!d.inviteOnlyAt&&d.teamId&&!v&&u(_o.Jt({teamId:d.teamId}))},[u,d,v]);let h=(d?.canConnect??!1)&&(0,o.k)().fc_initial_onboarding_enabled,w=d?.activeProjectResourceConnections?.[0],y=!!v&&!!d?.teamId,T=uT({resource:v,resourceType:eM.vt.TEAM,teamId:d?.teamId,shadowReadLabel:rc.A5.FolderPageView.hasBanner}).unwrapOr(!1)&&y,I=(0,Y.dq)(),x=(0,dD.xx)(ah.ZN),N=(0,n.d4)(t=>x(e,t.tileSortFilterStateByView)),C=!c||!d||"loaded"!==l.status||"loaded"!==t.status;if((0,i.kF)("Folder"),(0,i.WX)({markName:"MainBodyContent",isLoaded:!C,contextArgs:{numFiles:l.transform(e=>e.files.length).unwrapOr(null),isPaginated:!!(0,o.k)().file_browser_paginated_folder_full_reads}}),C)return r.createElement("div",{className:"folder_page_view--loading--ZkDG0"},r.createElement(en.kt,null));let S={view:"project",folderId:e,canEdit:d.canEdit,userSpace:I?aX.qo.ORG:aX.qo.PERSONAL},R=r.createElement("div",{className:"x78zum5 x167g77z x6s0dn4"},r.createElement(nA.ye,{config:N.tileSortFilterConfig}),r.createElement(nA.mc,{dispatch:u,options:N,selectedView:f}),r.createElement(nA.$c,{initialViewMode:N.tileSortFilterConfig.viewMode,onViewModeChange:e=>{(0,np.trackEvent)("file view toggle",{viewType:e===lH.XU.GRID?"grid":"list"}),u(eR.JF({selectedView:f,config:{...N.tileSortFilterConfig,viewMode:e}}))}}));return(0,aq.T8)(r.createElement(oO.r,{content:r.createElement("div",{className:k.s.flex.flexColumn.$},r.createElement(_6,{activeProjectConnection:w?{id:w.id,hostPlanName:w.hostPlanName}:void 0,files:l.data.files,filesByRepoId:l.data.filesByRepoId,folderId:e,hasBanner:T,infiniteScrollOptions:{onShouldFetchNextPage:s,isFetchingNextPage:"isFetchingNextPage"in l&&l.isFetchingNextPage},isConnectEnabledForProjectPlan:m,isEditingLocked:d.isEditingLockedForUser,lgFolder:d,repos:l.data.repos,team:v}),r.createElement(dt.cx,null)),banner:v&&T?r.createElement(_g,{teamId:v.id}):void 0,toolbar:r.createElement(r.Fragment,null,r.createElement(pv,{folder:c,team:v,lgFolder:d}),m&&r.createElement(_f,{folder:d}),h&&r.createElement(_m,{folder:d})),viewbar:r.createElement(nA.g2,{leftSide:null,rightSide:R})}),aX.e0.FILE_BROWSER,S)}let pw=(0,rc.BG)({strictRecords:!0,strictLists:!1,ignore:e=>"previewFiles"===e[0]||"folder"===e[0]||e.includes("realtime_token")||e.includes("thumbnail_url")||e.includes("checkpoint_id")||e.includes("checkpoint_key")});function py(e,t){let a=pw(e,t),r=new Set(e.files.map(e=>e.key)),n=t.files.filter(e=>!r.has(e.key)).map(e=>e.key);return n.length>0&&a.push({path:["files"],oldValue:[],newValue:n,severity:"high"}),a}function pT(){let e;let t=(0,n.d4)(e=>e.currentTeamId),a=(0,eA._6)(),l=(0,_.Rs)(eK.RRC,{teamId:t??""},{enabled:!!t});if(!(0,o.k)().limited_plan_spaces)return null;if("loaded"!==l.status)e=r.createElement(en.qc,null);else{let n=("loaded"===l.data.currentUser.status&&l.data.currentUser.data.teamProjectRoles||[]).filter(e=>!!e.project).map(e=>{let t=e.project,a=t.activeProjectResourceConnections?.[0]??null;return{id:t.id,name:t.name,description:t.description,path:t.path,team_id:t.teamId,is_invite_only:!!t.inviteOnlyAt,is_view_only:!!t.viewOnlyAt,deleted_at:t.deletedAt?t.deletedAt.toISOString():null,updated_at:t.updatedAt.toISOString(),created_at:t.createdAt.toISOString(),touched_at:t.lastModifiedAt,shared_at:e.sharedWithYouFolder?.sharedAt.toISOString(),shared_by_user:e.sharedWithYouFolder?.sharedByUser,is_connected_project:!!a,resource_connection:a?{hostPlanName:a.hostPlanName,connectedPlanName:a.connectedPlanName}:null}});e=r.createElement(r.Fragment,null,r.createElement(mV,{viewId:`limitedTeam-${t}`,folderList:n,selectedView:a,isSharerInfoIncluded:!0}))}return(0,aq.T8)(r.createElement(oO.r,{content:r.createElement(r.Fragment,null,e),viewbar:r.createElement("div",{className:"limited_space_team_projects_page_view--viewbar--YMqKQ"},r.createElement("div",{className:"limited_space_team_projects_page_view--viewbarHeading--mTm27"},(0,S.tx)("file_browser.limited_space_team_projects.heading")))}),aX.e0.FILE_BROWSER,{view:"limitedSpaceTeamProjects"})}function pI({orgId:e}){let t=(0,n.wA)(),a=(0,eY.Xd)("ViewLibrariesAction");return(0,eY.Kd)(a).data?r.createElement(oS.K,{action:{kind:oS.A.BUTTON,key:oB.VIEW_LIBRARIES,displayText:(0,S.t)("org_view.view_libraries"),onClick:()=>{t(eR.$T({view:"org",orgId:e,orgViewTab:th.X.LIBRARIES}))}}}):null}function px({canCreateTeam:e,isEnterpriseOrgDirectoryEnabled:t}){let a=(0,n.wA)();return t||!e?null:r.createElement(oS.K,{action:{kind:oS.A.CUSTOM,key:oB.NEW_TEAM,element:r.createElement(oL.$n,{"aria-label":(0,S.t)("license_group_view.toolbar.new_team_button_aria_label"),variant:"primary",onClick:()=>{a(tf.to({type:oT.Uc,data:{}}))},iconPrefix:r.createElement(oP.e,null)},(0,S.t)("license_group_view.toolbar.new_team_button"))}})}function pN({orgId:e}){let t=(0,eB.LM)(e),{canCreateTeam:a,cannotCreateTeamReason:n}=(0,X.LM)({id:e},null);return"loaded"!==t.status||n===X.z4.LG_LOADING?null:r.createElement(r.Fragment,null,r.createElement(px,{canCreateTeam:a,isEnterpriseOrgDirectoryEnabled:t.data}),r.createElement(pI,{orgId:e,key:"org-library"}))}var pC=a(524637),pk=a(861119);function pS(){let e=(0,n.wA)(),t=(0,Y.dq)(),a=uh((0,r8.R)(e=>({...(0,rm.getPermissionsState)(e),selectedView:e.selectedView,userFlags:e.userFlags,userTeamFlags:e.userTeamFlags,isFreeUser:e.isFreeUser,userAnalyticsData:e.userAnalyticsData})),e,rc.A5.OrgDelinquencyBanner.bannerContent).unwrapOr(null);if(!a)return r.createElement("div",null);let o=uI({resourceType:"org",orgId:t},a),l=a.severity===ut.c.WARN?ua:"",i=`${uu} ${l}`;return r.createElement("div",{className:i},r.createElement(uk,{...a,tracking:o}))}var pR=a(596441),pA=a(753590);function pO(){let e=(0,ez.H)({useCurrentPlan:!0}),t=(0,eY.tJ)("OrgConnectedProjectsContent"),a=t.unwrapOr(null),n=a?.connectionCount??0,o=(0,_.Rs)(eK.ifD,{planType:a?.key.type??null,planId:a?.key.parentId??""},{enabled:e&&null!==a}),l=r.useMemo(()=>"loaded"!==o.status?[]:((0,et.oA)(o.data?.planConnectedProjectsForUser)||[]).map(e=>{let t=(0,et.oA)(e.project);return null!=t?(0,t5.W2)(t):null}).filter(e=>null!==e),[o]);return e?"loaded"!==t.status||"loaded"!==o.status?r.createElement("div",{className:k.s.flex.wFull.hFull.alignCenter.justifyCenter.$},r.createElement(oG.k,{htmlAttributes:{"data-testid":"loading-spinner"}})):0===n?r.createElement("div",{className:"org_connected_projects_view--emptyContent---1eNq"},r.createElement(pR.K,{entryPoint:_l.wR.CONNECTED_PROJECT_ORG_PAGE})):r.createElement(r.Fragment,null,r.createElement(pA.A,null),r.createElement("div",{className:"org_connected_projects_view--tabContentContainer--qFQ6s"},r.createElement("div",{className:k.s.wFull.$},r.createElement(mO.m,{folderList:l,dataOnboardingKeyIndex:void 0,onChangeSortOptions:g.lQ,viewType:lH.XU.GRID,isSharerInfoIncluded:!1})))):null}var pP=a(48908),pL=a(577888),pF=a(172516);let pD="org_meta_content--container--b5Iq3";function pM({org:e}){return r.createElement("div",{className:k.s.flex.flexColumn.rowGap16.$},r.createElement(aL.Ro,{entity:e,size:36}),r.createElement(R.E,{fontWeight:"medium",fontSize:13},e.name))}function pB({handle:e}){let t=(0,n.wA)();return r.createElement("a",{href:new pL.x({profileHandle:e}).href,className:pF.Be,onClick:a=>{a.metaKey||(a.preventDefault(),t(eR.$T({view:"communityHub",subView:"handle",handle:e})))}},r.createElement(R.E,{fontSize:11},"@",e))}function pU({orgId:e}){let t=(0,n.d4)(t=>(0,ef.Xy)(t.orgUsersByOrgId[e]).map(e=>e.user)),a=(0,n.wA)();return r.createElement(ld,{label:(0,S.t)("org_home_view_meta.admins"),members:t,onMemberClick:(e,t)=>{a(eR.$T({view:"user",userId:t.id,userViewTab:lm.o.INTERNAL_PROFILE}))},canLeave:!1})}function p$({org:e,orgStats:t}){let a=t?r.createElement(R.E,{fontSize:11,color:"secondary"},(0,S.tx)("org_home_view_meta.member_count",{memberCount:t.memberCount.data}),r.createElement("span",null,"\xa0\xb7\xa0"),"workspaceCount"in t?(0,S.tx)("org_home_view_meta.workspace_count",{workspaceCount:t.workspaceCount.data}):(0,S.tx)("org_home_view_meta.team_count",{teamCount:t.discoverableTeamCount.data})):r.createElement(pP.Wi,{className:k.s.mb4.$,animationType:pP.JR.SHIMMER});return r.createElement("div",{className:pD},r.createElement(pM,{org:e}),r.createElement("span",{className:k.s.mt4.$},a),e.community_profile_handle?r.createElement("span",{className:k.s.mt2.$},r.createElement(pB,{handle:e.community_profile_handle})):null,r.createElement("span",{className:k.s.mt32.$},r.createElement(pU,{orgId:e.id})))}function pj({org:e}){let t=(0,_.Rs)(eK.nYs,{orgId:e.id});return r.createElement(p$,{orgStats:t.data?.org??null,org:e})}function pW({org:e}){let t=(0,_.Rs)(eK.kei,{orgId:e.id});return r.createElement(p$,{orgStats:t.data?.org??null,org:e})}function pG({org:e}){return r.createElement("div",{className:pD},r.createElement(pM,{org:e}),e.community_profile_handle?r.createElement("span",{className:k.s.mt4.$},r.createElement(pB,{handle:e.community_profile_handle})):null,r.createElement("span",{className:k.s.mt4.$},r.createElement(R.E,{fontSize:11,color:"secondary"},(0,S.tx)("payments_modal.guest_permission_disclaimer")," ",r.createElement("a",{className:pF.Be,href:"https://help.figma.com/hc/articles/360039957374",target:"_blank",rel:"noopener"},(0,S.tx)("org_home_view_meta.learn_more")))))}var pV=a(785992),pH=a(897198);let pz=[th.X.HOME,th.X.YOUR_TEAMS,th.X.CONNECTED_PROJECTS,th.X.PLUGINS,th.X.WIDGETS],pK=e=>{switch(e){case th.X.HOME:return(0,S.t)("org_view.overview");case th.X.YOUR_TEAMS:return(0,S.t)("org_view.your_teams");case th.X.PLUGINS:return(0,S.t)("org_view.plugins");case th.X.WIDGETS:return(0,S.t)("org_view.widgets");case th.X.CONNECTED_PROJECTS:return(0,S.t)("org_view.connected_projects");default:return null}};function pY(e){let t=(0,n.wA)(),a=(0,ez.H)({useCurrentPlan:!0}),o=(0,eY.b_)({migrationGroup:pH.L.GROUP_5,component:"OrgPageViewBar"}),l={[th.X.HOME]:!0,[th.X.WIDGETS]:!0,[th.X.PLUGINS]:!0,[th.X.YOUR_TEAMS]:!0,[th.X.LIBRARIES]:!1,[th.X.FONTS]:!1,[th.X.CONNECTED_PROJECTS]:a},i=e=>{t(eR.$T({view:"org",orgId:o??"",orgViewTab:e}))},[s,c,d]=lo.t.useManagedTabs(l,e.selectedTab,e=>{i(e)}),m=pz.map(e=>r.createElement(lo.t.Tab,{...s[e],key:e},pK(e))),u=r.createElement(ee.J,null,r.createElement(lo.t.TabStrip,{manager:d},m));return r.createElement(nA.g2,{leftSide:u,rightSide:[]})}var pq=a(301869),pJ=a(405531),pX=a(192063);function pQ({workspace:e,targetRect:t,isDropdownOpen:a}){let o=o3(),l=(0,Y.sZ)(),i=(0,n.wA)();if(!l||!a||!t)return null;let s=o({workspace:e,org:l});return r.createElement(ee.J,null,r.createElement(tg.j,{parentRect:t,items:s,dispatch:i,onSelectItem:e=>{e.callback&&e.callback("",null,i)},showPoint:!1,shouldUsePortal:!0}))}var pZ=a(342891),p0=a(103419);function p1(e){let{isSelected:t,isHovered:a}=e,{header:n,footer:o}=r.useMemo(()=>{if(e.queryResult&&"loaded"!==e.queryResult.status)return{header:r.createElement(pP.Qp,{className:"x100vrsf x1vqgdyp"}),footer:r.createElement(pP.Wi,{className:"x1oysuqx",dataTestId:"unassigned-workspace-tile-loading-text"})};let t=e.unassignedTeams||e.queryResult.data;return{header:r.createElement(aL.md,{teams:t,size:40,isHovered:a}),footer:(0,S.tx)("org_view.license_group.unassigned_tile.description",{teamCount:t.length})}},[e.queryResult,e.unassignedTeams,a]),l=r.createElement("span",null,"\xa0");return r.createElement(p0.a,{name:(0,S.t)("org_view.license_group.unassigned_tile.name"),headerLeft:n,headerRight:l,footerLeft:o,canView:!0,isCardActive:a||t,isSelected:t,isInItemsView:!0})}function p4(e){let t=(0,ec.md)(og.Fd);return e.unassignedTeams?r.createElement(p1,{isSelected:e.isSelected,isHovered:e.isHovered,unassignedTeams:e.unassignedTeams}):r.createElement(p1,{isSelected:e.isSelected,isHovered:e.isHovered,queryResult:t})}var p2=a(286046),p3=a(956330),p5=a(463117);function p8(e){let t,a;let{workspace:o,isSelected:l,isHovered:i,onChildFocusChange:s}=e,[c,d]=r.useState(!1),m=(0,n.d4)(e=>e.currentUserOrgId),u=(0,p5.aq)(),_=o.colorConfig?.colors??[],p=e.isMainWorkspace?_[0]:void 0,f=(0,ec.md)((0,og.aN)(o.id)),g=(0,p2.Y)(o.id,eM.bk.WORKSPACE,m),E=r.useMemo(()=>"loaded"===g.status&&void 0!==g.favorite,[g]);p&&(p=function(e,t,a){try{let r=(0,n9.H0)(t),n=(0,n9.kx)(r),o=(0,oe.oN)(t,!n,n);return a&&o!==t&&(0,np.trackEvent)("workspace_background_color_adjusted_for_accessibility",{workspace_id:e,original_background_color:t,adjusted_background_color:o}),o}catch(e){console.error(e)}return t}(o.id,p,u()));let b=(0,n.wA)(),v=r.useCallback((e,t,a)=>{if(o){let r={workspace:{id:o.id,name:o.name??"",imgUrl:o.imgUrl},entrypoint:"workspace_tile",sectionId:a,favoriteId:t};e?b(eP.ZW(r)):b(eP.if(r))}},[b,o]);p&&((0,n9.kx)(p)?(t="org_page_view--workspaceTileTitleColorForDarkBackground--m6sFp",a="org_page_view--secondaryTextColorOnDarkBackground--7Ru-V"):(t="org_page_view--workspaceTileTitleColorForLightBackground---zSTU",a="org_page_view--secondaryTextColorOnLightBackground--68byE"));let h=r.createElement(aL.z6,{entity:o,size:40}),w=r.useMemo(()=>void 0!==e.teamCount?(0,S.tx)("org_view.license_group.team_count",{teamCount:e.teamCount}):"loaded"!==f.status?r.createElement(pP.Wi,{className:k.s.w64.$,dataTestId:"workspace-tile-teams-loading-text"}):(0,S.tx)("org_view.license_group.team_count",{teamCount:f.data}),[e.teamCount,f]),y=r.createElement("div",{className:$()(k.s.flex.flexRow.itemsCenter.$,a)},(0,S.tx)("org_view.license_group.member_count",{memberCount:o.memberCount.data??0}),r.createElement("span",null,"\xa0\xb7\xa0"),w),T=r.createElement(p3.H,{setFavorite:v,favoriteType:eM.bk.WORKSPACE,resourceId:o.id,orgId:m}),I=o.orgAccess===eM.bU.SECRET?r.createElement("div",{className:k.s.ml4.$,"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":(0,S.t)("workspace_table.secret_workspace_lock_tooltip"),"data-tooltip-subtext":(0,S.t)("workspace_table.secret_workspace_lock_tooltip_subtext"),"data-tooltip-timeout-delay":500,"data-tooltip-max-width":300},r.createElement(lw.In,{icon:"lock-16"})):null,x=i||l||c||E;return r.createElement(p0.a,{backgroundColor:p,canView:!0,footerLeft:y,handleBlur:()=>{d(!1),s()},handleFocus:()=>{d(!0),s()},headerLeft:h,headerRight:T,isCardActive:x,isInItemsView:!0,isSelected:l,name:r.createElement("span",{className:t},o.name),titleSubtitleRight:I})}function p6(){let e=(0,n.wA)(),t=(0,eD.FC)(),a=(0,Y.dq)(),l=(0,X.Au)(a),{canCreateTeam:s}=(0,X.LM)(a?{id:a}:null,null),c=function(e,{description:t,level:a=pX.$.INFO,start:n=!0,context:o}={}){let l=(0,r.useRef)(pJ.J6.createVital(e,{level:a,description:t,context:o}));return(0,r.useEffect)(()=>{if(e.includes(" "))throw Error(`Vital name cannot include spaces: ${e}`);n&&l.current.start()},[n,e]),l.current}("OrgWorkspacesView.Load"),d=(0,ec.md)(og.wT),{workspaceTeamCounts:m,unassignedTeams:u}=r.useMemo(()=>{let e=(d.data||[]).filter(e=>(0,oh.ox)(e,t));return{workspaceTeamCounts:(0,t6.ZM)(e),unassignedTeams:e.filter(e=>null===e.workspace_id||void 0===e.workspace_id)}},[t,d]),p=(0,_.Rs)(eK.bUn,{orgId:a}),f="loaded"!==d.status,{currentWorkspace:g,otherWorkspaces:E}=r.useMemo(()=>{let e=p.transform(e=>{let t=e.org?.workspaces??[];(0,tl.KQ)(t,"name");let a=t.find(e=>e.id===l.data),r=t.filter(e=>e.id!==a?.id);return(u.length>0||f)&&r.push(oy.O),{currentWorkspace:a,otherWorkspaces:r}});return"loaded"===e.status?e.data:{currentWorkspace:null,otherWorkspaces:[]}},[p,l,u,f]);r.useEffect(()=>{c.addContext({currentWorkspaceId:g?.id,workspaceQuery:l?.data}),"loaded"===p.status&&c.stop()},[g,p,c,l.data]);let b=r.useCallback(()=>{e(tf.to({type:oT.Uc,data:{}}))},[e]),v=!(0,o.k)().all_workspaces_incremental_load_teams,h="loaded"!==p.status||v&&f,w=p.transform(e=>e.org?.workspaces?.length??null).unwrapOr(null);if((0,i.kF)("OrgAllWorkspaces"),(0,i.WX)({markName:"MainBodyContent",isLoaded:!h,contextArgs:{numWorkspaces:w}}),h)return r.createElement(ob.X,{isLoading:!0});let y=g&&r.createElement(r.Fragment,null,r.createElement("div",{className:"x1tudf5h"},r.createElement(R.E,{color:"secondary",fontSize:11},(0,S.tx)("org_view.your_workspace"))),r.createElement(p7,{items:[g],isMainWorkspace:!0,workspaceTeamCounts:m,waitForOrgTeamsToLoad:v,unassignedTeams:u,focusOnLoad:!0}));return r.createElement(r.Fragment,null,y,g&&r.createElement("div",{className:"x1tudf5h"},r.createElement(R.E,{color:"secondary",fontSize:11},(0,S.tx)("org_view.other_workspaces"))),0===E.length?r.createElement(pZ.C,{onCreateTeam:s?b:void 0}):r.createElement(p7,{items:E,isMainWorkspace:!1,workspaceTeamCounts:m,waitForOrgTeamsToLoad:v,unassignedTeams:u,focusOnLoad:!g}))}function p7({items:e,isMainWorkspace:t,waitForOrgTeamsToLoad:a,workspaceTeamCounts:n,unassignedTeams:o,focusOnLoad:l}){let{showing:i,show:s,data:c}=(0,du.BK)("WORKSPACE_CONTEXT_MENU"),d=(0,_a.$)(),m=r.useCallback(e=>e===oy.O?(0,S.t)("org_view.license_group.unassigned_tile.name"):e.name,[]),u=r.useCallback((e,t)=>{d(e===oy.O?null:e.id,t)},[d]),_=r.useCallback((e,t)=>{let a=e[0];a!==oy.O&&s({data:{workspace:a,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1}}})},[s]),p=r.useMemo(()=>({tileBorderRadius:16,nestedFocus:!1,containerStyle:p9.grid,renderTile:(e,l,{isSelected:i,isHovered:s})=>e===oy.O?r.createElement(p4,{isSelected:i,isHovered:s,unassignedTeams:a?o:void 0}):r.createElement(p8,{workspace:e,teamCount:a?n[e.id]??0:void 0,isSelected:i,isHovered:s,isMainWorkspace:t,onChildFocusChange:l})}),[t,o,n,a]);return r.createElement(r.Fragment,null,r.createElement(lG.A,{viewType:lH.XU.GRID,isDraggable:!1,items:e,multiselectDisabled:!0,getAriaLabel:m,gridViewProps:p,handleOpenItem:u,handleContextMenu:_,doNotFocusOnLoad:!l}),i&&r.createElement(pQ,{workspace:c.workspace,isDropdownOpen:i,targetRect:c.targetRect}))}let p9={grid:{paddingTop:"x1p5oq8j",paddingBottom:"x1gan7if",paddingLeft:"x1tudf5h",paddingRight:"x1m2p0i2",paddingInlineStart:null,paddingInlineEnd:null,gridTemplateColumns:"x192fo39",$$css:!0}},fe=(e,t)=>({org:e.orgById[t],isEnterpriseOrgDirectoryEnabled:(0,eB.QT)(e)});function ft(e){let{org:t}=(0,r8.R)(t=>fe(t,e.orgId)),a=(0,n.wA)(),o=(0,eB.LM)(e.orgId),l=(0,eY.Xd)("OrgPageView"),i=(0,eY.Kd)(l),s=(0,eY.sI)(l);r.useEffect(()=>{i.unwrapOr(!1)&&(a(pC.Jt({includeMemberCount:!0,includeTopMembers:!1,includeProjectCount:!0})),a(pk.Pg({orgId:e.orgId})))},[i,e.orgId,a]);let c=null;switch(e.selectedTab){case th.X.WIDGETS:c=r.createElement(pq.x,null);break;case th.X.PLUGINS:c=r.createElement(pV.C,null);break;case th.X.YOUR_TEAMS:c=r.createElement(fa,null);break;case th.X.CONNECTED_PROJECTS:c=r.createElement(pO,null);break;case th.X.HOME:case th.X.FONTS:case th.X.LIBRARIES:c="loading"===o.status?r.createElement(ob.X,{isLoading:!0}):o.data?r.createElement(p6,null):r.createElement(fr,null)}let d=null;s.unwrapOr(!1)?d=r.createElement(pG,{org:t}):"loading"===o.status?d=r.createElement(p$,{orgStats:null,org:t}):o.data?d=r.createElement(pj,{org:t}):o.data||(d=r.createElement(pW,{org:t}));let m=r.createElement(pY,{selectedTab:e.selectedTab});return r.createElement(oO.r,{banner:r.createElement(pS,null),viewbar:m,content:c,metaContent:d})}function fa(){let e=oC({workspaceId:null,onlyJoinedTeams:!0});return r.createElement(ox,{orgTeamsQuery:e,workspaceId:null})}function fr(){let e=oC({workspaceId:null,onlyJoinedTeams:!1});return r.createElement(ox,{orgTeamsQuery:e,workspaceId:null})}function fn(){let e=(0,n.wA)(),t=(0,J.Pc)();return r.createElement(oS.K,{action:{kind:oS.A.BUTTON,key:oB.VIEW_COMMUNITY_PROFILE,onClick:()=>{e(eR.$T({view:"communityHub",subView:"handle",handle:t.community_profile_handle}))},displayText:(0,S.t)("internal_profile.view_community_profile"),styleClass:k.s.colorText.$}})}var fo=a(30575);let fl=(0,ec.eU)(!1);var fi=a(629640),fs=a(696483),fc=a(302941),fd=a(906239),fm=a(733407),fu=a(674316),f_=a(794962);function fp({buttonProps:e,image:t,title:a,author:n}){return r.createElement(nd.E,{className:"home_shelf_resource_tile--resourceTileButton--meEFU",...e},r.createElement("div",{className:"home_shelf_resource_tile--homeShelfResourceTile--1rgji"},r.createElement("div",{className:"home_shelf_resource_tile--homeShelfTileImageContainer--3fiyP"},t),r.createElement("div",{className:"home_shelf_resource_tile--title--O4Tfl"},a)),n)}function ff(){return r.createElement(fp,{buttonProps:{disabled:!0},image:r.createElement(pP.Qp,{className:"home_shelf_resource_tile--loadingImage--I9sFG home_shelf_resource_tile--loadingColor--AlSS5",animationType:pP.JR.NO_SHIMMER}),title:r.createElement(pP.Wi,{className:"home_shelf_resource_tile--loadingTitleText--8Q0Xx home_shelf_resource_tile--title--O4Tfl home_shelf_resource_tile--loadingColor--AlSS5",animationType:pP.JR.NO_SHIMMER}),author:r.createElement(pP.Wi,{className:"home_shelf_resource_tile--loadingAuthor--yKCwm home_shelf_resource_tile--author--m5FxW utilities--bodyMedium--7-YGK home_shelf_resource_tile--loadingColor--AlSS5",animationType:pP.JR.NO_SHIMMER})})}function fg({resource:e,isSelected:t,onFocus:a}){let o=(0,n.wA)(),l=(0,cE.Lj)(e),i=(0,r.useCallback)(()=>{(0,f_.FM)(o,e),(0,nI.kg)(e.resource_type,e.id)},[o,e]),s=r.useRef(null);r.useEffect(()=>{t&&s.current?.focus()},[t]);let c=(0,r.useMemo)(()=>({onClick:i,"aria-label":e.name,"aria-current":t,htmlAttributes:{onFocus:a},ref:s}),[i,t,e.name,a,s]);return r.createElement(fp,{buttonProps:c,image:r.createElement(r.Fragment,null,r.createElement(fm.i,{resource:e,isSelected:t}),r.createElement("div",{className:"home_shelf_resource_tile--tileEditorIcon--QE-1U"},r.createElement(fu.dn,{editorType:e.editor_types[0]}))),title:r.createElement("div",{className:"home_shelf_resource_tile--titleText--NFhch utilities--bodyMediumStrong--1R5cZ"},e.name),author:r.createElement("div",{className:"home_shelf_resource_tile--subtitle--VMBH1 utilities--bodyMedium--7-YGK"},r.createElement("span",{className:"home_shelf_resource_tile--author--m5FxW utilities--bodyMedium--7-YGK"},(0,S.tx)("community.resource_tiles.by_author",{author:l})),"\xa0\xa0\xb7\xa0\xa0",r.createElement("div",{className:"home_shelf_resource_tile--metrics--riQEm"},r.createElement(fd.cz,{currentUserLiked:!1,likeCount:e.like_count,disableFontStyling:!0}),r.createElement(fd.i8,{usageCount:(0,c3.mk)(e),disableFontStyling:!0})))})}let fE=211/244;var fb=a(223926),fv=a.n(fb),fh=a(534497),fw=a(792557);function fy(){let e=(0,nw.Om)(),t=(0,nw.tv)(),a=e&&t?new nw.au({...e,tab:ny.N$.COMMUNITY},t).href:"";return r.createElement(fh._,{href:a,onClick:r=>{(0,nI.q5)(),r.preventDefault(),a?d.Ay.push(a):(0,mX.$D)(B.e.COMMUNITY,Error("NavigationTile: communityTabLink is empty"),{extra:{sharedRouteParams:e,sharedSearchParams:t}})},className:"xh8yej3 x5yr21d x78zum5 xdt5ytf x6s0dn4 x1nhvcw1 x1v2ro7d x1ypdohk xw4t3mb x1ocegsa xl61zd4 x1nl1fmu xln84v9 xgf1b7j x85jtft","aria-label":(0,S.t)("community.home_shelf.see_more_on_community")},r.createElement("div",{className:"x1lliihq x1n2onr6 x1vjfegm xh8yej3 x1mxnbhz x176lpz5 xb3r6kr xdr6sbx x1klh5xi"},r.createElement(so.oW,{className:"x1vjfegm xxcbz4w x17muf8i x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,rf.ck)("2f1ddf99a93705a145b3e9258c29994c2bcc3296"),alt:""}),r.createElement(so.oW,{className:"xhtitgo xzc2ltc xjndpiq x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,rf.ck)("3b5e7024cc8ec5912d46ce4c4f555f79de8afa22"),alt:""}),r.createElement(so.oW,{className:"xzkaem6 x156by65 x1366x3a x10l6tqk xm6i5cn x2e2xj7 x19y5rnk xbngzmg xgk9eko",src:(0,rf.ck)("1922e9623fd798bcb563e1f4e9ae105b54d904b4"),alt:""}),r.createElement(ei.B,{svg:fw.A,className:"x10l6tqk xoegz02 xh8yej3 xqmqy1e xb9t1mx",svgWidth:"100%",svgHeight:"auto"})),r.createElement("span",{...n_.xk(fT.linkText)},(0,S.t)("community.home_shelf.see_more_on_community")))}let fT={linkText:{...nu.g.textBodyMediumStrong,width:"xh8yej3",textAlign:"xdpxx8g",color:"x1quhyk7",$$css:!0}},fI=[eM._Y.DESIGN,eM._Y.WHITEBOARD,eM._Y.SLIDES];function fx(){var e,t;let a=(0,n.wA)(),[o,l]=r.useState([]),[{data:i,status:s,errors:c}]=(0,p.IT)(i7.a.getHomeShelfContent({seenResourceIds:o})),d=function(){let e=(0,r.useRef)(null),[t,a]=(0,r.useState)(0),[n,o]=(0,r.useState)(0),[l,i]=(0,r.useState)(0),s=(0,r.useCallback)(e=>{let t=e-48,r=Math.floor((t-24-244*fE)/268);if(r<1){a(0),o(0),i(0);return}let n=Math.floor((t-24-24*(r=Math.min(r,16)))/(r+fE)),l=Math.floor(n*r+24*(r-1)),s=Math.floor(n*fE);a(r),o(l),i(s)},[]);return(0,r.useLayoutEffect)(()=>{let t=e.current;if(!t)return;s(t.clientWidth);let a=new ResizeObserver(e=>{s(e[0]?.target.clientWidth??0)});return a.observe(e.current),()=>a.disconnect()},[e,s]),(0,r.useMemo)(()=>({tileRowWidth:n,navigationSectionWidth:l,numberOfTiles:t,sizeRef:e}),[n,l,t,e])}(),m=(e=i?.data.meta.recommended_resources??[],t=d.numberOfTiles,(0,r.useMemo)(()=>{let a=[se.vt.DESIGN_TEMPLATE,se.vt.SLIDE_TEMPLATE,se.vt.FIGJAM_TEMPLATE],r=fv()(e,e=>e.resource_type),n=[];for(let o=0;o<e.length+a.length&&n.length!==t&&0!==a.length;o++){let e=(r[a[o%a.length]]??[]).shift();e?n.push(e):a.splice(o%a.length,1)}return n},[e,t])),{trackRejectedResources:u}=function({visibleResources:e}){let{trackResourceImpression:t}=(0,ik.GS)(),{properties:a}=(0,aq.j6)();return(0,r.useEffect)(()=>{e.forEach(e=>{t(e)})},[t,e]),{trackRejectedResources:(0,r.useCallback)(e=>{(0,np.trackEvent)("community_home_shelf_resources_rejected",{rejectedResourceIds:e.join(),...a})},[a])}}({visibleResources:m}),_=(0,r.useCallback)(()=>{let e=m.map(e=>e.id);l(e),u(e),a(eL.b({refreshed_community_home_shelf_v2_recommendations:!0}))},[u,m,a]);if("errors"===s)return(0,mX.$D)(B.e.COMMUNITY,c),null;let f=d.numberOfTiles<2;return r.createElement("div",{ref:d.sizeRef,className:"x1p4momh"},!f&&r.createElement("div",{className:"xhv1u6h xuwania x1mxnbhz x1sjmt1f"},r.createElement("div",{className:"x78zum5 x1qughib x6s0dn4 xp41m2r xettwda"},r.createElement("div",{...n_.xk(fS.homeShelfTitle)},(0,S.t)("community.home_shelf.title")),r.createElement("div",{className:"x78zum5 x1n2onr6 xncym2f x167g77z x6s0dn4"},r.createElement(tD.K,{"aria-label":(0,S.t)("community.home_shelf.refresh_label"),onClick:_,disabled:"loading"===s},r.createElement(fi._,null)),r.createElement(tD.K,{"aria-label":(0,S.t)("community.home_shelf.dismiss_label"),onClick:()=>a(eL.b({dismissed_community_home_shelf_v2_recommendations:!0}))},r.createElement(fs.f,null)))),r.createElement(fC,{sizingInfo:d,resources:m,isLoading:"loading"===s})))}function fN(){return r.createElement("div",{className:"x1cqoux5 xeuugli"},r.createElement("div",{className:"x186iv6y xh8yej3 x176lpz5 x19y5rnk xo1570h"}))}function fC({resources:e,isLoading:t,sizingInfo:a}){let n=r.useRef(null),[o,l]=r.useState(null),[i,s]=r.useState(null),c=(0,r.useMemo)(()=>!t&&a.numberOfTiles>e.length?(0,lQ.y1)(a.numberOfTiles-e.length).map(e=>r.createElement(fN,{key:e})):[],[a.numberOfTiles,e.length,t]),d=t?(0,lQ.y1)(a.numberOfTiles).map(e=>r.createElement("div",{className:"x1cqoux5 xeuugli",key:e},r.createElement(ff,null))):e.map((e,t)=>r.createElement("div",{className:"x1cqoux5 xeuugli",key:e.id},r.createElement(fg,{resource:e,isSelected:i===t,onFocus:()=>{l(t),s(t)}})));return r.createElement("div",{className:"x78zum5 x1665zp3"},r.createElement(fc.S.div,{role:"grid",tabIndex:0,style:{width:a.tileRowWidth},className:"x78zum5 x1665zp3 xh8yej3 x1qughib",onMouseDown:e=>{e.preventDefault(),e.stopPropagation()},onFocus:e=>{e.target===n.current&&null===i&&(s(0),l(0))},onBlur:e=>{e.relatedTarget&&n.current?.contains(e.relatedTarget)||s(null)},ref:n,onKeyDown:t=>{if("ArrowRight"===t.key){t.preventDefault(),t.stopPropagation();let a=Math.min((o??0)+1,e.length-1);l(a),s(a)}else if("ArrowLeft"===t.key){t.preventDefault(),t.stopPropagation();let e=Math.max((o??0)-1,0);l(e),s(e)}}},d,c),r.createElement("div",{className:"x1lliihq x1i1rx1s x1hyhr7 xgcv3f"}),r.createElement("div",{style:{width:a.navigationSectionWidth}},r.createElement(fy,null)))}function fk(){let e=(0,n.wA)();return r.createElement(D.tH,{team:B.e.COMMUNITY,boundaryKey:"RecommendedResourcesShelf",fallback:D.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{e(tj.F.enqueue({message:(0,S.t)("general.root_error_boundary_title"),type:"react-error"}))},hasCustomWASMBuild:K.y4},r.createElement(aq.fu,{name:aX.e0.COMMUNITY_HOME_SHELF},r.createElement(fx,null)))}let fS={homeShelfContainer:{margin:"x1p4momh",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,$$css:!0},homeShelf:{margin:"xhv1u6h",marginInline:null,marginInlineStart:null,marginLeft:null,marginInlineEnd:null,marginRight:null,marginBlock:null,marginTop:null,marginBottom:null,padding:"xuwania",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,borderRadius:"x1mxnbhz",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,background:"x1sjmt1f",backgroundAttachment:null,backgroundClip:null,backgroundColor:null,backgroundImage:null,backgroundOrigin:null,backgroundPosition:null,backgroundPositionX:null,backgroundPositionY:null,backgroundRepeat:null,backgroundSize:null,$$css:!0},homeShelfHeader:{display:"x78zum5",justifyContent:"x1qughib",alignItems:"x6s0dn4",padding:"xp41m2r",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,height:"xettwda",$$css:!0},homeShelfHeaderActions:{display:"x78zum5",position:"x1n2onr6",left:"xncym2f",insetInlineStart:null,insetInlineEnd:null,gap:"x167g77z",rowGap:null,columnGap:null,alignItems:"x6s0dn4",$$css:!0},homeShelfTitle:{color:"x1akne3o",...nu.g.textHeadingSmall,$$css:!0},homeShelfTabContent:{display:"x78zum5",gap:"x1665zp3",rowGap:null,columnGap:null,$$css:!0},resourcesRow:{display:"x78zum5",gap:"x1665zp3",rowGap:null,columnGap:null,width:"xh8yej3",justifyContent:"x1qughib",$$css:!0},resourceWrapper:{flex:"x1cqoux5",flexGrow:null,flexShrink:null,flexBasis:null,minWidth:"xeuugli",$$css:!0},homeShelfDivider:{display:"x1lliihq",width:"x1i1rx1s",marginBottom:"x1hyhr7",borderLeft:"xgcv3f",borderLeftWidth:null,borderInlineStartWidth:null,borderInlineEndWidth:null,borderLeftStyle:null,borderInlineStartStyle:null,borderInlineEndStyle:null,borderLeftColor:null,borderInlineStartColor:null,borderInlineEndColor:null,$$css:!0},resourceTilePlaceholder:{aspectRatio:"x186iv6y",width:"xh8yej3",backgroundColor:"x176lpz5",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,border:"xo1570h",borderWidth:null,borderInlineWidth:null,borderInlineStartWidth:null,borderLeftWidth:null,borderInlineEndWidth:null,borderRightWidth:null,borderBlockWidth:null,borderTopWidth:null,borderBottomWidth:null,borderStyle:null,borderInlineStyle:null,borderInlineStartStyle:null,borderLeftStyle:null,borderInlineEndStyle:null,borderRightStyle:null,borderBlockStyle:null,borderTopStyle:null,borderBottomStyle:null,borderColor:null,borderInlineColor:null,borderInlineStartColor:null,borderLeftColor:null,borderInlineEndColor:null,borderRightColor:null,borderBlockColor:null,borderTopColor:null,borderBottomColor:null,$$css:!0}};var fR=(e=>(e.SHOW_NOTHING="SHOW_NOTHING",e.SHOW_HOME_SHELF="SHOW_HOME_SHELF",e))(fR||{});function fA(){let e=(0,ec.Xr)(fl),t=function(){let e=!!(0,n.d4)(e=>e.userFlags).dismissed_community_home_shelf_v2_recommendations,t=(0,n.d4)(({currentUserOrgId:e})=>e),a=(0,fo.aH)(),r=(0,n.d4)(({orgById:e})=>e),o=(0,eB.yK)({orgById:r,currentUserOrgId:t}),l=(0,n.d4)(e=>e.user?.drafts_folder_id)??null,{data:i}=(0,sU.nt)(l),s=!!i&&fI.every(e=>(0,sU.d6)(i,e)),c=(0,eN.vt)(),d=(0,ex.jn)();return E.Ay.mobile||!l||c||d||e||o||!s||!a()?"SHOW_NOTHING":"SHOW_HOME_SHELF"}();return((0,r.useEffect)(()=>{e("SHOW_HOME_SHELF"===t)},[e,t]),"SHOW_NOTHING"===t)?null:r.createElement(fk,null)}var fO=a(199774),fP=a(193675);let fL={Banner:function(e){let t=(0,n.wA)(),a=e=>{t(eL.b({[e]:!0}))};return r.createElement(aq.fu,{name:e.trackingContextName,properties:{severity:ut.c.EVENT}},r.createElement(ee.J,null,r.createElement("div",{...n_.Ay.props(fF.wrapper,"large"===e.size&&fF.wrapperLarge),style:{backgroundColor:e.bgColor}},r.createElement("div",{className:"x78zum5 x6s0dn4 x1qughib x1iyjqo2 x1i71x30 x1rt4tut"},e.children),r.createElement(tD.K,{"aria-label":(0,S.t)("general.close"),onClick:()=>a(e.userFlag)},r.createElement(_T.A,null)))))},BannerLogo:function(e){return r.createElement(ei.B,{svg:e.logo,className:"xi0feg2",style:{fill:e.logoColor}})},BannerContent:function(e){let t=e.copy?r.createElement("p",{className:"x17hqfcz xcw2j8d xemv814 xi9x8a2 x10p5zqr x12638g3 x4lxrar xyny9ap x16r6qr4 x1n0bwc9"},e.copy):null,a=e.beta?r.createElement("div",{className:"x1rg5ohu"},r.createElement(fP.E,null,(0,S.t)("general.beta"))):null;return r.createElement("div",null,r.createElement("div",{className:"xxymvpz x1nfngrj"},r.createElement("h2",{...n_.Ay.props(fF.title,e.beta&&fF.titleBadgeSpacing)},e.title),a),t)}};sn.Il.textBodyLargeFontFamily,sn.Il.textBodyMediumFontFamily,sn.Il.textBodyLargeFontSize,sn.Il.textBodyMediumFontSize,sn.Il.textBodyLargeFontWeight,sn.Il.textBodyMediumFontWeight,sn.Il.textBodyLargeLetterSpacing,sn.Il.textBodyMediumLetterSpacing,sn.Il.textBodyLargeLineHeight,sn.Il.textBodyMediumLineHeight;let fF={wrapper:{display:"x78zum5",alignItems:"x6s0dn4",justifyContent:"x1qughib",padding:"x1hcpp98 x8lzctc",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,gap:"x1i71x30 x1rt4tut",rowGap:null,columnGap:null,$$css:!0},wrapperLarge:{padding:"x1tphvzp x8lzctc",paddingInline:null,paddingStart:null,paddingLeft:null,paddingEnd:null,paddingRight:null,paddingBlock:null,paddingTop:null,paddingBottom:null,$$css:!0},title:{fontFamily:"x17hqfcz xcw2j8d",fontSize:"xemv814 xi9x8a2",fontWeight:"x1ma9mv9 x84028e",letterSpacing:"x12638g3 x4lxrar",lineHeight:"xyny9ap x16r6qr4",display:"xt0psk2",color:"x1akne3o",$$css:!0},titleBadgeSpacing:{marginRight:"x17qaar8",marginInlineStart:null,marginInlineEnd:null,$$css:!0}};var fD=a(803721);let fM=e=>"ja"===e?!!(0,o.k)().marketing_promo_banner_ja:"es"===e?!!(0,o.k)().marketing_promo_banner_es:!!(0,o.k)().marketing_promo_banner;function fB(){let e=!!(0,rh.f)("seen_config_launched_promo_banner_2025"),t=!!(0,rh.f)("seen_figmake_launch_banner"),a=rf.tl();return fM(a.user_data?.locale)?!e&&(0,o.k)().marketing_promo_banner_config_launched?r.createElement(oK.J,{mode:"dark"},r.createElement(fL.Banner,{trackingContextName:"Config 2025 Launched",bgColor:fj,userFlag:"seen_config_launched_promo_banner_2025",size:"small"},r.createElement("div",{className:"x78zum5 x1i71x30 x6s0dn4 x1w5s15c x1fiy98q"},r.createElement(fL.BannerLogo,{logo:fD.A,logoColor:f$}),r.createElement(fL.BannerContent,{title:(0,S.t)("banner.marketing_promo.config_launched_2025.title")})),r.createElement(sr.v,{mode:"bake-filebrowser"},r.createElement(sS.N.Button,{href:"https://config.new",newTab:!0,size:"lg"},(0,S.t)("banner.marketing_promo.config_launched_2025.cta"))))):!t&&(0,o.k)().marketing_promo_banner_figmake_launch?r.createElement(fU,null):null:null}function fU(){let e=(0,sW.$)({isDraftsFolder:!0,editorType:eM._Y.FIGMAKE,newFileFrom:iE.f6.FIGMAKE_LAUNCH_BANNER,contextClicked:"figmake_launch_banner_created"}),t=(0,n.d4)(e=>e.user?.drafts_folder_id),{data:a}=(0,sU.nt)(t),o=(0,s$.h)(a).find(e=>e.editorType===eM._Y.FIGMAKE);if(!o)return null;let l=!o.canCreate,i=l?(0,S.t)("file_browser.creation_buttons.disabled_by_organization"):void 0;return r.createElement(fL.Banner,{trackingContextName:"Figmake Launch Banner",bgColor:sn.Tj.bgSelectedTertiary,userFlag:"seen_figmake_launch_banner",size:"large"},r.createElement("div",{className:"x78zum5 x1i71x30 x6s0dn4 x1w5s15c x1fiy98q"},r.createElement("div",{className:"xsqpjig x78zum5 x100vrsf x1vqgdyp x14odnwx x2lah0s x6s0dn4 xl56j7k xfm0j5p"},r.createElement(fO.e,{className:"x1849jeq x1gnnpzl xwa2v1s"})),r.createElement(fL.BannerContent,{title:(0,S.t)("banner.marketing_promo.figmake_launch.title"),copy:(0,S.t)("banner.marketing_promo.figmake_launch.content"),beta:!0})),r.createElement(sr.v,{mode:"bake-filebrowser"},r.createElement(oK.J,{mode:"light"},r.createElement(oL.WW,{onClick:e,disabled:l,htmlAttributes:{"data-tooltip":i,"data-tooltip-type":aJ.Ib.TEXT}},(0,S.t)("banner.marketing_promo.figmake_launch.cta")))))}let f$="#33DFDF",fj="#5D4493";var fW=a(519829),fG=a(97223),fV=a(461979);function fH(e){let t=(0,_.Rs)(eK.ox,{resourceTypes:e.resourceTypes,firstPageSize:30,sortOrder:e.sortOrder,cursorColumn:e.sortKey,sharedBy:e.sharedBy||null,planId:e.planId||null,planType:e.planType||null,fileType:e.fileType||null,orgDeletedDrafts:e.orgDeletedDrafts||null}),a=(0,r.useCallback)(()=>{"loaded"===t.status&&t.data.sharedWithYouResources.hasNextPage()&&t.data.sharedWithYouResources.loadNext(30)},[t]),n="loaded"===t.status&&t.data.sharedWithYouResources.isLoadingNextPage;return{subscription:t,fetchNextPage:a,isFetchingNextPage:n}}function fz(e){let t=(0,eA._6)(),a=(0,n.d4)(e=>e.tileSortFilterStateByView),o="recentsAndSharing"===t.view?a.recentsAndSharing.sharedFiles:a.sharedWithYou,l={tileSortFilterConfig:o,sortKeys:[lH.C0.SHARED_AT]},{subscription:s,fetchNextPage:c,isFetchingNextPage:d}=function(e){let{subscription:t,fetchNextPage:a,isFetchingNextPage:n}=fH({...e,resourceTypes:["file","file_repo","prototype"]});return{subscription:(0,r.useMemo)(()=>t.transform(e=>e.sharedWithYouResources.reduce((e,t)=>{if(t.sharedWithYouFile){let a=function(e){if(null==e||null==e.file)return null;let{file:t,...a}=e,r={...t,...a,editUrl:`${window.location.origin}/file/${t.key}/${(0,fV.sy)(t.name||"")}`,signedPreviewThumbnailUrls:null,trackTags:null};return(0,t1.fA)(lV.F.toSinatra(r),{sharedAt:a.sharedAt,sharedByUser:a.sharedByUser})}(t.sharedWithYouFile);a&&e.push(a)}else if(t.sharedWithYouRepo){let a=function(e){let{repo:t,...a}=e;if(null===t)return null;let{branches:r,...n}=t,o=r?.filter(e=>null!=e)?.map(e=>t5.V1({...e,edit_url:e?`${window.location.origin}/file/${e.key}/${fV.sy(e.name||"")}`:"",client_meta:e.checkpointClientMeta}))??[],l=(0,t5.V1)({...n,...a});return(0,t5.V1)({type:t1.nb.REPO,repo:l,branches:o,selectedBranchKey:""},{repoPerms:(0,fG.zh)(t)})}(t.sharedWithYouRepo);a&&e.push(a)}else if(t.sharedWithYouPrototype){let a=function(e){let{prototype:t,...a}=e;if(null==t)return null;let r=(0,t5.V1)({...t,...a});return(0,t5.V1)({type:t1.nb.PROTOTYPE,prototype:r},{prototypePerms:(0,fW.R)(t)})}(t.sharedWithYouPrototype);a&&e.push(a)}return e},[])),[t]),fetchNextPage:a,isFetchingNextPage:n}}({sharedBy:o.filters.sharedBy??"",planId:o.filters.plan?.planId??"",planType:o.filters.plan?.planType??"",fileType:(e=>{switch(e){case lH.t2.DESIGN:return"design";case lH.t2.FIGJAM:return"whiteboard";case lH.t2.PROTOTYPE:return"prototype";case lH.t2.SITES:return"sites";case lH.t2.SLIDES:return"slides";case lH.t2.COOPER:return"cooper";case lH.t2.MAKE:return"figmake";case lH.t2.ANY:return null;default:(0,C.xb)(e)}})(o.filters.fileType)??"",sortOrder:o.sort.dir===lH.ue.ASC?"asc":"desc",sortKey:(0,lH.De)(o.sort.key)??"shared_at"}),m=(0,r.useMemo)(()=>s.unwrapOr([]),[s]),{trackPerformanceEvent:u}=(0,mb.S)("swy_files_pagination_performance","livegraph");(0,r.useEffect)(()=>{u("fetch_end")},[u,m.length]),(0,r.useEffect)(()=>{"errors"===s.status&&u("fetch_error",{errors:JSON.stringify(s.errors??{})})},[u,s.status,s.errors]),(0,r.useEffect)(()=>(u("fetch_start"),()=>{u("fetch_cancel")}),[u]);let _=(0,r.useCallback)(()=>{d||(u("fetch_next"),c())},[d,c,u]),p="loaded"===s.status;return(0,i.kF)("SharedFiles"),(0,i.WX)({markName:"MainBodyContent",isLoaded:p}),r.createElement(er.A,{loadingElementId:"loading-content-pane",delay:250,loaded:p,loadingElementClassName:k.s.pr32.$},r.createElement(dV.B,{onShouldFetchNextPage:_},r.createElement(mE,{currentPlanFilter:o.filters.plan,currentSharedByFilter:o.filters.sharedBy,emptyStateText:d?"":(0,S.t)("shared_with_you.no_items"),isEligbileForProTeamLockedRevampUI:e.isEligbileForProTeamLockedRevampUI,newFileTile:!1,sortFilterOptions:l,tileActions:{showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0},tiles:m})))}function fK(e){let t=(0,eA._6)(),a=(0,nt.ol)(),o=(0,_.Rs)(eK.kQI,{id:a?.id||""},{enabled:!!a}),l=(0,_.Rs)(eK.TNJ,{id:a?.id||""},{enabled:!!a}),s=(0,n.d4)(e=>e.tileSortFilterStateByView),c="recentsAndSharing"===t.view?s.recentsAndSharing.sharedProjects:s.sharedWithYou,d={tileSortFilterConfig:c,sortKeys:[lH.C0.SHARED_AT]},{subscription:m,fetchNextPage:u,isFetchingNextPage:p}=function(e){let{subscription:t,fetchNextPage:a,isFetchingNextPage:n}=fH({...e,resourceTypes:["folder"]});return{subscription:(0,r.useMemo)(()=>t.transform(e=>e.sharedWithYouResources.reduce((e,t)=>{if(t.sharedWithYouFolder){let{folder:a,...r}=t.sharedWithYouFolder;if(null==a)return e;let n=a.updatedAt.toString(),o=a.activeProjectResourceConnections?.[0]??null,l=(0,t5.V1)({...a,...r},{created_at:a.createdAt.toString(),updated_at:n,deleted_at:a.deletedAt?.toString()||null,touched_at:n,is_connected_project:!!o,resource_connection:o?{hostPlanName:o.hostPlanName,connectedPlanName:o.connectedPlanName}:null});e.push(l)}return e},[])),[t]),fetchNextPage:a,isFetchingNextPage:n}}({sharedBy:c.filters.sharedBy??"",planId:c.filters.plan?.planId??"",planType:c.filters.plan?.planType??"",orgDeletedDrafts:"",sortOrder:c.sort.dir===lH.ue.ASC?"asc":"desc",sortKey:(0,lH.De)(c.sort.key)??"shared_at"}),f=(0,r.useMemo)(()=>m.unwrapOr([]),[m]),g=(0,r.useMemo)(()=>f.map(e=>e.id),[f]),{trackPerformanceEvent:E}=(0,mb.S)("swy_projects_pagination_performance","livegraph");(0,r.useEffect)(()=>{E("fetch_end")},[E,g.length]),(0,r.useEffect)(()=>{"errors"===m.status&&E("fetch_error",{errors:JSON.stringify(m.errors??{})})},[E,m.status,m.errors]),(0,r.useEffect)(()=>(E("fetch_start"),()=>{E("fetch_cancel")}),[E]);let b=(0,r.useCallback)(()=>{p||(E("fetch_next"),u())},[p,u,E]),v="loaded"===o.status&&!!o.data.team&&o.data.team.hasPermission,h=!!l.unwrapOr({team:{hasPermission:!1}})?.team?.hasPermission,w="loaded"===m.status;return(0,i.kF)("SharedProjects"),(0,i.WX)({markName:"MainBodyContent",isLoaded:w}),r.createElement(er.A,{loadingElementId:"loading-content-pane",delay:250,loaded:w,loadingElementClassName:k.s.pr32.$},r.createElement(dV.B,{onShouldFetchNextPage:b},r.createElement(mV,{canAdminTeam:h,canEditTeamContents:v,chunkSize:f.length,currentPlanFilter:c.filters.plan,emptyStateText:p?"":(0,S.t)("shared_with_you.no_items"),folderList:f,isEligbileForProTeamLockedRevampUI:!!a&&e.isEligbileForProTeamLockedRevampUI,isSharerInfoIncluded:!0,selectedView:t,sortFilterOptions:d,team:a,teamId:a?a.id:void 0,useLGPerms:!0,viewId:"shared-with-you-projects"})))}var fY=a(141354),fq=a(988124),fJ=a(302762),fX=a(2122),fQ=a(82436),fZ=a(362959);let f0=e=>r.createElement("span",{className:"unsubscribe_confirmation_modal--boldText--dNK-D"},e),f1=(0,tu.Ju)(function(e){let t=(0,n.wA)(),a=(0,J.iZ)();return a?r.createElement(fQ.u,{tintedModalBackground:!0,headerText:(0,S.t)("interstitial.unsubscribe_success_header")},r.createElement("div",{className:fZ.Yg},(0,S.tx)("interstitial.unsubscribe_success_subheader_with_address",{emailName:f0((()=>{switch(e.policyType){case"FileCommentActivity":return(0,S.t)("interstitial.comment_activity_digest");case"TeamCommentActivity":return(0,S.t)("interstitial.team_comment_digest");case"FeedWeeklyDigest":return(0,S.t)("interstitial.feed_weekly_digest");case"WorkspaceActivity":return(0,S.t)("interstitial.workspace_activity");default:(0,C.xb)(e.policyType)}})()),emailAddress:f0(a.email)})),r.createElement(ea.nD,{onClick:()=>{t(tf.Lo())},className:"unsubscribe_confirmation_modal--button--j6qqT"},(0,S.tx)("interstitial.done")),r.createElement("button",{className:"unsubscribe_confirmation_modal--notificationSettingsButton--vmHlZ interstitial_modal--secondaryText--IC9Gu",onClick:()=>{t((0,tf.to)({type:fX.s,data:{tab:fX.c.NOTIFICATIONS}})),t(tf.aZ())}},(0,S.tx)("interstitial.open_notifications_settings"))):null},"UNSUBSCRIBE_CONFIRMATION_INTERSTITIAL_MODAL");var f4=a(82009);let f2={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicate:!0,delete:!0,removeFromRecents:!0,createBranch:!0,publishOrgTemplate:!0,moveFile:!0,pinToWorkspace:!0};function f3({isEligbileForProTeamLockedRevampUI:e}){let t=(0,n.d4)(e=>e.currentUserOrgId),a=(0,n.d4)(e=>e.tileSortFilterStateByView.recentsAndSharing.recents),l=(0,f4.ql)(t,(0,o.k)().recents_filter_lg?(0,lH.Gv)(a.filters.fileType):null),s=(0,f4.O8)(t),c=r.useMemo(()=>l.transform(e=>e.map(e=>(0,t1.fA)(e))),[l]),d=r.useMemo(()=>s.transform(e=>e.map(t1.Nu)),[s]),m=function(){let e=(0,n.d4)(e=>e.recentRepos),t=(0,n.d4)(e=>e.selectedBranchKeyByRepoId);return r.useMemo(()=>e.map(e=>(0,t1.uy)(e,t)),[e,t])}(),u=function(){let e=(0,m1.Rp)();return r.useMemo(()=>Object.values(e).map(t1.gB),[e])}(),_=r.useMemo(()=>r5.Qw.merge([c,d],m,u),[u,c,d,m]),p=r.useMemo(()=>({tileSortFilterConfig:a,sortKeys:[lH.C0.NAME,lH.C0.CREATED_AT,lH.C0.ACCESSED_AT]}),[a]),f="loaded"===_.status;return(0,i.kF)("RecentFiles"),(0,i.WX)({markName:"MainBodyContent",isLoaded:f}),r.createElement(er.A,{loadingElementId:"loading-content-pane",loaded:f,loadingElementClassName:k.s.pr32.$},r.createElement(mE,{tiles:_.data,tileActions:f2,sortFilterOptions:p,newFileTile:!0,emptyStateText:E.Ay.mobile||E.Ay.tablet?(0,S.t)("file_browser.tool_bar.recently_viewed_empty_state"):"",isEligbileForProTeamLockedRevampUI:e}),r.createElement(dt.cx,null))}var f5=a(795234);let f8=new class{constructor(){this.SharerFilterOptionsSchemaValidator=(0,f5.vh)(),this.PlanFilterOptionsSchemaValidator=(0,f5.vh)()}getSharerFilterOptions(e){return this.SharerFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/sharer_filter_options?resource_type[]=${e.resource_type}`))}getPlanFilterOptions(e){return this.PlanFilterOptionsSchemaValidator.validate(async({xr:t})=>await t.get(`/api/shared_with_you/plan_filter_options?resource_type[]=${e.resource_type}`))}};function f6(){return{"":{label:(0,S.t)("shared_with_you.filters.all_organizations")}}}let f7=t8.M4.Query({fetch:async e=>{let t=await f8.getPlanFilterOptions({resource_type:e}),a={};return t.data.meta.plan_filters.forEach(e=>{let t={label:e.label,plan_id:e.plan_id,plan_type:e.plan_type};e.plan_id&&(a[e.plan_id]=t)}),{...f6(),...a}}});function f9(){return{"":(0,S.t)("shared_with.you.filters.anyone")}}var ge=a(837988),gt=a(226455);let ga="seen_shared_files_onboarding",gr=(0,ep.r1)("seen_account_profile_switcher_onboarding"),gn=(0,ep.r1)(ga);function go(){let e=(0,ec.md)(gr),t=(0,ec.md)(gn),a=(0,e_.e)({overlay:ev.fz8,priority:eg.N.SECONDARY_MODAL},[t,e]);return(0,m.h)(()=>{a.show({canShow:(e,t)=>t&&!e})}),r.createElement(eE.rq,{targetKey:gt.Bh,isShowing:a.isShowing,title:(0,S.tx)("rcs.shared_with_you.shared_files_title"),description:(0,S.tx)("rcs.shared_with_you.shared_files_description",{recents:r.createElement("span",{className:k.s.fontBold.$},(0,S.tx)("rcs.shared_with_you.recents"))}),primaryCta:{type:"button",label:(0,S.tx)("rcs.got_it"),onClick:a.complete,ctaTrackingDescriptor:eu.c.DONE},width:350,onClose:a.complete,trackingContextName:"File Browser Shared Files in Recents Overlay",userFlagOnShow:ga})}let gl=[iv.G.RECENTLY_VIEWED,iv.G.SHARED_FILES,iv.G.SHARED_PROJECTS],gi=e=>{switch(e){case iv.G.RECENTLY_VIEWED:return(0,S.t)("file_browser.recents_and_sharing_view.recent_files_tab_name");case iv.G.SHARED_PROJECTS:return(0,S.t)("file_browser.recents_and_sharing_view.shared_projects_tab_name");case iv.G.SHARED_FILES:return(0,S.t)("file_browser.recents_and_sharing_view.shared_files_tab_name");default:(0,C.xb)(e)}};function gs(e){let t=e.options.tileSortFilterConfig.filters.sharedBy,a=e.options.tileSortFilterConfig.filters.plan;return r.createElement("div",{className:k.s.flex.flexWrap.gap18.$},r.createElement(r.Fragment,null,e.filters?.sharer&&Object.keys(e.filters?.sharer).length>1&&r.createElement(r.Fragment,null,t&&r.createElement(nA.qD,{userId:t}),r.createElement(nA.lI,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.sharer,tab:e.tab})),e.filters?.plan&&Object.keys(e.filters?.plan).length>1&&r.createElement(r.Fragment,null,a?.planId&&r.createElement(nA.lV,{planOption:e.filters.plan[a.planId]}),r.createElement(nA.FU,{config:e.options.tileSortFilterConfig,filterOptions:e.filters.plan,tab:e.tab})),e.filters?.fileType&&r.createElement(r.Fragment,null,r.createElement(nA.ye,{config:e.options.tileSortFilterConfig,tab:e.tab}))))}function gc(e){let t=e.selectedTab,a=(0,n.wA)(),l=(0,eA._6)(),i=(0,n.d4)(e=>e.tileSortFilterStateByView),s=t===iv.G.SHARED_PROJECTS?["folder"]:["file","file_repo","prototype"],c=function(e){let[t,a]=(0,r.useState)(f9()),n=e.join("&resource_type[]=");return(0,r.useEffect)(()=>{f8.getSharerFilterOptions({resource_type:n}).then(({data:e})=>{a(e.meta.shared_by_filters.reduce((e,{user_id:t,label:a})=>({...e,[t]:a}),{...f9()}))})},[n]),t}(s),d=function(){let e=(0,J.TA)(),t=(0,n.d4)(e=>e.authedUsers),a=(0,n.d4)(e=>e.plans),r=(0,n.d4)(e=>e.orgById),l=(0,n.d4)(nr.P),i=(0,o.k)().limited_plan_spaces,s=e?t.byId[e]:null;return(i?a.map(e=>{let t="";if(e.plan_type===ib.O.ORG){let a=r[e.plan_id];t=a?.name??t}else{let a=l[e.plan_id];t=a?.name??t}return{label:t,plan_id:e.plan_id,plan_type:e.plan_type===ib.O.ORG?ib.O.ORG:ib.O.TEAM}}):(s?.plans??[]).map(e=>({label:e.name,plan_id:e.plan_id,plan_type:e.is_org?"org":"team"}))).reduce((e,t)=>({...e,[`${t.plan_id}`]:t}),{...f6()})}(),m=function(e){let t=e.join("&resource_type[]="),[a]=(0,t8.IT)(f7(t));return a.data||f6()}(s),u={[lH.cT.ALL]:(0,S.t)("shared_with_you.filters.org_deleted_drafts.all"),[lH.cT.SHARED]:(0,S.t)("shared_with_you.filters.org_deleted_drafts.shared"),[lH.cT.ORG_DELETED_DRAFTS]:(0,S.t)("shared_with_you.filters.org_deleted_drafts.deleted_user_drafts")},_={sharer:t!==iv.G.RECENTLY_VIEWED?c:void 0,plan:t===iv.G.RECENTLY_VIEWED?d:m,fileType:t!==iv.G.SHARED_PROJECTS,orgDeletedDrafts:t===iv.G.SHARED_PROJECTS?u:void 0},p=r.useMemo(()=>{let e;switch(t){case iv.G.RECENTLY_VIEWED:e=i.recentsAndSharing.recents;break;case iv.G.SHARED_FILES:e=i.recentsAndSharing.sharedFiles;break;case iv.G.SHARED_PROJECTS:e=i.recentsAndSharing.sharedProjects;break;default:(0,C.xb)(t)}return{tileSortFilterConfig:e,sortKeys:iv.o[t]}},[t,i]),f=e=>{e===iv.G.SHARED_FILES?(0,np.trackEvent)("file_browser_shared_files"):e===iv.G.SHARED_PROJECTS&&(0,np.trackEvent)("file_browser_shared_projects"),a(eR.$T({view:"recentsAndSharing",tab:e}))},g=e=>{(0,np.trackEvent)("file view toggle",{viewType:e===lH.XU.GRID?"grid":"list"}),Object.keys(iv.G).map(t=>{a(eR.JF({selectedView:l,config:{...p.tileSortFilterConfig,viewMode:e},tab:iv.G[t]}))},a(eR.uV({viewId:"shared-with-you-projects",viewMode:e})))},E=r.createElement("div",{className:"x78zum5 x6s0dn4"},r.createElement(nA.$c,{initialViewMode:p.tileSortFilterConfig.viewMode,onViewModeChange:g})),b=r.createElement(nA.mc,{options:p,selectedView:l,dispatch:a,tab:t}),v=r.createElement("div",{className:k.s.flex.gap18.$,key:"sortWithViewOptions"},b,E),h=r.createElement(gs,{options:p,filters:_,tab:t,key:"recentsAndSharingTileFilters"}),w=r.createElement(nA.IB,{dropdownKey:"recents-and-sharing-sort-filter-mobile-dropdown",sortFilterOptions:p,filters:_,onViewModeChange:g,tab:t}),[y,T,I]=lo.t.useManagedTabs({[iv.G.RECENTLY_VIEWED]:!0,[iv.G.SHARED_FILES]:!0,[iv.G.SHARED_PROJECTS]:!0},e.selectedTab,e=>{f(e)}),x=gl.map((e,t)=>{let a=e===iv.G.SHARED_FILES?gt.Bh:"";return r.createElement(lo.t.Tab,{key:t,...y[e],htmlAttributes:{"data-onboarding-key":a}},gi(e))});return r.createElement(r.Fragment,null,r.createElement(ge.p,null,r.createElement(go,null)),r.createElement(nA.g2,{leftSide:r.createElement(ee.J,null,r.createElement(lo.t.TabStrip,{manager:I},x)),rightSide:[h,v],rightSideMobile:w}))}function gd(e){switch(e){case nQ.bb.ACCOUNT:return fX.c.ACCOUNT;case nQ.bb.COMMUNITY:return fX.c.COMMUNITY;case nQ.bb.NOTIFICATIONS:return fX.c.NOTIFICATIONS}}function gm(e){let t=(0,n.wA)(),a=(0,ex.R)(),o=uT({checks:{isEligbileForProTeamLockedRevampUI:a},shadowReadLabel:rc.A5.RecentsAndSharingPageView.hasBanner}).unwrapOr(!1),{selectedTab:l,accountModalTab:i,emailPolicyToUnsubscribeFrom:s}=e,c=r.createElement(gc,{selectedTab:l}),d=(0,u.ZC)(i),m=(0,u.ZC)(s);return(0,fq.i)(),(0,fY.V)(),(0,r.useEffect)(()=>{i&&i!==d?(t((0,tf.to)({type:fX.s,data:{tab:gd(i)}})),t(eR.$T({view:"recentsAndSharing"}))):s&&s!==m&&(fJ.z.updateUserCommunicationPreference({channelType:"email",policyType:s,policySetting:"none"}).then(()=>{t((0,tf.to)({type:f1,data:{policyType:s}}))}).catch(e=>{t((0,tf.to)({type:fX.s,data:{tab:gd(nQ.bb.NOTIFICATIONS)}})),t(tj.F.dequeue({}))}),t(eR.$T({view:"recentsAndSharing"})))},[i,d,s,m,t]),r.createElement(oO.r,{banner:o?r.createElement(uS,{folderId:null}):r.createElement(fB,null),viewbar:c,toolbar:r.createElement(fA,null),viewBarSticky:!0,content:function(e,t){switch(e){case iv.G.SHARED_FILES:return r.createElement(fz,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case iv.G.SHARED_PROJECTS:return r.createElement(fK,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});case iv.G.RECENTLY_VIEWED:return r.createElement(f3,{isEligbileForProTeamLockedRevampUI:t?.isEligbileForProTeamLockedRevampUI});default:(0,C.xb)(e)}}(l,{isEligbileForProTeamLockedRevampUI:a})})}var gu=a(993810),g_=a(297703);function gp(e){let t=(0,eY.rs)("FileCreationPillButton"),a=(0,eY.YY)(t).unwrapOr(!1),n="pills"===(0,G.hE)()();return r.createElement(gf,{...e,isStarter:a,enablePlusIcon:n})}function gf(e){let t=e.isDisabled||e.isLoading,{enablePlusIcon:a=!1}=e,n="";return e.isDisabled&&!e.isLoading?n=(0,S.t)("file_browser.creation_buttons.disabled_by_organization"):e.isStarter&&!e.isLoading&&e.showComingSoon&&(n=(0,S.t)("file_browser.creation_buttons.coming_soon")),r.createElement(sr.v,{mode:e.brand},r.createElement(nd.E,{...n_.xk(gg.button,"bake-filebrowser"===e.brand&&gg.buttonFigmake,t&&gg.buttonDisabled),onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,disabled:t,"data-onboarding-key":e.dataOnboardingKey,"data-tooltip":n,"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip-timeout-delay":50},r.createElement(er.x,{loaded:!e.isLoading,loadingSkeletonElement:r.createElement("div",{className:"x1yjdb4r"},r.createElement(pP.Qp,{animationType:pP.JR.LIGHT_SHIMMER,className:"x10w6t97"})),showElementBeforeLoaded:!0},r.createElement("div",{className:"x1y1aw1k xwib8y2 xyfqnmn xnm25rq x78zum5 x6s0dn4 x167g77z"},r.createElement("div",{...n_.xk(!t&&gg.iconContainer,a&&gg.fileIconDisplayToggle),"data-testid":"file-icon"},e.icon),a&&r.createElement("div",{...n_.xk(!t&&gg.iconContainer,gg.plusIconDisplayToggle),"data-testid":"plus-icon"},r.createElement(g_.J,null)),r.createElement("span",{...n_.xk(gg.text)},e.title)))))}sn.Tj,sn.Tj.border;let gg={button:{"--x1qf8z1y":"x920oto xx5s86v x4n98v3","--xdmwo94":"x18ck9ew x1x7l3x0 xhxpffl","--color-icon":"xn0whsw",flexShrink:"x2lah0s",borderRadius:"x1d36bvo",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,backgroundColor:"x1v8gsql x17c7w1w x1tt564c x8ge37t",boxShadow:"x6bkol7 xrhlwir xsfrc4e x129mn88",overflow:"xb3r6kr",overflowX:null,overflowY:null,$$css:!0},buttonFigmake:{"--color-icon":"xwa2v1s",$$css:!0},buttonDisabled:{"--color-icon":"xz8z4lq","--color-text":"x15kbib2",backgroundColor:"x1yjdb4r",boxShadow:"x6bkol7 x1icplyp",$$css:!0},text:{...nu.g.textBodyMedium,color:"xiuzu7u",$$css:!0},iconContainer:{backgroundColor:"xu5wzci",borderRadius:"x192jxwq",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,$$css:!0},fileIconDisplayToggle:{display:"x1j4q9eb",$$css:!0},plusIconDisplayToggle:{display:"x36f1ty",$$css:!0}};function gE({isDisabled:e,isLoading:t,newFileFrom:a}){let n=(0,sW.$)({isDraftsFolder:!0,editorType:eM._Y.COOPER,newFileFrom:a,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return r.createElement(gp,{title:(0,S.t)("file_browser.creation_buttons.marketing_asset"),brand:"cooper",dataTestId:"new-cooper-file-button",icon:r.createElement(gu.u,null),isDisabled:e,isLoading:t,onClick:n})}var gb=a(500217);function gv({isDisabled:e,isLoading:t,newFileFrom:a}){let n=(0,sW.$)({isDraftsFolder:!0,editorType:eM._Y.DESIGN,newFileFrom:a,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return r.createElement(gp,{title:(0,S.t)("file_browser.creation_buttons.design"),brand:"design",dataTestId:"new-design-file-button",icon:r.createElement(gb.z,null),isDisabled:e,isLoading:t,onClick:n})}var gh=a(444469);function gw({isDisabled:e,isLoading:t,newFileFrom:a}){let n=(0,sW.$)({isDraftsFolder:!0,editorType:eM._Y.WHITEBOARD,newFileFrom:a,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return r.createElement(gp,{title:(0,S.t)("file_browser.creation_buttons.figjam"),brand:"whiteboard",dataTestId:"new-whiteboard-file-button",icon:r.createElement(gh.D,null),isDisabled:e,isLoading:t,onClick:n})}var gy=a(563127),gT=a(946877);function gI({isDisabled:e,isLoading:t,newFileFrom:a}){let n=(0,sW.$)({isDraftsFolder:!0,editorType:eM._Y.FIGMAKE,newFileFrom:a,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return r.createElement(gp,{title:(0,S.t)("file_browser.creation_buttons.figmake"),brand:"bake-filebrowser",dataTestId:"new-figmake-file-button",icon:r.createElement(gy.Z,null),isDisabled:e,isLoading:t,onClick:n,showComingSoon:(0,gT.W)()})}var gx=a(815421);function gN(e){return r.createElement(nd.E,{className:"x2lah0s x1d36bvo xb3r6kr xbzrb6o x1v8gsql x13bsb82 xpzxyvc x1aqsfbg x6bkol7 x622810 xsfrc4e x13nvs6n",onClick:e.onClick,"data-testid":e.isLoading?void 0:e.dataTestId,"data-onboarding-key":e.dataOnboardingKey,"data-tooltip":e.tooltipText,"data-tooltip-type":aJ.Ib.TEXT},r.createElement(er.x,{loaded:!e.isLoading,loadingSkeletonElement:r.createElement("div",{className:"x1yjdb4r"},r.createElement(pP.Qp,{animationType:pP.JR.LIGHT_SHIMMER,className:"x10w6t97"})),showElementBeforeLoaded:!0},r.createElement("div",{className:"xfawy5m"},e.icon)))}function gC({isLoading:e}){let t=(0,n.wA)();return r.createElement(gN,{dataTestId:"file-import-button",icon:r.createElement(gx.R,null),isLoading:e,onClick:()=>{t((0,_X.L)())},tooltipText:(0,S.t)("file_browser.creation_buttons.import")})}sn.Tj.border;var gk=a(779527);function gS({isDisabled:e,isLoading:t,newFileFrom:a}){let n=(0,sW.$)({isDraftsFolder:!0,editorType:eM._Y.SITES,newFileFrom:a,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return r.createElement(gp,{title:(0,S.t)("file_browser.creation_buttons.sites"),brand:"seascape",dataTestId:`new-${d7.oQ}-file-button`,icon:r.createElement(gk.$,null),isDisabled:e,isLoading:t,onClick:n,showComingSoon:!0})}var gR=a(418709);function gA({isDisabled:e,isLoading:t,newFileFrom:a}){let n=(0,sW.$)({isDraftsFolder:!0,editorType:eM._Y.SLIDES,newFileFrom:a,triggerElement:"pill",contextClicked:"recents_file_creation_thumbnails_created"});return r.createElement(gp,{title:(0,S.t)("file_browser.creation_buttons.slide_deck"),brand:"piper",dataTestId:"new-slides-file-button",icon:r.createElement(gR.T,null),isDisabled:e,isLoading:t,onClick:n})}function gO({newFileFrom:e}){let t=(0,n.d4)(e=>e.user?.drafts_folder_id),{data:a,status:o}=(0,sU.nt)(t),l=(0,s$.h)(a),s="loading"===o,c=l.map(({editorType:t,canCreate:a})=>{let n=!a;switch(t){case eM._Y.DESIGN:return r.createElement(gv,{key:"design",isDisabled:n,isLoading:s,newFileFrom:e});case eM._Y.WHITEBOARD:return r.createElement(gw,{key:"whiteboard",isDisabled:n,isLoading:s,newFileFrom:e});case eM._Y.SLIDES:return r.createElement(gA,{key:"slides",isDisabled:n,isLoading:s,newFileFrom:e});case eM._Y.SITES:return r.createElement(gS,{key:"seascape",isDisabled:n,isLoading:s,newFileFrom:e});case eM._Y.COOPER:return r.createElement(gE,{key:"cooper",isDisabled:n,isLoading:s,newFileFrom:e});case eM._Y.FIGMAKE:return r.createElement(gI,{key:"figmake",isDisabled:n,isLoading:s,newFileFrom:e});default:(0,C.xb)(t)}}).filter(Boolean);return c.push(r.createElement(gC,{key:"import",isLoading:s})),(0,i.WX)({markName:"FileCreateEntrypoint",isLoaded:"loaded"===o}),r.createElement(r.Fragment,null,c)}function gP({from:e}){let t=r.useRef(null),a=r.useRef(null),[n,o]=r.useState(!1),l=(0,G.hE)()(),i=e===iE.f6.FILE_BROWSER_TOPBAR_RECENTS,s="initial"===l&&!i||"omnicreate"===l;return r.useLayoutEffect(()=>{let e=a.current,r=t.current;if(!e||!r)return;let n=()=>{o(r.offsetWidth<e.offsetWidth)};n();let l=new ResizeObserver(n);return l.observe(t.current),()=>l.disconnect()},[]),r.createElement("div",{className:"xh8yej3 x9f619 x78zum5 x7v6yn8 xz9dl7a xsag5q8",ref:t},!s&&r.createElement("div",{ref:a,...n_.xk(gL.contentContainer,n&&gL.hide)},r.createElement(gO,{newFileFrom:e})),(s||n)&&r.createElement(sK.R,{newFileFrom:e}))}let gL={contentContainer:{display:"x3nfvp2",gap:"x167g77z",rowGap:null,columnGap:null,flexShrink:"x2lah0s",$$css:!0},hide:{visibility:"xlshs6z",$$css:!0}};function gF({teamId:e}){let t=(0,_.Rs)(eK.GyZ,{teamId:e}),a=t.data?.team||null,n=(0,Y.dq)();if(!a?.org)return null;if(n!==a.org.id)return r.createElement(_e,{planEntity:a.org});let o=(0,X.Zr)(a.org);return r.createElement(i_.A5,null,a.org&&r.createElement(u7,{org:a.org,currentResourceId:e,hasTrailingDivider:a.workspace.status===rO.tT.Loaded&&(!!a.workspace.data||o)}),a.workspace.status===rO.tT.Loaded&&(a.workspace.data||o)&&r.createElement(_r,{workspace:a.workspace.data??{id:oy.O},currentResourceId:e,orgId:a.org?.id,hasTrailingDivider:!1}))}var gD=a(362332),gM=a(444596),gB=a(420285),gU=a(912310),g$=a(663128);function gj(){return r.createElement("div",{className:k.s.flex.p12.colorBgSelected.bRadius6.$},r.createElement("div",{className:k.s.mr12.colorIcon.itemSelfCenter.$},r.createElement(ei.B,{svg:g$.A})),r.createElement("div",null,(0,S.tx)("sidebar.meta.this_team_is_for_education_users_only")," ",r.createElement(ea.Us,{target:"_blank",trusted:!0,href:"/education/"},(0,S.tx)("org_home_view_meta.learn_more"))))}function gW({team:e}){let t=(0,n.wA)(),a=(0,_.Rs)(eK.kQI,{id:e.id}),o=!!a.data?.team?.hasPermission,[{data:l}]=(0,p.IT)((0,z.Xg)({teamId:e.id})),i=(l||[]).filter(e=>""!==e.name).length,s=(0,b.I7)("exp_fbg_project_limit_upsell");if(!(!e.subscription&&!e.org_id&&o&&i>=rd.Wf)||s.getConfig().getValue("show_upsell",!1))return null;let c=r.createElement(ea.Us,{onClick:()=>{t((0,tf.to)({type:rb.V,data:{teamId:e.id,upsellSource:rw.b.STARTER_TEAM_FOOTER}}))},trusted:!0,trackingProperties:{trackingDescriptor:eu.c.UPGRADE_TO_A_PAID_PLAN},"data-testid":"starterTeamUpsellFooterUpgradeLink"},(0,S.tx)("file_browser.starter_team.upgrade_link"));return r.createElement(aq.fu,{name:"Starter Team Upsell Footer"},r.createElement("div",{className:$()(k.s.flex.p32.mt16.bRadius6.justifyCenter.colorBorder.$,"starter_team_upsell_footer--borderStyle--pM4nA"),"data-testid":"starterTeamUpsellFooter"},r.createElement("div",{className:$()(k.s.flex.flexColumn.itemsCenter.lh24.$,"starter_team_upsell_footer--contentWrapper--H-soB")},r.createElement("strong",null,i===rd.Wf?(0,S.tx)("file_browser.starter_team.project_limit_warning",{maxProjects:rd.Wf}):(0,S.tx)("file_browser.starter_team.project_limit_warning_over_max_projects")),r.createElement("p",{className:k.s.alignCenter.$},(0,S.tx)("file_browser.starter_team.project_limit_info",{upgradeLink:c})))))}function gG(e){let t=(0,n.wA)(),a=r.useRef(null),o=(0,n.d4)(({dropdownShown:e})=>e),l=e.team.org_id??null,i=(0,Z.Q)({currentOrgId:l,currentTeamId:null}),s=(0,tm.S)(),c=r.useMemo(()=>{if("loaded"===i.status)return(0,H.T0)(i.data,e.team.id)},[i,e.team.id]);if("loaded"!==i.status)return r.createElement("div",{className:k.s.flex.itemsCenter.colorIcon.$},r.createElement(ei.B,{svg:pi.A}));let d=(0,H.gV)(i.data,l),m=e.dropdownKey&&o&&o.type===e.dropdownKey&&o.data&&o.data.targetRect,u=a.current&&o?.data?.targetRef===a.current&&o?.type===nD.jU,_=a.current,p=[];return e.showInvite&&p.push(r.createElement(o5.c$,{key:"import",children:(0,S.tx)("file_browser.team.invite"),onClick:e.onInviteClick})),p.push(r.createElement(o5.c$,{key:"share",children:(0,S.tx)("file_browser.team.view_members"),onClick:t=>e.onMembersClick(t)})),s&&p.push(r.createElement(o5.c$,{key:"add-to-favorites-section",children:r.createElement("div",{className:k.s.flex.justifyBetween.itemsCenter.w150.$},(0,S.tx)("favorited_resources.add_to_sidebar"),r.createElement(ei.B,{svg:ps.A})),onClick:r=>{r.stopPropagation(),a.current&&t(eR.j7({type:nD.jU,data:{targetRect:_.getBoundingClientRect(),targetRef:_,resourceId:e.team.id}}))}})),r.createElement("span",null,r.createElement(nd.E,{className:$()(k.s.flex.itemsCenter.colorIcon.$,pl.HM),ref:a,onClick:a=>{e.dropdownKey&&_&&t(eR.j7({type:e.dropdownKey,data:{targetRect:_?.getBoundingClientRect()}}))}},r.createElement(tM.J,null)),m&&r.createElement(po.Cf,{targetRect:o.data.targetRect,minWidth:172,maxWidth:172,propagateCloseClick:!0},p),u&&r.createElement(pn.t,{setFavorite:e.setFavorite,resourceId:e.team.id,resourceType:eM.bk.TEAM,favoriteId:c?.id,orgId:l,sections:(i.data?.currentUser?.userSidebarSections?(0,et.oA)(i.data.currentUser.userSidebarSections):null)??[],userHasMaxFavorites:d,customSectionOrdering:i.data.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[]}))}var gV=a(957736),gH=a(328797),gz=a(896595),gK=a(76e4),gY=a(443074),gq=a(961675),gJ=a(816760),gX=a(700624),gQ=a(174091),gZ=a(412082),g0=a(809351),g1=a(447120),g4=a(725183),g2=a(392440);function g3(e){let{team:t,orgTeamActionType:a}=e;switch(a){case oh.gO.CLICK_JOIN:case oh.gO.BYPASS_REQUEST:return r.createElement(r.Fragment,null,(0,S.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),r.createElement("br",null),(0,S.tx)("file_browser.team.please_join_team"));case oh.gO.CLICK_REQUEST:return r.createElement(r.Fragment,null,(0,S.tx)("file_browser.team.no_permissions_message",{teamName:t.name}),r.createElement("br",null),(0,S.tx)("file_browser.team.please_request_to_join_team"));case oh.gO.CLICK_WITHDRAW:return(0,S.tx)("file_browser.team.request_to_join_team_is_pending",{teamName:t.name});default:return(0,S.tx)("file_browser.team.no_permissions_message",{teamName:t.name})}}function g5({team:e}){let t=(0,n.d4)(e=>e.currentUserOrgId),a=(0,n.d4)(e=>(0,rm.getPermissionsStateMemoized)(e)),o=(0,n.d4)(t=>t.teamRoleRequests[e.id]),l=(0,eY.Xd)("TeamNonMemberJoinView"),i=(0,rc.MF)({oldValue:r5.Qw.loaded((0,rm.canAdminOrg)(t,a)),newValue:(0,eY.j_)(l),enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_7),label:rc.A5.TeamNonMemberJoinView.canAdminOrg}).unwrapOr(!1),s=(0,oh.YP)(e,o,a,i),c=(0,n.wA)(),d=r.createElement("div",{className:"team_page_view--nonMemberViewContainer--uleTt"},r.createElement("div",{className:"team_page_view--header--sTxh6"},r.createElement(tV.nl,{team:e,size:tV.Pf.LARGE}),r.createElement("span",{className:"team_page_view--teamName--9MXYi text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.name)),r.createElement("div",{className:"team_page_view--joinOptionText--McFNQ text--fontPos14--OL9Hp text--_fontBase--QdLsd"},r.createElement(g3,{team:e,orgTeamActionType:s})),r.createElement("div",{className:"team_page_view--joinButton--waTM-"},r.createElement(gK.m3,{team:e,onJoin:(0,pC.GR)(c,e.id),onLeave:()=>{c(tf.to({type:oI.p,data:{teamId:e.id}}))},isCardActive:!1})));return r.createElement(oO.r,{content:d})}function g8({teamId:e,selectedTab:t,upgradeModalType:a,showProOnboardingModal:o,showResourceConnectionInviteModal:l}){let i=(0,r8.R)(t=>t.teams[e]),s=(0,n.d4)(e=>e.currentUserOrgId),c=(0,n.d4)(e=>i&&i.org_id&&e.orgById[i.org_id]||null),d=(0,n.d4)(e=>e.loadingState),u=(0,n.wA)(),p=(0,eA._6)(),[f,g]=r.useState(!1);(0,gD.w)(e);let E=(0,gQ.Z)(l),b=(0,gJ.t)(E,l);r.useEffect(()=>{l&&b()},[l,b]);let v=(0,rd.w5)(i)&&!i?.org_id,h=function(e){let t=(0,_.Rs)(eK.Fvs,{teamId:e},{enabled:!!e});if(null!==t.data&&!t.data?.team?.plan){let t={code:"nonNullableResult",path:[],retriable:!1,error:Error("No Plan found for team, id: "+e)};return r5.Qw.error([t])}return t.transform(e=>e.team?.plan)}(e),w=r.useMemo(()=>h.transform(e=>e.tier===eM.Ag.PRO||e.tier===eM.Ag.STUDENT),[h]),y=(0,rc.MF)({oldValue:r5.Qw.useMemoizedLoaded(v),newValue:w,label:rc.A5.TeamPageView.isProTeam,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_6),maxReports:5}).unwrapOr(!1);(0,_.Rs)(eK.yQw,{teamId:e});let T=(0,gX.dr)(e),I="loaded"===T.status,x=T.data,N={canAdminTeam:!!x?.canAdmin,canEditTeam:!!x?.canEdit,canReadTeam:!!x?.canRead,canDeleteTeam:!!x?.canDelete,isInTeam:!!x?.isInTeam};(0,m.h)(()=>{let e=(0,gq.QL)("team_role_redemption");if(e&&parseInt(e)in m8.e6){let e=(0,g0.VE)();e&&u(tj.F.enqueue({message:e})),(0,gq.EM)("team_role_redemption")}}),r.useEffect(()=>{let e=gY.um.loadingKeyForPayload();(0,_F.VP)(d,e)||(0,_F.D2)(d,e)||u(gY.um())},[u,d]),r.useEffect(()=>{s&&u((0,pu.Rw)())},[u,s]),r.useEffect(()=>{if(i)g(!1);else{let t=pC.HD.loadingKeyForPayload({teamId:e}),a=`TEAM_GET_ACTION_${e}`;s&&!d[t]?u(pC.HD({teamId:e,disableFlashError:!0})):(0,_F.VP)(d,t)||(0,_F.VP)(d,a)||g(!0)}},[u,d,i,e,s]),r.useEffect(()=>{if(!i||i.org_id)return;let e=_o.m$.loadingKeyForPayload({teamId:i.id});if((0,_F.VP)(d,e)||(0,_F.D2)(d,e)||u(_o.m$({teamId:i.id})),t===eJ.A$.BILLING){(0,rc.HZ)({label:rc.A5.TeamPageView.selectTeamViewBillingTab,oldValue:!1,newValue:!0,maxReports:5});let e=ux.Be.loadingKeyForPayload({teamId:i.id}),t=!(0,_F.D2)(d,e)&&!(0,_F.VP)(d,e);if((0,G.To)())t&&u(ux.Be({teamId:i.id}));else{let e=ux.NP.loadingKeyForPayload({teamId:i.id}),a=!(0,_F.D2)(d,e)&&!(0,_F.VP)(d,e);(t||a)&&u(ux.Q({teamId:i.id}))}}else if(t===eJ.A$.MEMBERS){let e=_o.m$.loadingKeyForPayload({teamId:i.id});(0,_F.VP)(d,e)||(0,_F.D2)(d,e)||u(_o.m$({teamId:i.id}))}else if(t===eJ.A$.SETTINGS){let e=ux.Be.loadingKeyForPayload({teamId:i.id});N.canAdminTeam&&y&&!(0,_F.VP)(d,e)&&!(0,_F.D2)(d,e)&&((0,G.To)()?u(ux.Be({teamId:i.id})):u(ux.Q({teamId:i.id})))}},[u,t,d,i,c,y,N.canAdminTeam]);let C=(0,J.Pc)(),k=(0,_.Rs)(eK.Cit,{teamId:e}),R=k.data?.team?.currentTeamUser,A=(0,tW.R)();r.useEffect(()=>{let e;if(!(i&&C&&R&&a)||!y)return;let r=a===eM.G_.DEV_MODE,n=a===eM.G_.WHITEBOARD?eM._Y.WHITEBOARD:eM._Y.DESIGN;if(n===eM._Y.DESIGN?e=R.designAccountTypeRequest?.status==="pending":n===eM._Y.WHITEBOARD&&(e=R.whiteboardAccountTypeRequest?.status==="pending"),!0===e&&u(rP.s.flash((0,S.t)("team_view.request_upgrade.request_already_sent"))),!A&&!1===e&&(0,eB.dk)(!!(0,eI.XG)(R,n)||r&&!(0,eI.HA)(R,n),e,i,C)){let e=(0,gq.QL)("entry_point")||(r?_q.i$.DowngradeEmail:_q.tc.DOWNGRADE_EMAIL);u(tf.to({type:g2.PK,data:{editorType:n,team:i,entryPoint:e}}))}u(eR.$T({view:"team",teamId:i.id,teamViewTab:t}))},[u,i,C,R,a,y,t,A]),(0,m.h)(()=>{o&&u(tf.to({type:g4.C,data:{teamId:e}}))});let O=r.useRef(!1);r.useEffect(()=>{!O.current&&"team"===p.view&&p.assetTransferRequestId&&u(tf.to({type:(0,gM.S)(),data:{selectedAssetTransferRequest:p.assetTransferRequestId}})),O.current=!0});let P=f||!N.canReadTeam&&!s;return I?P?r.createElement(oW.S,{resourceType:nQ.Ft.TEAM}):i?N.canReadTeam?r.createElement(g6,{team:i,lgTeamPermissions:N,org:c,user:C,selectedTab:t}):r.createElement(g5,{team:i}):null:r.createElement(en.qc,null)}function g6({team:e,lgTeamPermissions:t,org:a,user:o,selectedTab:l}){let s;let{canAdminTeam:c,canEditTeam:d,canReadTeam:m,isInTeam:u,canDeleteTeam:_}=t,[{status:f,data:E}]=(0,p.IT)((0,z.Xg)({teamId:e?.id}),{revalidateOnMount:!0}),b="loaded"===f,v=e.id,h=(0,eN.vt)(v),w=(0,ex.R)(v),y=(0,ex.jn)(),T=(0,n.d4)(e=>e.teamBilling),I=(0,n.wA)(),x=(0,eA._6)(),N=r.useCallback(t=>{let a={view:"team",teamId:e?e.id:"",teamViewTab:t};I(eR.$T(a))},[I,e]),C=(0,n.d4)(e=>e.avatarEditorState),R=(0,n.d4)(e=>e.teamRoleRequests),A=!!(0,n.d4)(t=>e&&(0,rm.canManageOrgTeam)(e.id,t,t.user?.id)),O=r.useMemo(()=>{if(e&&m)switch(e.org_access){case eM.bU.PRIVATE:return(0,S.t)("file_browser.team_header.closed_team_header");case eM.bU.SECRET:return(0,S.t)("file_browser.team_header.secret_team_header")}},[e,m]),P=r.useMemo(()=>{if(e&&m){if(e.org_access===eM.bU.PRIVATE)return(0,S.t)("file_browser.team_header.closed_team_subtitle");if(e.org_access===eM.bU.SECRET)return(0,S.t)("file_browser.team_header.secret_team_subtitle")}},[e,m]),L=r.useCallback((t,a,r)=>{if(e){let n={team:e,entrypoint:"team_page_view",sectionId:r,favoriteId:a};t?I(eP.DN(n)):I(eP.ox(n))}},[I,e]),F=()=>{I((0,z.SX)({where:t7.Ah.FolderListView,team:{...e,canEdit:!!t.canEditTeam}}))},D=()=>{I(eR.oB()),W(),N(eJ.A$.SETTINGS)},M=(0,gz.s)(),B=r.useCallback(()=>{M({teamId:v,canAdmin:t.canAdminTeam})},[M,v,t.canAdminTeam]),U=e?{team:e,billing:T,teamId:e.id}:void 0,$={view:"team",teamId:v,teamViewTab:eJ.A$.HOME},j=(0,gB.n)(gV.am.MEMBERS,U,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,$),W=(0,gB.n)(gV.am.SETTINGS,U,!!t.canAdminTeam,!!t.canEditTeam,!!t.canReadTeam,$);r.useEffect(()=>{l===eJ.A$.MEMBERS?j():l===eJ.A$.SETTINGS&&W()},[]),(0,i.kF)("Team"),(0,i.WX)({markName:"MainBodyContent",isLoaded:b,contextArgs:{numFolders:E?.length??null}}),s=e.org_id?b?r.createElement(r.Fragment,null,r.createElement(mV,{canAdminTeam:c,canEditTeamContents:d,folderList:E||[],isEligbileForProTeamLockedRevampUI:w,onCreateNewFolder:F,selectedView:x,team:e,teamId:v,viewId:`team-${v}`}),r.createElement(dt.cx,null)):r.createElement(en.qc,null):r.createElement(r.Fragment,null,b?r.createElement(r.Fragment,null,r.createElement(mV,{canAdminTeam:c,canEditTeamContents:d,folderList:E||[],isEligbileForProTeamLockedRevampUI:w,onCreateNewFolder:F,selectedView:x,team:e,teamId:v,viewId:`team-${v}`}),r.createElement(dt.cx,null)):r.createElement(en.qc,null));let G=t.canAdminTeam?r.createElement(oQ.FL,{entity:e,entityType:oX.ck.TEAM,avatarEditorState:C,size:40,dispatch:I,avatarSvg:au.A,svgSizeRatio:.6}):r.createElement(tV.nl,{team:e,size:40,avatarSvg:au.A,svgSizeRatio:.6}),V=(0,rc.u8)({oldValue:!m&&!A,newValue:!m,label:rc.A5.TeamPageView.hideTeamContextMenu,enableFullRead:(0,rs.DQ)(rs.Pw.GROUP_5)}),H=(0,gH.N)(),K=(()=>{if(V)return;let t=H({team:e,onChangeTeamIconClick:()=>{I((0,oZ.o)({team:e}))},onRenameClick:()=>{I(tf.to({type:(0,gU.h)(),data:{team:e}}))},selectedTeamPermissions:{canView:m,canAdmin:c,canDelete:_,isInTeam:u}}),r=[];return U&&(d&&(a||r.push({displayText:(0,S.t)("teams_table.view_team_members"),callback:j}),r.push({displayText:(0,S.t)("team_view.settings.view_settings"),callback:D})),a&&r.push({displayText:(0,S.t)("teams_table.view_team_members"),callback:j})),r.length>0&&r.push({displayText:"",separator:!0}),r.push(...t),r})(),Y=K?{kind:oS.A.CUSTOM,key:oB.DROPDOWN,element:r.createElement(oq,{buttonAriaLabel:(0,S.t)("team_view.page_header_dropdown_label"),dropdownKey:`team-${e.id}`,dropdownOptions:K})}:void 0,q=e.pro_team,J=e.student_team?r.createElement(gj,null):(0,rd.w5)(e)?void 0:r.createElement(gW,{team:e});return r.createElement(oO.r,{content:r.createElement(r.Fragment,null,s,J),banner:r.createElement(_g,{teamId:v,selectedTab:l}),header:r.createElement(oA,{avatar:G,title:e.name,rightSideActions:function(e,t,a,n,o,l,i,s,c){let d=[],m=!!Object.keys(l).includes(e.id)&&l[e.id]?.status===p_.c.PENDING,u=o.canAdminTeam&&!o.isInTeam,_={kind:oS.A.CUSTOM,key:oB.FAVORITE,element:r.createElement(oJ.i,{setFavorite:n,favoriteType:eM.bk.TEAM,resourceId:e.id,orgId:e.org_id,size:"lg"})};u&&d.push({kind:oS.A.CUSTOM,key:oB.JOIN_TEAM,element:r.createElement(rI.c,{variant:"secondary",onClick:(0,pC.GR)(t,e.id,m8.e6.ADMIN)},(0,S.t)("file_browser.team.join_team"))});let p=c?aJ.Ib.TEXT:void 0,f=c?(0,S.t)("locked_team.label.tooltip"):void 0;o.canEditTeam&&!(0,eI.R$)(a,e.org_id)?d.push({kind:oS.A.CUSTOM,key:oB.NEW_PROJECT,element:r.createElement("div",{"data-tooltip":f,"data-tooltip-type":p},r.createElement(rI.c,{"data-onboarding-key":"team-view-new-project-cta","data-testid":"team-view-new-project-cta",variant:"primary",disabled:c,"aria-label":(0,S.t)("project_creation.create_project"),iconPrefix:r.createElement(tB.x,null),onClick:()=>{t((0,z.SX)({team:{...e,canEdit:o.canEditTeam},where:t7.Ah.FolderListView}))}},(0,S.tx)("file_browser.team.add_project"))),showOnMobile:!0}):!e.org_id||e.org_access===eM.bU.SECRET||u||o.canAdminTeam||d.push({kind:oS.A.CUSTOM,key:oB.REQUEST_TO_EDIT,element:r.createElement(rI.c,{variant:"primary",onClick:()=>{m?t(pm.lT({requestId:l[e.id]?.id})):t(tf.to({type:pp.$,data:{team:e,requesterCurrentLevel:m8.e6.VIEWER}}))}},m?(0,S.t)("file_browser.team.cancel_request"):(0,S.t)("file_browser.team.request_to_edit"))}),d.push({kind:oS.A.CUSTOM,key:oB.INVITE,element:r.createElement(rI.c,{variant:"secondary",onClick:c?g.lQ:s,disabled:c,htmlAttributes:{"data-tooltip":f,"data-tooltip-type":p}},(0,S.t)("file_browser.team.share"))}),e.org_id&&d.push(_);let E=r.createElement(gG,{dropdownKey:"team-overflow-dropdown",team:e,showInvite:!0,onInviteClick:s,onMembersClick:i,setFavorite:n});return d.push({kind:oS.A.CUSTOM,key:oB.TEAM_OVERFLOW_MENU,showOnMobile:!0,hideOnDesktop:!0,element:E}),d}(e,I,o,L,t,R,e=>{e.stopPropagation(),I(eR.oB()),j(),N(eJ.A$.MEMBERS)},B,!!v&&h||y),rightSideOfTitleAction:Y,pageHeaderIcon:void 0,badge:r.createElement(rK.Y,{direction:"horizontal"},O?r.createElement("div",{className:k.s.ml4.mr4.$,"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":O,"data-tooltip-offset-y":-4,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":200,"data-tooltip-subtext":P},r.createElement(oH.$,null)):void 0,q?r.createElement(r.Fragment,null,r.createElement(aq.fu,{name:aK._Y.PROFESSIONAL,properties:gZ.S.getTrackingProperties(v)},r.createElement(aq.$z,{type:"button",onClick:()=>{I(tf.to({type:g1.q,data:{teamId:e.id}}))},className:"team_page_view--pointerOnHover--at7fp"},r.createElement(aK.Ex,{color:aK.zE.INFORMATIONAL,text:(0,S.t)("pro_onboarding.professional"),size:aK.vj.EXTRA_LARGE})))):void 0)})})}var g7=a(861813),g9=a(50429),Ee=a(72462),Et=a(527546),Ea=a(566726),Er=a(466747),En=a(900552),Eo=a(726300),El=a(45137),Ei=a(226710);let Es={ctrlKey:"metaKey"};function Ec(e,t={}){let a=(0,n.wA)(),o=(0,n.Pj)(),l=r.useMemo(()=>({metaKey:e=>{let t=(0,d8.xS)(o.getState(),e);a(ta.V3({url:t}))},...t}),[t,a,o]);return r.useCallback((t,r)=>{let n=e(r),o=Object.keys(l).find(e=>t[e]);if(o){let e=l[E.Ay.mac?o:Es[o]||o];if(e){t.preventDefault(),e(n);return}}a(eR.$T(n))},[l,a,e])}var Ed=a(15120),Em=a(941237),Eu=a(779237);let E_="org_user_meta_content--teamsHeader--1p4jT org_user_meta_content--sectionHeader--snmkw text--fontPos13--xW8hS text--_fontBase--QdLsd";function Ep(e){let t=(0,n.wA)(),a=(0,J.iZ)(),o=(0,Em.w)(e.user),l=(0,n.d4)(t=>t.currentUserOrgId===e.orgId),i=()=>{t((0,tf.to)({type:Eu.u}))};return r.createElement("div",{className:k.s.flex.flexColumn.ml16.hFull.$},r.createElement(g9.x,{isLoading:e.isLoading},()=>r.createElement(r.Fragment,null,r.createElement("div",{className:"org_user_meta_content--userData--NrFpt"},r.createElement(tV.H8,{user:e.user,size:tV.Pf.LARGE}),r.createElement("div",{className:"org_user_meta_content--userName--JeBfv text--fontPos18--rYXJb text--_fontBase--QdLsd"},e.title),e.user.profile?.job_title&&r.createElement("div",{className:"org_user_meta_content--jobTitle--bWmsS text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement(aK.Ex,{color:aK.zE.INVERT,text:(0,El.lb)(e.user.profile?.job_title)}),e.userId===a?.id&&r.createElement("span",{className:"org_user_meta_content--blueLink--u44PB blue_link--blueLink--9rlnd",role:"button",tabIndex:0,onClick:i},(0,S.tx)("internal_profile.change_job_title"))),e.user.email&&r.createElement("div",{className:"org_user_meta_content--email--tgx7t text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.user.email),(e.description||!e.isReadOnly)&&r.createElement(Ei.TI,{value:e.description??"",placeholder:(0,S.t)("internal_profile.add_a_description"),submit:e.submitDescription,formatter:Ei.qU,readOnly:e.isReadOnly,className:"org_user_meta_content--description--gYuxd text--fontPos13--xW8hS text--_fontBase--QdLsd"})),o&&e.user?.id===a?.id&&r.createElement(Ev,{user:e.user}),l&&r.createElement(eo.P,{className:k.s.flexShrink1.bt1.bSolid.colorBorder.$,innerClassName:k.s.p16.borderBox.flex.flexColumn.$},r.createElement("div",{className:E_},(0,S.tx)("internal_profile.teams")),r.createElement(Eh,{userId:e.userId,orgId:e.orgId}),r.createElement("div",{className:E_},(0,S.tx)("internal_profile.recent_projects")),r.createElement(EE,{files:e.recents,isYourProfile:!e.isReadOnly})))))}function Ef(e){let t=(0,J.iZ)(),a=(0,n.wA)();return r.createElement(Ep,{submitDescription:t=>{a(Ed.yJ({user:{id:e.userId,description:t},userInitiated:!0}))},isLoading:!e.user,isReadOnly:!t||t.id!==e.userId,description:e.user.description??null,title:e.user.name??e.user.handle??null,userId:e.userId,user:e.user,recents:e.recents,orgId:e.orgId})}function Eg(e){let t=(0,n.wA)(),a=(0,J.iZ)();return r.createElement(Ep,{isLoading:!e.user||!e.orgUser||!e.org,isReadOnly:!a||a.id!==e.userId,description:(e.orgId&&e.orgUser?e.orgUser.description:e.user.description)??null,title:e.user&&e.org?(0,S.t)("internal_profile.title",{userName:e.user.handle,orgName:e.org.name}):null,recents:e.recents,submitDescription:a=>{e.orgId&&e.orgUser&&t(pk.yJ({orgUser:{id:e.orgUser.id,org_id:e.orgId,description:a},userInitiated:!0}))},user:e.user,userId:e.userId,orgId:e.orgId})}function EE(e){let t=Ec(e=>({view:"folder",folderId:e})),a=(0,r.useMemo)(()=>{let t=new Set;for(let a of e.files.status===Ee.r.SUCCESS?e.files.value:[])a.folder_id&&t.add(a.folder_id);return Array.from(t).slice(0,10)},[e.files]),n=(0,En.Cm)(a,e.files.status===Ee.r.SUCCESS&&!!e.files.value),o=r.useMemo(()=>{if(e.files.status!==Ee.r.SUCCESS||"loading"===n.status)return[];let t=[],r=[];if(!e.files)return t;let o=new Set;for(let l of e.files.value){let e=l.folder_id;if(!e||o.has(e)||!a.includes(e)||(o.add(e),""===l.folder_name||null==l.folder_name))continue;let i=!!n?.data?.[e],s={id:e,name:l.folder_name,teamName:l.team_name,canView:i};if(s.canView?t.push(s):r.push(s),t.length+r.length>=5)break}return t.concat(r)},[e.files,n,a]);return r.createElement(g9.x,{isLoading:e.files.status===Ee.r.LOADING||"loading"===n.status},()=>r.createElement("div",null,0===o.length&&r.createElement("div",{className:"org_user_meta_content--projectEmptyState--zusT6 text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.isYourProfile?(0,S.t)("internal_profile.your_recent_projects_will_appear_here"):(0,S.t)("internal_profile.their_recent_projects_will_appear_here")),o.map(e=>r.createElement("div",{key:e.id,onClick:e.canView?a=>t(a,e.id):void 0,className:e.canView?"org_user_meta_content--project--t-Nos org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa":"org_user_meta_content--dimProject--a1lrh org_user_meta_content--dim--aNVfK org_user_meta_content--projectBase--ofeuj text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},r.createElement("span",{"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":e.canView?void 0:(0,S.t)("internal_profile.you_must_be_a_member_of_team_name",{teamName:e.teamName})},e.name)))))}function Eb(e){return r.createElement("div",{className:"org_user_meta_content--userProfileNotification--qHv4P"},r.createElement("div",{className:"org_user_meta_content--userProfileNotificationTitle--lDm8h text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.title),r.createElement("div",{className:"org_user_meta_content--userProfileNotificationText--H2ZHJ text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.text),r.createElement("div",{className:"org_user_meta_content--userProfileNotificationAction--NQLlj"},e.action))}function Ev(e){let{profile:t}=e.user,a=(0,n.wA)();return r.createElement(r.Fragment,null,t?.images?null:r.createElement(Eb,{title:(0,S.t)("internal_profile.profile_image_nudge.title"),text:(0,S.t)("internal_profile.profile_image_nudge.text"),action:r.createElement(ea.N_,{trusted:!0,className:"org_user_meta_content--userProfileNotificationActionLink--sVVav",onClick:()=>{a((0,oZ.X)({entity:e.user,entityType:oX.ck.CURRENT_USER,shape:"CIRCLE"})),(0,V.Cu)({trackingContext:aX.e0.FILE_BROWSER,context:"job_title",text:"Update Photo"})}},(0,S.tx)("internal_profile.profile_image_nudge.action"))}))}let Eh=(0,n.Ng)((e,t)=>({permissionState:e}))(function(e){let[t,a]=r.useState(null);r.useEffect(()=>{uG.k.getTeams({userId:e.userId,orgId:e.orgId||void 0}).then(e=>{a(e.data.meta)}).catch(e=>{console.error("Unable to load org user teams",e)})},[e.userId,e.orgId]);let n=(0,r.useMemo)(()=>(t||[]).slice(0,10),[t]),o=(0,Eo.GG)(n.map(e=>e.id),!!n),l=Ec(e=>({view:"team",teamId:e.id})),i=(n||[]).sort((e,t)=>{let a=o.data?.[e.id],r=o.data?.[t.id];return a&&!r?-1:!a&&r?1:0}),s=!n||"loaded"!==o.status;return r.createElement(g9.x,{isLoading:s},()=>r.createElement("div",{className:k.s.flex.flexColumn.gap8.$},i.map(e=>{let t=o.data?.[e.id];return r.createElement(aL.rE,{key:e.id,entity:e,size:12,hideFallbackInitial:!0,onClick:t?l:void 0,className:`org_user_meta_content--teamListItem--gXcF- text--fontPos13--xW8hS text--_fontBase--QdLsd ${t?"":"org_user_meta_content--dim--aNVfK"}`,"data-tooltip-type":aJ.Ib.TEXT,"data-tooltip":t?void 0:(0,S.t)("internal_profile.you_re_not_a_member_of_this_team"),"data-tooltip-offset-y":4})}),n&&0===n.length&&(0,S.tx)("internal_profile.no_teams_in_common"),t&&t.length>10&&r.createElement("div",{className:"org_user_meta_content--numOtherTeamsRow--aAVva"},(0,S.tx)("internal_profile.N_other_teams",{numOtherTeams:t.length-10}))))});var Ew=a(20687);function Ey(e){let t=(0,Ew.i8)(e.publishedPlugins),a=(0,Ew.LH)((0,Ew.ky)(t,e.userId),e.org),n=Object.keys(a).map(e=>a[e]),o=(0,tl.LN)(n);return 0===o.length?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"user_org_resources--sectionHeader--MUg1j internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("file_browser.settings.plugins_published",{orgName:e.org.name})),r.createElement("div",{className:"user_org_resources--container---l25- profile_resources_grid--_resourcesGridTemplateColumns--19JO6"},o.map(e=>r.createElement(_B.cS,{pluginId:e.id,showInstallCount:!0,key:`plugin-${e.id}`,viewContext:"UserOrgResources"})),r.createElement(_B.hT,{numResources:o.length})))}function ET(e){let{org:t}=e,a=(0,n.d4)(a=>(t&&t.id&&a.orgUsersByOrgId[t.id]||{})[e.user.id]);return t?r.createElement(Eg,{orgId:t.id,recents:e.recents,userId:e.user.id,user:e.user,org:t,orgUser:a}):r.createElement(Ef,{orgId:null,recents:e.recents,userId:e.user.id,user:e.user})}let EI={showInFolder:!0,open:!0,openNewTab:!0,restoreFromVersion:!0,rename:!0,share:!0,copyLink:!0,duplicateToDrafts:!0,delete:!0,removeFromRecents:!1,createBranch:!0,publishOrgTemplate:!1,moveFile:!0,pinToWorkspace:!1},Ex=e=>{let t=e.user.id,a=(0,n.wA)(),l=(0,n.d4)(e=>e.selectedView),i=e.orgUser&&e.orgUser.org_id,s=(0,n.d4)(e=>e.currentUserOrgId),c=void 0===i?s:i,d=(0,n.d4)(e=>c&&e.orgById[c]||null),m=(0,o.k)().xr_debounce_threshold&&d,u="user"===l.view?l.userViewTab:void 0;r.useEffect(()=>{a((0,tf.ES)({type:Er.E}))},[a,u]);let p=(0,n.d4)(e=>e.userFlags);r.useEffect(()=>{p.seen_profile||a(eL.b({seen_profile:!0}))},[a,p.seen_profile]);let f=(0,n.d4)(e=>e.tileSortFilterStateByView.user),E=r.useMemo(()=>({srcTileSortFilterConfig:{filters:{creator:lH.rJ.ANY,fileType:lH.t2.ANY},sort:{key:lH.C0.ACCESSED_AT,dir:lH.ue.DESC}},tileSortFilterConfig:f,sortKeys:[lH.C0.NAME,lH.C0.CREATED_AT,lH.C0.ACCESSED_AT]}),[f]),b=r.useMemo(()=>{let e=new URLSearchParams;return c&&e.append("org_id",c),`/api/user/${t}/recents${""===e.toString()?"":"?"}${e.toString()}`},[t,c]),[v,h]=r.useState([]),[w,y]=r.useState([]),[T,I]=r.useState(!0),[x,N]=r.useState(null),[k,R]=r.useState(0),[A,O]=r.useState(0),P=r.useCallback(e=>{N(e),a(tj.F.enqueue({message:(0,S.t)("internal_profile.an_error_occurred"),error:!0}))},[a]),{fetchNext:L,hasMore:F}=(0,Et.WQ)(b,P,55),D=r.useCallback(async()=>{if(!F)return;let e=async()=>{try{let e=await L();if(!Array.isArray(e))return;(0,o.k)().livegraph_user_profile_full_read||h(t=>[...t,...e])}catch(e){P(e)}};await e()},[L,P,F]),{data:M,status:B,errors:U}=(0,_.Rs)(eK.F8N,{action:"edit",userId:t,firstPageSize:55,sortOrder:"DESC"},{enabled:!!(0,o.k)().livegraph_user_profile_dark_read});r.useEffect(()=>{if(U?.length){P(U[0]);return}if("loaded"===B&&M.userPublic?.paginatedRecentFiles.status==="loaded"){let e=M.userPublic?.paginatedRecentFiles.data,t=[];for(let a of e||[])null===a.file||a.file.parentOrgId!==c||a.file.isDraftFile||null!==a.file.trashedAt||t.push(function(e){return{key:e.file.key,name:e.file.name,timestamp:e.actionAt.getTime()/1e3,editor_type:e.file.editorType,folder_name:e.file.project?.name||"",folder_id:e.file.folderId,team_id:e.file.teamId,team_name:e.file.team?.name||"",thumbnail_url:e.file.signedThumbnailUrl,client_meta:e.file.clientMeta,thumbnail_guid:e.file.thumbnailGuid||null,edit_url:e.file.editUrl,source_file_name:e.file.sourceFile?.name||null,has_file_link_password:!!e.file.hasFileLinkPassword,link_access:e.file.linkAccess}}(a));(0,o.k)().livegraph_user_profile_full_read&&h(t),y(t),t.length<55&&A<3&&e?.hasNextPage()&&!e?.isLoadingNextPage&&(e?.loadNext(55),O(e=>e+1),I(!1))}},[M,B,U,P,c,A]),r.useEffect(()=>{(async()=>{v.length<55&&k<3&&(await D(),R(e=>e+1),I(!1))})()},[k]),(0,rc.u8)({oldValue:v,newValue:w,label:rc.A5.InternalUserProfilePageView.InternalUserProfileViewInner,oldValueReady:v.length>=55||k>=3,newValueReady:M?.userPublic?.paginatedRecentFiles.status==="loaded"&&(w.length>=55||A>=3),enableShadowRead:!!(0,o.k)().livegraph_user_profile_dark_read});let $=r.useMemo(()=>v.filter(e=>{switch(f.filters.fileType){case lH.t2.ANY:return!0;case lH.t2.DESIGN:return"design"===e.editor_type;case lH.t2.FIGJAM:return"whiteboard"===e.editor_type;case lH.t2.PROTOTYPE:return!1;case lH.t2.SITES:return"sites"===e.editor_type;case lH.t2.SLIDES:return"slides"===e.editor_type;case lH.t2.COOPER:return"cooper"===e.editor_type;case lH.t2.MAKE:return"figmake"===e.editor_type;default:(0,C.xb)(f.filters.fileType)}}),[v,f]),j=r.useMemo(()=>x?{status:Ee.r.FAILURE,error:x}:T?{status:Ee.r.LOADING}:{status:Ee.r.SUCCESS,value:$},[T,x,$]),W=(0,g7.J)(()=>d&&d.community_profile_id?a(Ea.pZ({profileId:d.community_profile_id})):Promise.resolve([]),[a,d]),G="user"===l.view&&l.userViewTab===lm.o.INTERNAL_PROFILE_POSTS?lm.o.INTERNAL_PROFILE_POSTS:lm.o.INTERNAL_PROFILE,V=u===lm.o.INTERNAL_PROFILE?[r.createElement("div",{key:"sort-filter",className:"internal_user_profile_page_view--hideFilterRightPadding--fd-Z-"},r.createElement(nA.ye,{config:E.tileSortFilterConfig}))]:[],[H,z,K]=lo.t.useManagedTabs({[lm.o.INTERNAL_PROFILE]:!0,[lm.o.INTERNAL_PROFILE_POSTS]:!0},G,e=>{a(eR.$T({view:"user",userId:t,userViewTab:e}))}),Y=r.createElement(nA.g2,{leftSide:m?r.createElement(ee.J,null,r.createElement(lo.t.TabStrip,{manager:K},r.createElement(lo.t.Tab,{key:lm.o.INTERNAL_PROFILE,...H[lm.o.INTERNAL_PROFILE]},(0,S.t)("internal_profile.file_contributions")),r.createElement(lo.t.Tab,{key:lm.o.INTERNAL_PROFILE_POSTS,...H[lm.o.INTERNAL_PROFILE_POSTS]},(0,S.t)("internal_profile.posts")))):null,rightSide:V}),q=r.useCallback((e,t,r)=>{ms({tile:e,index:r,dispatch:a,selectedView:l,isListView:!1})},[l,a]),{showing:J,show:X,data:Q}=(0,lj.L)(),Z=r.useCallback((e,t,a)=>{X({data:{tile:e,targetRect:{top:t.clientY,right:t.clientX,bottom:t.clientY,left:t.clientX,width:1,height:1},index:a}})},[X]),et=r.useMemo(()=>j.status===Ee.r.SUCCESS?j.value.map(e=>(function(e){let t={...e,name:e.source_file_name?e.source_file_name+": "+e.name:e.name,description:null,created_at:"",url:"",creator_id:"",deleted_at:null,trashed_at:null,trashed_user_id:null,has_proto_link_password:!1,license:null,proto_link_access:null,touched_at:new Date(1e3*e.timestamp).toString(),prototype_url:"",updated_at:"",file_repo_id:null,source_file_key:null,is_try_file:!1};return(0,t1.fA)(t)})(e)):[],[j]);return(0,aq.T8)(r.createElement(oO.r,{scrollableContainerClass:"internal_user_profile_page_view--pageContainer--FQu11",containerClass:"internal_user_profile_page_view--pageContainerInner--2Ep2e",content:!e.userNotInPlan&&r.createElement("div",{className:"internal_user_profile_page_view--content--X0lTp"},r.createElement("div",{className:"internal_user_profile_page_view--viewbar--eprew"},Y),u===lm.o.INTERNAL_PROFILE&&(W.status===Ee.r.SUCCESS&&j.status===Ee.r.SUCCESS?r.createElement(r.Fragment,null,d&&r.createElement(Ey,{userId:t,org:d,publishedPlugins:W.value}),!m&&r.createElement("div",{className:"internal_user_profile_page_view--sectionHeader--3NNNT text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,S.tx)("internal_profile.file_contributions")),r.createElement(eo.P,null,r.createElement(d0.d,{items:et??[],handleOpenTile:q,handleOpenDropdown:Z,sortConfig:f.sort,viewType:lH.XU.GRID,gridContainerStyle:EC.grid,sortBy:g.lQ}),(()=>{let e=Q?.tile??null;return r.createElement(aq.fu,{name:aX.e0.TILES_VIEW_DROP_DOWN,enabled:J,properties:{tileType:e?.type,tileFileId:e?.type===t1.nb.FILE?e?.file.key:void 0}},r.createElement(lW.i,{tileActions:EI,selectedTiles:e?[e]:[],tile:e,openTile:()=>{e?.type===t1.nb.FILE&&(0,tZ.Tq)(a,e.file)},dropdownVisible:J}))})())):r.createElement(en.qc,null)),u===lm.o.INTERNAL_PROFILE_POSTS&&d&&r.createElement(dS,{currentOrgId:d.id,selectedUser:e.user})),metaContent:r.createElement(ET,{user:e.user,recents:j,org:d,orgUser:e.orgUser})}),aX.e0.USER_DETAILS,{view:"org_user",userId:t})};function EN(e){return r.createElement(Ex,{key:e.user.id,user:e.user,orgUser:e.orgUser,userNotInPlan:e.userNotInPlan})}let EC={grid:{paddingRight:"x1m2p0i2",paddingLeft:"x163pfp",paddingInlineStart:null,paddingInlineEnd:null,paddingBottom:"x1gan7if",$$css:!0}},Ek=(e,t,a)=>e&&e.id===a?Promise.resolve(e):uG.k.getUser({userId:a}).then(e=>e.data.meta).catch(e=>{throw t(rP.s.error("Failed to get user",5e3)),console.warn("Failed to get user files"),e}),ES=(e,t,a)=>a?e(pk.I1({orgId:a,userId:t,allowNoOrgUser:!0})):Promise.resolve(null),ER={[lm.o.INTERNAL_PROFILE]:{Component:EN},[lm.o.INTERNAL_PROFILE_POSTS]:{Component:EN},[lm.o.PLUGINS]:{Component:r.Fragment}};function EA(e){return r.createElement(e.component,{...e.context})}function EO(e){let t=(0,n.wA)(),a=(0,J.iZ)(),o=e.orgId,l=(0,n.d4)(e=>e.currentUserOrgId),i=void 0===o?l:o,s=(0,eY.tJ)("UserPageView").unwrapOr(null),c=(0,g7.J)(()=>Promise.all([Ek(a,t,e.userId),ES(t,e.userId,i)]).then(([a,r])=>(i&&!r&&t(tj.F.enqueue({type:"org_user_not_found",message:s?.name?(0,S.t)("org_user_actions.org_user_not_found",{userHandle:a.handle,planName:s.name}):(0,S.t)("org_user_actions.org_user_not_found_without_plan_name",{userHandle:a.handle}),error:!0,onDismiss:g.lQ})),(0,tZ.hL)(a.handle),{userNotInPlan:!!(i&&!r),userId:e.userId,user:a,orgUser:r,profileHandle:a.community_profile_handle||null,on404Redirect:r?()=>{t(eR.$T({view:"user",userId:e.userId,orgId:i,userViewTab:lm.o.INTERNAL_PROFILE}))}:()=>{d.Ay.redirect("/404")}})),[t,a,i,e.userId,s]),{tab:m}=e;if(!m)return null;let{Component:u}=ER[m];return r.createElement(g9.x,{className:"user_page_view--loadingContainer--vr9Zb",state:c,failure:void 0},t=>r.createElement(EA,{component:u,tab:m,userId:e.userId,context:t}))}function EP({workspaceId:e}){let t=(0,Y.sZ)(),a=(0,X.P)(t.id,e);return"loaded"!==a.status?null:"Unassigned"===a.data?r.createElement(i_.A5,null,r.createElement(EF,{org:t,workspaceId:e})):r.createElement(i_.A5,null,r.createElement(EL,{org:t,workspaceId:e,workspace:a.data}))}function EL({org:e,workspaceId:t,workspace:a}){let n=oo(a);return r.createElement(EF,{org:e,workspaceId:t,parentBackgroundColor:n})}function EF({org:e,workspaceId:t,parentBackgroundColor:a}){let o=(0,n.wA)();return r.createElement(i_.jT,{text:e.name,parentBackgroundColor:a,onClick:a=>{o(eR.$T({view:"org",orgId:e.id,orgViewTab:th.X.HOME})),(0,V.Cu)({clickedResourceType:"org",clickedResourceId:e.id,currentResource:t,orgId:e.id})}})}function ED({showingFileBrowserLoader:e}){let t=(0,eA._6)();r.useEffect(()=>{(0,V.o5)(t)},[t]);let a=function(){let e=(0,n.wA)(),t=(0,J.Pc)(),a=(0,Y.dq)(),o=(0,eA._6)(),l=(0,nt.cD)(),i=(0,Y.sZ)(),s=(0,n.d4)(e=>e.search),c=(0,ez.H)({useCurrentPlan:!0}),d=function(){let e=eC({project:"drafts"});return r.useCallback(({from:t})=>e?[r.createElement(gP,{key:t,from:t})]:[],[e])}();switch(o.view){case"resourceHub":if(!(0,ip.yl)())return null;return{pageHeaderContent:r.createElement(c6,null),pageContent:r.createElement(c2,null)};case"deletedFiles":return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.trash"),pageContent:(0,aq.T8)(r.createElement(mK,{key:"trashed",selectedTab:mz.FILES}),aX.e0.FILE_BROWSER,{view:"trashed"})};case"litmus":if(!(0,c9.OF)())return null;switch(o.subView){case"projects":return{pageHeaderContent:"Litmus",pageContent:r.createElement(c7.AJ,null)};case"feed":return{pageHeaderContent:"Litmus",pageContent:r.createElement(c7.YA,null)}}case"trashedFolders":return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.trash"),pageContent:(0,aq.T8)(r.createElement(mK,{key:"trashed",selectedTab:mz.FOLDERS}),aX.e0.FILE_BROWSER,{view:"trashed"})};case"draftsToMove":return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.drafts_to_move"),pageContent:r.createElement(u6,{key:"draftsToMove"})};case"folder":if(o.folderId===t?.drafts_folder_id)return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.drafts"),pageHeaderActions:d({from:iE.f6.FILE_BROWSER_TOPBAR_DRAFTS}),pageContent:(0,aq.T8)(r.createElement(uF,{folderId:o.folderId,key:"drafts",userId:t.id}),aX.e0.FILE_BROWSER_DRAFTS,{orgId:a,teamId:l})};return{pageContent:(0,aq.T8)(r.createElement(ph,{folderId:o.folderId,key:`folder-${o.folderId}`}),aX.e0.FOLDER_PAGE,{orgId:a,teamId:l,folderId:o.folderId}),pageHeaderContent:r.createElement(_n,{folderId:o.folderId}),pageHeaderDividerHidden:!0};case"workspace":switch(o.subView){case e9.V0.ADMIN:return{pageHeaderContent:r.createElement(EP,{workspaceId:o.workspaceId}),pageHeaderDividerHidden:!0,pageContent:(0,aq.T8)(r.createElement(P.y$,{workspaceId:o.workspaceId,selectedTab:o.selectedTab}),aX.e0.WORKSPACE_ADMIN_SETTINGS_PAGE,{workspaceId:o.workspaceId,workspaceViewTab:o.selectedTab})};case e9.V0.DIRECTORY:return{pageHeaderContent:r.createElement(EP,{workspaceId:o.workspaceId??null}),pageHeaderDividerHidden:!0,pageContent:(0,aq.T8)(o.workspaceId?r.createElement(im,{key:o.workspaceId,workspaceId:o.workspaceId}):r.createElement(oj,null),aX.e0.WORKSPACE_DIRECTORY_PAGE,{workspaceId:o.workspaceId,workspaceGroupViewTab:o.selectedTab})};default:(0,C.xb)(o)}case"licenseGroup":if(o.subView===e7.GN.ADMIN)return{pageContent:(0,aq.T8)(r.createElement(P.VY,{licenseGroupId:o.licenseGroupId,selectedTab:o.selectedTab}),aX.e0.LICENSE_GROUP_ADMIN_SETTINGS_PAGE,{licenseGroupId:o.licenseGroupId,licenseGroupViewTab:o.selectedTab})};(0,C.xb)(o);case"org":return{pageHeaderContent:i?r.createElement(rt,null):void 0,pageHeaderActions:[r.createElement(pN,{orgId:o.orgId,key:"org-page-header-actions"})],pageContent:(0,aq.T8)(r.createElement(ft,{orgId:o.orgId,selectedTab:o.orgViewTab}),aX.e0.ORG_PAGE,{orgId:o.orgId,orgViewTab:(o.orgViewTab===th.X.HOME?"HOME":o.orgViewTab)||""})};case"orgAdminSettings":let m=(0,A.a)(o.orgAdminSettingsViewTab,o.orgAdminSettingsViewSecondaryTab,{showResourceConnectionInviteModal:!!(c&&o.showResourceConnectionInviteModal),showResourceConnectionFlyout:!!(c&&o.showResourceConnectionFlyout)});return{pageContent:(0,aq.T8)(r.createElement(P.vW,{selectedTab:o.orgAdminSettingsViewTab,selectedSecondaryTab:m,selectedExtensionId:o.selectedExtensionId,selectedWorkspaceId:o.selectedWorkspaceId,showResourceConnectionInviteModal:o.showResourceConnectionInviteModal,showResourceConnectionFlyout:o.showResourceConnectionFlyout}),aX.e0.ORG_ADMIN_SETTINGS_PAGE,{orgId:a,orgViewTab:o.orgAdminSettingsViewTab,source:o.orgAdminSettingsViewTab||"dashboard",orgViewSecondaryTab:m})};case"abandonedDraftFiles":return{pageContent:(0,aq.T8)(r.createElement(P.dZ,{abandonedDraftFolderId:o.abandonedDraftFolderId,planType:o.adminPlanType,planId:o.planId}),aX.e0.ABANDONED_DRAFTS_PAGE,o.adminPlanType===ib.O.ORG?{orgId:o.planId}:{teamId:o.planId})};case"orgDomainManagement":let u=r.createElement(i_.A5,null,r.createElement(i_.J5,{text:(0,S.t)("general.admin"),onClick:()=>{e(eR.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.DASHBOARD}))},hasTrailingDivider:!0}),r.createElement(i_.J5,{text:(0,S.t)("org_dashboard.settings"),onClick:()=>{e(eR.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.SETTINGS}))},hasTrailingDivider:!1}));return{pageContent:(0,aq.T8)(r.createElement(P.Oe,null),aX.e0.ORG_DOMAIN_MANAGEMENT_PAGE,{orgId:a}),pageHeaderContent:u};case"billingGroupDashboard":return{pageContent:(0,aq.T8)(r.createElement(P.wu,{selectedTab:o.selectedTab}),aX.e0.BILLING_GROUP_DASHBOARD_SETTINGS_PAGE,{orgId:a,orgViewTab:o.selectedTab})};case"recentsAndSharing":let _=o.tab??iv.G.RECENTLY_VIEWED,p=d({from:iE.f6.FILE_BROWSER_TOPBAR_RECENTS});return{pageHeaderContent:(0,S.t)("file_browser.tool_bar.recents"),pageHeaderActions:p,pageContent:(0,aq.T8)(r.createElement(gm,{selectedTab:_,userId:t.id,accountModalTab:o.accountModalTab,emailPolicyToUnsubscribeFrom:o.emailPolicyToUnsubscribeFrom}),aX.e0.FILE_BROWSER,{view:"recentsAndSharing",userSpace:a?aX.qo.ORG:aX.qo.PERSONAL})};case"resourceUnavailable":return{pageContent:r.createElement(oW.S,{resourceType:o.resourceType})};case"search":{let{searchScope:e,query:t}=s.parameters,a=!E.Ay.mobile;return{pageHeaderContent:r.createElement(EM,{query:t}),pageContent:(0,aq.T8)(r.createElement(nA.bS,null),aX.e0.UNIFIED_SEARCH,{showInternalModal:a&&e!==ih.Rx.COMMUNITY,showCommunityModal:a&&e===ih.Rx.COMMUNITY})}}case"seatRequests":return{pageContent:(0,aq.T8)(r.createElement(L.m,null),aX.e0.SEAT_REQUESTS_PAGE,{orgId:a,teamId:l,planType:o.adminPlanType})};case"limitedTeamSharedProjects":return{pageContent:r.createElement(pT,null)};case"team":{let e=o.teamViewTab??eJ.A$.HOME;return{pageContent:(0,aq.T8)(r.createElement(g8,{teamId:o.teamId,selectedTab:e,upgradeModalType:o.upgradeModalType,showProOnboardingModal:o.isProUpgrade,showResourceConnectionInviteModal:o.showResourceConnectionInviteModal,key:`team-${o.teamId}`}),aX.e0.TEAM_PAGE,{teamId:o.teamId,userSpace:a?aX.qo.ORG:aX.qo.PERSONAL,orgId:a}),pageHeaderContent:r.createElement(gF,{teamId:o.teamId}),pageHeaderDividerHidden:!0}}case"teamAdminConsole":{let e=o.teamAdminConsoleViewTab??(o.isProTeam?eJ.Iv.DASHBOARD:eJ.Iv.MEMBERS),t=(0,O.X$)(e,o.teamAdminConsoleViewSecondaryTab,{showResourceConnectionInviteModal:!!(c&&o.showResourceConnectionInviteModal),showResourceConnectionFlyout:!!(c&&o.showResourceConnectionFlyout)});return{pageContent:(0,aq.T8)(r.createElement(P.JC,{teamId:o.teamId,selectedTab:e,selectedSecondaryTab:t,showResourceConnectionInviteModal:o.showResourceConnectionInviteModal,showResourceConnectionFlyout:o.showResourceConnectionFlyout}),aX.e0.TEAM_ADMIN_PAGE,{teamId:o.teamId,teamAdminConsoleViewTab:e,teamAdminConsoleViewSecondaryTab:t})}}case"teamFeed":return{pageHeaderContent:r.createElement(i_.A5,null,r.createElement(i_.J5,{text:(0,S.t)("fig_feed.feed"),onClick:()=>{e(eR.$T({view:"teamFeed"}))},hasTrailingDivider:!1})),pageContent:r.createElement(EB,{postUuid:o.postUuid,creatorId:o.creatorId})};case"user":return{pageHeaderContent:(0,S.t)("internal_profile.profile"),pageHeaderActions:t.community_profile_handle&&t.id===o.userId?[r.createElement(fn,{key:"viewCommunityProfileAction"})]:void 0,pageContent:r.createElement(EO,{userId:o.userId,tab:o.userViewTab,orgId:o.orgId})};case"orgIdpManagement":let f=r.createElement(i_.A5,null,r.createElement(i_.J5,{text:(0,S.t)("general.admin"),onClick:()=>{e(eR.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.DASHBOARD}))},hasTrailingDivider:!0}),r.createElement(i_.J5,{text:(0,S.t)("org_dashboard.settings"),onClick:()=>{e(eR.$T({view:"orgAdminSettings",orgAdminSettingsViewTab:eq.J7.SETTINGS}))},hasTrailingDivider:!1}));return{pageContent:(0,aq.T8)(r.createElement(P.T3,null),aX.e0.ORG_IDP_MANAGEMENT_PAGE,{orgId:a}),pageHeaderContent:f};default:return null}}();if(!a)return null;let{CustomPageLayout:o,pageContent:l}=a;return o?r.createElement(mJ,null,r.createElement(o,null,!e&&l)):r.createElement(mJ,null,r.createElement(of,{showingFileBrowserLoader:e,pageHeaderContent:a.pageHeaderContent,pageHeaderActions:a.pageHeaderActions,pageHeaderDividerHidden:a.pageHeaderDividerHidden},l))}function EM(e){return e.query?r.createElement("div",{className:k.s.flex.columnGap8.$},r.createElement("span",{className:k.s.flexShrink0.$},r.createElement(R.E,{color:"secondary"},(0,S.tx)("search.search_results_for"))),r.createElement("div",{className:k.s.flex.fontMedium.minW0.$},"\u201C",r.createElement(R.E,{truncate:!0},e.query),"\u201D")):r.createElement("div",{className:k.s.flex.columnGap8.$},r.createElement("span",{className:k.s.flexShrink0.$},r.createElement(R.E,{color:"secondary"},(0,S.tx)("search.search_results"))))}function EB(e){return(0,ig.w)()?r.createElement(dF,{postUuid:e.postUuid,creatorId:e.creatorId}):null}var EU=a(193544),E$=a(956148),Ej=a(726348),EW=a(159229),EG=a(32389),EV=a(918254),EH=a(89140);let Ez="add_collaborators--emailListItem--dnvC-";function EK({selectedView:e}){let[t,a]=r.useState(["","",""]),o=(0,n.d4)(t=>t.teams[e.teamId]),l=(0,n.d4)(e=>e.teamCreation),i=(0,n.d4)(e=>e.payment),s=(0,n.wA)(),c=r.useCallback(()=>{o&&s(eR.$T({view:"team",teamId:o.id}))},[s,o]),d=r.useCallback((e,r)=>{if(r>=t.length)return;let n=[...t];n[r]=e,a(n)},[t]),m=r.useCallback(()=>{a([...t,""])},[t]),u=r.useCallback(()=>{let e=!!l.isEduTeam;i.promo?s(EV.g_({teamId:o.id,teamName:o.name,previousView:{view:"team",teamId:o.id}})):e?s(sQ.Vm({teamId:o.id,showBreadcrumbs:!0})):s(eR.$T({view:"teamUpgrade",teamFlowType:nQ.SC.UPGRADE_EXISTING_TEAM,teamId:o.id,paymentStep:sZ.tn.UPGRADE_NEW_TEAM,previousView:{view:"team",teamId:o.id},planType:nQ.Sc.TEAM}))},[s,o,i.promo,l.isEduTeam]),_=r.useCallback(()=>t.filter(e=>e).map(e=>e.trim()),[t]),p=r.useCallback(()=>{s((0,EH.rq)({emails:_(),resourceType:eM.vt.TEAM,resourceIdOrKey:o.id,level:m8.e6.EDITOR,teamId:o.id,onSuccess:()=>{s(_o.r1({loading:!1})),u()}}))},[_,o,u,s]);return r.createElement(aq.fu,{name:"Add Collaborators",properties:{teamId:o?.id}},r.createElement("div",null,r.createElement(Ej.O,{menu:r.createElement(E$.X,{onClick:c},r.createElement(ei.B,{svg:nG.default,className:"add_collaborators--modalCloseX--sJGp5"}))},r.createElement(EG.J,{index:2}),r.createElement(EW.JR,null,(0,S.tx)("team_creation.add_your_collaborators")),r.createElement(EW.Kh,null,(0,S.tx)("team_creation.you_can_update_user_permissions_on_the_team_page_after_setting_up")),r.createElement("div",{className:"add_collaborators--formContainer--zTKXv"},r.createElement("div",{className:"add_collaborators--emailInputsContainer--19ZBc"},t.map((e,t)=>r.createElement(ea.il,{key:`collaborator-email-input-${t}`,className:Ez,value:e,onChange:e=>d(e.target.value,t),maxLength:255,placeholder:(0,S.t)("team_creation.email")}))),r.createElement(ea.nR,{className:Ez,onClick:m},(0,S.tx)("team_creation.add_another")),r.createElement("div",{className:"add_collaborators--spacing--2VA7s"}),r.createElement("div",{className:"add_collaborators--ctaContainer--VGMvb"},r.createElement(ea.nD,{disabled:0===_().length,onClick:p,trackingProperties:{numCollaborators:_().length}},(0,S.tx)("team_creation.continue")),r.createElement(ea.Ph,{onClick:u,trusted:!0},(0,S.tx)("team_creation.skip_for_now")))))))}var EY=a(611209),Eq=a(452275),EJ=a(521885),EX=a(917417),EQ=a(324543),EZ=a(948008),E0=a(458609);let E1=["folder","team","search","recentsAndSharing"];function E4(){let e=(0,n.d4)(e=>e.autosave),t=(0,eA._6)(),a=(0,Eq.yZ)(),{unsyncedFiles:o,localUnsyncedFiles:l}=(0,m1.Gg)();return!a||null!=e.lastSnoozeTime&&Date.now()-e.lastSnoozeTime<864e5?null:(o.length>0||l.length>0)&&E1.includes(t.view)?r.createElement(E3,{unsyncedFiles:o,localUnsyncedFiles:l}):null}let E2=!1;function E3(e){let t=(0,n.wA)();r.useEffect(()=>{let e=()=>{t(EX.Jw())};return EZ.hp.register(EZ.a,e),function(){EZ.hp.unregister(EZ.a,e),t(tf.ES({type:EJ.EO.type}))}},[t]);let a=(0,eA._6)(),[o,l]=r.useState(!1);r.useEffect(()=>{E2||(E2=!0,(0,EY.Mw)()),o||(l(!0),(0,np.trackEvent)("Autosave Notification",{hasUnsyncedFiles:e.unsyncedFiles.length>0,hasLocalUnsyncedFiles:e.localUnsyncedFiles.length>0,firstUnsyncedFile:e.unsyncedFiles.length>0?e.unsyncedFiles[0].fileKey:null,firstLocalUnsyncedFile:e.localUnsyncedFiles.length>0?e.localUnsyncedFiles[0].fileKey:null,view:a.view},{forwardToDatadog:!0}))},[t,e.unsyncedFiles,e.localUnsyncedFiles,o,a]);let i=(0,J.iZ)(),s=[...e.unsyncedFiles,...e.localUnsyncedFiles];if(0===s.length||!i)return r.createElement(r.Fragment,null);let c=s.length>1,m=s[0],u=(0,EQ.y8)(m)?m.file.name:m.name,_=u.length>40?u.substring(0,40)+"\u2026":u,p=c?(0,S.t)("autosave.notification.message.more_than_one_file"):(0,S.t)("autosave.notification.message.one_file",{fileName:_}),f=c?(0,S.tx)("autosave.notification.action_review"):(0,S.tx)("autosave.notification.action_open_to_sync");return r.createElement("div",{className:"autosave_notification--notification--u3sx0 text--_negText--j9g-L"},r.createElement(ei.B,{className:"autosave_notification--icon--uvtXB",svg:E0.A,width:"24",height:"24"}),r.createElement("div",{className:"autosave_notification--message--yAhFz"},p),r.createElement("div",{className:"autosave_notification--actions--dk-yq"},r.createElement("div",{className:"autosave_notification--mainAction--sidqJ autosave_notification--action--Brz-5",onClick:()=>{c?t(tf.to({type:EJ.EO})):(0,EQ.y8)(m)?d.Ay.redirect((0,t2.r1)(lV.F.toLiveGraph(m.file),!0),"_blank"):t(d1.NA({file:m,openNewFileIn:iE.ai.NEW_TAB,source:d6.U.AUTOSAVE_NOTIFICATION}))}},f),r.createElement("div",{className:"autosave_notification--action--Brz-5",onClick:()=>{(0,np.trackEvent)("Autosave Notification Snooze",{files:s.length,firstFile:m.fileKey}),t(EX.zE(Date.now()))}},(0,S.tx)("autosave.notification.action_later"))))}var E5=a(544907);let E8="team-org-access-dropdown";function E6(e){let t=(0,n.wA)(),a=e.dropdownShown&&e.dropdownShown.type===E8;return r.createElement("div",{className:"team_org_access_dropdown--orgAccess--JAIwP"},r.createElement("button",{className:"team_org_access_dropdown--select--lqx54",onClick:e=>{e.stopPropagation(),e.preventDefault(),a?t(eR.oB()):t(eR.j7({type:E8}))}},(0,eI.ZP)()[e.orgAccess],r.createElement(ei.B,{svg:a$.A,className:"team_org_access_dropdown--downCaret--INuva"})),a&&r.createElement("div",{className:"team_org_access_dropdown--orgAccessDropdownContainer--iVvqn"},r.createElement(o5.ms,{className:"team_org_access_dropdown--orgAccessDropdown--zJupm"},r.createElement(o5.MM,{checked:e.orgAccess===eM.bU.PUBLIC,onClick:()=>{e.onChangeOrgAccess(eM.bU.PUBLIC)}},(0,eI.ZP)()[eM.bU.PUBLIC]),r.createElement(o5.MM,{checked:e.orgAccess===eM.bU.PRIVATE,onClick:()=>{e.onChangeOrgAccess(eM.bU.PRIVATE)}},(0,eI.ZP)()[eM.bU.PRIVATE]),r.createElement(o5.MM,{checked:e.orgAccess===eM.bU.SECRET,onClick:()=>{e.onChangeOrgAccess(eM.bU.SECRET)}},(0,eI.ZP)()[eM.bU.SECRET]))))}let E7="team_creation--createTeamText--VjY8f";function E9({currentTeamId:e,currentUserOrgId:t,user:a,selectedView:l,dropdownShown:i,teamCreation:s,orgById:c}){var m;let u=(0,n.wA)(),[_,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(eM.bU.PUBLIC),E=l.ignoreCurrentPlan,b=t&&!E?c[t]:null,v=!e&&!t,h=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(h.current)for(let e=0;e<h.current.elements.length;e++){let t=h.current.elements[e];if(!t.value){t.focus();break}}t&&!E&&(0,np.trackEvent)("team_creation_started",{user_id:a?.id??"",org_id:t})},[t,a,E]);let w=e=>{e.preventDefault(),e.stopPropagation(),_?(u((0,pu.KQ)({teamName:_,orgAccess:f,dontRedirect:!!l.onSubmitReturnToPrevView,ignoreCurrentPlan:E})),l.onSubmitReturnToPrevView&&u(eR.$T((0,d.Gl)()||{view:"recentsAndSharing"}))):u(rP.s.error((0,S.t)("team_creation.your_team_name_cannot_be_empty")))},y=!(t&&!E)&&!l.onSubmitReturnToPrevView,T=(0,o.k)().ps_benchmark&&v?null:r.createElement(E$.X,{onClick:()=>{u(eR.$T((0,d.Gl)()||{view:"recentsAndSharing"}))}},r.createElement(ei.B,{svg:nG.default,className:"team_creation--modalCloseX--TTg32"}));return r.createElement(aq.fu,{name:"Team Creation"},r.createElement("div",null,r.createElement(Ej.O,{menu:T},y&&r.createElement(EG.J,{index:1}),r.createElement("form",{ref:h,onSubmit:w},r.createElement(EW.JR,null,(0,S.tx)("team_creation.create_a_team_title")),r.createElement("div",{className:"team_creation--newTeamContainer--43mWz team_creation--newTeamContainerBase--nwYzU"},r.createElement("div",{className:"team_creation--teamNameContainer--B6Pc3"},r.createElement("div",{className:"team_creation--teamNameLabel--ohZWy"},(0,S.tx)("team_creation.team_name_label")),r.createElement(ea.il,{value:_||"",onChange:e=>{p(e.target.value)},className:"team_creation--newTeamInput--PdjEW",maxLength:255,placeholder:(0,S.t)("team_creation.team_name_input_placeholder")})),b?r.createElement("div",{className:"team_creation--orgTeamSettings--bDW2R"},r.createElement("div",{className:k.s.flex.$},r.createElement("div",{className:k.s.fontSemiBold.$},(0,S.tx)("team_creation.access_within_the_organization")),r.createElement(E6,{orgAccess:f,dropdownShown:i,onChangeOrgAccess:e=>{g(e)}})),r.createElement("div",{className:E7},(m=b.name,{[eM.bU.PUBLIC]:(0,S.tx)("org_access_strings.public.description_with_org_name",{orgName:m}),[eM.bU.PRIVATE]:(0,S.tx)("org_access_strings.closed.description_with_org_name",{orgName:m}),[eM.bU.SECRET]:(0,S.tx)("org_access_strings.secret.description_with_org_name",{disclaimerLabel:r.createElement("span",{className:k.s.fontSemiBold.$},(0,S.tx)("org_access_strings.secret.description.disclaimer_label")),orgName:m})})[f])):r.createElement("div",{className:E7},(0,S.tx)("team_creation.after_creating_a_team_you_can_invite_others_to_join")),r.createElement(ea.nD,{className:t?"team_creation--createTeamButtonOrg--2rnOw":"team_creation--createTeamButton--C8IV7",type:"submit",disabled:s.loading,onClick:w},(0,S.tx)("team_creation.create_team_button")))))))}function be({selectedView:e}){let t=(0,n.wA)(),a=(0,Y.dq)(),l=(0,n.d4)(e=>e.orgById),i=(0,J.iZ)(),s=(0,n.d4)(e=>e.currentTeamId),c=(0,du.Um)(),m=(0,n.d4)(e=>e.teamCreation),u=a?l[a]:null,_=(0,eY.Xd)("TeamCreationPage").unwrapOr(null),p=_?.fromOrgUser?.workspaceUsers?.find(e=>e.isMainWorkspace)?.workspaceId,{cannotCreateTeamReason:f}=(0,X.LM)(u,p??null);return(0,eI.R$)(i,a)||f===X.z4.TEAM_CREATION_CONTROL&&!(0,o.k)().ps_benchmark?(d.Ay.redirect("/"),t(rP.s.error((0,S.t)("team_creation.missing_team_creation_controls"))),null):r.createElement(E9,{currentTeamId:s,currentUserOrgId:a,user:i,dropdownShown:c,teamCreation:m,orgById:l,selectedView:e})}let bt="team_restore--page--cMEe2",ba="team_restore--section--AmfWe",br="team_restore--button--C-gOz";function bn({selectedView:e}){let t,a;let o=(0,n.wA)(),[l,i]=r.useState(!1),s=e.teamId,c=(0,n.d4)(e=>e.teams[s]);r.useEffect(()=>{i(!0),rF.$.getDeleted({teamId:s}).then(({data:e})=>{o(_o.bE({team:e.meta})),i(!1)}).catch(e=>{400!==e.status&&(o(eR.$T({view:"recentsAndSharing"})),o(rP.s.error(`${e.data.message}`))),i(!1)})},[o,s]);let d=()=>{o(eR.$T({view:"recentsAndSharing"}))},m=r.createElement(ea.vd,{className:br,onClick:d},(0,S.tx)("team_restore.back"));if(c){if(c.deleted_at){let e=(0,ed.A)(c.deleted_at).add(28,"days").toDate();t=(0,S.t)("team_restore.confirm_restore_header",{teamName:c.name}),a=r.createElement("div",null,(0,S.tx)("team_restore.confirm_restore"),r.createElement("br",null),r.createElement("br",null),(0,S.tx)("team_restore.confirm_restore_deadline",{deleteDeadline:e})),m=r.createElement(ea.vd,{className:br,onClick:()=>{o(_o.I9({teamId:s}))}},(0,S.tx)("team_restore.restore"))}else t=(0,S.t)("team_restore.ineligible"),a=(0,S.t)("team_restore.questions_contact_support",{supportEmail:(0,rf.W4)()})}else{if(l)return r.createElement("div",{className:bt},r.createElement("div",{className:ba},r.createElement(en.kt,null)));t=(0,S.t)("team_restore.expired_header"),a=r.createElement("div",null,(0,S.tx)("team_restore.expired"),r.createElement("br",null),r.createElement("br",null),(0,S.tx)("team_restore.questions_contact_support",{supportEmail:(0,rf.W4)()}))}return r.createElement(aq.fu,{name:"Team Restore",properties:{teamId:s}},r.createElement(Ej.O,{menu:r.createElement(ei.B,{svg:nG.default,onClick:d,className:"team_restore--modalCloseX--XNErW"})},r.createElement("div",{className:bt},r.createElement("div",{className:ba},r.createElement("div",{className:"team_restore--header--NgU8v text--fontPos20--Bcz97 text--_fontBase--QdLsd"},t),r.createElement("div",{className:"team_restore--text--F18dW text--fontPos12--YsUAh text--_fontBase--QdLsd"},a),m))))}var bo=a(871043),bl=a(188279),bi=a(594950),bs=a(501104),bc=a(718275),bd=a(834612),bm=a(912534),bu=a(440456);let b_="legacy_upgrade--closeButton--zJ0JO";var bp=a(605247);function bf({selectedView:e}){let t=(0,n.wA)(),a=(0,n.d4)(t=>t.teams[e.teamId]);if((0,bo.uy)(a))throw Error("Team is nullish");let{taxes:o,numDesignEditors:l,numWhiteboardEditors:i,submitPending:s}=(0,n.d4)(e=>e.payment),c=(0,n.d4)(e=>e.teamUserByTeamId[a.id]||{}),d=(0,n.d4)(e=>e.teamBilling.summary.currency),m=(0,n.d4)(e=>e.loadingState),u=ux.Be.loadingKeyForPayload({teamId:a.id}),_=(0,_F.VP)(m,u)&&!(0,_F.D2)(m,u),p={planParentId:a.id,planType:eM.OL.TEAM},f=(0,bl.vK)(p),g=f.data,E=bs.Oq.exclude([bi.ud.DEV_MODE]).dict(e=>({currency:g,billableProductKey:e,tier:bm.Ju.PRO,renewalTerm:bm.IX.MONTH,unit:bm.IX.MONTH})),b=bs.Oq.exclude([bi.ud.DEV_MODE]).dict(e=>({currency:g,billableProductKey:e,tier:bm.Ju.PRO,renewalTerm:bm.IX.YEAR,unit:bm.IX.MONTH})),v=r5.Qw.all([(0,bl.ic)(E,p,bl.Fq.ADMIN_SETTINGS,{enabled:!!g}),(0,bl.ic)(b,p,bl.Fq.ADMIN_SETTINGS,{enabled:!!g})]),h=_||"loading"===f.status||"loading"===v.status;if((0,r.useEffect)(()=>{(0,_F.VP)(m,u)||(0,_F.D2)(m,u)||t(ux.Be({teamId:a.id}))},[m,t,u,a.id]),h)return r.createElement(en.Z_,null);if(null===v.data)throw Error("Price data is null");let w=r.createElement(ei.B,{svg:nG.default,onClick:()=>{(0,np.trackEvent)("Add Annual Plan Canceled",{teamId:e.teamId}),window.history.length<=1?t(eR.$T({view:"team",teamId:e.teamId})):history.go(-1)},className:b_}),y=a?.editors??0,T=Object.keys(c).filter(e=>c[e]?.whiteboard_paid_status===eM.Zf.FULL).length,I=new bd.vr(d),[x,N]=v.data,C=x[bi.ud.DESIGN].amount,k=x[bi.ud.FIGJAM].amount,R=N[bi.ud.DESIGN].amount,A=N[bi.ud.FIGJAM].amount;return r.createElement("div",{className:"legacy_upgrade--addAnnualPlan--ZH1cn"},r.createElement(Ej.O,{menu:w},r.createElement(aq.fu,{name:"Step Pay"},r.createElement("div",{className:bp.yU},r.createElement(EW.JR,null,(0,S.tx)("payments.add_annual_plan.title")),r.createElement(EW.Kh,null,r.createElement("p",{className:"legacy_upgrade--addAnnualPlanInstructions--MmsnZ"},(0,S.tx)("payments.add_annual_plan.intro.seat_rename",{monthlyDesignEditorCost:I.formatMoney(C,{showCents:!1}),monthlyFigjamEditorCost:I.formatMoney(k,{showCents:!1})}))),r.createElement("div",{className:bp.fI},r.createElement(bu.tG,{annualMonthlyDesignAmount:R,annualMonthlyFigjamAmount:A,currency:d,dispatch:t,isTeamPro:!0,monthlyDesignAmount:C,monthlyFigjamAmount:k,numAnnualDesignEditors:l||0,numAnnualWhiteboardEditors:i||0,onNumAnnualDesignEditorsChange:e=>{t(sQ.js({numDesignEditors:e}))},onNumAnnualWhiteboardEditorsChange:e=>{t(sQ.Az({numWhiteboardEditors:e}))},showAdminPage:()=>{t(eR.$T({view:"team",teamId:e.teamId,teamViewTab:eJ.A$.SETTINGS}))},submitPending:s,taxes:o,teamId:e.teamId,totalDesignEditors:y,totalWhiteboardEditors:T}),r.createElement("form",{onSubmit:a=>{a.preventDefault(),t(eL.b({completed_pro_cart_flow:!0})),t(sQ.I2({submitPending:!0})),t(sQ.XF({teamId:e.teamId}))}},r.createElement("div",{className:bp.ay},(0,S.tx)("payments.add_annual_plan.auto_renew.seat_rename",{cancellingIsEasyLink:r.createElement("a",{target:"_blank",rel:"noopener",href:"/pricing-faq#how-do-i-cancel-my-paid-plan"},(0,S.tx)("payments.add_annual_plan.cancelling_is_easy_link_text"))}),r.createElement("br",null),r.createElement("br",null),(0,S.tx)("payments.add_annual_plan.tos",{tosLink:r.createElement("a",{target:"_blank",rel:"noopener",href:"/tos"},(0,S.tx)("payments.add_annual_plan.tos_link_text"))})),r.createElement("div",{className:`${bp.Ou} ${bp.nM}`},r.createElement(ea.vd,{type:"submit",disabled:s,className:`${bp.XX}`},(0,S.tx)("payments.add_annual_plan.cta_text")))))))))}function bg(e){return r.createElement(D.tH,{boundaryKey:"AddAnnualPlan",team:B.e.BILLING_EXPERIENCE,fallback:r.createElement(bc.K,null)},r.createElement(bf,{...e}))}var bE=a(115971),bb=a(807482);function bv(e){let t=(0,J.iZ)(),[a,o]=r.useState(()=>(0,bd.LN)()),l=rw.b.UPGRADE_NEW_TEAM,i=(0,n.wA)(),s=(0,N.sx)(),c=(t,r)=>{let n=e.selectedView;i(sQ.WX({teamId:e.selectedView.teamId,selectedView:n,newTeam:!0,currency:a,billingPeriod:r}))},d=null===e.selectedView.teamId?void 0:()=>{let a=t?.id;if(a){let t={userId:a,orgId:null,teamId:e.selectedView.teamId};i(ta._l({workspace:t,view:{view:"allProjects"}}))}else i(eR.$T({view:"team",teamId:e.selectedView.teamId}))},m=()=>{i(sQ.Bq({currency:a,upsellSource:l}))},u=e=>{o(e),i(eR.oB())},_=e.selectedView.teamId,p=r.useRef(null);return r.createElement(aq.fu,{name:"Upgrade Team",properties:{teamId:_,step:sZ.tn.UPGRADE_NEW_TEAM}},r.createElement("div",{className:"legacy_upgrade--teamUpgrade--auGJz"},r.createElement(Ej.O,{menu:r.createElement(E$.X,{onClick:()=>{let a=t?.id,r=e.selectedView.teamId,n={view:"recentsAndSharing"};a&&r?i(ta._l({workspace:{userId:a,teamId:r,orgId:null},view:e.selectedView.previousView||n})):i(eR.$T(e.selectedView.previousView||n))}},r.createElement(ei.B,{svg:nG.default,className:b_})),pageRef:p},r.createElement(EG.J,{index:3}),r.createElement(aq.fu,{name:"Upgrade New Team",properties:{teamId:_,trackingDescriptor:eu.c.UPGRADE_YOUR_TEAM}},r.createElement("div",{className:$()(e.className,{"step_upgrade_new_team--container--BixhQ":!0})},r.createElement(EW.JR,{className:"step_upgrade_new_team--stepTitleComparisonChart--yyzB5 step_upgrade_new_team--stepTitle--yFYG8"},r.createElement("span",null,(0,S.tx)("plan_details.choose_your_team_plan"))),s?r.createElement("div",{className:k.s.mxAuto.$,style:es.sx.add({width:"1049px"}).$},r.createElement(bE.P,{upsellSource:l,currency:a,updateCurrency:u,chooseStarterPlan:d,chooseProPlan:e=>c(null,e),chooseOrgPlan:m,planComparisonModalHeaderOverride:null})):r.createElement(bb.O,{currency:a,chooseStarterPlan:d,chooseProPlan:e=>c(null,e),chooseOrgPlan:m,updateCurrency:u,upsellSource:l,parentRef:p}))))))}var bh=a(27382),bw=a(182317),by=a(83432),bT=a(669362),bI=a(659717),bx=a(731991),bN=a(107691),bC=a(236880);class bk extends r.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.timer=null,this.controller=new AbortController,this.payload=null,this.fetchScheduledDowntimeInfo=async()=>{let e=this.controller?.signal,t=(0,rf.ck)("011a24693cd9b63ea5492d50d7713dfb7ed18ea6"),a=await fetch(t,{signal:e,cache:"no-cache"}),r=await a.json(),n={finished:r.finished,warningDurationMs:Number(r.warning_ms),notifDurationMs:Number(r.notif_ms),pollIntervalMinutes:Number(r.poll_interval_minutes),downtimeStartDate:new Date(r.timestamp+" UTC"),minLengthMinutes:Number(r.estimated_length_min),maxLengthMinutes:Number(r.estimated_length_max),helpcenterUrl:r.helpcenter_url};return(0,o.k)().display_downtime_banner_force&&(n.warningDurationMs*=1e3,n.notifDurationMs*=1e3),"hostname"in r&&(n={...n,renderOnHostname:r.hostname}),n},this.onTick=()=>{null!=this.payload&&this.props.dispatch(bN.Z.onTick({payload:this.payload,hostname:window.location.hostname,currentTimeMs:Date.now()}))},this.poll=async()=>{for(;this._isMounted;)try{let e=await this.fetchScheduledDowntimeInfo();this._isMounted&&(this.payload=e,this.timer||(this.onTick(),this.timer=setInterval(this.onTick,3e4)))}catch(e){"AbortError"!==e.name&&console.warn(e)}finally{let e=this.payload&&60*this.payload.pollIntervalMinutes||900;await (0,bT.fm)(1e3*e)}}}componentDidMount(){this._isMounted=!0,this.poll()}componentWillUnmount(){this._isMounted=!1,this.controller?.abort(),this.timer&&clearInterval(this.timer)}render(){return null}}function bS(e){let{dispatch:t,downtime:a}=e,n=r.useCallback(e=>()=>{t(e)},[t]),l=r.useCallback((e,t)=>()=>{d.Ay.unsafeRedirect(e,"_blank"),n(t)},[n]),i=r.useCallback(e=>(0,S.t)("downtime_banner.ongoing.figma_will_be_entering_a_maintenance_period",{minutes:e}),[]),s=r.useMemo(()=>(0,S.t)("downtime_banner.ongoing.currently_undergoing_maintenance"),[]),c=r.useRef(e.notifications),m=r.useCallback(()=>{c.current.length>0&&t(bx.Q.dequeue({type:bI._.DOWNTIME}))},[t,c]);return r.useEffect(()=>{let{payload:e,status:r,hidingDowntimeNotif:c,notifMinutesRemaining:d}=a;if((0,o.k)().display_downtime_banner){switch(r){case bC.A.Imminent:case bC.A.Warning:if(e&&null!=d&&c!==bC.y.warningHidden){let a=i(d),r=l(e.helpcenterUrl,bN.Z.hideWarningNotif()),o=n(bN.Z.hideWarningNotif());t(bx.Q.dequeue({type:bI._.DOWNTIME})),t(bx.Q.enqueue({notification:{type:bI._.DOWNTIME,message:a,acceptCallback:r,dismissCallback:o}}))}break;case bC.A.Ongoing:if(e&&c!==bC.y.ongoingHidden){let a=l(e.helpcenterUrl,bN.Z.hideOngoingNotif()),r=n(bN.Z.hideOngoingNotif());t(bx.Q.dequeue({type:bI._.DOWNTIME})),t(bx.Q.enqueue({notification:{type:bI._.DOWNTIME,message:s,acceptCallback:a,dismissCallback:r}}))}break;case bC.A.Finished:m()}return()=>{m()}}},[a,t,i,l,n,s,m]),null}bk.displayName="DowntimePoller";var bR=a(570652),bA=a(254093);function bO(){let e=(0,bR.W)();return r.createElement(bA.Y,{prioritizedBanners:e,location:"file_browser"})}var bP=a(842744);function bL(e){let t=(0,n.wA)(),a=(0,n.d4)(e=>e.fileImport.step),o=(0,_Q.B2)().unwrapOr(!1),[l,i]=r.useState(!1),s=r.useCallback(()=>i(!0),[]),c=r.useCallback(()=>i(!1),[]),d=r.useCallback(e=>{i(!1),o&&t((0,_Q.b6)(e))},[t,o]);return r.createElement(ti.Y,{className:k.s.flex.flexColumn.$,isDragTarget:_Q.al,onTargetDragEnter:s,onTargetDragLeave:c,onTargetDrop:d},e.children,o&&r.createElement(bF,{step:a,dragging:l}))}function bF({step:e,dragging:t}){switch(e){case bP.Y5.CONFIRM_PDF_IMPORT:case bP.Y5.IMPORT_REPO:return null;case bP.Y5.START:case bP.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case bP.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return r.createElement("div",{className:t?"file_browser_drop_zone--dragTargetDragging--giyPY file_browser_drop_zone--dragTargetNormal--TOR0f":"file_browser_drop_zone--dragTargetNormal--TOR0f"});default:(0,C.xb)(e)}}function bD(e){return r.createElement(D.tH,{boundaryKey:"FileBrowserDropZone",fallback:r.createElement(r.Fragment,null,e.children),team:B.e.WAYFINDING},r.createElement(bL,{...e}))}let bM="file_browser_view--filebrowserHtml--v2BLN",bB="file_browser_view--filebrowserBody--6MX2i",bU="file_browser_view--desktop--5VrC1";function b$(){let e=(0,n.wA)(),t=(0,Y.dq)(),a=(0,du.Um)(),C=(0,J.iZ)(),k=(0,eA._6)(),R=EU.q_.useIsLoading(),A=(0,n.d4)(e=>e.payment),O=(0,n.d4)(e=>e.currentTeamId),P=(0,Q.d)(),L=(0,n.d4)(e=>e.downtime),F=(0,n.d4)(e=>e.notifications),D=(0,N.sx)();!function(){let e=(0,n.Pj)(),t=r.useMemo(()=>(0,bw.g)(),[]),a=(0,_.Rs)(eK.__y,{cacheNonce:t});r.useEffect(()=>{if("loaded"===a.status&&a.data.currentUser.assetTransferReload.status===et.tT.Loaded){let t=(0,et.oA)(a.data.currentUser.assetTransferReload);if(!t)return;let r=rf.Ay().user_data?.id,n=e.getState(),o="folder"===n.selectedView.view&&n.selectedView.folderId===t.folderId,l="team"===n.selectedView.view&&n.selectedView.teamId===t.teamId,i="folder"===n.selectedView.view&&n.folders[n.selectedView.folderId],s=i&&i.team_id===t.teamId,c=t.folderId?o:l||s,d={view:"folder",folderId:t.folderId||""},m={view:"team",teamId:t.teamId||"",teamViewTab:eJ.A$.HOME};if(r&&t.userId===r){let a={userId:t.userId,orgId:t.destOrgId},r=t.folderId?d:m;if(c){let n=t.folderId?(0,S.t)("realtime.asset_reload.project_has_been_transferred_redirecting"):(0,S.t)("realtime.asset_reload.team_has_been_transferred_redirecting");e.dispatch(tj.F.enqueue({message:n})),setTimeout(()=>{e.dispatch(ta._l({workspace:a,view:r}))},2e3)}else e.dispatch(ta.Dj({reason:"asset transfer reload",delay:ta.RH.DEFAULT}))}}},[e,a])}(),s.Tf.enableEventSending({allowResourceTracking:!0}),(0,m.h)(()=>{C&&e(EX.Jw())}),(0,p.IT)((0,bh.XZ)({currentOrgId:t??void 0,currentTeamId:O??void 0,fileTags:["figjam_template","figma_basics"]}),{enabled:(0,o.k)().create_starter_files_from_file_browser&&nQ.Gn.includes(k.view)});let[M,B]=r.useState(0),[U,$]=r.useState(0),[j,W]=r.useState(!1);(0,m.h)(()=>(document.body.classList.add(bB),document.documentElement.classList.add(bM),(0,i.$o)(),(0,V.I0)(k,t,O,P),(0,b.hW)("exp_aa_test_file_browser_view").catch(g.lQ),()=>{document.body.classList.remove(bB),document.documentElement.classList.remove(bM),(0,i.$E)(),e(tf.AS())})),r.useEffect(()=>{if(c.eD||(0,l.ce)()){let e=document.createElement("div");return e.classList.add("file_browser_view--desktopBackground--kte3I"),document.body.appendChild(e),document.body.classList.add(bU),()=>{document.body.classList.remove(bU),document.body.removeChild(e)}}},[]);let G=(0,u.ZC)(k);r.useEffect(()=>{G&&G!==k&&((0,by.SW)(G,k)&&window.scrollTo(0,0),j?W(!1):(B(U+1),$(U+1)))},[G,k,j,U]),r.useEffect(()=>{"teamCreation"===k.view&&k.fromNewTab&&e(ta.Dw({previousView:k.previousView,onSubmitReturnToPrevView:k.onSubmitReturnToPrevView,isEduTeam:k.isEduTeam,ignoreCurrentPlan:!0}))},[k,e]);let H=E.uG;if(!function(){let e=(0,eA._6)(),t=(0,n.wA)(),a=(0,J.TA)(),o=null;("teamUpgrade"===e.view||"addAnnualPlan"===e.view||"promoReview"===e.view||"eduReview"===e.view)&&(o=e.teamId);let l=(0,n.d4)(e=>o&&e.teams[o]||null),i=(0,eD.FC)(),s=l&&(!(0,rd.n0)(l)||rq.ng.getProTrialStatus(l)===m5.a.IN_TRIAL),c=!!(o&&((0,rm.canAdminTeam)(o,i)||(0,rm.canEditTeam)(o,i)&&s)),d=(0,_.Rs)((0,eK.yY6)(o?{teamId:o}:null)),m=r.useMemo(()=>d.transform(({team:e})=>{if(!e)return!1;let t=!(0,rd.a5)(e)||rq.ng.getProTrialStatusLG(e)===m5.a.IN_TRIAL;return e.canAdmin||e.canEdit&&t}),[d]),u=(0,rs.DQ)(rs.Pw.GROUP_6),p=(0,rc.MF)({oldValue:f.Qw.loaded(c),newValue:m,label:rc.A5.FileBrowserView.hasPermission,enableShadowRead:null!==o,enableFullRead:u,contextArgs:{teamId:o}});r.useEffect(()=>{u&&"loaded"===p.status&&!p.data&&o&&(a?t(ta._l({workspace:{userId:a,teamId:o,orgId:null},view:{view:"allProjects"}})):t(eR.$T({view:"team",teamId:o})))},[a,t,u,p.data,p.status,o])}(),"teamUpgrade"===k.view)return k.paymentStep===sZ.tn.UPGRADE_NEW_TEAM?r.createElement(bv,{selectedView:k}):D?r.createElement(h.q,{selectedView:k}):r.createElement(w.h,{selectedView:k});if("addAnnualPlan"===k.view)return r.createElement(bg,{selectedView:k});if("teamCreation"===k.view)return k.fromNewTab?null:r.createElement(be,{selectedView:k});if("addCollaborators"===k.view)return r.createElement(EK,{selectedView:k});if("orgSelfServe"===k.view){let e=D?y.G:T.N;return r.createElement(e,{step:k.step||m3.X1.Initial,initialDesignSeats:k.initialDesignEditors||0,orgMigrated:!!k.orgMigrated,dropdownShown:a,newTeamProps:k.newTeamProps,upsellSource:k.upsellSource,entryPoint:k.entryPoint})}if("teamRestore"===k.view)return r.createElement(bn,{selectedView:k});if("promoReview"===k.view)return r.createElement(I.z,{promo:A?.promo,selectedView:k});else if("eduReview"===k.view)return r.createElement(x.w,{selectedView:k});return C?t||O?r.createElement(E5.C.Provider,{value:{goBack:()=>{U>0&&(history.back(),$(U-1),W(!0))},goForward:()=>{U<M&&(history.forward(),$(U+1),W(!0))},canGoBack:U>0,canGoForward:U<M}},H&&r.createElement(v.R,{userIdForTracking:C?.id}),r.createElement(bD,null,r.createElement(bO,null),r.createElement(bS,{downtime:L,notifications:F,dispatch:e}),r.createElement(E4,null),r.createElement(ED,{showingFileBrowserLoader:R}))):(console.error("No current organization or team plan set for user. Redirecting to /files"),d.Ay.redirect("/files"),null):(console.error(`Signed out page: unrecognized route ${d.Ay.location.pathname}, redirecting to /`),d.Ay.redirect("/"),null)}},902040:(e,t,a)=>{a.r(t),a.d(t,{FileImportModal:()=>ea,FileRow:()=>es,ImportModal:()=>er,fileImportStats:()=>ei,getFooterButtons:()=>en,getStatusComponents:()=>eo,useCloseTabWarningWhenImportInProgress:()=>em,useCurrentFolderTeam:()=>el});var r=a(848318),n=a(301168),o=a(660376),l=a(907727),i=a(878339),s=a(124810),c=a(415676),d=a(580494),m=a(989232),u=a(29188),_=a(813009),p=a(410725),f=a(133318),g=a(264478),E=a(425914),b=a(345964),v=a(755534),h=a(401970),w=a(297638),y=a(178806),T=a(967688),I=a(744577),x=a(548727),N=a(387429),C=a(31898),k=a(957872),S=a(863270),R=a(381673),A=a(249726),O=a(708942),P=a(633468),L=a(318147),F=a(55116),D=a(656320),M=a(520779),B=a(842744),U=a(386252),$=a(890257),j=a(274016),W=a(938982),G=a(582039),V=a(309488),H=a(93275),z=a(998568),K=a(616392),Y=a(660580);let q="file_import_modal--scrollContainer--rcZDu";var J=a(40021);function X(e){let{fileImport:t,onDone:a,onCancel:l}=e,s=G.hS(e),c=(0,n.wA)(),d=ei(t),m=0===d.remainingFiles,u=el(),_=(0,n.d4)(e=>"folder"===e.selectedView.view?e.selectedView.folderId:null),p=Y.M4.Folder.useValue(_).data,[f,E]=(0,r.useState)(K.uf.IMPORTING_FILES);em(f===K.uf.IMPORTING_FILES||f===K.uf.ATTACHING_BRANCH);let y=p?.name||(0,T.t)("file_browser.tool_bar.drafts"),I=f===K.uf.SUCCESS?(0,T.t)("file_browser.file_import_view.imported_to_folder",{folderName:y}):(0,T.t)("file_browser.file_import_view.import_to_folder",{folderName:y}),{statusIcon:x,statusMessage:N,statusMessageSecondary:C}=function(e,t,a){let n=null,l=null,s=null,c=eo(e===K.uf.SUCCESS,t,a);switch(e){case K.uf.IMPORTING_FILES:n=c.statusIcon,l=c.statusMessage,s=c.statusMessageSecondary;break;case K.uf.ATTACHING_BRANCH:n=r.createElement(b.kt,{imageBacked:!0,testId:"loadingSpinner"}),l=(0,T.tx)("file_browser.file_import_view.repo.attaching_branch"),s=r.createElement("span",{className:w.s.textBodyMedium.$},(0,T.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:r.createElement(g.Us,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink"},(0,T.tx)("file_browser.file_import_view.open_a_new_tab_link"))}));break;case K.uf.SUCCESS:n=c.statusIcon,l=c.statusMessage,t.importedFiles===t.totalFiles&&(l=(0,T.tx)("file_browser.file_import_view.repo.success")),s=c.statusMessageSecondary;break;case K.uf.ERROR:n=r.createElement(h.U,{svg:J.A,className:w.s.colorIcon.$,dataTestId:"warningIcon"},r.createElement(i.R,null)),l=(0,T.tx)("file_browser.file_import_view.repo.error");break;default:(0,o.xb)(e)}return n&&l?{statusIcon:n,statusMessage:l,statusMessageSecondary:s}:((0,z.$D)(W.e.SCENEGRAPH_AND_SYNC,Error("Missing status in repo import")),{statusIcon:r.createElement(h.U,{svg:J.A,className:w.s.colorIcon.$,dataTestId:"warningIcon"},r.createElement(i.R,null)),statusMessage:(0,T.tx)("file_browser.file_import_view.repo.error"),statusMessageSecondary:null})}(f,d,y),k=en({isImportComplete:m,fileImport:t,onDone:a,team:u,dispatch:c,stats:d,shouldShowMoveToProjectButton:!1,onMoveToProject:()=>{},filesToMove:[],onCancel:l});return(0,r.useEffect)(()=>{if(m){E(K.uf.ATTACHING_BRANCH);let e=Object.values(t.files),a=e.find(e=>e.name.includes("branch tip"))?.fileKey,r=e.find(e=>e.name.includes("branch point"))?.fileKey,n=e.find(e=>e.name.includes("main tip"))?.fileKey;a&&r&&n?(0,K.yA)(a,r,n).then(()=>{E(K.uf.SUCCESS)}).catch(()=>{E(K.uf.ERROR)}):(E(K.uf.ERROR),console.error("Missing branch key, branch point key, or main tip key files"))}},[m,t.files]),r.createElement(V.bL,{manager:s,width:480},r.createElement(H.vo,null,r.createElement(H.Y9,null,r.createElement(H.hE,null,I)),r.createElement(H.nB,null,t&&r.createElement(v.P,{innerClassName:w.s.flex.flexColumn.$,className:q},Object.values(t.files).map(e=>r.createElement(es,{key:`file-import-${e.id}`,file:e})))),r.createElement(H.wi,null,r.createElement("div",{className:w.s.flex.flexRow.wFull.justifyBetween.py8.gap16.bt1.bSolid.colorBorder.$},r.createElement("div",{className:w.s.flex.flexRow.itemsCenter.gap8.$},x&&r.createElement("div",{className:w.s.flex.itemsCenter.justifyCenter.h32.w32.$},x),N&&r.createElement("span",{className:w.s.fontSemiBold.$},N),C&&r.createElement("span",{className:w.s.ml8.$},C)),r.createElement("div",null,k)))))}var Q=a(327551),Z=a(491732),ee=a(317822),et=a(558893);function ea(){let e=(0,n.wA)(),{fileImport:t}=(0,_.R)(e=>({fileImport:e.fileImport})),a=()=>{e(C.Ce()),e(O.cY())},l=()=>{e(O.yD())},i=()=>{e(O.cY())},s=(()=>{switch(t.step){case B.Y5.CONFIRM_PDF_IMPORT:return r.createElement(Q.PdfConfirmationModal,{fileImportDescription:(0,T.tx)("file_browser.file_import_view.select_pdf_source_description",{pdfCount:ei(t).pdfCount}),onConfirm:t=>{e(O._9(t))},onCancel:()=>{e(O.AU()),l()}});case B.Y5.IMPORT_REPO:return r.createElement(X,{fileImport:t,onDone:a,onCancel:l,onMoveToProject:i,onClose:()=>e(C.Ce()),open:!0});case B.Y5.START:case B.Y5.FILE_IMPORT_WITH_CANCELED_PDF:case B.Y5.FILE_IMPORT_WITH_CONFIRMED_PDF:return r.createElement(er,{fileImport:t,onDone:a,onCancel:l,onMoveToProject:i});default:(0,o.xb)(t.step)}})();return r.createElement(S.fu,{name:"import_progress_modal"},s)}function er({fileImport:e,onDone:t,onCancel:a,onMoveToProject:o}){let l=(0,n.wA)(),i=el(),s=ei(e),c=(0,n.d4)(e=>e.selectedView),d=(0,N.I)(),m=0===s.remainingFiles,u=(0,n.d4)(e=>"folder"===e.selectedView.view?e.folders[e.selectedView.folderId]:null),_=(0,A.Gi)(u),g=(0,D.K)(c);em(!m);let E=u?.name||(0,T.t)("file_browser.tool_bar.drafts"),b=m?(0,T.t)("file_browser.file_import_view.imported_to_folder",{folderName:E}):(0,T.t)("file_browser.file_import_view.import_to_folder",{folderName:E}),{statusIcon:h,statusMessage:y,statusMessageSecondary:I}=eo(m,s,E),x=d&&(_||g)&&s.importedFiles>=1,C=(0,r.useMemo)(()=>(function(e,t){let a=[];if(!e)return a;for(let e of Object.values(t))e.fileKey&&a.push({fileKey:e.fileKey});return a})(x,e.files),[x,e.files]),S=(0,p.p)(F.NSA,C),R=en({isImportComplete:m,fileImport:e,onDone:t,team:i,dispatch:l,stats:s,shouldShowMoveToProjectButton:x,onMoveToProject:o,filesToMove:(0,r.useMemo)(()=>(function(e){let t=[];for(let a of e){let e=a.result.data?.file;e&&t.push({key:e.key,name:e.name,folder_id:e.folderId,team_id:e.teamId,editor_type:e.editorType,is_team_template:e.isTeamTemplate,parent_org_id:e.parentOrgId})}return t})(S),[S]),onCancel:a});return r.createElement($.XV,{title:b,maxWidth:480,headerClassName:w.s.pl16.$,disableClickOutsideToHide:!m,isCloseHidden:!0,customButton:r.createElement(f.Jn,{onClick:e.queue.length?a:t,trackingProperties:{trackingDescriptor:k.c.FILE_IMPORT_X_BUTTON,text:"dismiss"}})},e&&r.createElement(v.P,{innerClassName:w.s.flex.flexColumn.py4.$,className:q},Object.values(e.files).map(e=>r.createElement(es,{key:`file-import-${e.id}`,file:e}))),r.createElement("div",{className:w.s.flex.flexRow.justifyBetween.p8.pr12.gap16.bt1.bSolid.colorBorder.$},r.createElement("div",{className:w.s.flex.flexRow.itemsCenter.gap8.$},h&&r.createElement("div",{className:w.s.flex.itemsCenter.justifyCenter.h32.w32.$},h),y&&r.createElement("span",{className:w.s.fontSemiBold.$},y),I&&r.createElement("span",{className:w.s.ml8.$},I)),r.createElement("div",{className:w.s.flex.gap8.$},R)))}function en({isImportComplete:e,fileImport:t,onDone:a,team:n,dispatch:o,stats:l,shouldShowMoveToProjectButton:i,onMoveToProject:s,filesToMove:c,onCancel:u}){var _;if(!e)return[r.createElement(y.$z,{variant:"destructive",onClick:u,htmlAttributes:{"data-testid":"cancelButton"},key:"cancelButton"},(0,T.tx)("file_browser.file_import_view.cancel"))];if(t.failedOnFileLimit)return[r.createElement(y.$z,{variant:"primary",onClick:()=>{a(),null!=n&&o((0,C.to)({type:j.DV,data:{team:n,resource:l.hasMakeFile&&!(0,d.k)().bake_starter_limit?M.Bi.FIGMAKE:M.vL.FILE,action:U.ZN.IMPORT_FILES,editorType:l.editorType,multipleResources:l.failedFiles>1,currentPlan:R.F.Plan.STARTER,upsellPlan:R.F.Plan.PRO}}))},htmlAttributes:{"data-testid":"nextButton"},key:"nextButton"},(0,T.tx)("file_browser.file_import_view.next"))];let p=[(_=i?"secondary":"primary",r.createElement(y.$z,{variant:_,onClick:a,htmlAttributes:{"data-testid":"doneButton"},key:"doneButton"},(0,T.tx)("file_browser.file_import_view.done")))];return i&&p.push(function({onMoveToProject:e,filesToMove:t,stats:a,dispatch:n}){return r.createElement(y.$z,{variant:"primary",onClick:()=>{e(),(0,m.trackEvent)("file_import.move_to_project.button_clicked",{numFiles:a.importedFiles}),1===t.length&&t[0]?(0,x.h)(t[0],null,n,void 0,{},void 0,!1,void 0,!0):(0,x.O)(t,[],n,!0)},htmlAttributes:{"data-testid":"moveToProjectButton"},key:"moveToProjectButton"},(0,T.tx)("file_browser.file_import_view.move_to_project"))}({onMoveToProject:s,filesToMove:c,stats:l,dispatch:o})),p}function eo(e,t,a){let n=null,o=null,s=null;return e?t.importedFiles===t.totalFiles?(o=r.createElement("div",{className:w.s.fontSemiBold.inline.$},(0,T.tx)("file_browser.file_import_view.file_import_all_succeeded",{totalFiles:t.totalFiles,folder:a})),n=r.createElement(h.U,{svg:ee.A,className:w.s.colorIcon.$,dataTestId:"checkIcon"},r.createElement(l.l,null))):(o=r.createElement("div",{className:w.s.fontSemiBold.inline.$},(0,T.tx)("file_browser.file_import_view.file_import_progress_to_folder",{importedFiles:t.importedFiles,totalFiles:t.totalFiles,folder:a})),n=r.createElement(h.U,{svg:J.A,className:w.s.colorIcon.$,dataTestId:"warningIcon"},r.createElement(i.R,null)),t.canceledFiles>0&&(s=(0,T.tx)("file_browser.file_import_view.file_import_cancel"))):(n=r.createElement(b.kt,{imageBacked:!0,testId:"loadingSpinner"}),o=(0,T.tx)("file_browser.file_import_view.file_import_progress",{processedFiles:t.processedFiles,totalFiles:t.totalFiles}),s=r.createElement("span",{className:w.s.textBodyMedium.$},(0,T.tx)("file_browser.file_import_view.to_continue_working",{openANewTabLink:r.createElement(g.Us,{href:window.location.href,target:"_blank",trusted:!0,"data-testid":"openANewTabLink"},(0,T.tx)("file_browser.file_import_view.open_a_new_tab_link"))}))),{statusIcon:n,statusMessage:o,statusMessageSecondary:s}}function el(){return(0,n.d4)(e=>{if("folder"===e.selectedView.view){let t=e.selectedView.folderId&&e.folders[e.selectedView.folderId]?.team_id;if(null!=t)return e.teams[t]}return null})}function ei(e){let t=Object.keys(e.files).length,a=e.queue.length,r=0,n=0,l=0,i=0,s=0,c=new Set;for(let t in e.files){let a=e.files[t];if(a){switch(a.status){case B.mO.SUCCESS:case B.mO.WARNING:r++;break;case B.mO.CANCELED:n++;break;case B.mO.FAILURE:l++;break;case B.mO.WAITING:case B.mO.BUSY:i++;break;default:(0,o.xb)(a.status)}(0,B.kI)(a.name)&&s++,c.add((0,B.NU)(a))}}return{totalFiles:t,remainingFiles:a,processedFiles:t-a,importedFiles:r,canceledFiles:n,failedFiles:l,pendingFiles:i,editorType:1===c.size&&Array.from(c)[0]||null,hasMakeFile:c.has(L._Y.FIGMAKE),pdfCount:s}}function es(e){let{file:t}=e,a=null;return t.status===B.mO.CANCELED?a=(0,T.tx)("file_browser.file_import_view.file_row_import_cancel"):t.message&&(a=Array.isArray(t.message)?t.message.map((e,t)=>r.createElement("div",{key:t},e)):t.message),r.createElement(ed,{status:t.status,fileKey:t.fileKey},r.createElement("div",{className:w.s.flex.itemsCenter.justifyBetween.flex1.pl8.pr16.textBodyMedium.$},r.createElement("div",{className:w.s.flex.gap8.if(a,w.s.itemsStart,w.s.itemsCenter).$},r.createElement("div",{className:w.s.flex.justifyCenter.h32.w32.itemsCenter.$},r.createElement(ec,{file:t})),r.createElement("div",{className:w.s.if(a,w.s.pb6).$},r.createElement("div",{className:w.s.truncate.lh32.$,style:I.sx.add({maxWidth:"384px"}).$,"data-tooltip":t.name,"data-tooltip-type":"text"},t.name),a&&r.createElement("div",{className:w.s.flex.flexColumn.mt4.colorTextSecondary.$},a,t.cta&&r.createElement(g.Us,{className:w.s.colorTextSecondary.underline.ml8.$,role:"button",onClick:t.cta.action,trusted:!0,"data-testid":"ctaLink"},t.cta.text))))))}function ec({file:e}){switch(e.status){case B.mO.BUSY:case B.mO.WAITING:return r.createElement(b.kt,{imageBacked:!0,testId:"fileRowLoadingSpinner"});case B.mO.FAILURE:case B.mO.CANCELED:return r.createElement(h.U,{svg:et.A,className:w.s.colorIconDanger.$,dataTestId:"failIcon"},r.createElement(s.A,{className:w.s.colorIconDanger.$}));case B.mO.SUCCESS:case B.mO.WARNING:let t=(0,B.NU)(e);return r.createElement(E.w4,{size:16,type:(0,E.Y8)(t)});default:(0,o.xb)(e.status)}}function ed(e){let{fileKey:t,status:a,children:n}=e;if(a!==B.mO.SUCCESS&&a!==B.mO.WARNING)return n;let o=t?(0,P.jN)({file:{key:t}}):void 0;return o?r.createElement(g.Ph,{href:o,target:"_blank",trusted:!0,className:"file_import_modal--fileRowWrapperLink--3JOhD","data-testid":"fileLink",trackingProperties:{action:"Import Modal - File Link Clicked"}},n,r.createElement(h.U,{svg:Z.A,className:w.s.flex.alignCenter.colorIconSecondary.$},r.createElement(c.S,null))):n}function em(e){let t=(0,r.useCallback)(e=>{e.preventDefault()},[]);(0,r.useEffect)(()=>(e&&(window.addEventListener("beforeunload",t),u.eD?.setIsImporting(!0)),()=>{window.removeEventListener("beforeunload",t),u.eD?.setIsImporting(!1)}),[e,t])}},912046:(e,t,a)=>{a.r(t),a.d(t,{FileRestoreFromVersionModal:()=>g});var r=a(848318),n=a(301168),o=a(989232),l=a(264478),i=a(755534),s=a(967688),c=a(807949),d=a(31898),m=a(125952),u=a(678405),_=a(890257);let p="file_restore_from_version_modal--fileRestoreText--my8Lq";function f(e){let t=e.version,a=function(e){if(e.participating_images_dict){let[t,a]=Object.entries(e.participating_images_dict)[0]||[];if(t)return{name:t,imageUrl:a}}return{name:e.user.handle,imageUrl:e.user.img_url}}(t);return r.createElement("div",{className:"file_restore_from_version_modal--fileRestoreRow--ZAJ4y"},r.createElement("div",{className:"file_restore_from_version_modal--fileRestoreDecoration--ZXtyF"},a&&r.createElement(m.Ro,{className:"file_restore_from_version_modal--fileRestoreAvatar--Ub3UH",size:30,entity:{img_url:a.imageUrl}}),e.connector&&r.createElement("div",{className:"file_restore_from_version_modal--fileRestoreConnector--mhORY"})),r.createElement("div",{className:"file_restore_from_version_modal--fileRestoreData--AQgSJ"},t.label&&r.createElement("div",{className:"file_restore_from_version_modal--fileRestoreLabel--a6Shk ellipsis--ellipsis--Tjyfa"},t.label||""),t.description&&r.createElement("div",{className:p},t.description),r.createElement("div",{className:p},r.createElement(u.Cr,{time:t.touched_at})),r.createElement("div",{className:"file_restore_from_version_modal--fileRestoreUser--Bv60C"},a?.name??"")),r.createElement(l.N_,{onClick:e.callback,className:"file_restore_from_version_modal--fileRestoreAction--414BR",trusted:!0},(0,s.tx)("file_restore_from_version_modal.restore")))}function g(e){let t=(0,n.wA)(),a=a=>{(0,o.trackEvent)("restore_version_from_modal",{fileKey:e.fig.key,versionId:a}),t(d.Ce()),t(c.PF({fileKey:e.fig.key,versionId:a}))},l=e.versions.filter(e=>!e.disabled);return r.createElement(_.XV,{title:(0,s.t)("file_restore_from_version_modal.restore_from_version_history"),maxWidth:396,onClose:()=>{t(d.Lo())}},r.createElement("div",{className:"file_restore_from_version_modal--fileRestorePanel--pMNT2"},r.createElement(i.P,{width:396},l.map((e,t)=>r.createElement(f,{key:e.id,version:e,callback:()=>a(e.id),connector:t+1!==l.length})))))}},549491:(e,t,a)=>{a.d(t,{FolderPageViewOmnicreateDropdown:()=>$});var r=a(848318),n=a(207496),o=a(578590),l=a(660376),i=a(580494),s=a(97481),c=a(171506),d=a(220576),m=a(318147),u=a(532511),_=a(692853),p=(e=>(e.CAN_CREATE="CAN_CREATE",e.CANNOT_CREATE="CANNOT_CREATE",e.CAN_AUTO_UPGRADE="CAN_AUTO_UPGRADE",e.CAN_REQUEST_UPGRADE="CAN_REQUEST_UPGRADE",e.UPGRADE_PENDING="UPGRADE_PENDING",e))(p||{});function f({editorType:e,lgFolder:t}){let a=(0,s.av)(t)[e];if(!a)return!1;if(a.result)return!0;if(!t.canEdit)return!1;let r=a.publicDenyReasons;return 1===r.length&&r[0]===m.QK.FOLDER_CREATE_FILE_DENY_UNLICENSED_USERS}var g=a(301168),E=a(419791),b=a(581957),v=a(576076),h=a(938982),w=a(238462),y=a(998568),T=a(967688),I=a(952039),x=a(31898),N=a(877146),C=a(372240),k=a(957872),S=a(863270),R=a(353231),A=a(282920),O=a(249726),P=a(129723),L=a(283115),F=a(392440),D=a(205089),M=a(448040),B=a(710923);function U(e){e(I.F.enqueue({message:(0,T.t)("general.an_error_occurred"),error:!0}))}function $({lgFolder:e,newFileFrom:t}){let a=function({lgFolder:e}){let t=(0,d.R)(),{getUpgradeEligibility:a,hasPendingRequest:r,getUpgradePathway:n}=(0,u.wH)({folderId:e.id});return(0,c.h)(e).map(({editorType:s,canCreate:c})=>{let d=(()=>{if(!t)return c?!function({editorType:e,lgFolder:t}){var a;let r=t.team?.org?.currentBaseOrgUser;return a=t.team?.currentTeamUser,!((e===m._Y.WHITEBOARD?(!r||r.whiteboardPaidStatus!==m.El.STARTER)&&(!a||a.whiteboardPaidStatus!==m.Zf.STARTER):e!==m._Y.DESIGN||(!r||r.designPaidStatus!==m.El.STARTER)&&(!a||a.designPaidStatus!==m.Zf.STARTER))||!t.team||t.team.isStarterTeam||t.team.isStudentTeam||t.team.org?.k12GoogleOrg)}({editorType:s,lgFolder:e})?"CAN_CREATE":"CAN_AUTO_UPGRADE":f({lgFolder:e,editorType:s})?!function(e,t){let a=t.team?.org?.currentBaseOrgUser,r=t.team?.currentTeamUser,n=(0,i.k)().tou_plan_user_paid_status_on_file?(0,o._R)(e,t.currentPlanUser??null):e===m._Y.WHITEBOARD?a&&a.whiteboardPaidStatus===m.El.RESTRICTED||r&&r.whiteboardPaidStatus===m.Zf.RESTRICTED:e===m._Y.DESIGN&&(a&&a.designPaidStatus===m.El.RESTRICTED||r&&r.designPaidStatus===m.Zf.RESTRICTED),l=a||r;return!!n&&!!t.team&&!t.team?.isStarterTeam&&!t.team?.isStudentTeam&&!!l}(s,e)?"CANNOT_CREATE":!function(e,t){let a=t.team?.org?.currentBaseOrgUser||t.team?.currentTeamUser;if(!a)return!1;let r={[m._Y.DESIGN]:a.designAccountTypeRequest,[m._Y.WHITEBOARD]:a.whiteboardAccountTypeRequest}[e];return!!r&&"pending"===r.status}(s,e)?"CAN_REQUEST_UPGRADE":"UPGRADE_PENDING":"CANNOT_CREATE";if(c)return"CAN_CREATE";if(!f({lgFolder:e,editorType:s}))return"CANNOT_CREATE";let d=(0,o.Ci)(s);if(!d)return"CANNOT_CREATE";let u=a(d),p=r(d);switch(u){case _.q.CAN_UPGRADE:let g=n(d);switch(g){case _.J.AUTO_PATHWAY:case _.J.ADMIN_AUTO_PATHWAY:return"CAN_AUTO_UPGRADE";case _.J.PROVISIONAL_PATHWAY:case _.J.RE_REQUEST_PATHWAY:return p?"UPGRADE_PENDING":"CAN_REQUEST_UPGRADE";default:(0,l.xb)(g)}case _.q.CANNOT_UPGRADE:return p?"UPGRADE_PENDING":"CANNOT_CREATE";case _.q.UPGRADE_NOT_NEEDED:return c?"CAN_CREATE":"CANNOT_CREATE";default:(0,l.xb)(u)}})(),u=(()=>{switch(d){case"CAN_CREATE":case"CAN_AUTO_UPGRADE":case"CAN_REQUEST_UPGRADE":return!1;case"CANNOT_CREATE":case"UPGRADE_PENDING":return!0;default:(0,l.xb)(d)}})();return{editorType:s,fileCreationOptionState:d,isDisabled:u}})}({lgFolder:e}),s=function({newFileFrom:e,lgFolder:t,fileCreationOptions:a}){let n=(0,g.wA)(),i=function({lgFolder:e,newFileFrom:t}){let a=(0,g.wA)(),n=(0,C.E)({isDraftsFolder:(0,O.T9)(e),newFileFrom:t,folderId:e.id}),{properties:i}=(0,S.j6)(),s=(0,d.R)(),{handleUpgrade:c}=(0,u.wH)({folderId:e.id});return(0,r.useCallback)(({editorType:t,contextClicked:r,fileCreationOptionState:d})=>{let u=n({editorType:t,contextClicked:r}),_=s?function({editorType:e,fileCreationOptionState:t,createFile:a,handleUpgradeBuilder:r,dispatch:n}){switch(t){case p.CAN_CREATE:return a;case p.CANNOT_CREATE:case p.UPGRADE_PENDING:return w.lQ;case p.CAN_AUTO_UPGRADE:case p.CAN_REQUEST_UPGRADE:return l=>(function({event:e,editorType:t,fileCreationOptionState:a,createFile:r,handleUpgradeBuilder:n,dispatch:l}){let i=(0,o.Ci)(t);if(!i){(0,y.$D)(h.e.MONETIZATION_UPGRADES,Error("Editor type has no corresponding license type for file creation upgrade flow"),{extra:{editorType:t,fileCreationOptionState:a}}),U(l);return}n({afterUpgradeCallback:r,licenseType:i,upgradeReason:B.i.CREATE_FILE,entryPoint:N.tc.CREATE_FILE_PROJECT_VIEW})(e)})({event:l,editorType:e,createFile:a,dispatch:n,fileCreationOptionState:t,handleUpgradeBuilder:r});default:(0,l.xb)(t)}}({fileCreationOptionState:d,createFile:u,handleUpgradeBuilder:c,editorType:t,dispatch:a}):function({lgFolder:e,fileCreationOptionState:t,createFile:a,dispatch:r,editorType:n}){switch(t){case p.CAN_CREATE:return a;case p.CANNOT_CREATE:case p.UPGRADE_PENDING:return w.lQ;case p.CAN_AUTO_UPGRADE:return()=>(function({lgFolder:e,editorType:t,dispatch:a,createFile:r}){let n=e.plan,o=n?.key.parentId;if(!n||!o){(0,y.$D)(h.e.MONETIZATION_UPGRADES,Error("Missing plan or planId for file creation auto-upgrade flow"),{extra:{editorType:t}}),U(a);return}let i=n.name,s=(()=>{switch(n.key.type){case m.OL.ORG:return P.O.ORG;case m.OL.TEAM:return P.O.TEAM;default:(0,l.xb)(n.key.type)}})();a(x.to({type:D.y,data:{planType:s,planName:i,seatTypesToBeUpgraded:{design:t===m._Y.DESIGN,whiteboard:t===m._Y.WHITEBOARD},planId:o,upgradeReason:M.X.CREATE_FILE,onConfirm:r}}))})({lgFolder:e,editorType:n,createFile:a,dispatch:r});case p.CAN_REQUEST_UPGRADE:return()=>(function({lgFolder:e,editorType:t,dispatch:a}){let r=e.id,n=e.team;if(!n){(0,y.$D)(h.e.MONETIZATION_UPGRADES,Error("Missing team for file creation request upgrade flow"),{extra:{editorType:t}}),U(a);return}n.org?function({org:e,dispatch:t,editorType:a,folderId:r,team:n}){let l=e.currentBaseOrgUser;if(!l){(0,y.$D)(h.e.MONETIZATION_UPGRADES,Error("Missing org user for file creation request upgrade flow"),{extra:{editorType:a}}),U(t);return}t(x.to({type:L.YG,data:{orgId:e.id,orgUser:{id:l.id,user_id:l.userId,org_id:e.id,permission:l.permission,license_group_member:{license_group_id:n.licenseGroupId}},entryPoint:N.PE.CreateFileProjectView,licenseType:(0,o.wR)(a),planName:e.name,folderId:r}}))}({org:n.org,dispatch:a,editorType:t,folderId:r,team:n}):function({team:e,editorType:t,folderId:a,dispatch:r}){r(x.to({type:F.PK,data:{team:{id:e.id},entryPoint:N.Wc.CREATE_FILE_PROJECT_VIEW,editorType:t,folderId:a}}))}({team:n,editorType:t,folderId:r,dispatch:a})})({lgFolder:e,editorType:n,dispatch:r});default:(0,l.xb)(t)}}({lgFolder:e,fileCreationOptionState:d,createFile:u,dispatch:a,editorType:t}),f=function({editorType:e,isBillingRemodelEnabled:t,fileCreationOptionState:a,trackingContextProperties:r}){let n=(0,o.Ci)(e),i=(()=>{switch(a){case p.CAN_CREATE:case p.CANNOT_CREATE:case p.UPGRADE_PENDING:return!1;case p.CAN_AUTO_UPGRADE:case p.CAN_REQUEST_UPGRADE:return!0;default:(0,l.xb)(a)}})();return{...r,trackingDescriptor:k.c.CREATE_FILE,isBillingRemodelEnabled:t,licenseType:n,billableProductKey:n&&(0,A.F)(n),needsUpgrade:i}}({editorType:t,isBillingRemodelEnabled:s,fileCreationOptionState:d,trackingContextProperties:i});return e=>{(0,R.Cu)(f),_(e)}},[n,s,i,a,c,e])}({lgFolder:t,newFileFrom:e});return{newFiles:a.map(({editorType:e,fileCreationOptionState:t,isDisabled:a})=>(0,E.p)({editorType:e,isDisabled:a,isLoading:!1,showRequestLabel:t===p.CAN_REQUEST_UPGRADE,showRequestSentLabel:t===p.UPGRADE_PENDING,onClick:i({editorType:e,contextClicked:(0,b.V)(e),fileCreationOptionState:t})})),import:(0,v.ud)(t)?(0,E.u)({isLoading:!1,dispatch:n}):null}}({lgFolder:e,newFileFrom:t,fileCreationOptions:a}),T=a.filter(e=>e.fileCreationOptionState===p.CAN_REQUEST_UPGRADE).map(e=>(0,o.Ci)(e.editorType)).filter(Boolean).sort().join(",");return r.createElement(n.a,{menuItems:s,trackingProperties:{requestableLicenseTypes:T,hasRequestableLicenses:!!T}})}},207496:(e,t,a)=>{a.d(t,{a:()=>E,R:()=>b});var r=a(848318),n=a(301168),o=a(278905),l=a(681978),i=a(974839),s=a(506470),c=a(773511),d=a(990140),m=a(202272),u=a(82433),_=a(967688);let p=r.forwardRef(function(e,t){let a=e["aria-expanded"];return r.createElement(c.E,{ref:t,...u.xk(f.button,a&&"false"!==a&&f.buttonActive),...e},r.createElement(d.e,{"aria-hidden":!0}),r.createElement("div",{className:"x78zum5 x1v2ro7d x6s0dn4"},(0,_.t)("file_browser.tool_bar.create"),r.createElement(m.k,{"aria-hidden":!0})))}),f={button:{display:"x78zum5",gap:"x167g77z",rowGap:null,columnGap:null,paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",paddingLeft:"x163pfp",paddingRight:"xmzs88n",paddingInlineStart:null,paddingInlineEnd:null,alignItems:"x6s0dn4",borderRadius:"x19y5rnk",borderStartStartRadius:null,borderStartEndRadius:null,borderEndStartRadius:null,borderEndEndRadius:null,borderTopLeftRadius:null,borderTopRightRadius:null,borderBottomLeftRadius:null,borderBottomRightRadius:null,color:"x1tk3asg","--color-icon":"xwa2v1s",backgroundColor:"xu5wzci x3sfz7g xazsp2l x1roy7tt x14nhee1",boxShadow:"xb67q6v xn3n4wp x1swp962",overflow:"xb3r6kr",overflowX:null,overflowY:null,minWidth:"x1pshirs",$$css:!0},buttonActive:{backgroundColor:"xs07v55",boxShadow:"xb67q6v",$$css:!0}};var g=a(581957);function E({menuItems:e,trackingProperties:t}){let{getTriggerProps:a,manager:n}=o.b(),i=(0,g.k)();return(0,l.WX)({markName:"FileCreateEntrypoint",isLoaded:!0}),r.createElement(o.bL,{manager:n},r.createElement(p,{...a(),disabled:i}),r.createElement(s.f,{menuItems:e,trackingProperties:t}))}function b({newFileFrom:e,forceOpenNewTab:t}){let a=(0,n.d4)(e=>e.user?.drafts_folder_id),o=(0,i.Q)({newFileFrom:e,forceOpenNewTab:t,folderId:a,contextClicked:"recents_file_creation_thumbnails_created"});return r.createElement(E,{menuItems:o})}},581957:(e,t,a)=>{a.d(t,{V:()=>i,k:()=>s});var r=a(318147),n=a(259964),o=a(474935),l=a(382293);function i(e){return({[r._Y.DESIGN]:"toolbar_design_created",[r._Y.WHITEBOARD]:"toolbar_figjam_created",[r._Y.SLIDES]:"toolbar_slides_created",[r._Y.SITES]:`toolbar_${n.oQ}_created`,[r._Y.COOPER]:`toolbar_${n.sq}_created`,[r._Y.FIGMAKE]:`toolbar_${n.GJ}_created`})[e]}function s(){let e=(0,l.vt)(),t=(0,o.jn)();return e||t}},327551:(e,t,a)=>{a.r(t),a.d(t,{PdfConfirmationModal:()=>E});var r=a(848318),n=a(660376),o=a(907031),l=a(582039),i=a(309488),s=a(93275),c=a(41099),d=a(250838),m=a(544405),u=a(186606),_=a(297638),p=a(178806),f=a(967688),g=a(957872);function E({fileImportDescription:e,onConfirm:t,onCancel:a}){let[E,b]=(0,r.useState)(void 0),v=(0,r.useMemo)(()=>{let e=(0,o.U)(u.h62).map(e=>({key:e,value:u.h62[e],label:function(e){switch(e){case u.h62.MIRO:return"Miro";case u.h62.MURAL:return"Mural";case u.h62.LUCID:return"Lucid";case u.h62.JAMBOARD:return"Jamboard";case u.h62.UNKNOWN:return(0,f.t)("file_browser.file_import_view.select_pdf_source_input_unknown_value");default:(0,n.xb)(e)}}(e)}));return e.sort((e,t)=>e.key===t.key?0:e.key===u.h62.UNKNOWN?1:t.key===u.h62.UNKNOWN?-1:e.label.localeCompare(t.label)),e},[]),h=(0,r.useCallback)(e=>{b(e)},[]),w=(0,r.useCallback)(()=>{E&&t(u.h62[E])},[t,E]),y=l.hS({open:!0,onClose:a,preventUserClose:!0});return r.createElement(i.bL,{manager:y,width:"fit-content"},r.createElement(s.vo,null,r.createElement(s.Y9,null,r.createElement(s.hE,null,(0,f.t)("file_browser.file_import_view.select_pdf_source_header"))),r.createElement(s.nB,null,r.createElement("div",{className:_.s.flex.flexColumn.pt4.gap16.textBodyMedium.$},r.createElement("div",null,e),r.createElement("form",{className:_.s.mb8.$},r.createElement(c.b,{legend:r.createElement(d.q,null,(0,f.tx)("file_browser.file_import_view.select_pdf_source_input_legend")),value:E,onChange:h},v.map(e=>r.createElement(c.c,{key:e.key,value:e.value,label:r.createElement(m.J,{className:_.s.textBodyMedium.$},e.label)},e.key===u.h62.UNKNOWN&&(0,f.tx)("file_browser.file_import_view.select_pdf_source_input_unknown_disclaimer"))))))),r.createElement(s.wi,null,r.createElement(s.jk,null,r.createElement(p.$z,{variant:"secondary",onClick:a,trackingProperties:{trackingDescriptor:g.c.FILE_IMPORT_X_BUTTON,text:"dismiss"}},(0,f.tx)("modal.cancel")),r.createElement(p.$z,{variant:"primary",disabled:!E,onClick:w},(0,f.tx)("modal.confirm"))))))}},271492:(e,t,a)=>{a.r(t),a.d(t,{RevokeProjectTransferModal:()=>f});var r=a(848318),n=a(301168),o=a(582039),l=a(309488),i=a(93275),s=a(531788),c=a(297638),d=a(967688),m=a(952039),u=a(31898),_=a(863270),p=a(574502);function f(e){let{pending:t,canRevokeProjectTransfer:a,isTransferTeam:f=!1}=e,g=(0,n.wA)(),E=o.hS(e),b=t.id,v=t.source_user_email,h=t.destination_user_email,w=t.is_transfer_copy,y=()=>{p.S.deleteAssetTransferRequest({id:b}).then(()=>{g(m.F.enqueue({message:(0,d.t)("revoke_transfer_modal.visual_bell.transfer_revoked")}))},e=>{g(m.F.enqueue({message:(0,d.t)("revoke_transfer_modal.visual_bell.something_went_wrong"),error:!0}))})};return r.createElement(_.fu,{name:"Asset Transfer Revoke Modal",properties:{pendingInviteId:b}},r.createElement(l.bL,{manager:E,width:"lg"},r.createElement(i.vo,null,r.createElement(i.Y9,null,r.createElement(i.hE,null,(0,d.t)("revoke_transfer_modal.header_title"))),r.createElement(i.nB,{scrolling:"none"},r.createElement("div",{className:c.s.py8.$},f?(0,d.tx)("revoke_transfer_modal.transfer_details_team",{sourceUserEmail:v,destinationUserEmail:h}):w?(0,d.tx)("revoke_transfer_modal.transfer_copy_details",{sourceUserEmail:v,destinationUserEmail:h}):(0,d.tx)("revoke_transfer_modal.transfer_details",{sourceUserEmail:v,destinationUserEmail:h})),r.createElement("div",{className:c.s.py8.$},(0,d.tx)("revoke_transfer_modal.function_explanation"))),r.createElement(i.wi,null,r.createElement(i.jk,null,r.createElement(s.$n,{variant:"secondary",onClick:e.onClose},(0,d.t)("revoke_transfer_modal.go_back")),r.createElement(s.$n,{variant:"destructive",onClick:()=>{y(),g(u.Lo())},disabled:!a},(0,d.t)("revoke_transfer_modal.revoke")))))))}},647345:(e,t,a)=>{a.d(t,{f:()=>i});var r=a(848318),n=a(17753),o=a(16808),l=a(954184);function i(e){return r.createElement(o.Me,{className:"addition_button--button--X9H6b","data-onboarding-key":e.data_onboarding_key,"data-tooltip":e.data_tooltip,"data-tooltip-show-immediately":e.disabled||void 0,"data-tooltip-type":n.Ib.TEXT,disabled:e.disabled,innerText:e.innerText,isBackgroundTransparent:e.isBackgroundTransparent,onClick:e.onClick,onMouseDown:e.onMouseDown,onMouseEnter:e.onMouseEnter,svg:l.A})}},904575:(e,t,a)=>{a.r(t),a.d(t,{FolderUpdateDescriptionModal:()=>s});var r=a(848318),n=a(301168),o=a(967688),l=a(679111),i=a(224191);function s({folder:e}){let t=(0,n.wA)();return r.createElement(i.c,{initialName:e.description??"",title:(0,o.t)("resource_rename_modal.edit_description"),placeholder:"",submitText:(0,o.t)("resource_rename_modal.save"),onRename:a=>t(l.ub({folderId:e.id,description:a.trim()})),allowEmptyString:!0,maxLength:200})}},419586:(e,t,a)=>{a.r(t),a.d(t,{FolderCreationModal:()=>et});var r=a(848318),n=a(301168),o=a(582039),l=a(309488),i=a(93275),s=a(469508),c=a(235456),d=a(580494),m=a(238444),u=a(410725),_=a(264478),p=a(136126),f=a(345964),g=a(297638),E=a(178806),b=a(967688),v=a(453370),h=a(679111),w=a(31898),y=a(533737),T=a(863270),I=a(222556),x=a(989884),N=a(125761),C=a(318147),k=a(55116),S=a(806349),R=a(474132),A=a(280255),O=a(723437),P=a(860790),L=a(679996),F=a(94831),D=a(825241),M=a(991675),B=a(693476),U=a(999667),$=a(359822),j=a(34542),W=a(517776),G=a(263336),V=a(391301),H=a(370715),z=a(556049),K=a(136169);let Y=(0,W.r1)("seen_sharing_clarity_project_modal_overlay"),q="sc_project_creation_permission_onboarding_key";function J(){let e=(0,U.md)(Y),{show:t,isShowing:a,complete:n}=(0,j.e)({overlay:K.QpH,priority:G.N.DEFAULT_MODAL},[e]);(0,$.h)(()=>{t({canShow:e=>!e})});let o=r.createElement("a",{href:"https://help.figma.com/hc/articles/360038006494-Create-a-new-project",className:g.s.colorTextOnbrand.underline.$},(0,b.tx)("rcs.sharing_clarity.learn_more"));return r.createElement(V.rq,{arrowPosition:z.F_.LEFT_TITLE,description:r.createElement("p",null,(0,b.tx)("rcs.sharing_clarity.project_creation_permissions_description",{learnMoreLink:o})),disableHighlight:!0,emphasized:!0,isShowing:a,onClose:n,targetKey:q,title:(0,b.tx)("rcs.sharing_clarity.project_creation_permissions_title"),trackingContextName:"Sharing Clarity Project Creation Permission Onboarding",zIndex:H.R.MODAL})}var X=a(864848),Q=a(948770),Z=a(36983);let ee="folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd";function et(e){let t=(0,n.wA)(),[a,U]=r.useState(""),[$,j]=r.useState(!1),[W,G]=r.useState(0),V=C.eD.TEAM_ACCESS_EDIT,H=I.h.useTrackingContext({trigger:L.b.FOLDER_CREATION_MODAL}),z=(0,n.d4)(e=>e.contacts),K=(0,n.d4)(e=>e.dropdownShown),Y=(0,n.d4)(e=>e.autocomplete),et=(0,N.iZ)(),ea=(0,u.Rs)(k.mCn,{teamId:e.teamId}),er=(0,u.Rs)(k.sMZ,{name:"seen_connected_project_in_project_creation_onboarding"}),en=!!er.data?.currentUser?.userFlagByName,eo=(0,d.k)().sc_workspace_audience,el=r.useMemo(()=>{if("loading"===ea.status||!ea.data)return null;let t=ea.data.team;if(!t)return null;let a="loaded"===t.workspace.status?t.workspace.data:void 0,r={id:e.teamId,name:t.name,imgUrl:t.imgUrl,subscription:t.subscription,student_team:!!t.studentTeamAt,grace_period_end:t.gracePeriodEnd,restrictions_list:t.restrictionsList,canAdmin:t.canAdmin,canEdit:t.canEdit,sharing_audience_control:t.sharingAudienceControl},n=t.org&&{id:t.org.id,name:t.org.name,img_url:t.org.imgUrl,org_domains:(0,S.vy)(t.org.orgDomains),domain_capture:t.org.domainCapture,invite_whitelist_guest_invite_setting:t.org.inviteWhitelist?.guestInviteSetting};return{team:r,plan:t?.plan,org:n||null,workspace:a}},[ea,e.teamId]),ei=el&&el.team,es=el&&el.org,ec=el&&el.plan,ed=(0,x.H)({planParentId:ec?.key?.parentId??null,planType:ec?.key?.type??null})&&1===W&&ec?.tier!==C.Ag.STARTER&&(0,d.k)().fc_initial_onboarding_enabled&&!en,em=es&&es.org_domains?es.org_domains:{domains:[],isFetching:!1,fetchedAt:null},eu=r.useCallback(()=>ei&&ei.sharing_audience_control!==C.PQ.ORG_EDIT&&ei.sharing_audience_control!==C.PQ.ORG_VIEW?ei.sharing_audience_control===C.PQ.WORKSPACE_EDIT||ei.sharing_audience_control===C.PQ.WORKSPACE_VIEW?X._9.WORKSPACE:X._9.INVITE_ONLY:X._9.ORG,[ei]),e_=r.useCallback(()=>ei&&(ei.sharing_audience_control===C.PQ.ORG_EDIT||ei.sharing_audience_control===C.PQ.WORKSPACE_EDIT)?X.J4.EDIT:X.J4.VIEW,[ei]),[ep,ef]=r.useState(eu()),[eg,eE]=r.useState(e_()),[eb,ev]=r.useState(F.e6.EDITOR);r.useEffect(()=>{ef(eu()),eE(e_())},[eu,e_]);let eh=()=>{1===W?G(0):(t(w.Lo()),t(v.bx()))},ew=ea.data?.team?.org?.currentPlanUser?.permission===C.Xn.GUEST,ey=e=>(0,O.t9)(e,es,em),eT=e=>{let t=(0,d.k)().folder_creation_restricted_guests_err_ui&&es?.invite_whitelist_guest_invite_setting!=null;return(0,O.yI)(e,z.usersByEmail[e]||e,es,em,et.email,t?(0,b.t)("project_creation.restricted_against_adding_external_users"):null)},eI=()=>es&&es.domain_capture&&em.domains.length>0?(0,D.Z)(Y).filter(e=>(0,m.xf)(e)&&!(0,R.H_)(em.domains,e)):[],ex=e=>{if(es&&es?.invite_whitelist_guest_invite_setting==null&&e.length>0){t((0,w.to)({type:Z.F,data:{emails:e,onConfirm:()=>{eN()},popStack:!0,orgName:es.name}}));return}},eN=()=>{let r;ep===X._9.ORG?r=eg===X.J4.EDIT?C.PQ.ORG_EDIT:C.PQ.ORG_VIEW:ep===X._9.WORKSPACE?r=eg===X.J4.EDIT?C.PQ.WORKSPACE_EDIT:C.PQ.WORKSPACE_VIEW:ep===X._9.INVITE_ONLY&&(r=C.PQ.INVITE_ONLY),t(h.vt({shouldRedirect:!e.modalShown,name:a.trim(),teamId:e.teamId,isInviteOnly:void 0,isViewOnly:void 0,sharingAudienceControl:es?r:void 0,teamAccess:V,inviteEmails:(0,D.Z)(Y),inviteLevel:eb,orgId:es?.id,onFolderCreated:e.onFolderCreated}))},eC=o.hS({open:e.open,onClose:eh}),ek=0===W?r.createElement(r.Fragment,null,r.createElement("div",{className:"folder_creation_modal--nameHeader--MgNL8 folder_creation_modal--sectionHeader--EcWYc text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,b.t)("project_creation.name")),r.createElement(_.ks,{"aria-label":(0,b.t)("project_creation.project_name"),autoFocus:!0,className:"folder_creation_modal--folderNameInput--Lcn4c",maxLength:_.wG,minLength:1,onBlur:()=>j(!1),onChange:e=>U(e.target.value),onFocus:()=>j(!0),placeholder:(0,b.t)("project_creation.ex_growth_experiments"),required:!0,value:a}),0===a.trim().length&&!$&&r.createElement("div",{className:"folder_creation_modal--inputErrorMessage--AGzQC"},(0,b.t)("project_creation.project_name_empty")),es&&ei&&r.createElement(r.Fragment,null,r.createElement("div",{className:ee,"data-onboarding-key":q},(0,b.t)("project_creation.who_has_access")),r.createElement(J,null),r.createElement(X.YU,{resourceType:C.vt.FOLDER,value:ep,onChange:ef,org:es,team:ei,audienceAccessLevel:eg,workspace:eo?el.workspace:void 0}),ep!==X._9.INVITE_ONLY&&r.createElement(r.Fragment,null,r.createElement("div",{className:ee},(0,b.t)("folder_permissions_modal.what_they_can_do")),r.createElement(X.Iz,{selectedPermissionsLevel:eg,setSelectedPermissionsLevel:eE}),r.createElement("div",{className:"folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd"},eg===X.J4.VIEW?(0,b.t)("project_creation.can_view_and_comment"):(0,b.t)("project_creation.can_create_and_edit_files"))))):(()=>{let e=es?es.id:null,a=[F.e6.EDITOR,F.e6.VIEWER];return r.createElement("div",{className:"folder_creation_modal--stepTwoContainer--7Oi4o"},r.createElement(B.e,{SearchResultComponent:Q.o,TokenComponent:Q.g,autocomplete:Y,dispatch:t,dropdownKey:"permissions-invite-dropdown",dropdownShown:K,fixedAutocompleteResults:!0,getSearchResults:t=>(0,P.Wj)(t,z.usersByEmail,et,[],e,null,null,ew,{inviteLevel:eb,source:"folder-creation-modal"}),getSelectText:A.C1,inviteLevel:eb,joinLinkShown:!1,onInviteLevelChange:ev,options:a,placeholderText:(0,b.t)("team_creation.add_a_name_or_email"),searchResultToken:ey,shouldAutoFocus:!0,useContainerRefForWidth:!0,validateToken:eT,validateTokensAsEmail:!0}))})();return r.createElement(T.fu,{name:M.e0.CREATE_NEW_PROJECT_MODAL,properties:{teamId:ei?.id,...H}},r.createElement(l.bL,{manager:eC,width:"lg"},r.createElement("div",{className:"folder_creation_modal--multiContents--U8sJ8"},r.createElement(i.vo,null,r.createElement(i.Y9,null,r.createElement(i.hE,null,0===W?(0,b.t)("project_creation.create_project"):(0,b.t)("project_creation.add_people_to_project_name",{projectName:a}))),r.createElement(i.nB,null,el?ek:r.createElement("div",{className:"folder_creation_modal--loading--9KmQd"},r.createElement(f.qc,null))),el&&r.createElement(i.wi,null,r.createElement("div",{className:"folder_creation_modal--footer--9Hie8 folder_creation_modal--subtitle--H3qLc text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,b.tx)("project_creation.step_number_of_max_steps",{currentStep:W+1,maxSteps:2})),r.createElement(i.jk,null,r.createElement(E.$z,{onClick:eh,variant:"secondary"},0===W?(0,b.tx)("project_creation.cancel"):(0,b.tx)("project_creation.back")),r.createElement(E.$z,{variant:"primary",onClick:()=>{if(0===W)G(1);else if(es){let e=eI();e.length>0?ex(e):eN()}else eN()},disabled:0===W&&0===a.trim().length},0===W?(0,b.tx)("general.continue"):(0,b.tx)("project_creation.create_project"))))),ed&&r.createElement(i.Wk,null,r.createElement(p._,{color:p.S.INFORMATION,icon:r.createElement(c.U,null),onDismiss:()=>{t(y.b({seen_connected_project_in_project_creation_onboarding:!0}))},text:r.createElement(r.Fragment,null,r.createElement("p",{className:g.s.textBodyMediumStrong.$},(0,b.t)("project_creation.figma_has_connected_projects")),r.createElement("p",null,(0,b.tx)("project_creation.learn_more_about_the_benefit",{learnMore:r.createElement(s.N,{newTab:!0,href:"https://help.figma.com/hc/articles/30124855491863-Guide-to-connected-projects"},(0,b.t)("file_browser.team_settings.learn_more"))})))})))))}},440456:(e,t,a)=>{a.d(t,{Mv:()=>I,tG:()=>w});var r=a(848318),n=a(615233),o=a(857607),l=a(264478),i=a(297638),s=a(314979),c=a(967688),d=a(31898),m=a(578590),u=a(318147),_=a(834612),p=a(253332),f=a(382140),g=a(446951),E=a(414607),b=a(605247);function v(e){let t=r.useRef(null),[a,u]=r.useState(!1),[g,E]=r.useState(null),v=new _.vr(e.currency),h=!e.allowZeroSeats,w=e.numAnnualEditors,T=w>0,x=t=>{e.onNumAnnualEditorsChange(t)},N=r.createElement("button",{type:"button",className:b.J,"data-testid":`add-${e.editorType}-seats`,onClick:()=>u(!0)},(0,c.tx)("payments.step_pay.add_more_seats"));return r.createElement("div",{className:b.wD,key:`${e.editorType}-step-pay-row`,"data-testid":`${e.editorType}-step-pay-row`},r.createElement("div",null,r.createElement("div",{className:b.Uu},r.createElement("span",null,(0,c.tx)("payments.step_pay.editors_on_annual_plan.seat_rename",{numAnnualEditors:e.numAnnualEditors,numAnnualEditorsNumberOrInput:a?r.createElement(l.ks,{ref:t,className:b.jD,value:null==g?e.numAnnualEditors:g,onChange:e=>{E(e.target.value)},onBlur:()=>{let t=parseInt(g);if(!isNaN(t)){if(t<0)e.dispatch(s.s.error((0,c.t)("flash.no_negative_seats")));else if(0===t)h?e.dispatch(s.s.error((0,c.t)("flash.at_least_one_editor.seat_rename"))):x(0);else if(t>p.m){let t=r.createElement("a",{href:`mailto:${(0,n.W4)()}`},(0,c.tx)("flash.annual_plan.contact_support_link"));e.dispatch(s.s.error((0,c.tx)("flash.annual_plan.contact_support",{contactSupport:t,maxAnnualSubscriptions:p.m})))}else t>100?e.dispatch(d.to({type:I,data:{numAnnualEditors:t,onConfirm:()=>x(t)}})):x(t)}E(null),u(!1)},onKeyDown:e=>{let t=e.target;e.keyCode===o.Uz.ENTER?(e.preventDefault(),t.blur()):e.keyCode===o.Uz.ESCAPE&&u(!1)}}):e.numAnnualEditors,productType:(0,f.E)((0,m.vc)(e.editorType))}))),!a&&r.createElement("div",{className:i.s.flex.flexColumn.gap4.$},e.editorBreakdown,r.createElement("p",{className:b.eK},(0,c.tx)("payments.step_pay.add_more_editors",{addMoreSeats:N})))),r.createElement(y,{amount:e.totalCost,lineItem:T?w>0?(0,c.t)("payments.step_pay.price_per_editor_12_months",{price:v.formatMoney(e.annualMonthlyCost,{showCents:!1}),editorString:(0,c.t)("payments.step_pay.num_editors.seat_rename",{numEditors:w})}):(0,c.t)("payments.step_pay.none_selected"):void 0,shouldShowAmount:e.numAnnualEditors>0,currency:e.currency}))}function h(){return r.createElement("div",{className:b.me})}function w(e){let{numAnnualDesignEditors:t,numAnnualWhiteboardEditors:a,isTeamPro:n,totalDesignEditors:o,totalWhiteboardEditors:l,monthlyDesignAmount:i,monthlyFigjamAmount:s,annualMonthlyDesignAmount:d,annualMonthlyFigjamAmount:m}=e,_=o-t,p=t*d*12+(!n&&_>0?_*i:0),f=l-a,g=a*m*12+(!n&&f>0?f*s:0);return r.createElement("div",null,r.createElement(v,{dispatch:e.dispatch,editorType:u._Y.DESIGN,onNumAnnualEditorsChange:e.onNumAnnualDesignEditorsChange,numAnnualEditors:t,allowZeroSeats:0!==a,currency:e.currency,totalCost:p,annualMonthlyCost:d}),r.createElement(v,{dispatch:e.dispatch,editorType:u._Y.WHITEBOARD,onNumAnnualEditorsChange:e.onNumAnnualWhiteboardEditorsChange,numAnnualEditors:a,allowZeroSeats:0!==t,currency:e.currency,totalCost:g,annualMonthlyCost:m}),r.createElement(h,null),r.createElement("div",{className:b.wD},r.createElement("div",{className:b.YK},(0,c.tx)("payments.step_pay.subscription")),r.createElement(T,{amount:p+g,plusTax:!0,dataTestId:"subscription-total-cost",currency:e.currency})))}function y(e){let t=new _.vr(e.currency);return r.createElement("div",{className:b.R6},e.shouldShowAmount?t.formatMoney(e.amount,{showCents:!1}):"--",r.createElement("div",{className:i.s.flex.flexColumn.gap4.$},e.lineItem&&r.createElement("div",{className:b.eK},e.lineItem)))}function T(e){let t=new _.vr(e.currency);return r.createElement("div",{className:b.X5},r.createElement("p",{className:b.IW,"data-testid":e.dataTestId},t.formatMoney(e.amount,{showCents:!1})),e.plusTax&&r.createElement("p",{className:b.B8},(0,c.tx)("payments.step_pay.plus_sales_tax")))}let I="confirm-seats-modal";function x(e){let t=e.modalShown.data.numAnnualEditors;return r.createElement(E.Rw,{confirmationTitle:(0,c.t)("payments.step_pay.thats_a_lot_of_seats",{numAnnualEditors:t}),onConfirm:e.modalShown.data.onConfirm,confirmText:(0,c.t)("payments.step_pay.confirm_seats"),...e},(0,c.tx)("payments.step_pay.happy_you_want_to_buy_seats",{numAnnualEditors:t}))}(0,g.qK)(I,e=>r.createElement(x,{...e}))},631265:(e,t,a)=>{a.d(t,{l:()=>r});let r="trashed-projects"},359530:(e,t,a)=>{a.r(t),a.d(t,{AddPinModal:()=>h});var r=a(848318),n=a(301168),o=a(660376),l=a(938982),i=a(484169),s=a(410725),c=a(998568),d=a(314979),m=a(967688),u=a(87463),_=a(31898),p=a(353231),f=a(106340),g=a(55116),E=a(879983),b=a(467216),v=a(769642);function h({fileKey:e,source:t,open:a,onClose:o}){let u=(0,n.wA)(),h=(0,b.p)((0,m.t)("file_browser.pinning.pin_modal.confirmation_bell"),"file-browser-workspace-add-pin"),y=(0,s.Rs)(g.wtK,{fileKey:e}),T=function(e){let[t,a]=r.useState(!1),n="loaded"===e.status&&e.data.file&&!e.data.file.canPinToWorkspace&&e.data.file.canEdit;return n&&!t&&a(!0),n||t}(y);if("loaded"!==y.status)return null;let{file:I}=y.data;if(!I)return(0,c.$D)(l.e.WAYFINDING,Error("AddPinModal unable to lookup file by ID")),u(_.Lo()),null;let x=I.computedWorkspace?.workspace;if(!x)return(0,c.$D)(l.e.WAYFINDING,Error("AddPinModal opened for file with no workspace")),u(_.Lo()),null;let N=f.F.toSinatra(I),C=async e=>{try{await E.p.pinFile({resourceType:v.AH,resourceId:x.id,fileKey:I.key,description:e,shouldUpdatePermissions:T}),(0,p.E9)("file_browser_file_pinned_to_resource",I,{resourceType:v.AH,resourceId:x.id,source:t,pinDescription:(0,i._Z)(e)}),h(x.id)}catch(e){throw u(d.s.error((0,m.t)("file_browser.pinning.pin_modal.error"))),e}},k=T?r.createElement(w,{file:I,workspace:x}):null;return r.createElement(b.N,{title:(0,m.t)("file_browser.pinning.pin_modal.pin_file_to_workspace"),confirmText:(0,m.t)("file_browser.pinning.pin_file"),onSubmit:C,file:N,initialDescription:null,warningContent:k,open:a,onClose:o})}function w({file:e,workspace:t}){let a=e.parentOrgId;(0,o.B1)(a);let l=(0,n.d4)(({orgById:e})=>e[a].name);return r.createElement(u.E,null,(0,m.tx)("file_browser.pinning.update_permissions.content",{workspaceName:t.name,permission:r.createElement(u.E,{fontWeight:"bold"},(0,m.tx)("file_browser.pinning.update_permissions.content.permission",{orgName:l}))}))}},607910:(e,t,a)=>{a.r(t),a.d(t,{DeletePinModal:()=>b});var r=a(848318),n=a(301168),o=a(938982),l=a(484169),i=a(410725),s=a(998568),c=a(873923),d=a(314979),m=a(967688),u=a(353231),_=a(125761),p=a(318147),f=a(55116),g=a(879983),E=a(467216);function b({pinnedFileId:e,open:t,onClose:a}){let b=(0,_.TA)(),v=(0,n.wA)(),h=(0,E.p)((0,m.t)("file_browser.pinning.delete_pin_modal.confirmation_bell"),"file-browser-workspace-delete-pin"),[w,y]=r.useState(!1),T=(0,i.Rs)(f.qBf,{pinnedFileId:e});if("loaded"!==T.status)return null;let{pinnedFile:I}=T.data;if(!I)return(0,s.$D)(o.e.WAYFINDING,Error("DeletePinModal unable to lookup pinned file by ID")),a(),null;if(I.resourceType!==p.K.WORKSPACE)return(0,s.$D)(o.e.WAYFINDING,Error("DeletePinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:I.resourceType}}),a(),null;let x=async t=>{t.preventDefault();try{y(!0),await g.p.deletePin({pinnedFileId:e}),(0,u.E9)("file_browser_file_unpinned_from_resource",I.file,{resourceId:I.resourceId,resourceType:I.resourceType,isPinCreator:I.creator?.id===b,pinDescription:(0,l._Z)(I.description)}),h(I.resourceId),a()}catch(e){v(d.s.error((0,m.t)("file_browser.pinning.delete_pin_modal.error")))}finally{y(!1)}};return r.createElement(c.R,{title:(0,m.t)("file_browser.pinning.delete_pin_modal.header"),confirmText:(0,m.t)("file_browser.pinning.delete_pin_modal.confirm"),onConfirm:x,destructive:!0,isLoading:w,open:t,onClose:a},(0,m.t)("file_browser.pinning.delete_pin_modal.content"))}},590047:(e,t,a)=>{a.r(t),a.d(t,{EditPinModal:()=>g});var r=a(848318),n=a(301168),o=a(938982),l=a(410725),i=a(998568),s=a(314979),c=a(967688),d=a(31898),m=a(106340),u=a(318147),_=a(55116),p=a(879983),f=a(467216);function g({pinnedFileId:e,open:t,onClose:a}){let g=(0,n.wA)(),E=(0,f.p)((0,c.t)("file_browser.pinning.pin_modal.edit.confirmation_bell"),"file-browser-workspace-edit-pin"),b=(0,l.Rs)(_.vgO,{pinnedFileId:e});if("loaded"!==b.status)return null;let{pinnedFile:v}=b.data;if(!v)return(0,i.$D)(o.e.WAYFINDING,Error("EditPinModal unable to lookup pinned file by ID")),g(d.Lo()),null;if(v.resourceType!==u.K.WORKSPACE)return(0,i.$D)(o.e.WAYFINDING,Error("EditPinModal opened for pinned file with non-workspace resource type"),{extra:{resourceType:v.resourceType}}),g(d.Lo()),null;let h=v.resourceId,w=async t=>{try{await p.p.updatePin({pinnedFileId:e,description:t}),E(h)}catch(e){throw g(s.s.error((0,c.t)("file_browser.pinning.pin_modal.edit.error"))),e}},y=m.F.toSinatra(v.file);return r.createElement(f.N,{title:(0,c.t)("file_browser.pinning.pin_modal.edit_pin_description"),confirmText:(0,c.t)("file_browser.pinning.pin_modal.save"),onSubmit:w,file:y,initialDescription:v.description,open:t,onClose:a})}},467216:(e,t,a)=>{a.d(t,{N:()=>U,p:()=>$});var r=a(848318),n=a(301168),o=a(582039),l=a(309488),i=a(93275),s=a(531788),c=a(878339),d=a(782073),m=a(82433),u=a(484169),_=a(425914),p=a(345964),f=a(687113),g=a(297638),E=a(967688),b=a(952039),v=a(239851),h=a(289297),w=a(453370),y=a(403253),T=a(209595),I=a(28351),x=a(999667),N=a(536384),C=a.n(N),k=a(151433),S=a(238462),R=a(755534),A=a(149841),O=a(957508),P=a(555655),L=a(523669),F=a(73515);function D({buttonClassName:e,onInsert:t,closeOnInsert:a}){let[n,o]=r.useState(null),l=r.useRef(null),i=r.useCallback(()=>{l.current&&o(l.current.getBoundingClientRect())},[o]),s=r.useCallback(e=>{t(e),a&&o(null)},[t,a,o]);return r.createElement("button",{className:e,ref:l,onClick:i},r.createElement(L.In,{icon:"smiley-32"}),n&&r.createElement(F._,{onInsert:s,onCancel:()=>o(null),targetRect:n}))}let M={library:{list:()=>Promise.resolve([]),search:()=>Promise.resolve([]),maxResultsLength:()=>0}};function B({placeholder:e,text:t,onChange:a,maxLength:o,onSubmit:l,textAreaClassName:i}){let s=(0,n.wA)(),c=x.zl.get(O.ph),[d,m]=r.useState(!1),_=r.useRef(null),p=r.useCallback(e=>{e.preventDefault(),e.stopPropagation(),_.current&&_.current.focus()},[]),f=(0,u.Kq)(t,{includeTrailingWhitespace:!0});return r.createElement("div",{className:"emoji_text_area--textAreaContainer--4FHeL",onClick:p},r.createElement(R.P,{className:C()(g.s.flexGrow1.overflowAuto.maxWFull.borderBox.if(d,g.s.bb1.bSolid.colorBorder).$,i),innerClassName:g.s.hFull.$},r.createElement(P.iX,{ref:_,className:g.s.pt16.px16.borderBox.if(d,g.s.pb4).$,currentOrgUsers:{orgUsers:{}},dispatch:s,editorOnClear:S.lQ,editorOnInsert:S.lQ,mentionables:M,messageMeta:t,mountInputFocused:!0,onCancel:S.lQ,onFocus:S.lQ,onSubmit:l??S.lQ,onUpdateTextArea:S.lQ,placeholderText:e,setIsEditorFocused:S.lQ,submitOnEnter:!1,typeahead:c,updateMessage:([e,t])=>{a(e)}}),r.createElement(A.a,{onInitialLoad:e=>m(!e),onIntersectionChange:e=>m(!e.isIntersecting)})),r.createElement("div",{className:g.s.flex.justifyBetween.itemsCenter.pl12.pr16.py12.$},r.createElement(D,{buttonClassName:"emoji_text_area--emojiPickerButton--CGYqF",onInsert:e=>{if(_.current){let t=k.dN.get(e.id);t&&(_.current.insertEmoji(t),_.current.focus())}},closeOnInsert:!0}),o&&r.createElement("div",{className:g.s.if(f>o,g.s.colorTextDanger,g.s.colorTextSecondary).cursorDefault.$},f,"/",o)))}function U({title:e,confirmText:t,onSubmit:a,file:n,initialDescription:d,warningContent:b,open:w,onClose:T}){let[I,x]=r.useState(d??[]),[N,C]=r.useState(!1),k=(0,y.fA)(n),S=(0,v.l)(n.folder_id),R=(0,u.Kq)(I,{includeTrailingWhitespace:!0}),A=R<=100&&R>0,O=r.useCallback(async()=>{if(A)try{C(!0),await a(I),T()}finally{C(!1)}},[a,A,T,I]),P=o.hS({open:w,onClose:T}),L=(0,h.C)(k),F=r.createElement(r.Fragment,null,r.createElement("div",{className:g.s.p16.gap16.flex.flexColumn.$},r.createElement("div",{className:g.s.flex.flexColumn.gap16.$},r.createElement("div",null,r.createElement(f.e,{tile:k,borderRadius:6})),r.createElement("div",{className:"x78zum5 x1q0g3np x1v2ro7d x6s0dn4"},r.createElement(_.w4,{size:16,type:L}),r.createElement("div",{className:g.s.flex.flexColumn.gap2.flexGrow1.justifyCenter.overflowHidden.cursorDefault.$},r.createElement("div",{...m.Ay.props(j.title)},n.name),"loaded"===S.status&&S.data?r.createElement("div",{...m.Ay.props(j.subtitle)},S.data):null))),r.createElement(B,{placeholder:(0,E.t)("file_browser.pinning.pin_modal.description_textarea_placeholder"),text:I,onChange:x,onSubmit:O,maxLength:100,textAreaClassName:g.s.maxH100.$})),b?r.createElement("div",{className:g.s.colorBgWarningTertiary.px16.py12.flex.columnGap8.$},r.createElement(c.R,{className:g.s.flexShrink0.$}),r.createElement("span",null,b)):null);return r.createElement(l.bL,{manager:P,width:"lg"},r.createElement(i.vo,null,r.createElement(i.Y9,null,r.createElement(i.hE,null,e)),r.createElement(i.nB,{padding:0},F),r.createElement(i.wi,null,r.createElement(i.jk,null,r.createElement(s.$n,{variant:"secondary",onClick:T},(0,E.tx)("modal.cancel")),N?r.createElement(s.$n,{disabled:!0},r.createElement(p.kt,{className:g.s.colorIconOnbrand.$})):r.createElement(s.$n,{disabled:!A,variant:"primary",onClick:O},t)))))}function $(e,t){let a=(0,n.wA)(),o=(0,T._6)();return r.useCallback(r=>{let n;("workspace"!==o.view||o.subView!==I.V0.DIRECTORY)&&(n={text:(0,E.t)("file_browser.pinning.pin_modal.confirmation_bell.view_workspace"),action:()=>{a(w.$T({view:"workspace",subView:I.V0.DIRECTORY,workspaceId:r,selectedTab:I.dN.TEAMS}))}}),a(b.F.enqueue({type:t,message:e,button:n}))},[a,e,t,o])}let j={title:{...d.g.textBodyMediumStrong,$$css:!0},subtitle:{...d.g.textBodyMedium,$$css:!0}}},573502:(e,t,a)=>{a.d(t,{$:()=>u});var r=a(848318),n=a(301168),o=a(637640),l=a(857607),i=a(453370),s=a(422444),c=a(180294),d=a(28351);if(443==a.j)var m=a(213374);function u(){let e=(0,c.dq)(),t=(0,n.wA)();return r.useCallback((a,r)=>{if(t(s.kg({clickedResourceType:"workspace",resourceIdOrKey:a??void 0})),(0,l.Fo)(r)||r.shiftKey){let t=`/files/${e}/workspace/${a??m.O}/directory/teams`;o.Ay.redirect(t,"_blank"),r.preventDefault()}else t(i.$T({view:"workspace",subView:d.V0.DIRECTORY,workspaceId:a,selectedTab:d.dN.TEAMS}))},[e,t])}},106355:(e,t,a)=>{a.d(t,{h:()=>b});var r=a(848318),n=a(430385),o=a(967688),l=a(657174),i=a(301168),s=a(76e4),c=a(103419),d=a(453370),m=a(422444),u=a(353231),_=a(672940),p=a(26435),f=a(125952),g=a(697906);function E(e){let[t,a]=r.useState(!1),n=(0,i.wA)(),o=(0,i.d4)(e=>e.selectedView),l=(0,_.FC)(),E=e.team,b=()=>{(0,u._J)("file_browser_team_click",E.id,l,{selectedView:"recentsAndSharing"===o.view?o.tab||p.G.RECENTLY_VIEWED:o.view,viewMode:"grid"}),n(m.kg({clickedResourceType:"team",resourceIdOrKey:E.id})),n(d.$T({view:"team",teamId:E.id}))},v=e.selectedTeamId===e.team.id,h=t||v;return r.createElement(c.a,{canView:!0,description:E.description,headerLeft:r.createElement(f.Ro,{className:g.rP,entity:E,size:40}),headerRight:r.createElement(s.m3,{team:E,onLeave:e.onLeave,isCardActive:h}),isCardActive:h,isSelected:v,name:E.name,onClick:t=>{1===t.detail?e.setSelectedTeamId(e.team.id):2===t.detail&&b()},onMouseOut:()=>{a(!1)},onMouseOver:()=>{a(!0)}})}function b(e){let t=e.teams;(0,n.KQ)(t,"name");let[a,i]=r.useState(void 0);return r.createElement(l.X,{emptyView:(0,o.tx)("team_tile.guest.no_teams.info",{orgName:e.orgName})},t.map(t=>r.createElement(E,{key:t.id,team:t,onLeave:e.onLeave,selectedTeamId:a,setSelectedTeamId:i})))}},657174:(e,t,a)=>{a.d(t,{X:()=>s});var r=a(848318),n=a(143823),o=a(536384),l=a.n(o),i=(e=>(e.Medium="Medium",e.Large="Large",e))(i||{});function s(e){let t;return e.isLoading?r.createElement("div",{className:"tile_grid--loadingContainer--1gQIv"},r.createElement(n.k,{htmlAttributes:{"data-testid":"loading-spinner"}})):!e.children||Array.isArray(e.children)&&!e.children.length?r.createElement("div",{className:"tile_grid--emptyContainer--y8P1H text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.emptyView):(t="Large"===e.tileSize?"tile_grid--gridLarge--EZC2-":"tile_grid--gridMedium--fzult",r.createElement("div",{className:l()("tile_grid--gridContainer--cn4vx",e.containerClassName)},r.createElement("div",{className:t},e.children)))}},817068:(e,t,a)=>{a.d(t,{a:()=>r});let r=(0,a(999667).eU)("components")},28101:(e,t,a)=>{a.d(t,{Pl:()=>o,tG:()=>n});let r=e=>({componentId:e.id,nodeId:e.node_id,libraryKey:e.library_key,entrypoint:"component_browser"}),n=(e,t)=>({searchSessionId:e,codebaseComponentId:t?.codebase_component_id,codebaseComponentScore:t?.score,entrypoint:"component_browser"}),o=(e,t,a=null)=>{let o=r(e);return o={...o,searchSessionId:t},a&&(o={...o,...n(t,a)}),o}},84797:(e,t,a)=>{a.d(t,{ComponentBrowserLibraryView:()=>ag});var r=a(848318),n=a(891627),o=a(291549),l=a(954703),i=a(193675),s=a(544405),c=a(773511),d=a(1511),m=a(877770),u=a(523152),_=a(952647),p=a(282631),f=a(562027),g=a(580494),E=a(999667),b=a(410725),v=a(439382),h=a(48908),w=a(967688),y=a(817068),T=a(777905),I=a(361964),x=a(388831);a(822879);var N=a(55116),C=a(17753),k=a(660376),S=a(53837),R=a(957872),A=a(34542),O=a(385711),P=a(517776),L=a(263336),F=a(518383),D=a(391301),M=a(370715),B=a(136169);let U=(0,P.r1)("dev_mode_has_seen_component_browser_onboarding"),$={Step1:"dev_mode_component_browser_manual_mapping_step_1",Step2:"dev_mode_component_browser_manual_mapping_step_2",Step3:"dev_mode_component_browser_manual_mapping_step_3"},j={Step1:"dev_mode_component_browser_shared_step_1"},W={Step1:"dev_mode_component_browser_codebase_ingestion_step_1",Step2:"dev_mode_component_browser_codebase_ingestion_step_2"};var G=(e=>(e.ManualStep1="ManualStep1",e.ManualStep2="ManualStep2",e.ManualStep3="ManualStep3",e.ManualStep4="ManualStep4",e.CodebaseIngestionStep1="CodebaseIngestionStep1",e.CodebaseIngestionStep2="CodebaseIngestionStep2",e.CodebaseIngestionStep3="CodebaseIngestionStep3",e))(G||{}),V=(e=>(e.OpenDialog="OpenDialog",e.CloseDialog="CloseDialog",e))(V||{});function H(e){let{step:t,isOverlayShowing:a,next:n,complete:o,onOnboardingSequenceAction:l}=e,i=e=>{e&&l?.(e),n()};switch(t){case"ManualStep1":return r.createElement(D.rq,{description:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_1_description"),isShowing:a,onClose:o,primaryCta:{label:(0,w.tx)("general.next"),type:"button",onClick:n,ctaTrackingDescriptor:R.c.NEXT},stepCounter:{stepNum:1,totalNumSteps:4},targetKey:$.Step1,trackingContextName:"dev_mode_component_browser_step_1 - identify the code file"});case"ManualStep2":return r.createElement(D.rq,{description:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_2_description"),isShowing:a,onClose:o,primaryCta:{label:(0,w.tx)("general.next"),type:"button",onClick:n,ctaTrackingDescriptor:R.c.NEXT},stepCounter:{stepNum:2,totalNumSteps:4},targetKey:$.Step2,title:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_2_title"),trackingContextName:"dev_mode_component_browser_step_2 - identify the component"});case"ManualStep3":return r.createElement(D.rq,{description:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_3_description"),isShowing:a,onClose:o,primaryCta:{label:(0,w.tx)("general.next"),type:"button",onClick:n,ctaTrackingDescriptor:R.c.NEXT},stepCounter:{stepNum:3,totalNumSteps:4},targetKey:$.Step3,title:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.manual_step_3_title"),trackingContextName:"dev_mode_component_browser_step_3 - review or edit the mapping"});case"ManualStep4":return r.createElement(D.rq,{zIndex:M.R.MODAL,description:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_description"),isShowing:a,onClose:o,primaryCta:{label:(0,w.tx)("general.got_it"),type:"button",onClick:o,ctaTrackingDescriptor:R.c.DONE},stepCounter:{stepNum:4,totalNumSteps:4},targetKey:j.Step1,title:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_title"),trackingContextName:"dev_mode_component_browser_step_4 - manage your connection"});case"CodebaseIngestionStep1":return r.createElement(D.rq,{zIndex:M.R.MODAL,description:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_1_description"),isShowing:a,onClose:o,primaryCta:{label:(0,w.tx)("general.next"),type:"button",onClick:()=>i("OpenDialog"),ctaTrackingDescriptor:R.c.DONE},stepCounter:{stepNum:1,totalNumSteps:3},targetKey:W.Step1,title:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_1_title"),trackingContextName:"dev_mode_component_browser_step_1 - manage your connection"});case"CodebaseIngestionStep2":return r.createElement(D.rq,{description:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_2_description"),isShowing:a,onClose:o,onTargetLost:()=>i("CloseDialog"),primaryCta:{label:(0,w.tx)("general.next"),type:"button",onClick:()=>i("CloseDialog"),ctaTrackingDescriptor:R.c.DONE},stepCounter:{stepNum:2,totalNumSteps:3},targetKey:W.Step2,title:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.codebase_ingestion_step_2_title"),trackingContextName:"dev_mode_component_browser_step_2 - manage your connection",zIndex:M.R.MODAL});case"CodebaseIngestionStep3":return r.createElement(D.rq,{zIndex:M.R.MODAL,description:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_description"),isShowing:a,onClose:o,primaryCta:{label:(0,w.tx)("general.got_it"),type:"button",onClick:o,ctaTrackingDescriptor:R.c.DONE},stepCounter:{stepNum:3,totalNumSteps:3},targetKey:j.Step1,title:(0,w.tx)("dev_handoff.component_browser_onboarding_callout.shared_step_1_title"),trackingContextName:"dev_mode_component_browser_step_3 - manage your connection"});default:(0,k.xb)(t)}}function z({onOnboardingSequenceAction:e,canShowOnboarding:t}){let a=(0,E.md)(U),[n,o]=(0,S.Vc)("componentBrowserOnboardingSelection",null),{show:l,complete:i,isShowing:s}=(0,A.e)({overlay:B.Hx5,priority:L.N.DEFAULT_MODAL},[a]),c=(0,r.useMemo)(()=>"codebase_ingestion"===n?["CodebaseIngestionStep1","CodebaseIngestionStep2","CodebaseIngestionStep3"]:["ManualStep1","ManualStep2","ManualStep3","ManualStep4"],[n]),{currentStep:d,next:m}=(0,O.A)({numSteps:c.length,onComplete:i});return(0,r.useEffect)(()=>{t&&l({canShow:e=>!e})},[l,n,t]),r.createElement(F.U,{currentStep:d,isShowing:s,children:c.map((t,a)=>r.createElement(H,{key:a,step:t,isOverlayShowing:s,next:m,complete:i,onOnboardingSequenceAction:e}))})}var K=a(278905),Y=a(62034),q=a(143823),J=a(408193),X=a(232167),Q=a(124810),Z=a(218029),ee=a(813321),et=a(329228),ea=a(422482),er=a(696483),en=a(536384),eo=a.n(en),el=a(345964);function ei({id:e,isVisible:t,position:a,containerRef:o,isLoading:l,loadingMessage:i,items:s,noItemsView:c,renderItem:d,selectedIndex:m=0}){let u=(0,r.useRef)(null);return((0,r.useEffect)(()=>{if(t&&!l&&s.length>0&&u.current){let e=u.current.children[m];e&&e.scrollIntoView({block:"nearest"})}},[t,l,s.length,m]),t&&a)?(0,n.createPortal)(r.createElement("div",{ref:o,id:e,className:"component_browser_chip_search_dropdown--componentBrowserChipSearchDropdownContainer--3WPEW",style:{top:`${a.top}px`,left:`${a.left}px`,width:`${a.width}px`}},r.createElement("ul",{ref:u,className:"component_browser_chip_search_dropdown--resultsList--J1-7i"},l?r.createElement("li",{className:"component_browser_chip_search_dropdown--loadingState--BfIlh"},r.createElement(el.kt,null),i):s.length>0?s.map((e,t)=>r.createElement(r.Fragment,{key:t},d(e,t))):r.createElement("li",null,c))),document.body):null}let es="component_browser_component_list--componentsListTableRow--MWiH-",ec="component_browser_component_list--componentsListTableCell--qX8vW",ed="component_browser_component_list--codeConnectionStatus--p3-4K",em="component_browser_chip_search_input--pillBase--HlS0p";function eu({labels:e,onClick:t,onBackspace:a,isClearable:n}){return r.createElement("button",{onKeyDown:e=>{"Backspace"===e.key&&a?.()},onClick:t,className:em,"aria-label":(0,w.t)("dev_handoff.component_browser.clear_input")},e.map((t,o)=>r.createElement(r.Fragment,{key:`${t.value}-${o}`},r.createElement("span",{"data-tooltip":t.tooltip,"data-tooltip-type":"text",className:"component_browser_chip_search_input--pillLabel--qzAew utilities--bodyMedium--7-YGK"},t.value),o<e.length-1&&r.createElement(ea.R,null),n&&r.createElement(er.f,{onClick:a,className:"component_browser_chip_search_input--pillClearIcon--QXb02"}))))}function e_({title:e,subtitle:t,onClick:a,icon:n,isSelected:o}){return r.createElement("li",null,r.createElement(c.E,{className:eo()("component_browser_chip_search_input--item--IGp8Y",{"component_browser_chip_search_input--selected--gg3EU":o}),onClick:e=>{e.stopPropagation(),a()}},n&&r.createElement("div",{className:"component_browser_chip_search_input--itemIcon--8ZOb3"},n),r.createElement("div",{className:"component_browser_chip_search_input--itemContent--2QfZV"},r.createElement("div",{className:"component_browser_chip_search_input--title--oGz9H"},e),t&&r.createElement("div",{className:"component_browser_chip_search_input--subtitle--5zMEl"},t))))}let ep="component-browser-chip-search-dropdown",ef=r.forwardRef(function({placeholder:e,disabled:t,searchResults:a,isLoadingSearchResults:n,selectedItem:o,onChipSelect:l,onDeleteLastItem:i,onDropdownItemClick:s,onValueChanged:c,onEnterPressed:d,showDropdown:m=!0,showDropdownOnFocus:_=!1,arePillsClearable:p=!1,isClearable:f=!0,hint:g,onboardingKey:E},b){let[v,h]=(0,r.useState)({value:"",isSearchListOpen:!1,dropdownPosition:null,isConnecting:!1,selectedIndex:0}),y=(0,r.useRef)(v.value),T=(0,r.useRef)(null),I=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(v.isSearchListOpen&&T.current){let e=T.current.getBoundingClientRect();h(t=>({...t,dropdownPosition:{top:e.bottom+window.scrollY,left:e.left+window.scrollX,width:e.width}}))}else h(e=>({...e,dropdownPosition:null}))},[v.isSearchListOpen]),(0,r.useEffect)(()=>{function e(e){let t=e.target;T.current&&!T.current.contains(t)&&I.current&&!I.current.contains(t)&&h(e=>({...e,isSearchListOpen:!1}))}return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let x=()=>{h(e=>({...e,value:"",isSearchListOpen:!1}))},N=e=>{h(e=>({...e,isSearchListOpen:!1,value:"",selectedIndex:0})),s(e)},C=e=>{""!==e&&e!==y.current&&(y.current=e,d?.(e)&&x())};return r.createElement("div",{className:"component_browser_chip_search_input--inlineSearchContainer--8CJzi",ref:T},r.createElement("div",{className:"component_browser_chip_search_input--inputWrapper--aiWWZ"},r.createElement("div",{className:eo()("component_browser_component_list--searchInputContainer--1OO4i",{"component_browser_component_list--disabled--DfITX":t})},o&&r.createElement(eu,{onBackspace:()=>{i(),b.current?.focus()},labels:o.value,onClick:()=>l?.(o),isClearable:p}),r.createElement("input",{ref:b,className:"component_browser_chip_search_input--input--KG-iT faceted_search_bar--input--V5ksZ","data-onboarding-key":E,onBlur:e=>{C(v.value);let t=e.relatedTarget;t?.closest(`#${ep}`)||h(e=>({...e,isSearchListOpen:!1,selectedIndex:0}))},onChange:e=>{if(t||o)return;let a=e.target.value;h(e=>({...e,value:a,isSearchListOpen:a.length>0,selectedIndex:0})),c(a)},onFocus:()=>{_&&h(e=>({...e,isSearchListOpen:!0,selectedIndex:0}))},onKeyDown:e=>{if(!t){if("Backspace"===e.key&&""===v.value&&i(),"Enter"===e.key){if(a&&a.length>0){let t=a[v.selectedIndex];if(t){e.preventDefault(),N(t);return}}C(v.value)}"ArrowDown"===e.key&&a&&a.length>0&&(e.preventDefault(),h(e=>({...e,selectedIndex:(e.selectedIndex+1)%a.length}))),"ArrowUp"===e.key&&a&&a.length>0&&(e.preventDefault(),h(e=>({...e,selectedIndex:0===e.selectedIndex?a.length-1:e.selectedIndex-1})))}},placeholder:e,type:"search",value:v.value}),o&&f&&r.createElement("div",{className:"component_browser_chip_search_input--clearIconContainer--lm-6s"},r.createElement(u.L,{className:"component_browser_chip_search_input--clearIcon--1KMS0",onClick:i})))),m&&r.createElement(ei,{id:ep,isVisible:!!v.isSearchListOpen,position:v.dropdownPosition,containerRef:I,isLoading:n||!1,items:a||[],selectedIndex:v.selectedIndex,noItemsView:r.createElement("div",{className:"component_browser_chip_search_input--noItemsView--dmc-y"},r.createElement("span",{className:"component_browser_chip_search_input--noItemsTitle--MF48d"},(0,w.t)("dev_handoff.component_browser.no_results_found")),g&&r.createElement("div",{className:"component_browser_chip_search_input--hint--W3h7w"},r.createElement("span",null,g))),renderItem:(e,t)=>r.createElement(e_,{icon:e.icon,title:e.title,subtitle:e.subtitle,onClick:()=>N(e),isSelected:t===v.selectedIndex})}))});var eg=a(660580),eE=a(326252);let eb=eg.M4.Query({fetch:async e=>(await eE.Q.getRepositorySourceFiles(e)).data.meta.source_files??[]}),ev=eg.M4.Query({fetch:async e=>(await eE.Q.getRepositoryFileComponents(e)).data.meta});var eh=a(301168),ew=a(150583),ey=a(996202),eT=a(952039),eI=a(204550),ex=a(969604),eN=a(749233),eC=a(218742),ek=a(266004);function eS(e){return"key"in e?e.key:"component_key"in e?e.component_key:null}let eR={all:{value:"all",Icon:ex.F},notConnected:{value:"notConnected",Icon:eN.w},connected:{value:"connected",Icon:eC.W},ignored:{value:"ignored",Icon:ek.M}};var eA=a(453370),eO=a(209595),eP=a(125761),eL=(e=>(e.OpenInSidebar="open-in-sidebar",e.Disconnect="disconnect",e.HasCodeEquivalent="has-code-equivalent",e.Ignore="ignore",e))(eL||{});function eF(e,t){if(1===e.length)return e[0]??"";let a=e.pop();if(a){if(a.length>=20)return a;let e=20-(a?.length??0);return t.slice(0,e)+".../"+a}return""}function eD(e,t){return{component:e,sourceIndex:t,isLoading:!1,selectedFile:null,selectedComponent:null}}let eM=({searchTerm:e,libraryKey:t,selectedRepositories:a})=>{let n=(a?.length??0)>0,o=a[0],[l]=(0,et.IT)(eb({libraryKey:t,repository:o?.id??"",fileExtension:"tsx"}),{enabled:!!t&&n&&!!o,key:"repositorySourceFilesQuery"}),i=(0,r.useMemo)(()=>{let t=e.match(/^https?:\/\/github\.com\/([a-zA-Z0-9-_.]+)\/([a-zA-Z0-9-_.]+)\/(?:blob|tree)\/([a-zA-Z0-9-_.]+)\/(.*)$/);if(t){let[,,,,e]=t;return e}let a=e.replace(/^https?:\/\//,"");if(/^[a-zA-Z0-9\-_./\\]+$/.test(a))return a},[e]);return{result:(0,r.useMemo)(()=>l.data&&i?(0,Z.$P)(i,l.data,{keySelector:e=>[e.path,e.name],threshold:.6,limit:10,ignoreCase:!0,ignoreSymbols:!0}).map(e=>({title:e.name,subtitle:e.path,metadata:e})):[],[l.data,i]),isLoading:"loading"===l.status||"disabled"===l.status}},eB=(0,r.forwardRef)(function(e,t){let{sourceIndex:a,currentRowIndex:n,component:o,libraryKey:l,disabled:i,onFileChanged:s,selectedFile:c,selectedRepositories:d,onboardingKey:m}=e,[u,_]=(0,r.useState)(""),[p]=(0,ee.A)(u,300),f=(d?.length??0)>0,g=o?.code_connect_info.v1.state==="ignored",{result:E,isLoading:b}=eM({searchTerm:p,libraryKey:l,selectedRepositories:d});if(g)return r.createElement("span",null,"--");let v=o?.node_id;if(o&&!v)return null;let h=c?.title?{value:[{value:c.title,tooltip:c.metadata?.path}]}:void 0;return r.createElement(ef,{ref:t,arePillsClearable:!0,disabled:i,hint:(0,w.t)("dev_handoff.component_browser.file_search_hint"),isClearable:!1,isLoadingSearchResults:b,onDeleteLastItem:()=>{s({sourceIndex:a,selectedFile:null,currentRowIndex:n,trackingProps:{location:e.location,source:"manual"}})},onDropdownItemClick:t=>{s({sourceIndex:a,selectedFile:t,currentRowIndex:n,trackingProps:{location:e.location,source:"manual"}})},onEnterPressed:t=>{if(""===t.trim())return!1;if(0===E.length){let r=eF(t.split("/"),t);return s({sourceIndex:a,currentRowIndex:n,selectedFile:{title:r??t,subtitle:t,metadata:{isCustomLink:!0,repository:{id:"",name:""},path:t,name:r??t,sha:"",type:"file"}},trackingProps:{location:e.location,source:"manual"}}),!0}return _(t),!1},onValueChanged:e=>{_(e)},onboardingKey:m,placeholder:c?"":(0,w.t)("dev_handoff.component_browser.paste_code_link"),searchResults:E,selectedItem:h,showDropdown:f})}),eU="component_browser_bulk_icon_connect--container--j5G1s",e$="component_browser_bulk_icon_connect--content--6ciQR",ej="component_browser_bulk_icon_connect--connectStateText--y18Lf",eW="component_browser_bulk_icon_connect--spinnerContainer--zuPn7",eG="component_browser_bulk_icon_connect--progressText--5HqXg",eV="component_browser_bulk_icon_connect--connectStateContainer--i7RgN",eH="component_browser_bulk_icon_connect--connectStateRightContent--5AW1y";var ez=(e=>(e.INITIAL="initial",e.CONNECTING="connecting",e.CONNECTED="connected",e.DISCONNECTING="disconnecting",e))(ez||{});function eK({connectedComponents:e,onDeleteMapping:t}){let{getTriggerProps:a,manager:n}=K.b();return r.createElement(K.bL,{manager:n},r.createElement(Y.d,{"aria-label":(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.more_options"),htmlAttributes:{"data-tooltip":(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.more_options"),"data-tooltip-type":C.Ib.TEXT},...a()},r.createElement(J.J,null)),r.createElement(K.mc,null,r.createElement(K.q7,{onClick:function(){for(let a of e)a.component.isIcon&&t({codeConnectId:a.component.code_connect_info.v1.id,row:{...a,selectedFile:null,selectedComponent:null},trackingProps:{location:"list_view"}})},disabled:0===e.length},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.disconnect_all"))))}function eY({connectedComponents:e,notConnectedComponents:t,onConnectMapping:a,libraryKey:n,selectedRepositories:o}){let[i,s]=(0,r.useState)(null),[d,m]=(0,r.useState)("initial"),[u,_]=(0,r.useState)(0),[f,g]=(0,r.useState)(0),E=r.useRef(null);r.useEffect(()=>{0===e.length&&"connected"===d&&m("initial")},[e,d]);let b=(0,r.useCallback)(e=>{s(e.selectedFile)},[]),v=()=>{if(i)for(let e of(m("connecting"),_(0),g(t.length),t))a({row:{sourceIndex:e.sourceIndex,component:e.component,selectedFile:i,selectedComponent:{title:e.component.name}},trackingProps:{location:"list_view",source:"manual"},callback:e=>{if(e){m("initial");return}_(e=>e+1),u===f&&m("connected")}})};return r.createElement(p.J,null,(()=>{switch(d){case"initial":return t.length>0&&r.createElement("div",{className:eU},r.createElement("div",{className:"component_browser_bulk_icon_connect--initialContent--yYbWa"},r.createElement(r.Fragment,null,r.createElement("div",{className:"component_browser_bulk_icon_connect--header--z22ji"},r.createElement("h2",{className:"component_browser_bulk_icon_connect--title--Ssiyo"},e.length>0?(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.connect_remaining",{count:t.length}):(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.connect_all",{count:t.length})),r.createElement("p",{className:"component_browser_bulk_icon_connect--description--fumpL"},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.description"))),r.createElement("div",{className:"component_browser_bulk_icon_connect--inputGroup--rMbmm"},r.createElement(eB,{ref:E,sourceIndex:0,libraryKey:n,onFileChanged:b,selectedFile:i,selectedRepositories:o,location:"list_view"}),r.createElement(c.E,{className:"component_browser_bulk_icon_connect--connectButton--QRuMQ",onClick:v,disabled:!i},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.connect_button"))))));case"connecting":return r.createElement("div",{className:eU},r.createElement("div",{className:e$},r.createElement("div",{className:eV},r.createElement("div",{className:eW},r.createElement(q.k,{size:"sm"}),r.createElement("h2",{className:ej},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.connecting_progress"))),r.createElement("div",{className:eH},r.createElement("p",{className:eG},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.connected_progress",{connected:u,total:f}))))));case"connected":return r.createElement("div",{className:eU},r.createElement("div",{className:e$},r.createElement("div",{className:eV},r.createElement("div",{className:"component_browser_bulk_icon_connect--checkmarkContainer---3EnN"},r.createElement(X.g,{className:"component_browser_bulk_icon_connect--checkmark--l-ftB",style:{"--color-icon":"var(--color-icon-success)"}}),r.createElement("h2",{className:ej},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.connected_success",{count:e.length}))),r.createElement("div",{className:eH},r.createElement(l.K,{"aria-label":(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.close_notification"),onClick:()=>m("initial")},r.createElement(Q.A,null))))));case"disconnecting":return r.createElement("div",{className:eU},r.createElement("div",{className:e$},r.createElement("div",{className:eV},r.createElement("div",{className:eW},r.createElement(q.k,{size:"sm"}),r.createElement("h2",{className:ej},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.disconnecting_progress"))),r.createElement("div",{className:eH},r.createElement("p",{className:eG},(0,w.t)("dev_handoff.component_browser.bulk_icon_connect.disconnected_progress",{disconnected:u,total:f}))))))}})())}var eq=a(531788),eJ=a(760893),eX=a(376771),eQ=a(469508),eZ=a(177019),e0=a(959498),e1=a(332174),e4=a(603005),e2=a(918777),e3=a(359822),e5=a(230618),e8=a(173926),e6=a(994924),e7=a(392935),e9=a(217958),te=a(989232),tt=a(238462),ta=a(370259),tr=a(979485),tn=a(435207),to=a(584845),tl=a(120700),ti=a(553527),ts=a(31898),tc=a(88009),td=a(549520),tm=a(28101);let tu="component_browser_code_connect_code--suggestionsWrapper--vJt9q",t_="component_browser_code_connect_code--heading--RJJmA utilities--bodyMediumStrong--1R5cZ",tp="component_browser_code_connect_code--input--Y0rEc",tf="component_browser_code_connect_code--label--5KW2i utilities--bodyMedium--7-YGK",tg="component_browser_codebase_suggestions--container--knWRq";function tE(){return r.createElement("div",{className:tg},r.createElement(q.k,null))}function tb({items:e,itemLimit:t,selectedSuggestion:a,onSelect:n,onItemLimitChange:o,itemsPerRow:l=5,suggestionsGridRef:i}){let s=th(),c=t<Math.min(50,e.length);return r.createElement("div",{className:tg,ref:i},r.createElement("div",{className:"component_browser_codebase_suggestions--grid--kwpAM",style:{gridTemplateColumns:`repeat(${l}, 1fr)`}},e.slice(0,t).map((e,t)=>r.createElement(tr.jO,{key:e.id,item:e,onClick:()=>n(t),onHover:tt.lQ,isSelected:a?.id===e.id,index:t}))),c&&r.createElement("div",null,r.createElement(eq.$n,{variant:"link",onClick:()=>{let a=5===t?25:25===t?50:t;(0,te.trackEvent)(td.Tg,{itemsShownAfterClick:a,totalItems:e.length,...s}),o(a)}},(0,w.t)("dev_handoff.codebase_suggestions.more_results"))))}let tv=r.createContext({sharedTrackingProps:()=>({})}),th=()=>r.useContext(tv).sharedTrackingProps();function tw(){let e=(0,eh.wA)(),t=r.useCallback(()=>{e((0,ts.to)({type:ta.d}))},[e]);return r.createElement("div",{className:tg},r.createElement("p",null,(0,w.t)("auto_suggest.suggestion_shelf_no_suggestions")),r.createElement("p",null,r.createElement(eq.$n.Link,{onClick:t},(0,w.t)("dev_handoff.codebase_suggestions.have_you_connected_your_running_app"))))}function ty({component:e,onCodeChange:t,onSuggestionSelected:a,searchSessionId:n}){let o=!!(0,g.k)().dt_ccv2_dd,[l,[i]]=(0,eI.gY)(e,!o,n),[s,c]=(0,r.useState)(5),d=(0,eh.wA)(),m=(0,r.useCallback)(()=>(0,tm.Pl)(e,n),[e,n]);r.useEffect(()=>{(0,te.trackEvent)(td.AD,{...m()})},[m]);let u=o?ti.p6.data:i.data,_=o?"loaded":i.status,p=(0,r.useRef)(null),f=(0,tl.s)({result:u,status:_,itemLimit:s}),E=(0,r.useMemo)(()=>u?.map(e=>({id:e.codebase_component_id,thumbnail:e.thumbnail_url,srcPath:e.src_path||void 0,name:e.name,type:"suggestion"}))??[],[u]),b=(0,r.useMemo)(()=>()=>{if(!p.current)return{x:0,y:0};let e=p.current.getBoundingClientRect(),t=f.width;return{x:e.left-t-4,y:e.top}},[f.width]),v=r.useCallback(e=>{let t=E[e];t&&(f.setOpen(e,b()),a({source:t.srcPath??"",name:t.name,componentName:t.name,index:e}),(0,te.trackEvent)(td.bp,{...m(),indexInList:e,codebaseComponentId:t.id}))},[a,m,E,f,b]),h=()=>{f.setKeepWindowOpen(!1),d(ts.Lo())};r.useEffect(()=>{f.selectedItem&&t(function(e){let{name:t,srcPath:a}=e;return a?`import { ${t} } from '${a}'

<${t} />`:`<${t} />`}(f.selectedItem))},[f.selectedItem,t]);let y="loading"===i.status,T="loaded"===i.status&&u&&0===u.length,I="loaded"===i.status,x=(0,ey.hC)(),N=f.data.map(e=>({name:e.name,src_path:e.srcPath}));return r.useEffect(()=>{I&&(0,te.trackEvent)(td.v7,{...m(),numResults:u?u.length:0})},[I,u,m]),r.createElement(tv.Provider,{value:{sharedTrackingProps:m}},r.createElement("div",{className:tu},r.createElement("div",{className:t_},(0,w.t)("dev_handoff.codebase_suggestions.inspect_panel_disconnected_header_title")),y&&r.createElement(tE,null),T&&r.createElement(tw,null),!y&&!T&&r.createElement(r.Fragment,null,r.createElement(tb,{items:E,itemLimit:s,onItemLimitChange:c,selectedSuggestion:f.selectedItem,onSelect:v,suggestionsGridRef:p}),r.createElement(to.q_,{window:f,onPageThrough:t=>{x("code_connect_v2.codebase_suggestions_results_interaction",{nodeId:e.type===tc.PW.COMPONENT?e.component_key:e.key,location:"component_browser",renderedSuggestionsCount:f.data.length,renderedSuggestionsSetData:JSON.stringify(N),suggestionData:JSON.stringify(N[t]),action:"page_through"})},onReferenceClicked:(t,a)=>{x("code_connect_v2.codebase_suggestion_reference_clicked",{nodeId:e.type===tc.PW.COMPONENT?e.component_key:e.key,location:"component_browser",renderedSuggestionsCount:f.data.length,renderedSuggestionsSetData:JSON.stringify(N),suggestionData:JSON.stringify(N[t]),clickedReferenceUrl:a?a.url:void 0,clickedReferenceType:a?a.type:void 0,componentNameCopied:a?a.componentName:void 0})},onZoomClicked:()=>{let{data:e,setKeepWindowOpen:t}=f;t(!0),d(ts.to({type:tn.dU,data:{data:e,onClose:h,onReferenceClicked:()=>{}},showModalsBeneath:!0}))}}))))}var tT=a(618803),tI=a(749214);let tx=(0,r.memo)(function(e){return(0,tI.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,tI.jsx)("path",{fill:"var(--color-icon)",d:"M14.165 11.624A.38.38 0 0 1 14.5 12c0 1.83-.228 3.507-.608 4.743-.189.615-.425 1.149-.71 1.54-.276.38-.67.717-1.182.717-.513 0-.906-.337-1.183-.717-.284-.391-.52-.925-.71-1.54a10 10 0 0 1-.19-.715.484.484 0 0 1 .516-.585c.224.017.416.18.467.398q.076.323.163.608c.173.561.369.98.563 1.246.2.276.333.305.374.305s.173-.029.374-.305c.194-.266.39-.685.562-1.246.344-1.116.564-2.69.564-4.449 0-.236.198-.425.432-.401zM7.22 15c.345 0 .568.351.5.69l-.012.073c-.053.336.02.451.049.48.028.028.143.102.48.049l.072-.014c.338-.067.69.156.69.5a.45.45 0 0 1-.331.445 3 3 0 0 1-.275.056c-.464.073-.981.033-1.343-.329-.363-.362-.403-.88-.33-1.344a3 3 0 0 1 .057-.275A.45.45 0 0 1 7.22 15m9.559 0a.45.45 0 0 1 .443.331q.036.141.057.275c.073.465.032.982-.33 1.344-.363.362-.878.402-1.343.33a3 3 0 0 1-.276-.058.45.45 0 0 1-.331-.444c0-.344.351-.567.69-.5l.073.014c.338.053.452-.02.48-.049.028-.028.102-.142.049-.48l-.014-.073c-.067-.339.157-.69.502-.69M7.972 9.917a.484.484 0 0 1 .584.516.52.52 0 0 1-.395.466q-.324.076-.61.165c-.56.172-.979.368-1.246.562-.276.2-.304.334-.304.374s.027.172.304.374c.267.194.685.39 1.247.563 1.116.343 2.69.563 4.449.563.235 0 .423.197.4.43l-.027.237A.38.38 0 0 1 12 14.5c-1.83 0-3.508-.227-4.743-.607-.615-.19-1.15-.426-1.54-.71C5.338 12.906 5 12.513 5 12c0-.512.336-.906.717-1.183.39-.284.925-.52 1.54-.71q.337-.102.714-.19M12 9.5c1.83 0 3.507.227 4.743.607.615.19 1.149.426 1.54.71.38.277.716.67.717 1.183 0 .513-.337.906-.717 1.183-.391.284-.925.52-1.54.71q-.337.102-.715.189a.484.484 0 0 1-.585-.516.52.52 0 0 1 .396-.466q.324-.075.61-.163c.561-.173.98-.37 1.246-.563.277-.202.305-.335.305-.374 0-.04-.029-.173-.305-.374-.267-.194-.685-.39-1.246-.562-1.117-.344-2.69-.564-4.45-.564a.397.397 0 0 1-.4-.433l.026-.233A.38.38 0 0 1 12 9.5M12 5c.512 0 .906.337 1.182.717.285.39.521.925.71 1.54q.104.337.19.714a.484.484 0 0 1-.517.585.52.52 0 0 1-.466-.397 9 9 0 0 0-.163-.608c-.172-.561-.368-.98-.562-1.246C12.174 6.029 12.04 6 12 6s-.174.03-.374.305c-.194.266-.39.685-.563 1.246-.343 1.116-.563 2.69-.563 4.449a.396.396 0 0 1-.433.4l-.233-.025A.38.38 0 0 1 9.5 12c0-1.83.227-3.507.607-4.743.19-.615.426-1.15.71-1.54.277-.38.67-.717 1.183-.717M7.05 7.05c.362-.362.879-.403 1.343-.33q.134.022.274.057c.2.05.332.237.332.444 0 .344-.352.567-.69.5l-.072-.013c-.338-.053-.452.022-.48.05-.029.028-.102.142-.05.48l.013.073c.068.337-.155.689-.5.689a.45.45 0 0 1-.443-.331 3 3 0 0 1-.057-.275c-.073-.465-.033-.98.33-1.343m8.556-.33c.464-.072.98-.031 1.343.33.362.363.403.88.33 1.344a3 3 0 0 1-.057.274.45.45 0 0 1-.443.332c-.345 0-.57-.352-.502-.69l.014-.073c.053-.336-.02-.45-.05-.48-.028-.027-.142-.102-.479-.049l-.074.013c-.338.067-.689-.156-.69-.5a.45.45 0 0 1 .332-.444q.141-.035.276-.056"})})}),tN=(0,r.forwardRef)(function(e,t){let{sourceIndex:a,currentRowIndex:n,component:o,libraryKey:l,selectedFile:i,selectedComponent:s,onComponentChanged:c,disabled:d=!1,repositoriesAvailable:m,onboardingKey:u,isInline:_=!1}=e,p=i?.metadata?.repository?.id,f=i?.metadata?.path,[g,E]=(0,r.useState)(""),[b]=(0,et.IT)(ev({libraryKey:l,repository:p??"",path:f??""}),{enabled:!!i&&!!l&&!!p&&!!f&&!i?.metadata?.isCustomLink,key:`repositoryComponentsQuery-${f}`}),v="loading"===b.status,h="loaded"===b.status,y=b.data,T="ignored"===o.code_connect_info.v1.state,I=(0,r.useMemo)(()=>h&&y?y.components:[],[h,y]),x=(0,r.useMemo)(()=>I.length||m?I.filter(e=>e.toLowerCase().includes(g.toLowerCase())).map(e=>({title:e,subtitle:"",icon:r.createElement(tx,null)})):[],[g,I,m]);if(T)return r.createElement("span",null,"--");let N=_?(0,w.t)("dev_handoff.component_browser.component_name"):(0,w.t)("dev_handoff.component_browser.add_component_name");return r.createElement(ef,{ref:t,arePillsClearable:!0,disabled:d,hint:(0,w.t)("dev_handoff.component_browser.component_search_hint"),isClearable:!1,isLoadingSearchResults:v,onDeleteLastItem:()=>{c({sourceIndex:a,currentRowIndex:n,selectedComponent:null,action:"delete",trackingProps:{location:e.location,source:"manual"}})},onDropdownItemClick:t=>{c({sourceIndex:a,currentRowIndex:n,selectedComponent:t,action:"create",trackingProps:{location:e.location,source:"manual"}})},onEnterPressed:t=>""!==t.trim()&&(c({sourceIndex:a,currentRowIndex:n,selectedComponent:{title:t,subtitle:"",icon:r.createElement(tx,null)},action:"create",trackingProps:{location:e.location,source:"manual"}}),!0),onValueChanged:e=>{E(e)},onboardingKey:u,placeholder:s?"":N,searchResults:x,selectedItem:s?{value:[{value:s.title}]}:void 0,showDropdown:!i?.metadata?.isCustomLink&&!s&&m,showDropdownOnFocus:!0})}),tC=(0,r.forwardRef)(function({index:e,showIcon:t,libraryKey:a,component:n,selectedFile:o,selectedComponent:l,onFileChanged:i,onComponentChanged:s,title:c,selectedRepositories:d},m){let u=r.useRef(null),_=r.useRef(null),p=r.useRef(null);return(0,r.useImperativeHandle)(m,()=>({fileSearchInputRef:u,componentSearchInputRef:_})),(0,r.useEffect)(()=>{u.current?.focus()},[e,u]),r.createElement("div",{className:tu,ref:p},r.createElement("div",{className:t_},t&&r.createElement(tT.X,null),c),r.createElement("div",{className:tp},r.createElement("label",{className:tf},(0,w.t)("dev_handoff.component_browser.code_file")),r.createElement(eB,{ref:u,sourceIndex:e,component:n,libraryKey:a,onFileChanged:i,selectedFile:o,selectedRepositories:d,location:"side_sheet"})),r.createElement("div",{className:tp},r.createElement("label",{className:tf},(0,w.t)("dev_handoff.component_browser.code_component")),r.createElement(tN,{ref:_,sourceIndex:e,component:n,libraryKey:a,selectedFile:o,onComponentChanged:s,selectedComponent:l,repositoriesAvailable:d.length>0,location:"side_sheet"})))});function tk({open:e,count:t,icon:a,tooltip:n}){return r.createElement("div",{"data-tooltip":n,"data-tooltip-type":"text",className:eo()("component_browser_connected_count--countItem--OKOTR",e&&"component_browser_connected_count--open--ryc1n")},a,r.createElement("div",{className:"component_browser_connected_count--countItemNumber--MBHsK"},t))}function tS({open:e,notConnectedComponents:t,connectedComponents:a,ignoredComponents:n}){return r.createElement("div",{className:"component_browser_connected_count--container--2Qv4B"},r.createElement(tk,{open:e,count:t,icon:r.createElement(eN.w,{style:{"--color-icon-tertiary":"var(--color-icon)"}}),tooltip:(0,w.t)("dev_handoff.component_browser.not_connected_to_code")}),r.createElement(tk,{open:e,count:a,icon:r.createElement(eC.W,null),tooltip:(0,w.t)("dev_handoff.component_browser.connected_to_code")}),r.createElement(tk,{open:e,count:n,icon:r.createElement(ek.M,null),tooltip:(0,w.t)("dev_handoff.component_browser.no_code_equivalent")}))}let tR="component_browser_connect_dialog--footer--Pu5AO",tA="component_browser_connect_dialog--contentTitle--Zbcus utilities--bodyMediumStrong--1R5cZ",tO="component_browser_connect_dialog--contentIcon--Paond utilities--bodyMediumStrong--1R5cZ",tP="component_browser_connect_dialog--connectedComponentTable--pHSDk",tL="component_browser_connect_dialog--connectedComponentTableRow--vcP6G",tF="component_browser_connect_dialog--connectedComponentTableFirstCell--TagEo",tD="component_browser_connect_dialog--connectedComponentTableSecondCell--n97Tg",tM="component_browser_connect_dialog--connectionContent--cUifs";function tB({onRequestPreviousComponent:e,onRequestNextComponent:t}){return r.createElement("div",{className:"component_browser_connect_dialog--footerNavigationButtons--jdpAm"},r.createElement(l.K,{"aria-label":(0,w.t)("dev_handoff.component_browser.previous"),onClick:e},r.createElement(eZ.N,null)),r.createElement(l.K,{"aria-label":(0,w.t)("dev_handoff.component_browser.next"),onClick:t},r.createElement(e0.W,null)))}let tU=(0,r.forwardRef)(function({isConnected:e,isIgnored:t,handleDeleteMapping:a,handleConnect:n,handleIgnore:o,selectedFile:l,selectedComponent:i,isDisabled:s,onRequestPreviousComponent:c,onRequestNextComponent:d},m){return e||t?r.createElement("div",{className:tR},r.createElement(tB,{onRequestPreviousComponent:c,onRequestNextComponent:d}),r.createElement(eq.$n,{onClick:a,variant:"destructive",disabled:s},(0,w.t)("dev_handoff.component_browser.disconnect"),r.createElement(eq.$n.Shortcut,null,"\u232B"))):r.createElement("div",{className:tR},r.createElement(tB,{onRequestPreviousComponent:c,onRequestNextComponent:d}),r.createElement("div",{className:"component_browser_connect_dialog--footerButtons--wRhfx"},r.createElement(eq.$n,{variant:"secondary",onClick:o,disabled:s},(0,w.t)("dev_handoff.component_browser.mark_as_no_code_equivalent"),r.createElement(eq.$n.Shortcut,null,"\u21E7\u232B")),r.createElement(eq.$n,{ref:m,onClick:n,disabled:s||!l||!i},(0,w.t)("dev_handoff.component_browser.code_connect"),r.createElement(eq.$n.Shortcut,null,"\u21B5"))))});function t$({data:e,sourceIndex:t,onClose:a,onRequestNextComponent:n,onRequestPreviousComponent:o,notConnectedComponents:l,connectedComponents:i,ignoredComponents:s,onDeleteMapping:c,onIgnoreMapping:d,onConnectMapping:m,selectedRepositories:u}){let[_,p]=(0,r.useState)(null),[g,E]=(0,r.useState)(null),[b]=(0,S.Vc)("componentBrowserOnboardingSelection",null),v=(0,e7.A)(),h=r.useRef(null),y=r.useRef(null),T=r.useRef(null),I="connected"===e.component.code_connect_info.v1.state,x="ignored"===e.component.code_connect_info.v1.state,N=e.component.code_connect_info.v1?.type==="figmadoc";(0,r.useEffect)(()=>{p(e?.selectedFile??null),E(e?.selectedComponent??null)},[e]);let C=(0,ey.hC)();(0,e3.h)(()=>{C("component_browser.component_browser_side_sheet_viewed")});let k="key"in e.component?e.component.key:"component_key"in e.component?e.component.component_key:"",[R]=(0,ee.A)(k,1e3,{leading:!0});(0,r.useEffect)(()=>{(x||I)&&y.current?.focus()},[x,I]);let[A,[O]]=(0,eI.gY)(e.component,"not_connected"===e.component.code_connect_info.v2.state&&R===k,null),[P,L]=r.useState(0),[F,D]=r.useState(!1),M=(0,e8.Ak)(e.component.updated_at),[B,U]=r.useState(""),[$,j]=r.useState(!1);(0,r.useEffect)(()=>{L(-1),D(!1)},[k,L]),(0,r.useEffect)(()=>{"loaded"===O.status&&L(0)},[k,O.status,L]);let G=()=>{let a={location:"side_sheet",source:$?"codebase_suggestions":"manual"};if(F&&"loaded"===O.status&&O.data?.length>P){let e=O.data,t=(0,tm.tG)(A,e[P]||null);a={...a,...t,source:"codebase_suggestions",indexInList:P}}m({row:{sourceIndex:t,component:e.component,selectedFile:_,selectedComponent:g},trackingProps:a})},V=()=>{d({row:{sourceIndex:t,component:e.component,selectedFile:_,selectedComponent:g},trackingProps:{location:"side_sheet"}})},H=()=>{let a=e.component.code_connect_info.v1.id;a&&c({codeConnectId:a,row:{sourceIndex:t,component:e.component,selectedFile:null,selectedComponent:null},trackingProps:{location:"side_sheet"}})},z="codebase_ingestion"===b&&!I&&v,K=(0,r.useCallback)(t=>{j(!1),p(t.selectedFile),D(!1),C("component_browser.code_component_manual_connection_data_entered",{nodeId:e.component.node_id,field:"code_file",location:"side_sheet",value:t.selectedFile?.title}),t.selectedFile&&T.current?.componentSearchInputRef.current?.focus()},[e.component.node_id,C]),Y=(0,r.useCallback)(t=>{E(t.selectedComponent),j(!1),D(!1),C("component_browser.code_component_manual_connection_data_entered",{nodeId:e.component.node_id,field:"code_component",location:"side_sheet",value:t.selectedComponent?.title}),"create"===t.action&&t.selectedComponent&&_&&h.current?.focus()},[e.component.node_id,_,C]);return r.createElement(e6.n.div,{ref:y,className:"component_browser_connect_dialog--wrapper--pYy--",onKeyDown:function(e){let t=T.current?.fileSearchInputRef.current===document.activeElement,r=T.current?.componentSearchInputRef.current===document.activeElement,l=t||r;if("Backspace"===e.key&&e.shiftKey){V();return}if("Escape"===e.key&&l){T.current?.componentSearchInputRef.current?.blur(),T.current?.fileSearchInputRef.current?.blur(),y.current?.focus();return}if(!l)switch(e.key){case"ArrowUp":o();break;case"ArrowDown":n();break;case"ArrowRight":!function(){let e=O.data;e&&L(t=>t+1>=e.length?0:t+1)}();break;case"ArrowLeft":!function(){let e=O.data;e&&L(t=>t-1<0?e.length-1:t-1)}();break;case"Enter":G();break;case"Escape":a();break;case"Backspace":e.shiftKey?V():H()}},tabIndex:-1},r.createElement("div",{className:"component_browser_connect_dialog--header--5-qTG"},r.createElement("div",{className:"component_browser_connect_dialog--headerSide--EpKa2"},r.createElement(tS,{open:!0,notConnectedComponents:l,connectedComponents:i,ignoredComponents:s}))),r.createElement("div",{className:"component_browser_connect_dialog--content--pfamD"},r.createElement("div",{"data-onboarding-key":W.Step2,className:"component_browser_connect_dialog--designContent--f-Lg3"},r.createElement("div",{className:"component_browser_connect_dialog--title--bpt4P utilities--bodyMediumStrong--1R5cZ"},r.createElement("div",{className:"component_browser_connect_dialog--titleIcon--WvA82"},r.createElement(e1.m,null),(0,w.t)("dev_handoff.component_browser.figma_component_label")),e.component.name),r.createElement("div",{className:"component_browser_connect_dialog--imageWrapper--xsdOt"},r.createElement(e5.oW,{className:"component_browser_connect_dialog--componentThumbnail--8njGv",src:e.component.thumbnail_url,alt:e.component.name})),r.createElement("div",{className:"component_browser_connect_dialog--lastUpdated--VWubK"},(0,w.t)("dev_handoff.component_browser.last_updated",{0:M})),r.createElement("div",{className:"component_browser_connect_dialog--description--YNpNH"},r.createElement(e9.i,{description:e.component.description,description_rt:e.component.description_rt}))),x?r.createElement("div",{className:tM},r.createElement("div",{className:tA},r.createElement("div",{className:tO},r.createElement(e4.I,null)),(0,w.t)("dev_handoff.component_browser.no_code_equivalent_menu")),r.createElement("div",null,r.createElement("table",{className:tP},r.createElement("tbody",null,r.createElement("tr",{className:tL},r.createElement("td",{className:tF},(0,w.t)("dev_handoff.component_browser.marked_by")),r.createElement("td",{className:tD},e.component.code_connect_info.v1.author_name)),r.createElement("tr",{className:tL},r.createElement("td",{className:tF},(0,w.t)("dev_handoff.component_browser.date")),r.createElement("td",{className:tD},e.component.code_connect_info.v1.updated_at?(0,e2.A)(e.component.code_connect_info.v1.updated_at).format("MMM D, YYYY"):"")))))):I?r.createElement(tj,{data:e}):r.createElement(r.Fragment,null,z?r.createElement(ty,{libraryKey:e.component.library_key,component:e.component,onCodeChange:U,onSuggestionSelected:e=>{e&&(D(!0),L(e.index)),j(!0),p(e?{title:e.source,metadata:{name:e.name,type:"file",isCustomLink:!1,repository:{id:"",name:""},path:e.source,sha:""}}:null),E(e?{title:e.componentName}:null)},searchSessionId:A}):null,r.createElement(tC,{ref:T,component:e.component,index:t,libraryKey:(0,f.l)(e.component.library_key),onComponentChanged:Y,onFileChanged:K,selectedComponent:g,selectedFile:_,selectedRepositories:u,showIcon:"manual"===b,title:"manual"===b||"github"===b?(0,w.t)("dev_handoff.component_browser.in_your_codebase"):(0,w.t)("dev_handoff.component_browser.none_of_these_work")}))),r.createElement(tU,{ref:h,handleConnect:G,handleDeleteMapping:H,handleIgnore:V,isConnected:I,isDisabled:N,isIgnored:x,onRequestNextComponent:n,onRequestPreviousComponent:o,selectedComponent:g,selectedFile:_}))}function tj({data:e}){let t=e.component?.code_connect_info?.v1?.type==="figmadoc",a=(0,e2.A)(e.component.code_connect_info.v1.updated_at).format("MMM D, YYYY"),n=[{title:(0,w.t)("dev_handoff.component_browser.component_file"),value:e.selectedFile?.title},{title:(0,w.t)("dev_handoff.component_browser.component_name"),value:e.selectedComponent?.title},{title:(0,w.t)("dev_handoff.component_browser.linked_by"),value:e.component.code_connect_info.v1.author_name},{title:(0,w.t)("dev_handoff.component_browser.date_linked"),value:a}];return t?r.createElement("div",{className:"component_browser_connect_dialog--warningWrapper---Q4Ly"},r.createElement(eJ.Yy,{variant:"warn"},r.createElement(eX.Q,{title:(0,w.t)("dev_handoff.component_browser.cli_only_title")},(0,w.t)("dev_handoff.component_browser.cli_only_message"),r.createElement(eQ.N,{href:"https://help.figma.com"},(0,w.t)("dev_handoff.component_browser.learn_more"))))):r.createElement("div",{className:tM},r.createElement("div",{className:tA},r.createElement("div",{className:tO},r.createElement(e4.I,null)),(0,w.t)("dev_handoff.component_browser.component_in_your_codebase")+" "+e.selectedComponent?.title),r.createElement("div",null,r.createElement("table",{className:tP},r.createElement("tbody",null,n.map(e=>r.createElement("tr",{key:e.title,className:tL},r.createElement("td",{className:tF},e.title),r.createElement("td",{className:tD},e.value)))))))}var tW=a(748059),tG=a(52495),tV=a(398612),tH=a(615233),tz=a(968325),tK=a(431183),tY=a(179688),tq=a(506428),tJ=a(730143),tX=a(426211),tQ=a(582039),tZ=a(309488),t0=a(93275),t1=a(138528),t4=a(513718),t2=a(446951);let t3="confirm_deletion_modal--bodyText--OTH-f",t5=(0,t2.Ju)(function(e){let t=tQ.hS(e),a=(0,t1.Xd)("ConfirmDeletionModal"),n=(0,eh.wA)(),o="loaded"===a.status,[l,i]=(0,r.useState)(!1),s=a.data?.planKey,c=s?.type,d=s?.parentId,m=(0,r.useCallback)(async()=>{if(c&&d){(0,te.trackEvent)(td.WG),i(!0);try{await t4.w.deleteAllCodeSuggestions({planType:c,planId:d}),n(eT.F.enqueue({type:"success",message:(0,w.t)("dev_handoff.codebase_suggestions.deletion_request_received_it_may_take_a_few_minutes_to_complete")})),e.onClose()}catch(e){n(eT.F.enqueue({type:"error",message:(0,w.t)("dev_handoff.codebase_suggestions.failed_to_submit_deletion_request_please_try_again_later")})),i(!1)}}},[e,n,c,d]);return r.createElement(tZ.bL,{manager:t,width:"md"},r.createElement(t0.vo,null,r.createElement(t0.Y9,null,r.createElement(t0.hE,null,(0,w.t)("dev_handoff.codebase_suggestions.delete_all_visual_codebase_suggestions"))),r.createElement(t0.nB,null,r.createElement("p",{className:t3},(0,w.t)("dev_handoff.codebase_suggestions.are_you_sure_you_want_to_delete_all_the_visual_codebase_suggestions_that_have_been_collected_so_far")),r.createElement("p",{className:t3},(0,w.t)("dev_handoff.codebase_suggestions.this_will_delete_all_the_visual_codebase_suggestions_that_have_been_collected_so_far_for_your_organization_you_ll_need_to_connect_your_running_app_again_if_you_change_your_mind")),r.createElement("p",{className:t3},(0,w.t)("dev_handoff.codebase_suggestions.this_will_not_delete_any_explicit_code_connect_mappings_you_have_made_with_those_suggestions"))),r.createElement(t0.wi,null,r.createElement(t0.jk,null,r.createElement(eq.$n,{variant:"secondary",onClick:e.onClose},(0,w.t)("dev_handoff.codebase_suggestions.cancel")),r.createElement(eq.$n,{variant:"destructive",disabled:!(o&&!l),onClick:m},(0,w.t)("dev_handoff.codebase_suggestions.delete"))))))}),t8="component_browser_settings_panel--iconContainer--xstoF",t6="component_browser_settings_panel--optionTitleText--KwUII",t7="component_browser_settings_panel--option--v7PyN",t9="component_browser_settings_panel--optionTitle--hQS7B";function ae({onChangeRepo:e,status:t}){let{getTriggerProps:a,manager:n}=K.b(),o="connected"===t,l=(0,tY.e)(),[i,s]=r.useState(!1),c=async()=>{s(!0);try{await l()}finally{s(!1)}};return r.createElement(K.bL,{manager:n},r.createElement(eq.$n,{variant:"ghost",...a()},r.createElement(J.J,null)),o&&r.createElement(K.mc,null,r.createElement(K.q7,{onClick:e},(0,w.t)("dev_handoff.component_browser.settings.change_repository")),r.createElement(K.q7,{onClick:()=>(0,tV.FJ)(tK.k)},(0,w.t)("dev_handoff.component_browser.settings.disconnect"))),!o&&r.createElement(K.mc,null,"pending"===t&&r.createElement(K.q7,{onClick:()=>(0,tV.FJ)(tK.k)},(0,w.t)("dev_handoff.component_browser.settings.manage_request")),r.createElement(K.q7,{onClick:c},i?r.createElement(q.k,{size:"sm"}):(0,w.t)("dev_handoff.component_browser.settings.setup"))))}function at(){let e=(0,eh.wA)(),{getTriggerProps:t,manager:a}=K.b(),n=r.useCallback(()=>{e(ts.to({type:ta.d}))},[e]),o=r.useCallback(()=>{e((0,ts.to)({type:t5}))},[e]);return r.createElement("div",{className:"component_browser_settings_panel--setupIngestionButton---keGz"},r.createElement(K.bL,{manager:a},r.createElement(eq.$n,{variant:"ghost",...t()},r.createElement(J.J,null)),r.createElement(K.mc,null,r.createElement(K.q7,{onClick:n},(0,w.t)("dev_handoff.component_browser.settings.setup")),r.createElement(K.q7,{onClick:o},(0,w.t)("dev_handoff.codebase_suggestions.delete_all_codebase_suggestions")))))}var aa=(e=>(e.NotSetup="not_setup",e.Pending="pending",e.Connected="connected",e))(aa||{});function ar({status:e}){switch(e){case"pending":return r.createElement(i.E,{variant:"warningOutline"},(0,w.t)("dev_handoff.component_browser_source_connection_status.pending"));case"connected":return r.createElement(i.E,{variant:"successOutline"},(0,w.t)("dev_handoff.component_browser_source_connection_status.connected"));default:return r.createElement(i.E,{variant:"inactiveOutline"},(0,w.t)("dev_handoff.component_browser_source_connection_status.not_setup"))}}function an({position:e,getContainerProps:t,onOpenChange:a,libraryKey:n}){let o="dark"===(0,tq.DP)(),l=(0,e7.A)(),i=o?(0,tH.ck)("87362980e1543a5db4a0044590b04d5f491a1e75"):(0,tH.ck)("a938cc4b8421dc36477282e09f83e9e6770065ed"),s=(0,g.k)().dt_github_app,c=(0,I.Bt)(),d=(0,tJ.q5)(),[m,u]=d?.plan?.id?.split("::")??[],[_]=(0,et.IT)((0,tY.b)({planType:m,planParentId:u}),{enabled:!!m&&!!u}),p=!!_.data,f=function({shouldShowGithubSetupButton:e,hasGithubData:t,orgGithubInstallationsResult:a}){return e?"connected":t&&a&&a.installation_request?.status==="requested"?"pending":"not_setup"}({shouldShowGithubSetupButton:(s&&p&&_.data&&_.data.status===tX.K8.Connected)??!1,hasGithubData:p??!1,orgGithubInstallationsResult:_.data??void 0}),[E]=(0,et.IT)((0,eI.sN)(n),{enabled:"connected"===f}),b=E.data?.selected_repositories[0]?.name??(0,w.t)("dev_handoff.component_browser.settings.connect_github");return r.createElement(tW.mc,{...t(),className:"component_browser_settings_panel--container--bNvEu",style:{top:`${e.top+24+8}px`,left:`${e.left-320+24}px`,width:"320px"}},r.createElement("div",{className:"component_browser_settings_panel--title--I250A"},(0,w.t)("dev_handoff.component_browser.settings.title")),r.createElement("div",{className:"component_browser_settings_panel--options--BisI-"},r.createElement("div",{className:t7},r.createElement("div",{className:t9},r.createElement("div",{className:t8},r.createElement(tz.f,null)),"loading"===E.status?r.createElement("div",{className:t6},r.createElement(q.k,{size:"sm"})):r.createElement("div",{className:t6},b)),r.createElement("div",{className:"component_browser_settings_panel--optionActions--kGJXl"},r.createElement(ar,{status:f}),r.createElement(ae,{onChangeRepo:()=>{c(!0),a(!1)},status:f}))),l&&r.createElement("div",{className:t7},r.createElement("div",{className:t9},r.createElement("div",{className:t8},r.createElement(e5.oW,{src:i,alt:(0,w.t)("dev_handoff.component_browser_onboarding.connected_projects_icon"),className:"component_browser_settings_panel--cardImage--YKour"})),r.createElement("div",{className:t6},(0,w.t)("dev_handoff.component_browser.settings.connect_running_app"))),r.createElement("div",null,r.createElement(at,null))),r.createElement("div",{className:"component_browser_settings_panel--footer--2OuKN"},(0,w.tx)("dev_handoff.component_browser.settings.footer_message",{learnMore:r.createElement(eQ.N,{href:"https://docs.google.com/document/d/1IsJTLpqR1rRQfphfbotvWoYbtoaZExKpggeANRFmRI8/edit?tab=t.0",newTab:!0,"aria-label":(0,w.t)("dev_handoff.component_browser.settings.footer_message_link")},(0,w.t)("dev_handoff.component_browser.settings.footer_message_link"))}))))}function ao({libraryKey:e}){let t=r.useRef(null),[a,n]=r.useState(!1),{getTriggerProps:o,getContainerProps:l}=tW.fP({isOpen:a,onOpenChange:n,type:"dialog",softDismiss:!0});return r.createElement(r.Fragment,null,r.createElement(Y.d,{...o(),"aria-label":(0,w.t)("dev_handoff.component_browser.settings"),htmlAttributes:{"data-tooltip":(0,w.t)("dev_handoff.codebase_suggestions.open_settings"),"data-tooltip-type":C.Ib.TEXT},"data-onboarding-key":j.Step1,"aria-expanded":a,ref:t},r.createElement(tG.I,null)),r.createElement(an,{getContainerProps:l,onOpenChange:n,position:t.current?.getBoundingClientRect()??{top:0,left:0},libraryKey:e}))}function al(){return{all:(0,w.t)("dev_handoff.component_browser.all_published"),connected:(0,w.t)("dev_handoff.component_browser.connected"),notConnected:(0,w.t)("dev_handoff.component_browser.not_connected_to_code"),ignored:(0,w.t)("dev_handoff.component_browser.no_code_equivalent_filter")}}var ai=a(635600);function as({component:e,isLoading:t}){let a=al(),n={all:ex.F,notConnected:eN.w,connected:eC.W,ignored:ek.M},o=e.code_connect_info.v1.state,l=(0,r.useMemo)(()=>{switch(o){case"not_connected":let e=n.notConnected;return r.createElement(e,{"data-tooltip":a.notConnected,"data-tooltip-type":"text"});case"connected":let t=n.connected;return r.createElement(t,{"data-tooltip":a.connected,"data-tooltip-type":"text",style:{"--color-icon":"var(--color-icon-success)"}});case"ignored":let l=n.ignored;return r.createElement(l,{"data-tooltip":a.ignored,"data-tooltip-type":"text",style:{"--color-icon":"var(--color-icon-warning)"}})}},[o,a,n]);return t?r.createElement("span",{className:ed},r.createElement(el.kt,null)):r.createElement("span",{className:ed},l)}function ac({width:e=102,height:t=58}){let a=Math.ceil((window.innerHeight-200)/49);return r.createElement("div",{className:"component_browser_component_list--componentListLoadingItems--XJ359"},Array.from({length:a}).map((a,n)=>r.createElement("div",{key:n,className:"component_browser_component_list--componentListLoadingRow--6VtcP"},r.createElement(h.Wi,{style:{width:e,height:t,borderRadius:4},animationType:h.JR.SHIMMER}),r.createElement(h.Wi,{style:{width:200},animationType:h.JR.SHIMMER}),r.createElement(h.Wi,{style:{flex:1},animationType:h.JR.SHIMMER}),r.createElement(h.Wi,{style:{width:120},animationType:h.JR.SHIMMER}))))}function ad({data:e,isConnected:t,isIgnored:a,isComponentBrowserType:n,onMenuItemClick:o}){let{getTriggerProps:i,manager:s}=K.b(),c={label:(0,w.t)("dev_handoff.component_browser.open_in_sidebar"),onClick:()=>o({event:eL.OpenInSidebar,row:e})},d=[[{label:(0,w.t)("dev_handoff.component_browser.no_code_equivalent_menu"),onClick:()=>o({event:eL.Ignore,row:e})}],[c]],m=[[{label:(0,w.t)("dev_handoff.component_browser.disconnect_menu"),onClick:()=>o({event:eL.Disconnect,row:e})}],[c]],u=[[{label:(0,w.t)("dev_handoff.component_browser.has_code_equivalent"),onClick:()=>o({event:eL.HasCodeEquivalent,row:e})}],[c]],_=[];return _=t?n?m:[[c]]:a?u:d,r.createElement(K.bL,{manager:s},r.createElement(l.K,{...i(),"aria-label":(0,w.t)("dev_handoff.component_browser.more_actions")},r.createElement(J.J,null)),r.createElement(K.mc,null,_.map((e,t)=>r.createElement(K.YJ,{key:t},e.map(e=>r.createElement(K.q7,{key:e.label,onClick:e.onClick},e.label))))))}function am({libraryKey:e,data:t,selectedComponent:a,onSelectComponent:n,onFileChanged:o,onComponentChanged:l,isLoading:i,onMoreActionsMenuItemClick:s,inputRefs:c,selectedRepositories:d,searchQuery:m}){let u=0===t.length,_=(0,r.useRef)(null),p=(0,E.md)(y.a),f=(0,g.k)().dt_component_browser_icons_flow&&"icons"===p,b=a?eS(a):null;(0,r.useEffect)(()=>{b&&_.current?.querySelector(".js-is-selected")?.scrollIntoView({block:"nearest"})},[b]);let v=e=>{let t=null;if("connected"===e.code_connect_info.v1.state)try{let a=JSON.parse(e.code_connect_info.v1.figmadoc??"");t=Array.isArray(a)?a[0]:a}catch(e){}let r=a&&eS(e)===eS(a),n=null,o=null;if("connected"===e.code_connect_info.v1.state&&t){let e=t.source;e&&(n=e.substring(e.lastIndexOf("/")+1)),o=t.component}return{isSelected:r,fileName:n,componentName:o}};return i?r.createElement("div",{className:"component_browser_component_list--componentsListLoadingContainer--WPYPK"},r.createElement(ac,null)):u?r.createElement("div",{className:"component_browser_component_list--componentsListEmptyContainer--MxQaf"},r.createElement("span",null,m.length>0?(0,w.t)("dev_handoff.component_browser.no_components_search_result",{searchQuery:m}):(0,w.t)("dev_handoff.component_browser.no_results_found"))):r.createElement("div",{ref:_,className:"component_browser_component_list--componentsList--jcFMY"},r.createElement("table",{className:"component_browser_component_list--componentsListTable--puqS-"},r.createElement("thead",{className:"component_browser_component_list--componentsListTableHeader--Aynmf"},r.createElement("tr",{className:es},r.createElement("th",{className:ec},r.createElement("div",null,(0,w.t)("dev_handoff.component_browser.design_component"))),r.createElement("th",{className:ec},r.createElement("div",null,(0,w.t)("dev_handoff.component_browser.code_file_column"))),r.createElement("th",{className:ec},r.createElement("div",null,(0,w.t)("dev_handoff.component_browser.code_component_column"))),r.createElement("th",{className:ec},r.createElement("div",null,(0,w.t)("dev_handoff.component_browser.variants"))),r.createElement("th",{className:ec},r.createElement("div",null,(0,w.t)("dev_handoff.component_browser.status"))),r.createElement("th",{className:ec}))),r.createElement("tbody",{className:"component_browser_component_list--componentsListTableBody--PiBLQ"},t.map((t,a)=>{let i=t.sourceIndex,m=t.component,u="connected"===m.code_connect_info.v1.state,_="ignored"===m.code_connect_info.v1.state,{isSelected:p}=v(m),g="component_browser"===m.code_connect_info.v1.type,E=0===a,b=E?$.Step1:void 0,h=E?$.Step2:void 0;return r.createElement("tr",{key:m.node_id,className:eo()(es,{"component_browser_component_list--isSelected--oGCS1":p,"js-is-selected":p}),onClick:()=>n(m)},r.createElement("td",{className:ec},m.thumbnail_url&&r.createElement("div",{className:eo()("component_browser_component_list--componentItemImageContainer--XlLnu",{"component_browser_component_list--icon--qFSlI":f}),"data-onboarding-key":E?$.Step3:void 0},r.createElement(e5.oW,{"data-onboarding-key":E?W.Step1:void 0,className:"component_browser_component_list--componentItemImage--l1RBu",src:m.thumbnail_url,alt:m.name})),r.createElement("div",null,m.name)),r.createElement(au,{component:m,componentInputOnboardingKey:h,currentRowIndex:a,fileInputOnboardingKey:b,inputRefs:c,isLoading:t.isLoading??!1,libraryKey:e,onComponentChanged:l,onFileChanged:o,selectedComponent:t.selectedComponent,selectedFile:t.selectedFile,selectedRepositories:d,sourceIndex:i}),r.createElement("td",{className:ec},"variants"in m?r.createElement("div",{className:"component_browser_component_list--countItemNumber--0qq5f"},m.variants.length):"--"),r.createElement("td",{className:ec},r.createElement(as,{component:m,isLoading:t.isLoading??!1})),r.createElement("td",{className:ec},r.createElement(ad,{data:t,isConnected:u,isIgnored:_,isComponentBrowserType:g,onMenuItemClick:s}),r.createElement("div",{className:"component_browser_component_list--tableRowExpandChevron--bw780"},r.createElement(ai.a,null))))}))))}function au({isLoading:e,sourceIndex:t,currentRowIndex:a,component:n,libraryKey:o,onFileChanged:l,onComponentChanged:i,selectedFile:s,selectedComponent:c,inputRefs:d,selectedRepositories:m,fileInputOnboardingKey:u,componentInputOnboardingKey:_}){let[p,f]=(0,S.Vc)("componentBrowserOnboardingSelection",null),g=(0,r.useRef)(null),E=(0,r.useRef)(null);if((0,r.useEffect)(()=>{void 0!==a&&(d.current[a]={file:g.current,component:E.current})},[a,d]),(0,r.useEffect)(()=>{s&&!c&&E.current?.focus()},[s,c]),"figmadoc"===n.code_connect_info.v1.type||"codebase_ingestion"===p)return r.createElement(r.Fragment,null,r.createElement("td",{className:ec,style:{position:"relative"}},s?r.createElement("span",{className:em},s.title):r.createElement("span",null,"--")),r.createElement("td",{className:ec,style:{position:"relative"}},c?r.createElement("span",{className:em},c.title):"--"));let b=e=>{n?.code_connect_info.v1.state!=="ignored"&&e.stopPropagation()};return r.createElement(r.Fragment,null,r.createElement("td",{className:ec,onClick:b},r.createElement(eB,{ref:g,component:n,currentRowIndex:a,disabled:e,libraryKey:o,location:"list_view",onFileChanged:l,onboardingKey:u,selectedFile:s,selectedRepositories:m,sourceIndex:t})),r.createElement("td",{className:ec,onClick:b},r.createElement(tN,{ref:E,component:n,currentRowIndex:a,disabled:e,isInline:!0,libraryKey:o,location:"list_view",onComponentChanged:i,onboardingKey:_,repositoriesAvailable:m.length>0,selectedComponent:c,selectedFile:s,sourceIndex:t})))}let a_="component_browser_library_view--componentsListLoadingOrError--JChCC";function ap({label:e,value:t,icon:a}){return r.createElement(o.c$,{key:t,value:t},r.createElement("div",{className:"component_browser_library_view--filterOption--EQd3a"},r.createElement(_.J,{mode:"dark"},a),e))}function af({displayedComponent:e,displayedComponentIndex:t,onConnectMapping:a,onDeleteMapping:o,onDisplayNextComponent:l,onDisplayPreviousComponent:i,onDisplayedComponentChanged:s,onIgnoreMapping:c,paginationInfo:d,selectedRepositories:m}){return(0,n.createPortal)(r.createElement(r.Fragment,null,r.createElement(aE,{onCloseDialog:()=>s(null)}),r.createElement("div",{className:"component_browser_library_view--containerRight--zBqnJ utilities--bodyMedium--7-YGK"},r.createElement(t$,{connectedComponents:d.connectedComponents,data:e,ignoredComponents:d.ignoredComponents,notConnectedComponents:d.notConnectedComponents,onClose:()=>s(null),onConnectMapping:a,onDeleteMapping:o,onIgnoreMapping:c,onRequestNextComponent:l,onRequestPreviousComponent:i,selectedRepositories:m,sourceIndex:t}))),document.body)}function ag(e){let t=e.componentKey,a=(0,f.l)(e.libraryKey),n=(0,x.bh)(),c=function(e){let t=(0,b.Rs)(N.iAs,{libraryKey:e??""},{enabled:!!e});return!!e&&"errors"!==t.status&&("loading"===t.status?"loading":!!t.data?.libraryKeyToFile?.fileCanAccess)}(a),m=(0,E.md)(y.a),u=(0,I.xV)(),_=(0,I.Bt)(),v=(0,g.k)().dt_component_browser_icons_flow&&"icons"===m,{inputRefs:C,status:k,paginationInfo:S,displayedComponent:R,displayedComponentIndex:A,onDisplayedComponentChanged:O,onFileChanged:P,onComponentChanged:L,onMoreActionsMenuItemClick:F,filteredComponents:D,searchQuery:M,setSearchQuery:B,dropdownFilter:U,setDropdownFilter:$,onConnectMapping:j,onDeleteMapping:W,onIgnoreMapping:G,onDisplayNextComponent:H,onDisplayPreviousComponent:K,getIndexOfComponent:Y,connectedComponents:q,notConnectedComponents:J,ignoredComponents:X,selectedRepositories:Q}=function({libraryKey:e,componentKey:t}){let a=function({libraryKey:e,componentKey:t}){let[a]=(0,et.IT)((0,eI.sN)(e),{enabled:(0,g.k)().dt_code_connect_repository_results??!0}),n=a.data?.selected_repositories??[],[o,l]=(0,r.useState)([]),[i,s]=(0,r.useState)(""),[c,d]=(0,r.useState)(eR.all.value),m=(0,r.useMemo)(()=>o.findIndex(e=>eS(e.component)===t),[o,t]),u=(0,r.useMemo)(()=>o[m]??null,[o,m]),_=(0,eI.bV)(),p=(0,E.md)(y.a),[f,b,v,h]=(0,r.useMemo)(()=>{let e=[],t=[],a=[],r=[];return o.forEach(n=>{(0,g.k)().dt_component_browser_icons_flow&&("icons"===p&&!n.component.isIcon||"icons"!==p&&n.component.isIcon)||(e.push(n),"connected"===n.component.code_connect_info.v1.state&&t.push(n),"not_connected"===n.component.code_connect_info.v1.state&&a.push(n),"ignored"===n.component.code_connect_info.v1.state&&r.push(n))}),[e,t,a,r]},[o,p]),w=(0,r.useMemo)(()=>{let e=[];return"all"===c?e=f:"connected"===c?e=b:"notConnected"===c?e=v:"ignored"===c&&(e=h),i&&(e=e.filter(e=>e.component.name.toLocaleLowerCase().includes(i.toLocaleLowerCase()))),[...e].sort((e,t)=>e.component.name<t.component.name?-1:e.component.name>t.component.name?1:0).map((e,t)=>({...e,currentRowIndex:t}))},[c,i,f,b,v,h]),[T,I]=(0,et.IT)((0,eI.t2)(e),{enabled:!0});(0,r.useEffect)(()=>{if(!T.data)return;let{components:e}=function(e){let t=[],a={};return e.state_groups?.forEach(e=>{a[e.node_id]={...e,variants:[]}}),e.components?.forEach(e=>{let r=e.containing_frame?.containingStateGroup?.nodeId;r&&a[r]?a[r].variants.push(e):t.push(e)}),Object.values(a).forEach(e=>{t.push(e)}),{components:t,stateGroups:a}}(T.data);l(function(e){let t=[];return e.forEach((e,a)=>{let r=e.code_connect_info.v1.figmadoc;if(!r){t.push(eD(e,a));return}try{let n=JSON.parse(r)[0];t.push({component:e,sourceIndex:a,isLoading:!1,selectedFile:n?.source?{title:eF(n.source.split("/"),n.source),metadata:{path:n.source,isCustomLink:!1,repository:{id:"",name:""},name:"",sha:"",type:"file"}}:null,selectedComponent:n?.component?{title:n.component}:null})}catch(r){ew.vF.error("Error parsing figmadoc",r),t.push(eD(e,a))}}),t}(e.map(e=>({...e,isIcon:_.has(e.node_id)}))))},[T.data,_]);let x=(0,r.useCallback)(e=>o.findIndex(t=>eS(t.component)===eS(e)),[o]);return{paginationInfo:{notConnectedComponents:v.length,connectedComponents:b.length,ignoredComponents:h.length},connectedComponents:b,notConnectedComponents:v,ignoredComponents:h,searchQuery:i,setSearchQuery:s,dropdownFilter:c,setDropdownFilter:d,displayedComponent:u,displayedComponentIndex:m,filteredComponents:w,status:T.status,componentBrowserListRowData:o??[],setComponentBrowserListRowData:l,refetch:I.refetch,getIndexOfComponent:x,selectedRepositories:n}}({libraryKey:e,componentKey:t});return{...function({displayedComponent:e,filteredComponents:t,componentBrowserListRowData:a,setComponentBrowserListRowData:n,libraryKey:o}){let l=(0,eP.iZ)(),[i,s]=(0,r.useState)(-1),c=(0,r.useRef)([]);(0,r.useEffect)(()=>{c.current=c.current.slice(0,a.length)},[a.length]);let d=(0,eO._6)(),m=(0,eh.wA)(),u=(0,et.gY)(eI.RL),_=(0,et.gY)(eI.S6),p=(0,r.useCallback)(e=>{if(void 0!==e)for(let a=e+1;a<c.current.length;a++){let e=t[a],r=e?.component.code_connect_info.v1.state==="ignored";if(e&&!r&&(!e.selectedFile||!e.selectedComponent)){let t=c.current[a];if(!e.selectedFile&&t?.file){t.file.focus();break}if(!e.selectedComponent&&t?.component){t.component.focus();break}}}},[c,t]),f=(0,ey.hC)(),g=(0,r.useCallback)(e=>{let{codeConnectId:t,row:a}=e,r=a?.sourceIndex;if(a&&void 0!==r){let o={...a,component:{...a.component,code_connect_info:{...a.component.code_connect_info,v1:{...a.component.code_connect_info.v1,state:"not_connected",id:void 0}}}};t?(n(e=>{let t=[...e];return t[r]={...o,isLoading:!0},t}),_({codeConnectId:t}).then(()=>{let t="connected"!==a.component.code_connect_info.v1.state,l=t?(0,w.t)("dev_handoff.component_browser.removed_ignore_message",{componentName:a.component.name}):(0,w.t)("dev_handoff.component_browser.disconnected_message",{componentName:a.component.name});f(t?"component_browser.code_connect_component_ignore_removed":"component_browser.code_connect_component_disconnected",{nodeId:a.component.node_id,location:e.trackingProps.location}),n(e=>{let t=[...e];return t[r]={...o,isLoading:!1},t}),m(eT.F.enqueue({message:l,type:"Disconnect component"})),e.callback?.()}).catch(t=>{ew.vF.error("Error deleting code connect map",t),n(e=>{let t=[...e];return t[r]={...a,isLoading:!1},t}),m(eT.F.enqueue({message:t.message,type:"Disconnect component error",error:!0})),e.callback?.(t)})):n(e=>{let t=[...e];return t[r]={...o,isLoading:!1},t})}},[_,m,n,f]),E=(0,r.useCallback)(e=>{let{row:t,sourceIndex:a,currentRowIndex:r,trackingProps:i}=e,s=t.selectedFile,c=t.selectedComponent,d=s?.metadata?.path??"",_=t.component.node_id;if(!s||!c||!d)return;let g={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,author_name:l?.name,author_id:l?.id,state:"connected",type:"component_browser"}}}};n(e=>{let t=[...e];return t[a]={...g,isLoading:!0},t}),u({library_key:o,node_id:_,template:"",component_name:c.title,source_path:d,status:"connected"}).then(e=>{let o=e.data.meta.code_connect_id;n(e=>{let t=[...e];return t[a]={...g,isLoading:!1,component:{...g.component,code_connect_info:{...g.component.code_connect_info,v1:{...g.component.code_connect_info.v1,id:o,type:"component_browser"}}}},t}),m(eT.F.enqueue({message:(0,w.t)("dev_handoff.component_browser.connected_message",{componentName:t.component.name}),type:"Connected component"})),f("component_browser.code_connect_component_connected",{componentName:c.title,sourcePath:d,location:i.location,source:i.source}),void 0!==r&&p(r)}).catch(e=>{ew.vF.error("Error creating code connect map",e),n(e=>{let r=[...e];return r[a]={...t,isLoading:!1},r}),m(eT.F.enqueue({message:e.message,type:"Connect component error",error:!0}))})},[u,m,p,o,n,f,l]),b=(0,r.useCallback)(e=>{let{currentRowIndex:t,sourceIndex:r,selectedComponent:o,action:l}=e,i=a[r];if(i){if("create"===l){let a={...i,selectedComponent:o};f("component_browser.code_component_manual_connection_data_entered",{nodeId:i?.component.node_id,field:"code_component",location:e.trackingProps.location,source:e.trackingProps.source,value:e.selectedComponent?.title}),n(e=>{let t=[...e];return t[r]=a,t}),i.selectedFile&&E({row:{...i,selectedComponent:o},sourceIndex:r,currentRowIndex:t,trackingProps:e.trackingProps})}else"delete"===l&&i&&g({currentRowIndex:t,codeConnectId:i.component.code_connect_info.v1.id,row:{...i,selectedComponent:null},trackingProps:e.trackingProps})}},[a,E,g,n,f]),v=e=>{let{row:t}=e,a=t.sourceIndex,r=t.component.node_id,i={...t,component:{...t.component,code_connect_info:{...t.component.code_connect_info,v1:{...t.component.code_connect_info.v1,state:"ignored"}}},selectedComponent:null,selectedFile:null};n(e=>{let t=[...e];return t[a]=i,t}),u({library_key:o,node_id:r,status:"ignored"}).then(r=>{let o=r.data.meta.code_connect_id;n(e=>{let t=[...e];return t[a]={...i,component:{...i.component,code_connect_info:{...i.component.code_connect_info,v1:{...i.component.code_connect_info.v1,id:o,author_name:l?.name,author_id:l?.id}}}},t}),f("component_browser.code_connect_component_ignored",{nodeId:t.component.node_id,location:e.trackingProps.location}),m(eT.F.enqueue({message:(0,w.t)("dev_handoff.component_browser.ignored_message",{componentName:t.component.name}),type:"Ignored component"})),e.callback?.()}).catch(r=>{ew.vF.error("Error ignoring code connect map",r),n(e=>{let r=[...e];return r[a]=t,r}),m(eT.F.enqueue({message:r.message,type:"Ignore component error",error:!0})),e.callback?.(r)})},h=(0,r.useCallback)(e=>{if(s(-1),"componentBrowserLibrary"===d.view){let t={...d,componentKey:e&&eS(e)||void 0};m(eA.$T(t))}else if("fullscreen"===d.view){let t={...d,showDevModeComponentBrowser:!0,devModeComponentBrowserBackButtonTargetNodeId:e?.node_id,componentKey:e&&eS(e)||void 0};m(eA.$T(t))}},[d,m]),y=(0,r.useCallback)(()=>{if(!e){t[0]&&h(t[0].component);return}let a=t.findIndex(t=>eS(t.component)===eS(e.component));if(-1===a){-1!==i&&t[i]?h(t[i].component):t[0]&&h(t[0].component);return}let r=t[a+1];r&&h(r.component)},[e,t,h,i]),T=(0,r.useCallback)(()=>{if(!e){let e=t[t.length-1];e&&h(e.component);return}let a=t.findIndex(t=>eS(t.component)===eS(e.component));if(-1===a){let e=t[i-1];-1!==i&&e?h(e.component):t[0]&&h(t[0].component);return}let r=t[a-1];r&&h(r.component)},[e,t,h,i]);return{onDeleteMapping:g,onMoreActionsMenuItemClick:e=>{let{event:t,currentRowIndex:a,row:r}=e;switch(t){case eL.OpenInSidebar:h(r.component);break;case eL.HasCodeEquivalent:case eL.Disconnect:g({currentRowIndex:a,codeConnectId:r.component.code_connect_info.v1.id,row:{...r,selectedFile:null,selectedComponent:null},trackingProps:{location:"list_view"}});break;case eL.Ignore:v({currentRowIndex:a,row:r,trackingProps:{location:"list_view"}})}},onFileChanged:e=>{let{sourceIndex:t,selectedFile:r}=e,o=a[t];f("component_browser.code_component_manual_connection_data_entered",{nodeId:o?.component.node_id,field:"code_file",location:e.trackingProps.location,source:e.trackingProps.source,value:e.selectedFile?.title}),o&&(r?(n(e=>{let a=[...e];return a[t]={...o,selectedFile:r,isLoading:!1},a}),o.selectedComponent&&E({row:{...o,selectedFile:r},sourceIndex:t,currentRowIndex:t,trackingProps:e.trackingProps})):g({currentRowIndex:t,codeConnectId:o.component.code_connect_info.v1.id,row:{...o,selectedFile:null,selectedComponent:null},trackingProps:e.trackingProps}))},onComponentChanged:b,onConnectMapping:e=>{let{currentRowIndex:t,row:a}=e,r=a.sourceIndex,i=a.component,s=a.selectedFile,c=s?.metadata?.path??"",d=a.selectedComponent,_=a.component.node_id;if(s&&d&&c){let g={...a,component:{...i,code_connect_info:{...i.code_connect_info,v1:{...i.code_connect_info.v1,state:"connected",author_name:l?.name,author_id:l?.id}}},selectedFile:s,selectedComponent:d};n(e=>{let t=[...e];return t[r]={...g,isLoading:!0},t}),u({library_key:o,node_id:_,template:"",component_name:d.title,source_path:c,status:"connected"}).then(o=>{let l=o.data.meta.code_connect_id;n(e=>{let t=[...e];return t[r]={...g,isLoading:!1,component:{...g.component,code_connect_info:{...g.component.code_connect_info,v1:{...g.component.code_connect_info.v1,id:l}}}},t}),m(eT.F.enqueue({message:(0,w.t)("dev_handoff.component_browser.connected_message",{componentName:a.component.name}),type:"Connected component"})),f("component_browser.code_connect_component_connected",{componentName:d.title,sourcePath:c,location:e.trackingProps.location,source:e.trackingProps.source}),p(t),e.callback?.()}).catch(t=>{ew.vF.error("Error creating code connect map",t),n(e=>{let t=[...e];return t[r]={...a,isLoading:!1},t}),m(eT.F.enqueue({message:t.message,type:"Connect component error",error:!0})),e.callback?.(t)})}},onIgnoreMapping:v,onDisplayedComponentChanged:h,onDisplayNextComponent:y,onDisplayPreviousComponent:T,inputRefs:c}}({libraryKey:e,displayedComponent:a.displayedComponent,filteredComponents:a.filteredComponents,componentBrowserListRowData:a.componentBrowserListRowData,setComponentBrowserListRowData:a.setComponentBrowserListRowData}),...a}}({libraryKey:a,componentKey:t}),Z="loading"===c||"loading"===k,ee=al(),ea=(0,r.useCallback)(e=>{if(e===V.OpenDialog){if(D.length>0&&!R){let e=D[0];e&&O(e.component)}}else e===V.CloseDialog&&O(null)},[D,R,O]);return r.createElement(p.J,null,r.createElement(z,{canShowOnboarding:!Z,onOnboardingSequenceAction:ea}),r.createElement("div",{className:"component_browser_library_view--container--sxcXn"},r.createElement("div",{className:"component_browser_library_view--containerLeft--tMnWN"},r.createElement("div",{className:"component_browser_library_view--header--pZiav"},r.createElement("div",{className:"component_browser_library_view--headerLeft--coXBP"},"file"===e.location&&r.createElement(l.K,{"aria-label":(0,w.t)("dev_handoff.component_browser.close_component_browser"),onClick:n},r.createElement(d.C,null)),r.createElement("h1",{className:"component_browser_library_view--headerText--jnhLj"},v?(0,w.t)("dev_handoff.component_browser.map_icons_to_code_title"):(0,w.t)("dev_handoff.component_browser.map_components_to_code_title")),r.createElement(i.E,{variant:"defaultOutline"},(0,w.t)("dev_handoff.component_browser.alpha"))),r.createElement("div",{className:"component_browser_library_view--headerRight--iwCrG"},!R&&(Z?r.createElement(h.Wi,{style:{width:200,height:30},animationType:h.JR.SHIMMER}):r.createElement(tS,{open:!1,notConnectedComponents:S.notConnectedComponents,connectedComponents:S.connectedComponents,ignoredComponents:S.ignoredComponents})),r.createElement(ao,{libraryKey:a}),v&&r.createElement(eK,{connectedComponents:q,onDeleteMapping:W}))),v&&c&&r.createElement(eY,{connectedComponents:q,notConnectedComponents:J,ignoredComponents:X,onConnectMapping:j,onDeleteMapping:W,onIgnoreMapping:G,getIndexOfComponent:Y,libraryKey:a,selectedRepositories:Q}),Z||c?"errors"===k?r.createElement("div",{className:a_},(0,w.t)("dev_handoff.component_browser.error_loading")):r.createElement(r.Fragment,null,r.createElement("div",{className:"component_browser_library_view--componentsListFilters--M4se4"},r.createElement("div",{className:"component_browser_library_view--componentsListFiltersInner--t95XT"},r.createElement(ab,{value:M,onChange:B}),r.createElement("div",{className:"component_browser_library_view--componentsListFiltersRight--d-PGj"},r.createElement(o.bL,{value:U,onChange:e=>$(e)},r.createElement(o.l9,{label:r.createElement(s.h,null,(0,w.t)("dev_handoff.component_browser.filter"))},(0,w.t)("dev_handoff.component_browser.show_filter",{0:ee[U]})),r.createElement(o.mc,null,Object.entries(eR).map(([e,{value:t,Icon:a}])=>{let n=ee[t];return r.createElement(ap,{key:e,label:n,value:t,icon:r.createElement(a,{style:{"--color-icon-tertiary":"notConnected"===t?"var(--color-icon)":void 0}})})})))))),r.createElement(am,{data:D,inputRefs:C,isLoading:Z,libraryKey:a,onComponentChanged:L,onFileChanged:P,onMoreActionsMenuItemClick:F,onSelectComponent:O,searchQuery:M,selectedComponent:R?.component??null,selectedRepositories:Q})):r.createElement("div",{className:a_},(0,w.t)("dev_handoff.component_browser.no_permission"))),R&&c&&r.createElement(af,{displayedComponent:R,displayedComponentIndex:A,onConnectMapping:j,onDeleteMapping:W,onDisplayNextComponent:H,onDisplayPreviousComponent:K,onDisplayedComponentChanged:O,onIgnoreMapping:G,paginationInfo:S,selectedRepositories:Q})),u&&a&&r.createElement(T.A,{libraryKey:a,onClose:()=>_(!1),onBack:()=>_(!1)}))}function aE({onCloseDialog:e}){return r.createElement(c.E,{onClick:e,className:"component_browser_library_view--dialogOverlay--lWQNK"},r.createElement("div",{className:"component_browser_library_view--dialogOverlayContent--vAFyK"}))}function ab({value:e,onChange:t}){return r.createElement("div",{className:"component_browser_library_view--searchBar--bauvr"},r.createElement(m.h,null),r.createElement(v.L,{placeholder:(0,w.t)("dev_handoff.component_browser.search_placeholder"),value:e,onChange:e=>{t(e.currentTarget.value)},className:"component_browser_library_view--searchInput--tzNk- text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1}),!!e&&r.createElement("div",null,r.createElement(l.K,{onClick:()=>t(""),"aria-label":(0,w.t)("dev_handoff.component_browser.clear_search"),htmlAttributes:{"data-tooltip":(0,w.t)("dev_handoff.component_browser.clear_search"),"data-tooltip-type":C.Ib.TEXT}},r.createElement(u.L,null))))}},301360:(e,t,a)=>{a.d(t,{$:()=>k,A:()=>A});var r=a(848318);if(443==a.j)var n=a(413927);var o=a(186606),l=a(768618),i=a(999667),s=a(989232),c=a(615233),d=a(178806),m=a(967688),u=a(740495),_=a(957872),p=a(34375),f=a(34542),g=a(338104),E=a(15105),b=a(531288),v=a(601167),h=a(263336),w=a(556049),y=a(593713),T=a(67391),I=a(136169),x=a(555637),N=a(722541);let C=(0,c.ck)("bfb358109ac5994e69048d8390d3a0c334253aa8"),k="rfd-upsell-page-title";function S({nodeToHighlight:e,complete:t}){let[a,o]=r.useState(null),l=r.useRef(null),i=(0,v._X)({subscribeToUpdates_expensive:!0}),s=r.useCallback(()=>{l.current&&o(l.current.absoluteBounds.height*i.zoomScale)},[i.zoomScale]);return r.useEffect(()=>{if(!e){o(null);return}let t=`dev-page-change-upsell-${e}`,a=(0,b.EE)(t,[e],e=>{l.current=e.position,s()});return l.current=a.currentNodePosition[e]?.position||null,s(),()=>{(0,b.lB)(t)}},[e,s]),r.createElement(y.NJ,{arrowPosition:w.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:N.R3,closeButtonClassName:N.b,dismissModal:t,hideIfArrowPositionDoesNotMatch:!0,hideIfTargetLost:!0,isCanvasNode:!0,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:e,topOffset:a?-a/2-15:0,width:240},r.createElement("div",{className:N.Xq},(0,m.t)("dev_handoff.rfd_signals_upsell.mark_as_ready")),r.createElement("div",{className:N.O6},r.createElement("div",{className:N.zu},(0,m.t)("dev_handoff.rfd_signals_upsell.description"))),r.createElement("div",{className:N.JP},r.createElement(n.v,{mode:"dev-handoff"},r.createElement(d.$z,{trackingProperties:{trackingDescriptor:_.c.MARK_READY_FOR_DEV},variant:"primary",onClick:function(){e&&(t(),g.z4.setNodesReady(!0,[e],"dev-node-change-upsell",null))}},(0,m.t)("dev_handoff.rfd_signals_upsell.mark_ready_for_dev")))))}function R(e){s.definedAnalyticsHandler.trackDefinedEvent("activation.rfd_signal_upsell.disqualification_reason",{reason:e,upsellSubject:"page"})}function A(){let[e,t]=r.useState("show_page_tooltip"),[a,s]=r.useState(null),[c,g]=(0,i.fp)(x.hj),b=(0,i.Xr)(x.d1),A=(0,i.md)(x.Sp),O=(0,i.Xr)(x.Sp),P=(0,E.Z)("dev-handoff-rfd-signals-page-upsell"),L=(0,u.cR)(),{show:F,complete:D,uniqueId:M,isShowing:B}=(0,f.e)({overlay:I.ZNl,priority:h.N.HIGH_PRIORITY_MODAL,experiment:{check:L,predicate:e=>e,postCheck:()=>!0}});async function U(){c&&a&&o.Egt&&(await (0,l.UN)().setCurrentPageAsync(a),o.Egt.replaceSelection([c],!0),await P(await (0,v.QZ)({nodeId:c,alwaysPan:!0}),{alwaysNavToSimilarViewport:!0}),t("show_node_tooltip"))}return(r.useEffect(()=>{b({fn:D})},[D,b]),(0,p.E)(M,["page_name_changed_with_rfd_indicator"],e=>{if(!e.properties.pageId){R("no_page_id");return}if(A){R("already_seen_upsell_this_session");return}let t=(0,l.UN)().get(e.properties.pageId);if(!t){R("page_not_found");return}let a=function(e){let t=null,a=0,r=new Set;return function e(n){if(!r.has(n.guid)){if("FRAME"===n.type&&n.childCount>a&&n.canHaveStatus){let e=function e(t){let a=0;if(t.childCount>0)for(let r of t.childrenNodes)a+=1+e(r);return r.add(t.guid),a}(n);e>a&&(a=e,t=n)}n.childCount>0&&n.childrenNodes?.forEach(e)}}(e),t}(t);if(!a){R("no_upsell_frame_for_page");return}s(e.properties.pageId),g(a.guid),F({onShow:()=>O(!0)})}),B)?"show_page_tooltip"===e?r.createElement(y.NJ,{arrowPosition:w.F_.LEFT_TITLE,backgroundColor:"var(--color-bg)",className:N.R3,closeButtonClassName:N.b,dismissModal:D,leftOffset:12,noAnimation:!0,shouldNotWrapInParagraphTag:!0,targetKey:k,width:240},r.createElement("div",{className:N.Rg},(0,m.t)("dev_handoff.rfd_signals_upsell.title")),r.createElement("div",{className:N.O6},r.createElement("div",{className:N.j},r.createElement(T.GV,{src:C,width:240})),r.createElement("div",{className:N.zu},(0,m.t)("dev_handoff.rfd_signals_upsell.page_upsell.description"))),r.createElement("div",{className:N.JP},r.createElement(n.v,{mode:"dev-handoff"},r.createElement(d.$z,{trackingProperties:{trackingDescriptor:_.c.SHOW_ME_HOW},variant:"primary",onClick:U},(0,m.t)("dev_handoff.rfd_signals_upsell.page_upsell.show_me_how"))))):c?r.createElement(S,{nodeToHighlight:c,complete:D}):null:null}},220133:(e,t,a)=>{a.d(t,{i:()=>_});var r=a(848318);if(443==a.j)var n=a(954703);if(443==a.j)var o=a(269238);if(443==a.j)var l=a(486503);if(443==a.j)var i=a(491383);var s=a(82433),c=a(480800),d=a(286046),m=a(465233),u=a(17753);function _({favoriteType:e,orgId:t,resourceId:a,setFavorite:_,monochrome:f,teamId:g,size:E="md",dataTestId:b="favorite-star-button"}){let v=(0,d.Y)(a,e,t,g),h=(0,c._)({subscription:v,orgId:t,resourceId:a,setFavorite:_});return"loaded"!==v.status?r.createElement("div",{...s.Ay.props(f&&p.monochromePlaceholder)},r.createElement(n.K,{variant:"secondary",disabled:!0,size:E,"aria-label":h.tooltip,htmlAttributes:{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":h.tooltip,"data-tooltip-timeout-delay":50,"data-testid":"favorite-star-placeholder"}},r.createElement(o.c,{"data-testid":"favorite-star-placeholder-unfavorited-icon"}))):r.createElement(r.Fragment,null,r.createElement(n.K,{ref:h.buttonRef,"aria-label":h.tooltip,"aria-pressed":!!v.favorite,htmlAttributes:{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":h.tooltip,"data-tooltip-timeout-delay":50,"data-testid":b},onClick:h.toggle,variant:"secondary",size:E},v.favorite?r.createElement(l._,{style:f?void 0:{"--color-icon":i.Tj.iconfavorite},"data-testid":`${b}-favorited-icon`}):r.createElement(o.c,{"data-testid":`${b}-unfavorited-icon`})),!!t&&h.isDropdownShown&&r.createElement(m.t,{currentSectionId:v.favorite?.resource.sidebarSectionId??void 0,customSectionOrdering:v.orderedSidebarSections??[],"data-testid":"organize-favorite-menu",favoriteId:v.favorite?.id,orgId:t,resourceId:a,resourceType:e,sections:v.userSidebarSections??[],setFavorite:_,userHasMaxFavorites:v.hasMaxFavorites}))}let p={monochromePlaceholder:{display:"xjp7ctv","--color-border-disabled":"x1qgxxjq",$$css:!0}}},815078:(e,t,a)=>{a.d(t,{u:()=>d});var r=a(848318),n=a(301168),o=a(407639),l=a(443074),i=a(125761),s=a(723437),c=a(588014);function d({prepopulatedEmail:e,parentOrg:t,orgDomains:a}){let d=(0,n.wA)(),m=(0,n.d4)(e=>e.contacts),u=(0,i.Pc)();r.useEffect(()=>{d(l.um())},[d]);let _=a??c.ls,p=r.useCallback(e=>(0,s.yI)(e,m.usersByEmail[e]||e,null,_,u.email),[m.usersByEmail,u.email,_]);return r.useEffect(()=>{if(e){let t=p(e);d(o.hZ({tokens:[t],inputValue:"",errorMessage:""}))}},[e,p,d]),r.useEffect(()=>()=>{d(o.cL())},[d]),{validateToken:p,searchResultToken:r.useCallback(e=>(0,s.t9)(e,t,_),[_,t])}}},972382:(e,t,a)=>{a.d(t,{w:()=>o});var r=a(45137),n=a(125761);function o({rolesToDefaultToOther:e}={}){let t=n.iZ()?.profile.job_title,a=(0,r.HB)(t);return e&&e.includes(a)?"other":a}},756192:(e,t,a)=>{a.d(t,{S:()=>s});var r=a(301168),n=a(601295),o=a(43800),l=a(922484),i=a(809351);function s(e){let t=(0,r.d4)(e=>e.loadingState),a=(0,r.d4)(e=>e.teamJoinLinks);return!function(e,t,a){let r=!(0,l.VP)(t,(0,i.OL)(e))&&!(0,l.aF)(t,(0,i.OL)(e))&&!a;return(0,l.VP)(t,(0,i.OL)(e))||(0,l.VP)(t,o.ui.loadingKeyForPayload({teamId:e}))||(0,l.VP)(t,(0,i._M)(e))||r}(e,t,a)?n.Qw.loaded(a?.url):n.Qw.loading()}},879983:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(304756);let n=new class{async pinFile({resourceType:e,resourceId:t,fileKey:a,description:n,shouldUpdatePermissions:o}){await r.Ay.post(`/api/pinned_files/${e}/${t}`,{file_key:a,description:n,should_update_permissions:o})}async updatePin({pinnedFileId:e,description:t}){await r.Ay.put(`/api/pinned_files/${e}`,{description:t})}async deletePin({pinnedFileId:e}){await r.Ay.del(`/api/pinned_files/${e}`)}}},468325:(e,t,a)=>{a.r(t),a.d(t,{Gen0WelcomeOverlay:()=>f});var r=a(848318),n=a(999667),o=a(359822),l=a(847576),i=a(34542),s=a(709292),c=a(752181),d=a(263336),m=a(913122),u=a(560764),_=a(564966),p=a(136169);function f(){let e=!!(0,c.f)("not_gen_0"),t=(0,n.md)(s.NT),a=(0,n.md)(s.g5),f=(0,n.md)(_.pC),{isShowing:g,complete:E,show:b}=(0,i.e)({overlay:p.Lg0,priority:d.N.HIGH_PRIORITY_MODAL},[t,a]);return((0,l.Q)(g),(0,o.h)(()=>{b({canShow:(t,a)=>!(f||e||(0,u.d)({emailValidatedAt:a,jobTitle:t}))})}),g)?r.createElement(m.b,{trackingContextName:"Gen 0 NUX",isShowing:g,onOverlayClose:()=>{E()},dataTestId:"NuxDynamicPreviewOverlay-Gen0WelcomeOverlay"}):null}},517614:(e,t,a)=>{a.d(t,{W:()=>R,l:()=>S});var r=a(848318),n=a(301168),o=a(430385),l=a(580494),i=a(999667),s=a(810503),c=a(967688),d=a(31898),m=a(340132);if(443==a.j)var u=a(142896);var _=a(381673),p=a(859480),f=a(355755),g=a(730143),E=a(318147),b=a(253332),v=a(520779),h=a(386252),w=a(324183),y=a(70969),T=a(228845);if(443==a.j)var I=a(636902);var x=a(230432),N=a(274016),C=a(399e3),k=a(263418);let S=(0,i.eU)(!1);function R({clientX:e,clientY:t,pageIds:a,selectedView:R,shouldShowDuplicateOption:A}){let O=(0,n.wA)(),P=(0,n.d4)(e=>e.mirror.appModel),L=(0,g.q5)(),F=(0,f.p8)("pagesList"),D=(0,p.HZ)(),M=_.F.useShouldHideStarterCtaForOpenFile(),B=(0,T.cT)(),U=(0,y.hZ)(),$=1===a.length&&void 0!==a[0]?function({pageId:e,openFile:t,pagesList:a,team:r,shouldShowDuplicateOption:n,shouldPaywallForDraftsPageLimitV1:o,dispatch:i,hideUpsellPlanCta:u,isFileReadOnly:p,isK12OrgStudent:f}){var g;let w=a.length,y=a.filter(e=>!e.isDivider).length,T=a.find(t=>t.nodeId===e),S=!!T&&T.isDivider,R=a=>(0,k.HZ)()&&T&&t&&t.editorType===E._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,k.$t)({pageGuids:[e],dispatch:a,source:C.E.FJ_PAGE_MENU})}]:[];if(p||f)return[{action:"page-copy-link",args:{nodeId:e}},...R(i)];let A=()=>(0,l.k)().move_page_to_new_file&&T&&t?((0,s.ED)("getPageMoveMenuItem","Parameters",{pageId:e,folderId:"1",fileKey:t.key}),{name:"page-move-to-new-file",callback:()=>{!function(e,t,a,r,n={},o=!0){if(!e)return;let l={...n,type:x.A.FILE,fileKey:e.key,file:e,afterFileMove:void 0,isMovePageToNewFile:o,page_id:a};t(d.to({type:(0,I.J)(),data:l}))}({key:t.key,name:t.name,folder_id:t.folderId,team_id:t.teamId,editor_type:t.editorType},i,e)}}):null,O=n?(g=S?(0,c.t)("fullscreen_actions.divider-duplicate"):(0,c.t)("fullscreen_actions.page-duplicate"),t&&((0,b.J9)({openFile:t,pageCount:w})||o({openFile:t,pageCount:w}))?{name:"page-duplicate",callback:()=>{i((0,d.to)({type:N.DV,data:{team:r,resource:v.vL.PAGE,action:h.ZN.DUPLICATE_PAGE,editorType:t.editorType,currentPlan:_.F.Plan.STARTER,upsellPlan:_.F.Plan.PRO,hideUpsellPlanCta:u}}))},displayText:g}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:g}):null;return S?[O,A(),{action:"page-delete",args:{nodeIds:[e]},loadingIndicatorString:"Deleting",displayText:(0,c.t)("fullscreen_actions.divider-delete")}]:[{action:"page-copy-link",args:{nodeId:e}},{separator:!0},{action:"page-rename",args:{nodeId:e},displayText:(0,c.t)("fullscreen_actions.pages-rename",{pageCount:1})},O,A(),{separator:!0},{action:"page-delete",callback:()=>i(m.PK({})),args:{nodeIds:[e]},loadingIndicatorString:"Deleting",disabled:1===y,displayText:(0,c.t)("fullscreen_actions.pages-delete",{pageCount:1})},...R(i)]}({pageId:a[0],team:L?L.team:null,shouldShowDuplicateOption:A,openFile:L,pagesList:F,shouldPaywallForDraftsPageLimitV1:D,dispatch:O,hideUpsellPlanCta:M,isFileReadOnly:B,isK12OrgStudent:U}):function({pageIds:e,pagesList:t,dispatch:a,isFileReadOnly:r,isK12OrgStudent:n}){if(r||n)return[];let o=new Set(t.filter(e=>!e.isDivider).map(e=>e.nodeId)),l=e.filter(e=>o.has(e)),s=l.length;return 0===s?[]:[{action:"batch-page-rename",args:{nodeIds:l},displayText:(0,c.t)("fullscreen_actions.pages-rename",{pageCount:s})},{separator:!0},{action:"page-delete",callback:()=>a(m.PK({})),args:{nodeIds:l},loadingIndicatorString:"Deleting",displayText:(0,c.t)("fullscreen_actions.pages-delete",{pageCount:s}),disabled:o.size<=s},...(t=>{if(!(0,k.HZ)())return[];let a=i.zl.get(g.yV);return a&&a.editorType===E._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,k.$t)({pageGuids:Array.from(e),dispatch:t,source:C.E.FJ_PAGE_MENU})}]:[]})(a)]}({pageIds:a,pagesList:F,dispatch:O,isFileReadOnly:B,isK12OrgStudent:U});return(0,r.useEffect)(()=>(i.zl.set(S,!0),()=>{i.zl.set(S,!1)}),[]),r.createElement("div",{className:`${u.Dm}`},r.createElement(w.Q,{appModel:P,menuItems:(0,o.WI)($),dispatch:O,selectedView:R,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:!1,recordingKey:"pageMenu"}))}},70969:(e,t,a)=>{if(a.d(t,{h5:()=>g,hZ:()=>_,hs:()=>E,mb:()=>f,sv:()=>b}),443==a.j)var r=a(660376);var n=a(580494),o=a(859480),l=a(730143),i=a(180294),s=a(125761),c=a(228845),d=a(975695);let m=/^Page \d+$/;var u=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(u||{});function _(){let e=(0,i.sZ)(),t=!!e?.k12_google_org,a=s.iZ()?.profile?.job_title;return t&&"student"===a}function p(){let e=(0,l.q5)(),t=(0,c.cT)(),a=(0,i.sZ)(),r=!!a?.k12_google_org,o=_();if(!e)return"fileLoading";if((0,n.k)().figjam_pages_for_education){if(o)return"k12"}else{let t=!!e.team?.studentTeamAt;if(r||t)return"k12"}return t?"readOnly":(0,d.Qy)(e)?"personalDraft":null}var f=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(f||{});function g({nonDividerPageCount:e}){let t=p(),a=(0,o.nn)(),n=a&&!m.exec(a);if("fileLoading"===t)return null;if(e>1||n)return"viewPages";switch(t){case null:return"addPage";case"readOnly":case"personalDraft":return"viewPages";case"k12":return null;default:(0,r.xb)(t)}}function E(){return null===p()}function b(){return null===p()}},217958:(e,t,a)=>{a.d(t,{i:()=>p});var r=a(848318),n=a(536384),o=a.n(n),l=a(410441),i=a(865114),s=a(939010),c=a(264592),d=a(967688),m=a(377549),u=a(786175);let _=(0,l.jz)(u.figmaComponentFlyoutTextMaxCollapsedHeight);function p({description:e,description_rt:t}){let a=r.useRef(null),[n,l]=r.useState(!0),[u,p]=r.useState(!1),f=(0,i.ZC)(e);r.useEffect(()=>{if(e&&a.current&&f!==e){let e=a.current.scrollHeight>_;l(e),p(e)}},[e,f]);let g=r.useCallback(()=>{n&&p(!0),l(!n)},[n]);if(!e&&!t)return null;let E=!!e&&(n||u);return r.createElement("div",{className:"truncated_component_description--documentationSection--87RCO"},t?r.createElement("div",null,r.createElement(c.C,{value:t,valueFormat:(0,s.j_)(t),namespace:"component-description-flyout-lexical-editor-readonly",lexicalContentClassName:n?m.D6:m.kF,innerRef:a})):r.createElement("div",{ref:a,className:o()({"truncated_component_description--collapsed--VXZTS ellipsis--ellipsisAfter6Lines--2UA7M ellipsis--_ellipsisAfterNLines--LzI7k":n},"truncated_component_description--documentationDescription--C090D text--fontPos11--2LvXf text--_fontBase--QdLsd"),dir:"auto"},e),E&&r.createElement("button",{className:"truncated_component_description--showMore--brfX6",onClick:g},n?(0,d.tx)("design_systems.assets_panel.show_more"):(0,d.tx)("design_systems.assets_panel.show_less")))}},590267:(e,t,a)=>{a.d(t,{c0:()=>x,Jc:()=>C});var r=a(848318),n=a(938982);if(443==a.j)var o=a(773511);if(443==a.j)var l=a(272520);var i=a(999667),s=a(601295),c=a(647029),d=a(536384),m=a.n(d),u=a(996202),_=a(410725),p=a(748008),f=a(72462),g=a(998568),E=a(345964),b=a(999556),v=a(555772),h=a(967688),w=a(730143),y=a(55116),T=a(7905),I=a(353956);function x({pageRowRef:e,pagesListRef:t,nodeId:a,nodeName:n,pageThumbnail:s,isLoading:c}){let d=(0,w.q5)(),_=(0,u.hC)(),p=(0,i.Xr)(I.qp);if(!d||!t.current||!e.current)return null;let g=t.current.getBoundingClientRect().left+t.current.getBoundingClientRect().width,y=g-16,x=`calc(${g}px + var(--spacer-2, 0.5rem))`,N=e.current.getBoundingClientRect().top,C=e.current.getBoundingClientRect().height;return r.createElement(r.Fragment,null,r.createElement("div",{style:{position:"fixed",zIndex:10,left:y+"px",top:N+"px",height:C+"px",width:"32px"}}),r.createElement("div",{"data-testid":"PageSummaryPreview",className:"page_summary_preview--previewContainer--kx2Uy",style:{left:x,top:N+C/2}},r.createElement("div",{className:"page_summary_preview--thumbnailContainer--a-jPQ"},r.createElement("div",{"data-testid":"FileThumbnail"},r.createElement(v.V,{thumbnailType:(0,b.lv)(d.editorType,!1),thumbnailUrl:s?.thumbnail_url??null,clientMeta:s?.thumbnail_meta??d.clientMeta,noBorder:!0})),r.createElement(o.E,{"aria-label":(0,h.t)("pages_panel.summary_preview.update_preview"),className:m()("page_summary_preview--refreshButton--XAvPe",{"page_summary_preview--alwaysShowRefreshButton--M3IDC":!s}),onClick:()=>{d&&!c&&(_("figjam_pages_summary.preview_refreshed",{previewPageId:a}),p(f.r.LOADING),T.S.updatePageCheckpointThumbnails({fileKey:d.key}).catch(()=>{_("figjam_summary_preview.page_thumbnails_request_failed_increment_metric",{})}))},htmlAttributes:{"data-tooltip":(0,h.t)("pages_panel.summary_preview.update_preview"),"data-tooltip-type":"text","data-testid":"RefreshPreviewButton"}},c?r.createElement(E.kt,{testId:"LoadingSpinner",size:"small",className:"page_summary_preview--loadingSpinner--FXocO"}):r.createElement(l.o,null))),r.createElement("div",{className:"page_summary_preview--pageTitleContainer--Yk-qK text--fontPos13--xW8hS text--_fontBase--QdLsd"},n)))}let N=c.z.record(c.z.object({thumbnail_url:c.z.string(),thumbnail_meta:c.z.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:c.z.string().optional()}));function C(e){let t=(0,w.q5)(),a=(0,_.Rs)(y.SPC,{fileKey:t?.key??""},{enabled:!!(t?.key&&e)});return s.Qw.useTransform(a,e=>{if(e?.file?.pagesSignedThumbnailData.status!==p.tT.Loaded)return null;try{if(!e?.file?.pagesSignedThumbnailData.data)return null;let t=JSON.parse(e.file.pagesSignedThumbnailData.data);return N.parse(t)}catch(a){return(0,g.$D)(n.e.FIGJAM,Error(`PageSummaryPreview: Failed to parse page thumbnail data. Error: ${a.message}.`),{tags:{fileKey:t?.key},extra:{parsedPageThumbnails:e?.file?.pagesSignedThumbnailData.data}}),null}})}},65963:(e,t,a)=>{a.d(t,{v:()=>G,G:()=>W});var r=a(848318),n=a(301168);if(443==a.j)var o=a(871043);if(443==a.j)var l=a(773511);if(443==a.j)var i=a(433231);if(443==a.j)var s=a(901948);if(443==a.j)var c=a(2446);if(443==a.j)var d=a(200362);if(443==a.j)var m=a(408193);var u=a(186606),_=a(580494),p=a(999667),f=a(536384),g=a.n(f),E=a(781239),b=a(720522),v=a(967688),h=a(952039),w=a(555637),y=a(301360),T=a(995218),I=a(696786),x=a(70433),N=a(665411),C=a(554326),k=a(614092),S=a(17753),R=a(517614),A=a(857607),O=a(146859),P=a(614892);function L({value:e,setValue:t,recordingKey:a,isDisabled:n,stopRenaming:o}){let l=(0,r.useRef)(null);(0,r.useEffect)(()=>{l.current?.select()},[]);let i=E.v_(a,"keydown",e=>{if(e.keyCode===A.Uz.ESCAPE)o(!1),e.stopPropagation();else if(e.keyCode===A.Uz.ENTER)e.preventDefault(),o(!0);else{if(e.keyCode!==A.Uz.TAB)return(0,O.jr)(e,O.W0.NO),E.aH;e.preventDefault(),o(!0)}}),s=E.AF(a,"change",e=>{n||t(e.currentTarget.value)}),c=E.iQ(a,"blur",()=>{o(!0)});return r.createElement(P.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"page_rename_input--input--s2o7Q",innerRef:l,onBlur:c,onChange:s,onKeyDown:i,spellCheck:!1,value:e})}var F=a(214758);if(443==a.j)var D=a(954206);if(443==a.j)var M=a(255111);if(443==a.j)var B=a(344432);if(443==a.j)var U=a(871428);function $({editorType:e}){switch(e){case u._YF.DESIGN:return r.createElement(i.k,null);case u._YF.WHITEBOARD:return r.createElement(b.B,{svg:U.A});case u._YF.SLIDES:return r.createElement(s.l,null);default:return null}}function j(e){let{isActive:t,isDivider:a,pageType:n,hasMultiplePageTypes:o}=e;return a||!o?null:r.createElement("div",{className:g()(F.n6,{[F.vu]:t})},r.createElement($,{editorType:n}))}function W({pageType:e,hasMultiplePageTypes:t,nodeId:a,nodeName:l,isRenaming:i,startRenaming:s,stopRenaming:c,renamingPagePendingName:d,setRenamingPagePendingName:m,isActive:f,shouldShowGuids:C,onMouseDownCallback:A,onMouseUpCallback:O,onMouseMoveCallback:P,onClickCallback:B,reorderingPageGuids:U,selectedPageGuids:$,onContextMenuCallback:W,showMemoryUsage:H,showInFileMemoryPercentage:z,isOffline:K,isComparingChanges:Y,pageToNumChanges:q,versionHistory:J,isDivider:X,pagesList:Q,index:Z,activePageShouldUseBrandColor:ee,shouldUseButtonRow:et}){let ea=(0,n.wA)(),er=(0,I.GS)(),en="whiteboard"===(0,T.lg)(),[eo,el]=r.useState(!1),ei=(0,p.md)(R.l),es=(0,p.md)(w.Yh),ec=(0,k.Fk)((e,t)=>e.get(t)?.nodeMemoryUsage,a),ed=(0,k.Fk)((e,t)=>e.get(t)?.rootMemoryUsage,a),em=r.useMemo(()=>(0,N.Fy)(Q,a)===u.xal.LOADED,[a,Q]),eu=u.h3O.getSessionState()===u.kul.JOINED,e_=r.useMemo(()=>K&&!eu&&!em&&u.h3O.isIncrementalSession(),[K,em,eu]),ep=E.Pt("pagesPanel","row",Z)||"",ef=E.rf(ep,"contextmenu",e=>{e.preventDefault(),!e_&&W&&W({nodeId:a,e})}),eg=E.rf(ep,"dblclick",()=>{e_||i||s(a)}),eE=E.rf(ep,"click",e=>{if(!X&&!i){if(e_){ea(h.F.enqueue({type:"offline-page-switch",message:(0,v.t)("fullscreen.pages_panel.unavailable_offline")}));return}B(a,e)}}),eb=r.useCallback(e=>{e_||i||A(a,e)},[i,a,A,e_]),ev=r.useCallback(e=>{i||P(a,e)},[i,a,P]),eh=r.useCallback(e=>{i||O(a,e)},[i,a,O]),ew=r.useCallback(()=>(0,o.uy)(ec)||(0,o.uy)(ed)?"":(0,x.pr)(ec,ed,!0),[ec,ed]),ey=Y&&q?.get(a)||0,eT=J?.activeId&&"current_version"===J.activeId,eI=H&&z&&!i&&eT,ex=!Y&&!i,eN=X&&!f&&!i,eC=en&&!i&&f&&$?.length===0,ek=g()({[F.mB]:eN,[F.oG]:!eN,[F.sl]:f,[F.sR]:eC&&eo&&ei,[F.Pl]:ee,[F.Dq]:0===U.length&&0===$.length,[F.As]:et},0!==U.length||0!==$.length?$.includes(a)?F.wH:U.includes(a)?F.iB:0===U.length?F.Dq:"":""),eS=r.useRef(null),eR=r.useRef(!1),eA=r.useCallback(e=>{c(e),eR.current=!0},[c]);r.useLayoutEffect(()=>{!i&&eR.current&&eS.current&&(eS.current.focus(),eR.current=!1)},[i]);let eO=i&&r.createElement(L,{value:d||"",setValue:m,stopRenaming:eA,recordingKey:ep,isDisabled:e_}),eP=e_&&!eN&&r.createElement("div",{className:F.Nr,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},r.createElement(b.B,{className:F.VQ,svg:M.A,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})),eL=(0,_.k)().version_diffing&&Y&&ey>0&&r.createElement("div",{className:F.Sp},ey),eF=(0,_.k)().piper_present_summary&&eC&&!t?r.createElement(V,{accessibleLabel:et?(0,v.t)("fullscreen.pages_panel.page_row.more_actions",{pageName:l}):void 0,onContextMenuCallback:W,nodeId:a,isMoreActionsActive:eo,setIsMoreActionsActive:el,isPageContextMenuOpen:ei,isUI3:er,shouldAbsolutePositionButton:et}):null,eD=r.createElement(r.Fragment,null,!eN&&!er&&r.createElement(b.B,{className:g()(f?F.Mp:F._J,{[F.Vt]:!1}),svg:D.A}),!et&&eO,eN?r.createElement("span",{className:F.jE,"data-testid":"pageDivider"}):!i&&r.createElement("div",{className:F.Nz},r.createElement("span",{className:e_?F.YW:F.KE},C?`${l} (${a})`:l)),r.createElement("div",{className:F.q8},ex&&r.createElement(G,{pageGuid:a,fallback:r.createElement(j,{isActive:f,isDivider:X,pageType:e,hasMultiplePageTypes:t}),hideBackground:!0}),eP,eI&&r.createElement("span",{className:e_?F.hi:F.VC,dir:"auto"},ew()),eL,!et&&eF));return et?i?r.createElement("div",{className:ek,"data-onboarding-key":es===a?y.$:"",draggable:!1,onContextMenu:ef},eO,r.createElement("div",{className:F.q8},eP,eL)):r.createElement("div",{className:"pages_panel_row--pageRowContainer--oVnTb"},r.createElement("button",{ref:eS,"aria-current":f?"page":void 0,className:ek,"data-onboarding-key":es===a?y.$:"",draggable:!1,onClick:eE,onContextMenu:ef,onDoubleClick:eg,onMouseDown:eb,onMouseMove:ev,onMouseUp:eh,type:"button"},eD),eF):r.createElement("div",{className:ek,"data-onboarding-key":es===a?y.$:"",draggable:!1,onClick:eE,onContextMenu:ef,onDoubleClick:eg,onMouseDown:eb,onMouseMove:ev,onMouseUp:eh},eD)}function G({pageGuid:e,margin:t,fallback:a=null,hideBackground:n=!1}){let o=(0,C.J2)(u.Ez5.currentSceneState().numReadyNodesByPage),l=(0,C.J2)(u.Ez5.currentSceneState().numCompletedNodesByPage),i=(0,I.GS)(),s=o.has(e)?o.get(e)>0:u.glU.nodeStatusesOnPage(e).includes(u.zIx.BUILD),d=l.has(e)?l.get(e)>0:u.glU.nodeStatusesOnPage(e).includes(u.zIx.COMPLETED);return d&&!s&&i?r.createElement(c.g,{className:"pages_panel_row--pageCompleted--gzdWd","data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("dev_handoff.status.completed"),"data-testid":"pageCompletedIndicator"}):s||d?r.createElement(b.B,{className:g()("pages_panel_row--pageReady--XaDiG",{"pages_panel_row--hideBackground--22Ike":n}),svg:B.A,style:t?{[t]:"8px"}:void 0,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("dev_handoff.tag.ready_to_build"),dataTestId:"pageReadyIndicator"}):a}function V({accessibleLabel:e,onContextMenuCallback:t,nodeId:a,isMoreActionsActive:n,isPageContextMenuOpen:o,setIsMoreActionsActive:i,isUI3:s,shouldAbsolutePositionButton:c}){let u=r.useRef(null),_=s?-4:-15,p=s?10:9;return r.useEffect(()=>{o||i(!1)},[o,i]),r.createElement(l.E,{ref:u,"aria-label":e,htmlAttributes:c?void 0:{onDoubleClick:e=>e.stopPropagation()},onClick:e=>{i(!0);let r=u.current?.getBoundingClientRect();r&&t({nodeId:a,e,clientX:r.x+_,clientY:r.y+r.height+p})},className:g()("pages_panel_row--pageMoreActionsButton--5Rty9",{"pages_panel_row--pageMoreActionsButtonActive--2dmC-":n&&o,"pages_panel_row--pageMoreActionsAbsolutePosition--S-xcp":c}),"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.pages_panel.more_pages_actions"),"data-tooltip-show-above":!0},s?r.createElement(d.A,{className:"pages_panel_row--pageMoreActionsIcon--kzZVn"}):r.createElement(m.J,null))}},832608:(e,t,a)=>{a.d(t,{Uz:()=>p,_k:()=>f,oP:()=>_});var r=a(848318),n=a(999667),o=a(857607),l=a(303397),i=a(702038),s=a(859480),c=a(228845),d=a(353956),m=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(m||{});function u(e){return(0,o.Fo)(e)?"individual":e.shiftKey?"range":null}function _(e){return!!u(e)}function p({pagesList:e,isDisabled:t,selectedPageIds:a,startRenaming:n,cancelMultiselect:i,cancelReordering:s}){(0,r.useEffect)(()=>{if(t)return;let r=t=>{let r=(0,c.Pe)(e),d=a.filter(t=>{let a=r[t];return void 0!==a&&!e[a].isDivider}).sort((e,t)=>r[e]-r[t]);if(0!==d.length)switch(t.keyCode){case o.Uz.ESCAPE:i(),s();break;case o.Uz.R:(0,o.Fo)(t)&&(1===d.length?n(d[0]):l.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:d}}))}};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t,e,a,i,s,n])}function f(e){let[t,a]=(0,n.fp)(d.cE),o=(0,s.dh)(),c=(0,r.useCallback)(()=>{a(e=>e.length?[]:e)},[a]),m=(0,r.useCallback)((r,n)=>{let s=u(n);switch(s&&((0,i.tJ)([]),l.Y5.commit()),s){case"individual":return a(t.includes(r)?t.filter(e=>e!==r):0===t.length&&o!==r?[o,r]:[...t,r]),!0;case"range":{let n=0===t.length?o:t[t.length-1],l=e.findIndex(e=>e.nodeId===n),i=e.findIndex(e=>e.nodeId===r),s=Math.min(l,i),c=Math.max(l,i),d=new Set(t),m=e.slice(s,c+1).map(e=>e.nodeId);return d.has(m[0])&&d.has(m[m.length-1])?a(t.filter(e=>!m.includes(e))):a([...t,...m.filter(e=>!d.has(e))]),!0}case null:return c(),!1}},[c,e,o,t,a]);return{selectedPageIds:t,handleMultiselectClick:m,cancelMultiselect:c}}},275205:(e,t,a)=>{a.d(t,{c:()=>E});var r=a(848318),n=a(301168),o=a(186606),l=a(768618),i=a(999667),s=a(996202),c=a(66699),d=a(555637),m=a(806496),u=a(859480),_=a(665411),p=a(730143),f=a(84145),g=a(353956);function E(e){let t=(0,u.dh)(),[a,E]=(0,i.fp)(g.l7),[b,v]=(0,i.fp)(g.oZ),h=(0,p.q5)(),w=(0,n.wA)(),y=(0,u.rE)(),T=(0,n.d4)(e=>e.versionHistory),I=(0,s.am)(),x=(0,f.W)(),N=(0,i.Xr)(d.Yh),C=(0,r.useCallback)(e=>{E(e),o.glU.triggerActionInUserEditScope("track-page-rename",{args:{nodeId:e}})},[E]),k=(0,r.useCallback)(()=>E(null),[E]),S=(0,r.useCallback)(async()=>{if(!a)return;let r=(0,l.UN)().get(a),n=r?.name,i=b||"",s=await (0,u.zO)({openFile:h,pageNode:r,pageName:i});if((0,u.CQ)({openFile:h,pageId:a,newName:i,oldName:n,trackRenamePage:()=>I("page_commit_rename",{nodeId:t,isDivider:s},{forwardToDatadog:!0})}),s&&t===a){let a=e.findIndex(e=>e.nodeId===t),r=a+1,n=e[r];for(;n&&n.isDivider;)r+=1,n=e[r];if(n)(0,m.J)(()=>(0,u.$P)(n.nodeId,t,T,w,(0,_.Fy)(e,n.nodeId)===o.xal.LOADED,I));else{let r=a-1,n=e[r];for(;n&&n.isDivider;)r-=1,n=e[r];n?(0,m.J)(()=>(0,u.$P)(n.nodeId,t,T,w,(0,_.Fy)(e,n.nodeId)===o.xal.LOADED,I)):y(null)}}E(e=>e===a?null:e),x({newTitle:i,nodeType:"PAGE"}),n!==i&&(0,f.d)(i).length>0&&(N(a),(0,c.YQ)({id:"page_name_changed_with_rfd_indicator",properties:{pageId:a}}))},[e,y,a,E,b,h,t,T,I,w,x,N]);return{renamingPageId:a,startRenaming:C,cancelRenaming:k,commitRenaming:S,pendingPageName:b,setPendingPageName:v}}},467601:(e,t,a)=>{a.d(t,{C:()=>s});var r=a(848318),n=a(186606),o=a(320953),l=a(996202),i=a(228845);function s(e){let[t,a]=(0,r.useState)([]),s=(0,r.useRef)(null),[c,d]=(0,r.useState)(null),m=t.length>0,u=(0,l.U)(),_=(0,r.useCallback)(e=>{a(e),d(null),s.current=null},[]),p=(0,r.useCallback)(()=>{a(e=>e.length?[]:e),d(null),s.current=null},[]),f=(0,r.useCallback)((e,a)=>{if(t.includes(e)){d(null);return}let r=a.target;c&&c.dragOverPageId===e&&s.current||(s.current=r.getBoundingClientRect());let n=a.clientY-s.current.top<s.current.height/2?"before":"after";d(t=>t&&t.dragOverPageId===e&&t.insertPosition===n?t:{dragOverPageId:e,insertPosition:n})},[c,t]),g=(0,r.useCallback)(()=>!c||!m||t.includes(c.dragOverPageId)?(p(),!1):(o.l7.user("reorder-pages",()=>{let a=(0,i.Pe)(e);"before"===c.insertPosition?[...t].sort((e,t)=>a[e]-a[t]).forEach(e=>{n.Egt.pageMoveBeforePage(e,c.dragOverPageId)}):[...t].sort((e,t)=>a[t]-a[e]).forEach(e=>{n.Egt.pageMoveAfterPage(e,c.dragOverPageId)})}),p(),u("page_reorder",{reorderedPageIds:t,dragOverPageId:c.dragOverPageId,insertPosition:c.insertPosition},{forwardToDatadog:!0}),!0),[e,m,t,p,c,u]);return{isReordering:m,reorderingPageIds:t,startReordering:_,cancelReordering:p,commitReordering:g,draggingState:c,updateDraggingState:f}}},452988:(e,t,a)=>{a.d(t,{i:()=>M});var r=a(848318),n=a(301168),o=a(559389),l=a(531788),i=a(762217),s=a(62034),c=a(143823),d=a(773511),m=a(582039),u=a(309488),_=a(93275),p=a(892419),f=a(580494),g=a(156974),E=a(720522),b=a(178806),v=a(850426),h=a(967688),w=a(453370),y=a(31898),T=a(43800),I=a(696786),x=a(756192),N=a(280255),C=a(407638),k=a(94831),S=a(17753),R=a(446951),A=a(335744),O=a(748660);let P="team_join_link_permissions--loadedViewWrapper--LjAIr",L="team_join_link_permissions--urlText--jcjRH ellipsis--ellipsis--Tjyfa";var F=a(769773);let D=(0,o.s)((e,t,a)=>e(T.do({teamId:t,level:a}))),M=(0,n.Ng)((e,t)=>({teamJoinLinks:e.teamJoinLinks,loadingState:e.loadingState,canAdminRedux:(0,C.hasAdminRoleAccessOnTeam)(t.teamId,e),canEditRedux:(0,C.hasEditorRoleAccessOnTeam)(t.teamId,e)}),null,(e,t,a)=>({...e,...a,...t}))(function(e){let{dispatch:t,teamId:a,initialInviteLevel:n,teamPermissions:o}=e,[i,s]=(0,r.useState)(n),c=(0,x.S)(a),d="loading"===c.status,m=c.data;(0,r.useEffect)(()=>(D(t,a,n),()=>{t(T.F1(null))}),[t,a,n]);let u=e.teamPermissions.canEdit&&!!e.teamJoinLinks?.url&&e.includeCopyLinkButton,_=r.useCallback(()=>{t(y.$O({type:j,data:{resetLink:()=>{t(T.Nw({teamId:a,level:i,shouldShowVisualBell:!0}))}}}))},[t,a,i]),p=r.useCallback(()=>r.createElement(B,{dropdownShown:e.dropdownShown,resetInviteLinks:_,disableInviteLinks:()=>t(T.ui({teamId:a})),loading:d,canAdmin:o.canAdmin}),[t,e.dropdownShown,d,_,o.canAdmin,a,,]),f=r.useCallback(()=>{m&&t(T.LN({teamId:e.teamId,url:m,source:T.Kq.TEAM_PERMISSIONS_MODAL}))},[t,e.teamId,m]),g=r.useMemo(()=>e.includeCopyLinkButton?r.createElement(l.$n,{onClick:f,disabled:!m},(0,h.tx)("team_join_links.copy_link")):p(),[f,e.includeCopyLinkButton,m,p]);return!d&&!e.teamJoinLinks||!o.canAdmin&&e.teamJoinLinks?.disabled?null:r.createElement(r.Fragment,null,r.createElement("div",{style:u?{justifyContent:"space-between"}:{justifyContent:"flex-start"},className:"team_join_link_permissions--inviteLinkTitleWrapper--LSkbL"},r.createElement("span",{className:"team_join_link_permissions--inviteHeader--80xpy"},(0,h.tx)("team_join_links.invite_link")),u&&p()),"loading"===c.status||e.teamJoinLinks?.url?r.createElement(U,{dropdownShown:e.dropdownShown,getPermissionDescriptionText:e.getPermissionDescriptionText,showDropdownSeparators:e.showDropdownSeparators,setLevel:e=>{i!==e&&(s(e),t(T.do({teamId:a,level:e,shouldShowFailureMessage:!0,callbackOnFailure:()=>s(i)})))},currentLevel:i,url:d?void 0:e.teamJoinLinks?.url,inviteLevels:o.canEdit?[k.e6.VIEWER,k.e6.EDITOR]:[k.e6.VIEWER],teamId:e.teamId,button:g}):r.createElement($,{turnOnInviteLinks:()=>t(T.Nw({teamId:a,level:i}))}))});function B(e){let t=(0,n.wA)(),a="team-link-settings-dropdown",o=r.createRef(),l=()=>e.dropdownShown?.type===a;return r.createElement(i.o,{eventListeners:["onMouseDown"]},r.createElement("div",{ref:o},r.createElement(s.d,{"aria-expanded":l(),disabled:e.loading,"aria-label":(0,h.t)("team_join_links.team_invite_link_settings"),onClick:()=>{let e=o.current?.getBoundingClientRect();l()?t(w.oB()):e&&t(w.j7({type:a,data:{targetRect:e}}))},htmlAttributes:{"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,h.t)("team_join_links.team_invite_link_settings")}},r.createElement(p.P,null))),l()&&r.createElement(A.Cf,{targetRect:e.dropdownShown.data.targetRect,maxWidth:140,minWidth:140,lean:"left",propagateCloseClick:!0},r.createElement(g.c$,{onClick:e.resetInviteLinks},(0,h.tx)("team_join_links.reset_invite_links")),e.canAdmin&&r.createElement(g.c$,{onClick:e.disableInviteLinks},(0,h.tx)("team_join_links.turn_off_invite_links"))))}function U(e){let t=(0,n.wA)(),a="join-link-permission-level-dropdown",o=e.currentLevel===k.e6.VIEWER?"-32px":"-61px",l=(0,I.GS)(),i=r.createElement("div",{className:"team_join_link_permissions--linkAndDropdown--dOdkB"},r.createElement("span",{className:"team_join_link_permissions--urlSection--fh6VF"},!e.url&&r.createElement(c.k,null),e.url&&r.createElement("span",{className:L},e.url)),r.createElement("div",null,r.createElement(d.E,{onClick:r=>{r.stopPropagation(),e.url&&(e.dropdownShown?t(w.oB()):t(w.j7({type:a})))},className:"team_join_link_permissions--permissionLevelDropdown--xuQLz role_row--select--6VpSS"},r.createElement("span",null,(0,N.C1)(e.currentLevel)),r.createElement("div",{className:"team_join_link_permissions--caretWrapper--OXpki role_row--caretWrapper--P1Mak"},r.createElement(E.B,{svg:F.A}))),e.dropdownShown&&e.dropdownShown.type===a&&r.createElement(g.ms,{className:"team_join_link_permissions--permissionLevelDropdownOptions--cgu-T",style:{marginTop:o}},e.inviteLevels.map((t,a)=>r.createElement(g.MM,{key:a,checked:t===e.currentLevel,onClick:()=>e.setLevel(t)},(0,N.C1)(t)))))),s=r.createElement("div",{className:"team_join_link_permissions--linkAndDropdownV2--7DFWL"},r.createElement("div",{className:"team_join_link_permissions--urlSectionV2--YS4eI"},!e.url&&r.createElement(c.k,null),e.url&&r.createElement("span",{className:L},e.url)),r.createElement("div",{className:"team_join_link_permissions--permissionLevelDropdownWrapper--yCu62"},r.createElement(O.b8,{value:e.currentLevel,options:e.inviteLevels,getPermissionName:N.C1,getPermissionDescription:e.getPermissionDescriptionText,showSeparators:e.showDropdownSeparators,onChange:e.setLevel})));return r.createElement("div",{className:P},(0,f.k)().team_permission_modal_styling&&l?s:i,e.button)}function $(e){return r.createElement("div",{className:P},(0,h.tx)("team_join_links.share_a_secret_link_people_can_use_to_join_your_team")," ",r.createElement(v.Ph,{href:"#",onClick:e.turnOnInviteLinks},(0,h.tx)("team_join_links.turn_on_invite_links")))}let j="RESET_LINKS_CONFIRMATION_MODAL";(0,R.Ju)(function(e){let t=(0,n.wA)(),a=m.hS(e);return r.createElement(u.bL,{width:"md",manager:a},r.createElement(_.vo,null,r.createElement(_.Y9,null,r.createElement(_.hE,null,(0,h.tx)("team_join_links.reset_invite_links"))),r.createElement(_.nB,null,(0,h.tx)("team_join_links.modal_description")),r.createElement(_.wi,null,r.createElement(_.jk,null,r.createElement(b.$z,{variant:"secondary",onClick:()=>t(y.Lo())},(0,h.tx)("team_join_links.cancel")),r.createElement(b.$z,{variant:"destructive",onClick:()=>{e.resetLink(),t(y.Lo())}},(0,h.tx)("team_join_links.reset_links"))))))},j)},217172:(e,t,a)=>{a.d(t,{R:()=>v});var r=a(848318),n=a(531788),o=a(536384),l=a.n(o),i=a(989232),s=a(383886),c=a(615233),d=a(656329),m=a(850426),u=a(967688),_=a(957872),p=a(863270);let f="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",g="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",b="mobile_download_prompt_dismissed";function v(e){let{isCompact:t}=e,a=d.aR?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",o=(0,s.UG)(),f=!t&&!!e.renderBlockingPrompt,[v,y]=r.useState(!f),[T,I]=r.useState(!f);r.useEffect(()=>{null===o.get(b)&&(y(!1),I(!1))},[o,f]);let x=()=>{f||(y(!0),(0,i.trackEvent)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{I(!0)},300),o.set(b,!0))};return null!==o.get(b)?null:r.createElement(p.fu,{name:"Mobile Download Prompt"},r.createElement("div",{className:l()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":v,"mobile_download_prompt--overlayAnimateEnd--dBvI0":T}),style:{transitionDuration:"300ms"},onClick:x},r.createElement("div",{className:l()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":v,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":f}),onClick:e=>{e.stopPropagation()}},r.createElement("div",{className:l()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":f})},t?r.createElement(w,null):r.createElement(h,{renderBlockingPrompt:f??!1})),r.createElement("hr",{className:l()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":f})}),r.createElement("div",{className:"mobile_download_prompt--mobilePromptGrid--Mvqf-"},r.createElement("img",{className:E,src:(0,c.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,u.t)("file_browser.mobile_prompt.app_image_alt")}),r.createElement("div",null,r.createElement("h3",{className:g},(0,u.tx)("file_browser.mobile_prompt.app_title")),r.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},f?(0,u.tx)("file_browser.mobile_prompt.app_description_new"):(0,u.tx)("file_browser.mobile_prompt.app_description"))),r.createElement(m.pW,{size:"lg",trackingProperties:{userId:e.userIdForTracking,appLink:a,trackingDescriptor:_.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},width:"fill",href:a},(0,u.tx)("file_browser.mobile_prompt.app_action")),!f&&r.createElement(r.Fragment,null,r.createElement("img",{className:E,src:(0,c.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,u.t)("file_browser.mobile_prompt.browser_image_alt")}),r.createElement("div",null,r.createElement("h3",{className:g},(0,u.tx)("file_browser.mobile_prompt.browser_title"))),r.createElement(n.Pw,{onClick:x,variant:"secondary"},(0,u.tx)("file_browser.mobile_prompt.browser_action")))))))}function h(e){return r.createElement(r.Fragment,null,r.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,c.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,u.t)("file_browser.mobile_prompt.image_alt")}),r.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},r.createElement("h2",{className:f},e.renderBlockingPrompt?(0,u.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,u.tx)("file_browser.mobile_prompt.modal_title")),r.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,u.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,u.tx)("file_browser.mobile_prompt.modal_body"))))}function w(){return r.createElement(r.Fragment,null,r.createElement("h2",{className:f},(0,u.tx)("file_browser.mobile_prompt.modal_title_compact")))}},305755:(e,t,a)=>{a.d(t,{h:()=>l});var r=a(749214),n=a(848318),o=a(58153);let l=(0,n.memo)(function(e){return(0,o.O)()?(0,r.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 5h-2V4h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2h-2zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3-6h-2v3h2zm-2-1a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9h-2V8h2zm1 0a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11 5H9V4h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1zm-8 5h2v2H4zm-1 0a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1zm3-6H4v3h2zM4 3a1 1 0 0 0-1 1v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1zm7 9H9V8h2zm1 0a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1z",clipRule:"evenodd"})})})},235456:(e,t,a)=>{a.d(t,{U:()=>n});var r=a(749214);let n=(0,a(848318).memo)(function(e){return(0,r.jsx)("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0m3 5a1 1 0 1 1 2 0v2.5a.5.5 0 0 0 1 0V10a2 2 0 1 0-4 0v2.5a.5.5 0 0 0 1 0zM5 9a1 1 0 0 0-1 1v2.5a.5.5 0 0 1-1 0V10a2 2 0 1 1 4 0v2.5a.5.5 0 0 1-1 0V10a1 1 0 0 0-1-1m7-4a1 1 0 1 1-2 0 1 1 0 0 1 2 0m1 0a2 2 0 1 1-4 0 2 2 0 0 1 4 0",clipRule:"evenodd"})})})},105500:(e,t,a)=>{a.d(t,{L:()=>l});var r=a(749214),n=a(848318),o=a(58153);let l=(0,n.memo)(function(e){return(0,o.O)()?(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M20 12a8 8 0 1 1-16 0 8 8 0 0 1 16 0m1 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0m-5.146-.354-3.5-3.5a.5.5 0 0 0-.708 0l-3.5 3.5a.5.5 0 0 0 .708.708L11.5 9.707V15.5a.5.5 0 0 0 1 0V9.707l2.646 2.647a.5.5 0 0 0 .708-.708",clipRule:"evenodd"})}):(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M19 11.5a7.5 7.5 0 1 1-15 0 7.5 7.5 0 0 1 15 0m1 0a8.5 8.5 0 1 1-17 0 8.5 8.5 0 0 1 17 0m-5.146-.354-3-3a.5.5 0 0 0-.708 0l-3 3a.5.5 0 0 0 .708.708L11 9.707V14.5a.5.5 0 0 0 1 0V9.707l2.146 2.147a.5.5 0 0 0 .708-.708",clipRule:"evenodd"})})})},790840:(e,t,a)=>{a.d(t,{o:()=>n});var r=a(749214);let n=(0,a(848318).memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M2.5 9.495a1 1 0 0 1 .62-.925l8.119-3.343a2 2 0 0 1 1.522 0l8.12 3.343a1 1 0 0 1 0 1.85l-.881.362V15.5a.5.5 0 0 1-1 0v-4.306l-1 .412V16c0 .64-.328 1.148-.706 1.505-.375.355-.865.629-1.387.838-1.05.42-2.432.657-3.907.657s-2.857-.237-3.907-.657c-.522-.21-1.012-.483-1.387-.838C6.328 17.148 6 16.64 6 16v-4.394l-2.88-1.187a1 1 0 0 1-.62-.924M7 12.017V16c0 1.105 2.239 2 5 2s5-.895 5-2v-3.983l-4.238 1.746a2 2 0 0 1-1.524 0zM3.5 9.495l1.313.54 6.806 2.803a1 1 0 0 0 .762 0l6.806-2.803 1.313-.54-1.313-.541-6.806-2.803a1 1 0 0 0-.762 0L4.813 8.954z",clipRule:"evenodd"})})})},817502:(e,t,a)=>{a.d(t,{K:()=>l});var r=a(749214),n=a(848318),o=a(58153);let l=(0,n.memo)(function(e){return(0,o.O)()?(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 7.5V7a2 2 0 1 0-2 2h2zm.724-1.76A3 3 0 1 0 7.264 9H5.5A1.5 1.5 0 0 0 4 10.5v1a1.5 1.5 0 0 0 1 1.415v5.586A1.5 1.5 0 0 0 6.5 20h11a1.5 1.5 0 0 0 1.5-1.5v-5.586a1.5 1.5 0 0 0 1-1.414v-1A1.5 1.5 0 0 0 18.5 9H16a2.5 2.5 0 0 0-3.776-3.26M12.5 7.5V9H14a1.5 1.5 0 1 0-1.5-1.5M6 13v5.5a.5.5 0 0 0 .5.5h5v-6zm6.5 0v6h5a.5.5 0 0 0 .5-.5V13zm0-1v-2h6a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5zm-1-2v2h-6a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z",clipRule:"evenodd"})}):(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11 7.5V7a2 2 0 1 0-2 2h2zm.724-1.76A3 3 0 1 0 6.764 9H5.5A1.5 1.5 0 0 0 4 10.5v1a1.5 1.5 0 0 0 1 1.415v5.586A1.5 1.5 0 0 0 6.5 20h10a1.5 1.5 0 0 0 1.5-1.5v-5.586a1.5 1.5 0 0 0 1-1.414v-1A1.5 1.5 0 0 0 17.5 9h-2a2.5 2.5 0 0 0-3.776-3.26M12 7.5V9h1.5A1.5 1.5 0 1 0 12 7.5M6 13v5.5a.5.5 0 0 0 .5.5H11v-6zm6 0v6h4.5a.5.5 0 0 0 .5-.5V13zm0-1v-2h5.5a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5zm-1-2v2H5.5a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5z",clipRule:"evenodd"})})})},266004:(e,t,a)=>{a.d(t,{M:()=>n});var r=a(749214);let n=(0,a(848318).memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",d:"M17.86 9.675c.256-.256.688-.176.8.169a7 7 0 0 1-8.816 8.816c-.345-.112-.425-.544-.17-.8a.55.55 0 0 1 .55-.128 6 6 0 0 0 7.509-7.509.55.55 0 0 1 .126-.548m-.713-3.529a.5.5 0 1 1 .707.708l-11 11a.5.5 0 1 1-.708-.707zM12 5c.752 0 1.476.119 2.155.339.345.112.425.544.17.8a.55.55 0 0 1-.55.129 6 6 0 0 0-7.508 7.508.55.55 0 0 1-.127.548c-.256.256-.69.176-.801-.169A7 7 0 0 1 12 5"})})})},969604:(e,t,a)=>{a.d(t,{F:()=>n});var r=a(749214);let n=(0,a(848318).memo)(function(e){return(0,r.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,r.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m13.762 8.636.036.076a.55.55 0 0 0 .474.288c.325 0 .569-.299.464-.606a5 5 0 0 0-2.76-2.988 5 5 0 1 0-3.582 9.33c.307.105.606-.14.606-.464a.55.55 0 0 0-.364-.51l-.016-.006A4 4 0 0 1 6.428 11.8a4 4 0 1 1 7.328-3.181zM11.5 11h6a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-.5.5h-6a.5.5 0 0 1-.5-.5v-6a.5.5 0 0 1 .5-.5m-1.5.5a1.5 1.5 0 0 1 1.5-1.5h6a1.5 1.5 0 0 1 1.5 1.5v6a1.5 1.5 0 0 1-1.5 1.5h-6a1.5 1.5 0 0 1-1.5-1.5z",clipRule:"evenodd"})})})}}]);

//# debugId=4e62eb23-e83c-5575-b877-9b162000f4b2

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/47f2eec39f3168ab83f466d45d4dedc0c87b4f9c/0c62c2fd-c846fc114b326b1a.min.js.map